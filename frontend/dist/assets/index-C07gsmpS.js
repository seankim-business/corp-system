var tR=Object.defineProperty;var xN=e=>{throw TypeError(e)};var rR=(e,t,n)=>t in e?tR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var gu=(e,t,n)=>rR(e,typeof t!="symbol"?t+"":t,n),Dp=(e,t,n)=>t.has(e)||xN("Cannot "+n);var J=(e,t,n)=>(Dp(e,t,"read from private field"),n?n.call(e):t.get(e)),Pe=(e,t,n)=>t.has(e)?xN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ye=(e,t,n,a)=>(Dp(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n),Be=(e,t,n)=>(Dp(e,t,"access private method"),n);var yu=(e,t,n,a)=>({set _(s){ye(e,t,s,n)},get _(){return J(e,t,a)}});function nR(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ze(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fp={exports:{}},Tl={},qp={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gN;function aR(){if(gN)return Ue;gN=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function g(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function x(q,K,Y){this.props=q,this.context=K,this.refs=w,this.updater=Y||j}x.prototype.isReactComponent={},x.prototype.setState=function(q,K){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,K,"setState")},x.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function S(){}S.prototype=x.prototype;function P(q,K,Y){this.props=q,this.context=K,this.refs=w,this.updater=Y||j}var O=P.prototype=new S;O.constructor=P,v(O,x.prototype),O.isPureReactComponent=!0;var N=Array.isArray,A=Object.prototype.hasOwnProperty,C={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(q,K,Y){var W,ue={},he=null,oe=null;if(K!=null)for(W in K.ref!==void 0&&(oe=K.ref),K.key!==void 0&&(he=""+K.key),K)A.call(K,W)&&!E.hasOwnProperty(W)&&(ue[W]=K[W]);var te=arguments.length-2;if(te===1)ue.children=Y;else if(1<te){for(var le=Array(te),ke=0;ke<te;ke++)le[ke]=arguments[ke+2];ue.children=le}if(q&&q.defaultProps)for(W in te=q.defaultProps,te)ue[W]===void 0&&(ue[W]=te[W]);return{$$typeof:e,type:q,key:he,ref:oe,props:ue,_owner:C.current}}function R(q,K){return{$$typeof:e,type:q.type,key:K,ref:q.ref,props:q.props,_owner:q._owner}}function I(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function M(q){var K={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Y){return K[Y]})}var $=/\/+/g;function G(q,K){return typeof q=="object"&&q!==null&&q.key!=null?M(""+q.key):K.toString(36)}function V(q,K,Y,W,ue){var he=typeof q;(he==="undefined"||he==="boolean")&&(q=null);var oe=!1;if(q===null)oe=!0;else switch(he){case"string":case"number":oe=!0;break;case"object":switch(q.$$typeof){case e:case t:oe=!0}}if(oe)return oe=q,ue=ue(oe),q=W===""?"."+G(oe,0):W,N(ue)?(Y="",q!=null&&(Y=q.replace($,"$&/")+"/"),V(ue,K,Y,"",function(ke){return ke})):ue!=null&&(I(ue)&&(ue=R(ue,Y+(!ue.key||oe&&oe.key===ue.key?"":(""+ue.key).replace($,"$&/")+"/")+q)),K.push(ue)),1;if(oe=0,W=W===""?".":W+":",N(q))for(var te=0;te<q.length;te++){he=q[te];var le=W+G(he,te);oe+=V(he,K,Y,le,ue)}else if(le=g(q),typeof le=="function")for(q=le.call(q),te=0;!(he=q.next()).done;)he=he.value,le=W+G(he,te++),oe+=V(he,K,Y,le,ue);else if(he==="object")throw K=String(q),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return oe}function z(q,K,Y){if(q==null)return q;var W=[],ue=0;return V(q,W,"","",function(he){return K.call(Y,he,ue++)}),W}function U(q){if(q._status===-1){var K=q._result;K=K(),K.then(function(Y){(q._status===0||q._status===-1)&&(q._status=1,q._result=Y)},function(Y){(q._status===0||q._status===-1)&&(q._status=2,q._result=Y)}),q._status===-1&&(q._status=0,q._result=K)}if(q._status===1)return q._result.default;throw q._result}var H={current:null},B={transition:null},D={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:B,ReactCurrentOwner:C};function L(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:z,forEach:function(q,K,Y){z(q,function(){K.apply(this,arguments)},Y)},count:function(q){var K=0;return z(q,function(){K++}),K},toArray:function(q){return z(q,function(K){return K})||[]},only:function(q){if(!I(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Ue.Component=x,Ue.Fragment=n,Ue.Profiler=s,Ue.PureComponent=P,Ue.StrictMode=a,Ue.Suspense=u,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,Ue.act=L,Ue.cloneElement=function(q,K,Y){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var W=v({},q.props),ue=q.key,he=q.ref,oe=q._owner;if(K!=null){if(K.ref!==void 0&&(he=K.ref,oe=C.current),K.key!==void 0&&(ue=""+K.key),q.type&&q.type.defaultProps)var te=q.type.defaultProps;for(le in K)A.call(K,le)&&!E.hasOwnProperty(le)&&(W[le]=K[le]===void 0&&te!==void 0?te[le]:K[le])}var le=arguments.length-2;if(le===1)W.children=Y;else if(1<le){te=Array(le);for(var ke=0;ke<le;ke++)te[ke]=arguments[ke+2];W.children=te}return{$$typeof:e,type:q.type,key:ue,ref:he,props:W,_owner:oe}},Ue.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:i,_context:q},q.Consumer=q},Ue.createElement=T,Ue.createFactory=function(q){var K=T.bind(null,q);return K.type=q,K},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(q){return{$$typeof:d,render:q}},Ue.isValidElement=I,Ue.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:U}},Ue.memo=function(q,K){return{$$typeof:h,type:q,compare:K===void 0?null:K}},Ue.startTransition=function(q){var K=B.transition;B.transition={};try{q()}finally{B.transition=K}},Ue.unstable_act=L,Ue.useCallback=function(q,K){return H.current.useCallback(q,K)},Ue.useContext=function(q){return H.current.useContext(q)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(q){return H.current.useDeferredValue(q)},Ue.useEffect=function(q,K){return H.current.useEffect(q,K)},Ue.useId=function(){return H.current.useId()},Ue.useImperativeHandle=function(q,K,Y){return H.current.useImperativeHandle(q,K,Y)},Ue.useInsertionEffect=function(q,K){return H.current.useInsertionEffect(q,K)},Ue.useLayoutEffect=function(q,K){return H.current.useLayoutEffect(q,K)},Ue.useMemo=function(q,K){return H.current.useMemo(q,K)},Ue.useReducer=function(q,K,Y){return H.current.useReducer(q,K,Y)},Ue.useRef=function(q){return H.current.useRef(q)},Ue.useState=function(q){return H.current.useState(q)},Ue.useSyncExternalStore=function(q,K,Y){return H.current.useSyncExternalStore(q,K,Y)},Ue.useTransition=function(){return H.current.useTransition()},Ue.version="18.3.1",Ue}var yN;function tj(){return yN||(yN=1,qp.exports=aR()),qp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vN;function sR(){if(vN)return Tl;vN=1;var e=tj(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,h){var p,m={},g=null,j=null;h!==void 0&&(g=""+h),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(j=u.ref);for(p in u)a.call(u,p)&&!i.hasOwnProperty(p)&&(m[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)m[p]===void 0&&(m[p]=u[p]);return{$$typeof:t,type:d,key:g,ref:j,props:m,_owner:s.current}}return Tl.Fragment=n,Tl.jsx=l,Tl.jsxs=l,Tl}var bN;function iR(){return bN||(bN=1,Fp.exports=sR()),Fp.exports}var r=iR(),b=tj();const X=Ze(b),oR=nR({__proto__:null,default:X},[b]);var bu={},zp={exports:{}},yr={},Bp={exports:{}},Up={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN;function lR(){return jN||(jN=1,(function(e){function t(B,D){var L=B.length;B.push(D);e:for(;0<L;){var q=L-1>>>1,K=B[q];if(0<s(K,D))B[q]=D,B[L]=K,L=q;else break e}}function n(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var D=B[0],L=B.pop();if(L!==D){B[0]=L;e:for(var q=0,K=B.length,Y=K>>>1;q<Y;){var W=2*(q+1)-1,ue=B[W],he=W+1,oe=B[he];if(0>s(ue,L))he<K&&0>s(oe,ue)?(B[q]=oe,B[he]=L,q=he):(B[q]=ue,B[W]=L,q=W);else if(he<K&&0>s(oe,L))B[q]=oe,B[he]=L,q=he;else break e}}return D}function s(B,D){var L=B.sortIndex-D.sortIndex;return L!==0?L:B.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var u=[],h=[],p=1,m=null,g=3,j=!1,v=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(B){for(var D=n(h);D!==null;){if(D.callback===null)a(h);else if(D.startTime<=B)a(h),D.sortIndex=D.expirationTime,t(u,D);else break;D=n(h)}}function N(B){if(w=!1,O(B),!v)if(n(u)!==null)v=!0,U(A);else{var D=n(h);D!==null&&H(N,D.startTime-B)}}function A(B,D){v=!1,w&&(w=!1,S(T),T=-1),j=!0;var L=g;try{for(O(D),m=n(u);m!==null&&(!(m.expirationTime>D)||B&&!M());){var q=m.callback;if(typeof q=="function"){m.callback=null,g=m.priorityLevel;var K=q(m.expirationTime<=D);D=e.unstable_now(),typeof K=="function"?m.callback=K:m===n(u)&&a(u),O(D)}else a(u);m=n(u)}if(m!==null)var Y=!0;else{var W=n(h);W!==null&&H(N,W.startTime-D),Y=!1}return Y}finally{m=null,g=L,j=!1}}var C=!1,E=null,T=-1,R=5,I=-1;function M(){return!(e.unstable_now()-I<R)}function $(){if(E!==null){var B=e.unstable_now();I=B;var D=!0;try{D=E(!0,B)}finally{D?G():(C=!1,E=null)}}else C=!1}var G;if(typeof P=="function")G=function(){P($)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,z=V.port2;V.port1.onmessage=$,G=function(){z.postMessage(null)}}else G=function(){x($,0)};function U(B){E=B,C||(C=!0,G())}function H(B,D){T=x(function(){B(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){v||j||(v=!0,U(A))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(B){switch(g){case 1:case 2:case 3:var D=3;break;default:D=g}var L=g;g=D;try{return B()}finally{g=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,D){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var L=g;g=B;try{return D()}finally{g=L}},e.unstable_scheduleCallback=function(B,D,L){var q=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?q+L:q):L=q,B){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=L+K,B={id:p++,callback:D,priorityLevel:B,startTime:L,expirationTime:K,sortIndex:-1},L>q?(B.sortIndex=L,t(h,B),n(u)===null&&B===n(h)&&(w?(S(T),T=-1):w=!0,H(N,L-q))):(B.sortIndex=K,t(u,B),v||j||(v=!0,U(A))),B},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(B){var D=g;return function(){var L=g;g=D;try{return B.apply(this,arguments)}finally{g=L}}}})(Up)),Up}var wN;function cR(){return wN||(wN=1,Bp.exports=lR()),Bp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function dR(){if(NN)return yr;NN=1;var e=tj(),t=cR();function n(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)a.add(c[o])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function g(o){return u.call(m,o)?!0:u.call(p,o)?!1:h.test(o)?m[o]=!0:(p[o]=!0,!1)}function j(o,c,f,y){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function v(o,c,f,y){if(c===null||typeof c>"u"||j(o,c,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(o,c,f,y,k,_,F){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=k,this.mustUseProperty=f,this.propertyName=o,this.type=c,this.sanitizeURL=_,this.removeEmptyString=F}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){x[o]=new w(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];x[c]=new w(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){x[o]=new w(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){x[o]=new w(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){x[o]=new w(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){x[o]=new w(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){x[o]=new w(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){x[o]=new w(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){x[o]=new w(o,5,!1,o.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function P(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(S,P);x[c]=new w(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(S,P);x[c]=new w(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(S,P);x[c]=new w(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){x[o]=new w(o,1,!1,o.toLowerCase(),null,!1,!1)}),x.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){x[o]=new w(o,1,!1,o.toLowerCase(),null,!0,!0)});function O(o,c,f,y){var k=x.hasOwnProperty(c)?x[c]:null;(k!==null?k.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(v(c,f,k,y)&&(f=null),y||k===null?g(c)&&(f===null?o.removeAttribute(c):o.setAttribute(c,""+f)):k.mustUseProperty?o[k.propertyName]=f===null?k.type===3?!1:"":f:(c=k.attributeName,y=k.attributeNamespace,f===null?o.removeAttribute(c):(k=k.type,f=k===3||k===4&&f===!0?"":""+f,y?o.setAttributeNS(y,c,f):o.setAttribute(c,f))))}var N=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),M=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),B=Symbol.iterator;function D(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var L=Object.assign,q;function K(o){if(q===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);q=c&&c[1]||""}return`
`+q+o}var Y=!1;function W(o,c){if(!o||Y)return"";Y=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ie){var y=ie}Reflect.construct(o,[],c)}else{try{c.call()}catch(ie){y=ie}o.call(c.prototype)}else{try{throw Error()}catch(ie){y=ie}o()}}catch(ie){if(ie&&y&&typeof ie.stack=="string"){for(var k=ie.stack.split(`
`),_=y.stack.split(`
`),F=k.length-1,Q=_.length-1;1<=F&&0<=Q&&k[F]!==_[Q];)Q--;for(;1<=F&&0<=Q;F--,Q--)if(k[F]!==_[Q]){if(F!==1||Q!==1)do if(F--,Q--,0>Q||k[F]!==_[Q]){var Z=`
`+k[F].replace(" at new "," at ");return o.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",o.displayName)),Z}while(1<=F&&0<=Q);break}}}finally{Y=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?K(o):""}function ue(o){switch(o.tag){case 5:return K(o.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return o=W(o.type,!1),o;case 11:return o=W(o.type.render,!1),o;case 1:return o=W(o.type,!0),o;default:return""}}function he(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case E:return"Fragment";case C:return"Portal";case R:return"Profiler";case T:return"StrictMode";case G:return"Suspense";case V:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case M:return(o.displayName||"Context")+".Consumer";case I:return(o._context.displayName||"Context")+".Provider";case $:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case z:return c=o.displayName||null,c!==null?c:he(o.type)||"Memo";case U:c=o._payload,o=o._init;try{return he(o(c))}catch{}}return null}function oe(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(c);case 8:return c===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function te(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function le(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ke(o){var c=le(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var k=f.get,_=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return k.call(this)},set:function(F){y=""+F,_.call(this,F)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(F){y=""+F},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function $e(o){o._valueTracker||(o._valueTracker=ke(o))}function re(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),y="";return o&&(y=le(o)?o.checked?"true":"false":o.value),o=y,o!==f?(c.setValue(o),!0):!1}function be(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function je(o,c){var f=c.checked;return L({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function tt(o,c){var f=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;f=te(c.value!=null?c.value:f),o._wrapperState={initialChecked:y,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function yt(o,c){c=c.checked,c!=null&&O(o,"checked",c,!1)}function qt(o,c){yt(o,c);var f=te(c.value),y=c.type;if(f!=null)y==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?yn(o,c.type,f):c.hasOwnProperty("defaultValue")&&yn(o,c.type,te(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Zr(o,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,f||c===o.value||(o.value=c),o.defaultValue=c}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function yn(o,c,f){(c!=="number"||be(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var vn=Array.isArray;function hr(o,c,f,y){if(o=o.options,c){c={};for(var k=0;k<f.length;k++)c["$"+f[k]]=!0;for(f=0;f<o.length;f++)k=c.hasOwnProperty("$"+o[f].value),o[f].selected!==k&&(o[f].selected=k),k&&y&&(o[f].defaultSelected=!0)}else{for(f=""+te(f),c=null,k=0;k<o.length;k++){if(o[k].value===f){o[k].selected=!0,y&&(o[k].defaultSelected=!0);return}c!==null||o[k].disabled||(c=o[k])}c!==null&&(c.selected=!0)}}function en(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return L({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function si(o,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(n(92));if(vn(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),f=c}o._wrapperState={initialValue:te(f)}}function Ko(o,c){var f=te(c.value),y=te(c.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),c.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),y!=null&&(o.defaultValue=""+y)}function Go(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Ow(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qf(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Ow(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var cd,Ew=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,y,k){MSApp.execUnsafeLocalFunction(function(){return o(c,f,y,k)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(cd=cd||document.createElement("div"),cd.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=cd.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function Vo(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sT=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(o){sT.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Qo[c]=Qo[o]})});function _w(o,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||Qo.hasOwnProperty(o)&&Qo[o]?(""+c).trim():c+"px"}function Tw(o,c){o=o.style;for(var f in c)if(c.hasOwnProperty(f)){var y=f.indexOf("--")===0,k=_w(f,c[f],y);f==="float"&&(f="cssFloat"),y?o.setProperty(f,k):o[f]=k}}var iT=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yf(o,c){if(c){if(iT[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Xf(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jf=null;function Zf(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var em=null,ii=null,oi=null;function Rw(o){if(o=gl(o)){if(typeof em!="function")throw Error(n(280));var c=o.stateNode;c&&(c=Td(c),em(o.stateNode,o.type,c))}}function Mw(o){ii?oi?oi.push(o):oi=[o]:ii=o}function Iw(){if(ii){var o=ii,c=oi;if(oi=ii=null,Rw(o),c)for(o=0;o<c.length;o++)Rw(c[o])}}function $w(o,c){return o(c)}function Lw(){}var tm=!1;function Dw(o,c,f){if(tm)return o(c,f);tm=!0;try{return $w(o,c,f)}finally{tm=!1,(ii!==null||oi!==null)&&(Lw(),Iw())}}function Yo(o,c){var f=o.stateNode;if(f===null)return null;var y=Td(f);if(y===null)return null;f=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var rm=!1;if(d)try{var Xo={};Object.defineProperty(Xo,"passive",{get:function(){rm=!0}}),window.addEventListener("test",Xo,Xo),window.removeEventListener("test",Xo,Xo)}catch{rm=!1}function oT(o,c,f,y,k,_,F,Q,Z){var ie=Array.prototype.slice.call(arguments,3);try{c.apply(f,ie)}catch(me){this.onError(me)}}var Jo=!1,dd=null,ud=!1,nm=null,lT={onError:function(o){Jo=!0,dd=o}};function cT(o,c,f,y,k,_,F,Q,Z){Jo=!1,dd=null,oT.apply(lT,arguments)}function dT(o,c,f,y,k,_,F,Q,Z){if(cT.apply(this,arguments),Jo){if(Jo){var ie=dd;Jo=!1,dd=null}else throw Error(n(198));ud||(ud=!0,nm=ie)}}function os(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function Fw(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function qw(o){if(os(o)!==o)throw Error(n(188))}function uT(o){var c=o.alternate;if(!c){if(c=os(o),c===null)throw Error(n(188));return c!==o?null:o}for(var f=o,y=c;;){var k=f.return;if(k===null)break;var _=k.alternate;if(_===null){if(y=k.return,y!==null){f=y;continue}break}if(k.child===_.child){for(_=k.child;_;){if(_===f)return qw(k),o;if(_===y)return qw(k),c;_=_.sibling}throw Error(n(188))}if(f.return!==y.return)f=k,y=_;else{for(var F=!1,Q=k.child;Q;){if(Q===f){F=!0,f=k,y=_;break}if(Q===y){F=!0,y=k,f=_;break}Q=Q.sibling}if(!F){for(Q=_.child;Q;){if(Q===f){F=!0,f=_,y=k;break}if(Q===y){F=!0,y=_,f=k;break}Q=Q.sibling}if(!F)throw Error(n(189))}}if(f.alternate!==y)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:c}function zw(o){return o=uT(o),o!==null?Bw(o):null}function Bw(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Bw(o);if(c!==null)return c;o=o.sibling}return null}var Uw=t.unstable_scheduleCallback,Ww=t.unstable_cancelCallback,hT=t.unstable_shouldYield,fT=t.unstable_requestPaint,St=t.unstable_now,mT=t.unstable_getCurrentPriorityLevel,am=t.unstable_ImmediatePriority,Hw=t.unstable_UserBlockingPriority,hd=t.unstable_NormalPriority,pT=t.unstable_LowPriority,Kw=t.unstable_IdlePriority,fd=null,bn=null;function xT(o){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(fd,o,void 0,(o.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:vT,gT=Math.log,yT=Math.LN2;function vT(o){return o>>>=0,o===0?32:31-(gT(o)/yT|0)|0}var md=64,pd=4194304;function Zo(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function xd(o,c){var f=o.pendingLanes;if(f===0)return 0;var y=0,k=o.suspendedLanes,_=o.pingedLanes,F=f&268435455;if(F!==0){var Q=F&~k;Q!==0?y=Zo(Q):(_&=F,_!==0&&(y=Zo(_)))}else F=f&~k,F!==0?y=Zo(F):_!==0&&(y=Zo(_));if(y===0)return 0;if(c!==0&&c!==y&&(c&k)===0&&(k=y&-y,_=c&-c,k>=_||k===16&&(_&4194240)!==0))return c;if((y&4)!==0&&(y|=f&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=y;0<c;)f=31-tn(c),k=1<<f,y|=o[f],c&=~k;return y}function bT(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jT(o,c){for(var f=o.suspendedLanes,y=o.pingedLanes,k=o.expirationTimes,_=o.pendingLanes;0<_;){var F=31-tn(_),Q=1<<F,Z=k[F];Z===-1?((Q&f)===0||(Q&y)!==0)&&(k[F]=bT(Q,c)):Z<=c&&(o.expiredLanes|=Q),_&=~Q}}function sm(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Gw(){var o=md;return md<<=1,(md&4194240)===0&&(md=64),o}function im(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function el(o,c,f){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-tn(c),o[c]=f}function wT(o,c){var f=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<f;){var k=31-tn(f),_=1<<k;c[k]=0,y[k]=-1,o[k]=-1,f&=~_}}function om(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var y=31-tn(f),k=1<<y;k&c|o[y]&c&&(o[y]|=c),f&=~k}}var et=0;function Vw(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Qw,lm,Yw,Xw,Jw,cm=!1,gd=[],ma=null,pa=null,xa=null,tl=new Map,rl=new Map,ga=[],NT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zw(o,c){switch(o){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":tl.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(c.pointerId)}}function nl(o,c,f,y,k,_){return o===null||o.nativeEvent!==_?(o={blockedOn:c,domEventName:f,eventSystemFlags:y,nativeEvent:_,targetContainers:[k]},c!==null&&(c=gl(c),c!==null&&lm(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),o)}function ST(o,c,f,y,k){switch(c){case"focusin":return ma=nl(ma,o,c,f,y,k),!0;case"dragenter":return pa=nl(pa,o,c,f,y,k),!0;case"mouseover":return xa=nl(xa,o,c,f,y,k),!0;case"pointerover":var _=k.pointerId;return tl.set(_,nl(tl.get(_)||null,o,c,f,y,k)),!0;case"gotpointercapture":return _=k.pointerId,rl.set(_,nl(rl.get(_)||null,o,c,f,y,k)),!0}return!1}function e1(o){var c=ls(o.target);if(c!==null){var f=os(c);if(f!==null){if(c=f.tag,c===13){if(c=Fw(f),c!==null){o.blockedOn=c,Jw(o.priority,function(){Yw(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function yd(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=um(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var y=new f.constructor(f.type,f);Jf=y,f.target.dispatchEvent(y),Jf=null}else return c=gl(f),c!==null&&lm(c),o.blockedOn=f,!1;c.shift()}return!0}function t1(o,c,f){yd(o)&&f.delete(c)}function kT(){cm=!1,ma!==null&&yd(ma)&&(ma=null),pa!==null&&yd(pa)&&(pa=null),xa!==null&&yd(xa)&&(xa=null),tl.forEach(t1),rl.forEach(t1)}function al(o,c){o.blockedOn===c&&(o.blockedOn=null,cm||(cm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kT)))}function sl(o){function c(k){return al(k,o)}if(0<gd.length){al(gd[0],o);for(var f=1;f<gd.length;f++){var y=gd[f];y.blockedOn===o&&(y.blockedOn=null)}}for(ma!==null&&al(ma,o),pa!==null&&al(pa,o),xa!==null&&al(xa,o),tl.forEach(c),rl.forEach(c),f=0;f<ga.length;f++)y=ga[f],y.blockedOn===o&&(y.blockedOn=null);for(;0<ga.length&&(f=ga[0],f.blockedOn===null);)e1(f),f.blockedOn===null&&ga.shift()}var li=N.ReactCurrentBatchConfig,vd=!0;function CT(o,c,f,y){var k=et,_=li.transition;li.transition=null;try{et=1,dm(o,c,f,y)}finally{et=k,li.transition=_}}function AT(o,c,f,y){var k=et,_=li.transition;li.transition=null;try{et=4,dm(o,c,f,y)}finally{et=k,li.transition=_}}function dm(o,c,f,y){if(vd){var k=um(o,c,f,y);if(k===null)Pm(o,c,y,bd,f),Zw(o,y);else if(ST(k,o,c,f,y))y.stopPropagation();else if(Zw(o,y),c&4&&-1<NT.indexOf(o)){for(;k!==null;){var _=gl(k);if(_!==null&&Qw(_),_=um(o,c,f,y),_===null&&Pm(o,c,y,bd,f),_===k)break;k=_}k!==null&&y.stopPropagation()}else Pm(o,c,y,null,f)}}var bd=null;function um(o,c,f,y){if(bd=null,o=Zf(y),o=ls(o),o!==null)if(c=os(o),c===null)o=null;else if(f=c.tag,f===13){if(o=Fw(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return bd=o,null}function r1(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mT()){case am:return 1;case Hw:return 4;case hd:case pT:return 16;case Kw:return 536870912;default:return 16}default:return 16}}var ya=null,hm=null,jd=null;function n1(){if(jd)return jd;var o,c=hm,f=c.length,y,k="value"in ya?ya.value:ya.textContent,_=k.length;for(o=0;o<f&&c[o]===k[o];o++);var F=f-o;for(y=1;y<=F&&c[f-y]===k[_-y];y++);return jd=k.slice(o,1<y?1-y:void 0)}function wd(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Nd(){return!0}function a1(){return!1}function kr(o){function c(f,y,k,_,F){this._reactName=f,this._targetInst=k,this.type=y,this.nativeEvent=_,this.target=F,this.currentTarget=null;for(var Q in o)o.hasOwnProperty(Q)&&(f=o[Q],this[Q]=f?f(_):_[Q]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Nd:a1,this.isPropagationStopped=a1,this}return L(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Nd)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Nd)},persist:function(){},isPersistent:Nd}),c}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fm=kr(ci),il=L({},ci,{view:0,detail:0}),PT=kr(il),mm,pm,ol,Sd=L({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gm,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ol&&(ol&&o.type==="mousemove"?(mm=o.screenX-ol.screenX,pm=o.screenY-ol.screenY):pm=mm=0,ol=o),mm)},movementY:function(o){return"movementY"in o?o.movementY:pm}}),s1=kr(Sd),OT=L({},Sd,{dataTransfer:0}),ET=kr(OT),_T=L({},il,{relatedTarget:0}),xm=kr(_T),TT=L({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),RT=kr(TT),MT=L({},ci,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),IT=kr(MT),$T=L({},ci,{data:0}),i1=kr($T),LT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qT(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=FT[o])?!!c[o]:!1}function gm(){return qT}var zT=L({},il,{key:function(o){if(o.key){var c=LT[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=wd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?DT[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gm,charCode:function(o){return o.type==="keypress"?wd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?wd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),BT=kr(zT),UT=L({},Sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o1=kr(UT),WT=L({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gm}),HT=kr(WT),KT=L({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),GT=kr(KT),VT=L({},Sd,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),QT=kr(VT),YT=[9,13,27,32],ym=d&&"CompositionEvent"in window,ll=null;d&&"documentMode"in document&&(ll=document.documentMode);var XT=d&&"TextEvent"in window&&!ll,l1=d&&(!ym||ll&&8<ll&&11>=ll),c1=" ",d1=!1;function u1(o,c){switch(o){case"keyup":return YT.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h1(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var di=!1;function JT(o,c){switch(o){case"compositionend":return h1(c);case"keypress":return c.which!==32?null:(d1=!0,c1);case"textInput":return o=c.data,o===c1&&d1?null:o;default:return null}}function ZT(o,c){if(di)return o==="compositionend"||!ym&&u1(o,c)?(o=n1(),jd=hm=ya=null,di=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return l1&&c.locale!=="ko"?null:c.data;default:return null}}var e8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f1(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!e8[o.type]:c==="textarea"}function m1(o,c,f,y){Mw(y),c=Od(c,"onChange"),0<c.length&&(f=new fm("onChange","change",null,f,y),o.push({event:f,listeners:c}))}var cl=null,dl=null;function t8(o){T1(o,0)}function kd(o){var c=pi(o);if(re(c))return o}function r8(o,c){if(o==="change")return c}var p1=!1;if(d){var vm;if(d){var bm="oninput"in document;if(!bm){var x1=document.createElement("div");x1.setAttribute("oninput","return;"),bm=typeof x1.oninput=="function"}vm=bm}else vm=!1;p1=vm&&(!document.documentMode||9<document.documentMode)}function g1(){cl&&(cl.detachEvent("onpropertychange",y1),dl=cl=null)}function y1(o){if(o.propertyName==="value"&&kd(dl)){var c=[];m1(c,dl,o,Zf(o)),Dw(t8,c)}}function n8(o,c,f){o==="focusin"?(g1(),cl=c,dl=f,cl.attachEvent("onpropertychange",y1)):o==="focusout"&&g1()}function a8(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return kd(dl)}function s8(o,c){if(o==="click")return kd(c)}function i8(o,c){if(o==="input"||o==="change")return kd(c)}function o8(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var rn=typeof Object.is=="function"?Object.is:o8;function ul(o,c){if(rn(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),y=Object.keys(c);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var k=f[y];if(!u.call(c,k)||!rn(o[k],c[k]))return!1}return!0}function v1(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function b1(o,c){var f=v1(o);o=0;for(var y;f;){if(f.nodeType===3){if(y=o+f.textContent.length,o<=c&&y>=c)return{node:f,offset:c-o};o=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=v1(f)}}function j1(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?j1(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function w1(){for(var o=window,c=be();c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=be(o.document)}return c}function jm(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function l8(o){var c=w1(),f=o.focusedElem,y=o.selectionRange;if(c!==f&&f&&f.ownerDocument&&j1(f.ownerDocument.documentElement,f)){if(y!==null&&jm(f)){if(c=y.start,o=y.end,o===void 0&&(o=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(o,f.value.length);else if(o=(c=f.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var k=f.textContent.length,_=Math.min(y.start,k);y=y.end===void 0?_:Math.min(y.end,k),!o.extend&&_>y&&(k=y,y=_,_=k),k=b1(f,_);var F=b1(f,y);k&&F&&(o.rangeCount!==1||o.anchorNode!==k.node||o.anchorOffset!==k.offset||o.focusNode!==F.node||o.focusOffset!==F.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),o.removeAllRanges(),_>y?(o.addRange(c),o.extend(F.node,F.offset)):(c.setEnd(F.node,F.offset),o.addRange(c)))}}for(c=[],o=f;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)o=c[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var c8=d&&"documentMode"in document&&11>=document.documentMode,ui=null,wm=null,hl=null,Nm=!1;function N1(o,c,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Nm||ui==null||ui!==be(y)||(y=ui,"selectionStart"in y&&jm(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),hl&&ul(hl,y)||(hl=y,y=Od(wm,"onSelect"),0<y.length&&(c=new fm("onSelect","select",null,c,f),o.push({event:c,listeners:y}),c.target=ui)))}function Cd(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var hi={animationend:Cd("Animation","AnimationEnd"),animationiteration:Cd("Animation","AnimationIteration"),animationstart:Cd("Animation","AnimationStart"),transitionend:Cd("Transition","TransitionEnd")},Sm={},S1={};d&&(S1=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);function Ad(o){if(Sm[o])return Sm[o];if(!hi[o])return o;var c=hi[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in S1)return Sm[o]=c[f];return o}var k1=Ad("animationend"),C1=Ad("animationiteration"),A1=Ad("animationstart"),P1=Ad("transitionend"),O1=new Map,E1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function va(o,c){O1.set(o,c),i(c,[o])}for(var km=0;km<E1.length;km++){var Cm=E1[km],d8=Cm.toLowerCase(),u8=Cm[0].toUpperCase()+Cm.slice(1);va(d8,"on"+u8)}va(k1,"onAnimationEnd"),va(C1,"onAnimationIteration"),va(A1,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(P1,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h8=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function _1(o,c,f){var y=o.type||"unknown-event";o.currentTarget=f,dT(y,c,void 0,o),o.currentTarget=null}function T1(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var y=o[f],k=y.event;y=y.listeners;e:{var _=void 0;if(c)for(var F=y.length-1;0<=F;F--){var Q=y[F],Z=Q.instance,ie=Q.currentTarget;if(Q=Q.listener,Z!==_&&k.isPropagationStopped())break e;_1(k,Q,ie),_=Z}else for(F=0;F<y.length;F++){if(Q=y[F],Z=Q.instance,ie=Q.currentTarget,Q=Q.listener,Z!==_&&k.isPropagationStopped())break e;_1(k,Q,ie),_=Z}}}if(ud)throw o=nm,ud=!1,nm=null,o}function ct(o,c){var f=c[Mm];f===void 0&&(f=c[Mm]=new Set);var y=o+"__bubble";f.has(y)||(R1(c,o,2,!1),f.add(y))}function Am(o,c,f){var y=0;c&&(y|=4),R1(f,o,y,c)}var Pd="_reactListening"+Math.random().toString(36).slice(2);function ml(o){if(!o[Pd]){o[Pd]=!0,a.forEach(function(f){f!=="selectionchange"&&(h8.has(f)||Am(f,!1,o),Am(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Pd]||(c[Pd]=!0,Am("selectionchange",!1,c))}}function R1(o,c,f,y){switch(r1(c)){case 1:var k=CT;break;case 4:k=AT;break;default:k=dm}f=k.bind(null,c,f,o),k=void 0,!rm||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),y?k!==void 0?o.addEventListener(c,f,{capture:!0,passive:k}):o.addEventListener(c,f,!0):k!==void 0?o.addEventListener(c,f,{passive:k}):o.addEventListener(c,f,!1)}function Pm(o,c,f,y,k){var _=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var F=y.tag;if(F===3||F===4){var Q=y.stateNode.containerInfo;if(Q===k||Q.nodeType===8&&Q.parentNode===k)break;if(F===4)for(F=y.return;F!==null;){var Z=F.tag;if((Z===3||Z===4)&&(Z=F.stateNode.containerInfo,Z===k||Z.nodeType===8&&Z.parentNode===k))return;F=F.return}for(;Q!==null;){if(F=ls(Q),F===null)return;if(Z=F.tag,Z===5||Z===6){y=_=F;continue e}Q=Q.parentNode}}y=y.return}Dw(function(){var ie=_,me=Zf(f),pe=[];e:{var fe=O1.get(o);if(fe!==void 0){var ve=fm,Se=o;switch(o){case"keypress":if(wd(f)===0)break e;case"keydown":case"keyup":ve=BT;break;case"focusin":Se="focus",ve=xm;break;case"focusout":Se="blur",ve=xm;break;case"beforeblur":case"afterblur":ve=xm;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=s1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=ET;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=HT;break;case k1:case C1:case A1:ve=RT;break;case P1:ve=GT;break;case"scroll":ve=PT;break;case"wheel":ve=QT;break;case"copy":case"cut":case"paste":ve=IT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=o1}var Ce=(c&4)!==0,kt=!Ce&&o==="scroll",ne=Ce?fe!==null?fe+"Capture":null:fe;Ce=[];for(var ee=ie,ae;ee!==null;){ae=ee;var xe=ae.stateNode;if(ae.tag===5&&xe!==null&&(ae=xe,ne!==null&&(xe=Yo(ee,ne),xe!=null&&Ce.push(pl(ee,xe,ae)))),kt)break;ee=ee.return}0<Ce.length&&(fe=new ve(fe,Se,null,f,me),pe.push({event:fe,listeners:Ce}))}}if((c&7)===0){e:{if(fe=o==="mouseover"||o==="pointerover",ve=o==="mouseout"||o==="pointerout",fe&&f!==Jf&&(Se=f.relatedTarget||f.fromElement)&&(ls(Se)||Se[$n]))break e;if((ve||fe)&&(fe=me.window===me?me:(fe=me.ownerDocument)?fe.defaultView||fe.parentWindow:window,ve?(Se=f.relatedTarget||f.toElement,ve=ie,Se=Se?ls(Se):null,Se!==null&&(kt=os(Se),Se!==kt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(ve=null,Se=ie),ve!==Se)){if(Ce=s1,xe="onMouseLeave",ne="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&(Ce=o1,xe="onPointerLeave",ne="onPointerEnter",ee="pointer"),kt=ve==null?fe:pi(ve),ae=Se==null?fe:pi(Se),fe=new Ce(xe,ee+"leave",ve,f,me),fe.target=kt,fe.relatedTarget=ae,xe=null,ls(me)===ie&&(Ce=new Ce(ne,ee+"enter",Se,f,me),Ce.target=ae,Ce.relatedTarget=kt,xe=Ce),kt=xe,ve&&Se)t:{for(Ce=ve,ne=Se,ee=0,ae=Ce;ae;ae=fi(ae))ee++;for(ae=0,xe=ne;xe;xe=fi(xe))ae++;for(;0<ee-ae;)Ce=fi(Ce),ee--;for(;0<ae-ee;)ne=fi(ne),ae--;for(;ee--;){if(Ce===ne||ne!==null&&Ce===ne.alternate)break t;Ce=fi(Ce),ne=fi(ne)}Ce=null}else Ce=null;ve!==null&&M1(pe,fe,ve,Ce,!1),Se!==null&&kt!==null&&M1(pe,kt,Se,Ce,!0)}}e:{if(fe=ie?pi(ie):window,ve=fe.nodeName&&fe.nodeName.toLowerCase(),ve==="select"||ve==="input"&&fe.type==="file")var Ae=r8;else if(f1(fe))if(p1)Ae=i8;else{Ae=a8;var Ee=n8}else(ve=fe.nodeName)&&ve.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Ae=s8);if(Ae&&(Ae=Ae(o,ie))){m1(pe,Ae,f,me);break e}Ee&&Ee(o,fe,ie),o==="focusout"&&(Ee=fe._wrapperState)&&Ee.controlled&&fe.type==="number"&&yn(fe,"number",fe.value)}switch(Ee=ie?pi(ie):window,o){case"focusin":(f1(Ee)||Ee.contentEditable==="true")&&(ui=Ee,wm=ie,hl=null);break;case"focusout":hl=wm=ui=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,N1(pe,f,me);break;case"selectionchange":if(c8)break;case"keydown":case"keyup":N1(pe,f,me)}var _e;if(ym)e:{switch(o){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else di?u1(o,f)&&(De="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(De="onCompositionStart");De&&(l1&&f.locale!=="ko"&&(di||De!=="onCompositionStart"?De==="onCompositionEnd"&&di&&(_e=n1()):(ya=me,hm="value"in ya?ya.value:ya.textContent,di=!0)),Ee=Od(ie,De),0<Ee.length&&(De=new i1(De,o,null,f,me),pe.push({event:De,listeners:Ee}),_e?De.data=_e:(_e=h1(f),_e!==null&&(De.data=_e)))),(_e=XT?JT(o,f):ZT(o,f))&&(ie=Od(ie,"onBeforeInput"),0<ie.length&&(me=new i1("onBeforeInput","beforeinput",null,f,me),pe.push({event:me,listeners:ie}),me.data=_e))}T1(pe,c)})}function pl(o,c,f){return{instance:o,listener:c,currentTarget:f}}function Od(o,c){for(var f=c+"Capture",y=[];o!==null;){var k=o,_=k.stateNode;k.tag===5&&_!==null&&(k=_,_=Yo(o,f),_!=null&&y.unshift(pl(o,_,k)),_=Yo(o,c),_!=null&&y.push(pl(o,_,k))),o=o.return}return y}function fi(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function M1(o,c,f,y,k){for(var _=c._reactName,F=[];f!==null&&f!==y;){var Q=f,Z=Q.alternate,ie=Q.stateNode;if(Z!==null&&Z===y)break;Q.tag===5&&ie!==null&&(Q=ie,k?(Z=Yo(f,_),Z!=null&&F.unshift(pl(f,Z,Q))):k||(Z=Yo(f,_),Z!=null&&F.push(pl(f,Z,Q)))),f=f.return}F.length!==0&&o.push({event:c,listeners:F})}var f8=/\r\n?/g,m8=/\u0000|\uFFFD/g;function I1(o){return(typeof o=="string"?o:""+o).replace(f8,`
`).replace(m8,"")}function Ed(o,c,f){if(c=I1(c),I1(o)!==c&&f)throw Error(n(425))}function _d(){}var Om=null,Em=null;function _m(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Tm=typeof setTimeout=="function"?setTimeout:void 0,p8=typeof clearTimeout=="function"?clearTimeout:void 0,$1=typeof Promise=="function"?Promise:void 0,x8=typeof queueMicrotask=="function"?queueMicrotask:typeof $1<"u"?function(o){return $1.resolve(null).then(o).catch(g8)}:Tm;function g8(o){setTimeout(function(){throw o})}function Rm(o,c){var f=c,y=0;do{var k=f.nextSibling;if(o.removeChild(f),k&&k.nodeType===8)if(f=k.data,f==="/$"){if(y===0){o.removeChild(k),sl(c);return}y--}else f!=="$"&&f!=="$?"&&f!=="$!"||y++;f=k}while(f);sl(c)}function ba(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function L1(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}var mi=Math.random().toString(36).slice(2),jn="__reactFiber$"+mi,xl="__reactProps$"+mi,$n="__reactContainer$"+mi,Mm="__reactEvents$"+mi,y8="__reactListeners$"+mi,v8="__reactHandles$"+mi;function ls(o){var c=o[jn];if(c)return c;for(var f=o.parentNode;f;){if(c=f[$n]||f[jn]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=L1(o);o!==null;){if(f=o[jn])return f;o=L1(o)}return c}o=f,f=o.parentNode}return null}function gl(o){return o=o[jn]||o[$n],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function pi(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function Td(o){return o[xl]||null}var Im=[],xi=-1;function ja(o){return{current:o}}function dt(o){0>xi||(o.current=Im[xi],Im[xi]=null,xi--)}function at(o,c){xi++,Im[xi]=o.current,o.current=c}var wa={},Xt=ja(wa),fr=ja(!1),cs=wa;function gi(o,c){var f=o.type.contextTypes;if(!f)return wa;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var k={},_;for(_ in f)k[_]=c[_];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=k),k}function mr(o){return o=o.childContextTypes,o!=null}function Rd(){dt(fr),dt(Xt)}function D1(o,c,f){if(Xt.current!==wa)throw Error(n(168));at(Xt,c),at(fr,f)}function F1(o,c,f){var y=o.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var k in y)if(!(k in c))throw Error(n(108,oe(o)||"Unknown",k));return L({},f,y)}function Md(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||wa,cs=Xt.current,at(Xt,o),at(fr,fr.current),!0}function q1(o,c,f){var y=o.stateNode;if(!y)throw Error(n(169));f?(o=F1(o,c,cs),y.__reactInternalMemoizedMergedChildContext=o,dt(fr),dt(Xt),at(Xt,o)):dt(fr),at(fr,f)}var Ln=null,Id=!1,$m=!1;function z1(o){Ln===null?Ln=[o]:Ln.push(o)}function b8(o){Id=!0,z1(o)}function Na(){if(!$m&&Ln!==null){$m=!0;var o=0,c=et;try{var f=Ln;for(et=1;o<f.length;o++){var y=f[o];do y=y(!0);while(y!==null)}Ln=null,Id=!1}catch(k){throw Ln!==null&&(Ln=Ln.slice(o+1)),Uw(am,Na),k}finally{et=c,$m=!1}}return null}var yi=[],vi=0,$d=null,Ld=0,$r=[],Lr=0,ds=null,Dn=1,Fn="";function us(o,c){yi[vi++]=Ld,yi[vi++]=$d,$d=o,Ld=c}function B1(o,c,f){$r[Lr++]=Dn,$r[Lr++]=Fn,$r[Lr++]=ds,ds=o;var y=Dn;o=Fn;var k=32-tn(y)-1;y&=~(1<<k),f+=1;var _=32-tn(c)+k;if(30<_){var F=k-k%5;_=(y&(1<<F)-1).toString(32),y>>=F,k-=F,Dn=1<<32-tn(c)+k|f<<k|y,Fn=_+o}else Dn=1<<_|f<<k|y,Fn=o}function Lm(o){o.return!==null&&(us(o,1),B1(o,1,0))}function Dm(o){for(;o===$d;)$d=yi[--vi],yi[vi]=null,Ld=yi[--vi],yi[vi]=null;for(;o===ds;)ds=$r[--Lr],$r[Lr]=null,Fn=$r[--Lr],$r[Lr]=null,Dn=$r[--Lr],$r[Lr]=null}var Cr=null,Ar=null,ht=!1,nn=null;function U1(o,c){var f=zr(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=o,c=o.deletions,c===null?(o.deletions=[f],o.flags|=16):c.push(f)}function W1(o,c){switch(o.tag){case 5:var f=o.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Cr=o,Ar=ba(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Cr=o,Ar=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=ds!==null?{id:Dn,overflow:Fn}:null,o.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=zr(18,null,null,0),f.stateNode=c,f.return=o,o.child=f,Cr=o,Ar=null,!0):!1;default:return!1}}function Fm(o){return(o.mode&1)!==0&&(o.flags&128)===0}function qm(o){if(ht){var c=Ar;if(c){var f=c;if(!W1(o,c)){if(Fm(o))throw Error(n(418));c=ba(f.nextSibling);var y=Cr;c&&W1(o,c)?U1(y,f):(o.flags=o.flags&-4097|2,ht=!1,Cr=o)}}else{if(Fm(o))throw Error(n(418));o.flags=o.flags&-4097|2,ht=!1,Cr=o}}}function H1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Cr=o}function Dd(o){if(o!==Cr)return!1;if(!ht)return H1(o),ht=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!_m(o.type,o.memoizedProps)),c&&(c=Ar)){if(Fm(o))throw K1(),Error(n(418));for(;c;)U1(o,c),c=ba(c.nextSibling)}if(H1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(c===0){Ar=ba(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}o=o.nextSibling}Ar=null}}else Ar=Cr?ba(o.stateNode.nextSibling):null;return!0}function K1(){for(var o=Ar;o;)o=ba(o.nextSibling)}function bi(){Ar=Cr=null,ht=!1}function zm(o){nn===null?nn=[o]:nn.push(o)}var j8=N.ReactCurrentBatchConfig;function yl(o,c,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var y=f.stateNode}if(!y)throw Error(n(147,o));var k=y,_=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===_?c.ref:(c=function(F){var Q=k.refs;F===null?delete Q[_]:Q[_]=F},c._stringRef=_,c)}if(typeof o!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,o))}return o}function Fd(o,c){throw o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function G1(o){var c=o._init;return c(o._payload)}function V1(o){function c(ne,ee){if(o){var ae=ne.deletions;ae===null?(ne.deletions=[ee],ne.flags|=16):ae.push(ee)}}function f(ne,ee){if(!o)return null;for(;ee!==null;)c(ne,ee),ee=ee.sibling;return null}function y(ne,ee){for(ne=new Map;ee!==null;)ee.key!==null?ne.set(ee.key,ee):ne.set(ee.index,ee),ee=ee.sibling;return ne}function k(ne,ee){return ne=_a(ne,ee),ne.index=0,ne.sibling=null,ne}function _(ne,ee,ae){return ne.index=ae,o?(ae=ne.alternate,ae!==null?(ae=ae.index,ae<ee?(ne.flags|=2,ee):ae):(ne.flags|=2,ee)):(ne.flags|=1048576,ee)}function F(ne){return o&&ne.alternate===null&&(ne.flags|=2),ne}function Q(ne,ee,ae,xe){return ee===null||ee.tag!==6?(ee=Tp(ae,ne.mode,xe),ee.return=ne,ee):(ee=k(ee,ae),ee.return=ne,ee)}function Z(ne,ee,ae,xe){var Ae=ae.type;return Ae===E?me(ne,ee,ae.props.children,xe,ae.key):ee!==null&&(ee.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===U&&G1(Ae)===ee.type)?(xe=k(ee,ae.props),xe.ref=yl(ne,ee,ae),xe.return=ne,xe):(xe=cu(ae.type,ae.key,ae.props,null,ne.mode,xe),xe.ref=yl(ne,ee,ae),xe.return=ne,xe)}function ie(ne,ee,ae,xe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ae.containerInfo||ee.stateNode.implementation!==ae.implementation?(ee=Rp(ae,ne.mode,xe),ee.return=ne,ee):(ee=k(ee,ae.children||[]),ee.return=ne,ee)}function me(ne,ee,ae,xe,Ae){return ee===null||ee.tag!==7?(ee=vs(ae,ne.mode,xe,Ae),ee.return=ne,ee):(ee=k(ee,ae),ee.return=ne,ee)}function pe(ne,ee,ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Tp(""+ee,ne.mode,ae),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return ae=cu(ee.type,ee.key,ee.props,null,ne.mode,ae),ae.ref=yl(ne,null,ee),ae.return=ne,ae;case C:return ee=Rp(ee,ne.mode,ae),ee.return=ne,ee;case U:var xe=ee._init;return pe(ne,xe(ee._payload),ae)}if(vn(ee)||D(ee))return ee=vs(ee,ne.mode,ae,null),ee.return=ne,ee;Fd(ne,ee)}return null}function fe(ne,ee,ae,xe){var Ae=ee!==null?ee.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Ae!==null?null:Q(ne,ee,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return ae.key===Ae?Z(ne,ee,ae,xe):null;case C:return ae.key===Ae?ie(ne,ee,ae,xe):null;case U:return Ae=ae._init,fe(ne,ee,Ae(ae._payload),xe)}if(vn(ae)||D(ae))return Ae!==null?null:me(ne,ee,ae,xe,null);Fd(ne,ae)}return null}function ve(ne,ee,ae,xe,Ae){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return ne=ne.get(ae)||null,Q(ee,ne,""+xe,Ae);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case A:return ne=ne.get(xe.key===null?ae:xe.key)||null,Z(ee,ne,xe,Ae);case C:return ne=ne.get(xe.key===null?ae:xe.key)||null,ie(ee,ne,xe,Ae);case U:var Ee=xe._init;return ve(ne,ee,ae,Ee(xe._payload),Ae)}if(vn(xe)||D(xe))return ne=ne.get(ae)||null,me(ee,ne,xe,Ae,null);Fd(ee,xe)}return null}function Se(ne,ee,ae,xe){for(var Ae=null,Ee=null,_e=ee,De=ee=0,Ut=null;_e!==null&&De<ae.length;De++){_e.index>De?(Ut=_e,_e=null):Ut=_e.sibling;var Ge=fe(ne,_e,ae[De],xe);if(Ge===null){_e===null&&(_e=Ut);break}o&&_e&&Ge.alternate===null&&c(ne,_e),ee=_(Ge,ee,De),Ee===null?Ae=Ge:Ee.sibling=Ge,Ee=Ge,_e=Ut}if(De===ae.length)return f(ne,_e),ht&&us(ne,De),Ae;if(_e===null){for(;De<ae.length;De++)_e=pe(ne,ae[De],xe),_e!==null&&(ee=_(_e,ee,De),Ee===null?Ae=_e:Ee.sibling=_e,Ee=_e);return ht&&us(ne,De),Ae}for(_e=y(ne,_e);De<ae.length;De++)Ut=ve(_e,ne,De,ae[De],xe),Ut!==null&&(o&&Ut.alternate!==null&&_e.delete(Ut.key===null?De:Ut.key),ee=_(Ut,ee,De),Ee===null?Ae=Ut:Ee.sibling=Ut,Ee=Ut);return o&&_e.forEach(function(Ta){return c(ne,Ta)}),ht&&us(ne,De),Ae}function Ce(ne,ee,ae,xe){var Ae=D(ae);if(typeof Ae!="function")throw Error(n(150));if(ae=Ae.call(ae),ae==null)throw Error(n(151));for(var Ee=Ae=null,_e=ee,De=ee=0,Ut=null,Ge=ae.next();_e!==null&&!Ge.done;De++,Ge=ae.next()){_e.index>De?(Ut=_e,_e=null):Ut=_e.sibling;var Ta=fe(ne,_e,Ge.value,xe);if(Ta===null){_e===null&&(_e=Ut);break}o&&_e&&Ta.alternate===null&&c(ne,_e),ee=_(Ta,ee,De),Ee===null?Ae=Ta:Ee.sibling=Ta,Ee=Ta,_e=Ut}if(Ge.done)return f(ne,_e),ht&&us(ne,De),Ae;if(_e===null){for(;!Ge.done;De++,Ge=ae.next())Ge=pe(ne,Ge.value,xe),Ge!==null&&(ee=_(Ge,ee,De),Ee===null?Ae=Ge:Ee.sibling=Ge,Ee=Ge);return ht&&us(ne,De),Ae}for(_e=y(ne,_e);!Ge.done;De++,Ge=ae.next())Ge=ve(_e,ne,De,Ge.value,xe),Ge!==null&&(o&&Ge.alternate!==null&&_e.delete(Ge.key===null?De:Ge.key),ee=_(Ge,ee,De),Ee===null?Ae=Ge:Ee.sibling=Ge,Ee=Ge);return o&&_e.forEach(function(eR){return c(ne,eR)}),ht&&us(ne,De),Ae}function kt(ne,ee,ae,xe){if(typeof ae=="object"&&ae!==null&&ae.type===E&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:e:{for(var Ae=ae.key,Ee=ee;Ee!==null;){if(Ee.key===Ae){if(Ae=ae.type,Ae===E){if(Ee.tag===7){f(ne,Ee.sibling),ee=k(Ee,ae.props.children),ee.return=ne,ne=ee;break e}}else if(Ee.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===U&&G1(Ae)===Ee.type){f(ne,Ee.sibling),ee=k(Ee,ae.props),ee.ref=yl(ne,Ee,ae),ee.return=ne,ne=ee;break e}f(ne,Ee);break}else c(ne,Ee);Ee=Ee.sibling}ae.type===E?(ee=vs(ae.props.children,ne.mode,xe,ae.key),ee.return=ne,ne=ee):(xe=cu(ae.type,ae.key,ae.props,null,ne.mode,xe),xe.ref=yl(ne,ee,ae),xe.return=ne,ne=xe)}return F(ne);case C:e:{for(Ee=ae.key;ee!==null;){if(ee.key===Ee)if(ee.tag===4&&ee.stateNode.containerInfo===ae.containerInfo&&ee.stateNode.implementation===ae.implementation){f(ne,ee.sibling),ee=k(ee,ae.children||[]),ee.return=ne,ne=ee;break e}else{f(ne,ee);break}else c(ne,ee);ee=ee.sibling}ee=Rp(ae,ne.mode,xe),ee.return=ne,ne=ee}return F(ne);case U:return Ee=ae._init,kt(ne,ee,Ee(ae._payload),xe)}if(vn(ae))return Se(ne,ee,ae,xe);if(D(ae))return Ce(ne,ee,ae,xe);Fd(ne,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,ee!==null&&ee.tag===6?(f(ne,ee.sibling),ee=k(ee,ae),ee.return=ne,ne=ee):(f(ne,ee),ee=Tp(ae,ne.mode,xe),ee.return=ne,ne=ee),F(ne)):f(ne,ee)}return kt}var ji=V1(!0),Q1=V1(!1),qd=ja(null),zd=null,wi=null,Bm=null;function Um(){Bm=wi=zd=null}function Wm(o){var c=qd.current;dt(qd),o._currentValue=c}function Hm(o,c,f){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===f)break;o=o.return}}function Ni(o,c){zd=o,Bm=wi=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(pr=!0),o.firstContext=null)}function Dr(o){var c=o._currentValue;if(Bm!==o)if(o={context:o,memoizedValue:c,next:null},wi===null){if(zd===null)throw Error(n(308));wi=o,zd.dependencies={lanes:0,firstContext:o}}else wi=wi.next=o;return c}var hs=null;function Km(o){hs===null?hs=[o]:hs.push(o)}function Y1(o,c,f,y){var k=c.interleaved;return k===null?(f.next=f,Km(c)):(f.next=k.next,k.next=f),c.interleaved=f,qn(o,y)}function qn(o,c){o.lanes|=c;var f=o.alternate;for(f!==null&&(f.lanes|=c),f=o,o=o.return;o!==null;)o.childLanes|=c,f=o.alternate,f!==null&&(f.childLanes|=c),f=o,o=o.return;return f.tag===3?f.stateNode:null}var Sa=!1;function Gm(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function zn(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function ka(o,c,f){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(He&2)!==0){var k=y.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),y.pending=c,qn(o,f)}return k=y.interleaved,k===null?(c.next=c,Km(y)):(c.next=k.next,k.next=c),y.interleaved=c,qn(o,f)}function Bd(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var y=c.lanes;y&=o.pendingLanes,f|=y,c.lanes=f,om(o,f)}}function J1(o,c){var f=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var k=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var F={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};_===null?k=_=F:_=_.next=F,f=f.next}while(f!==null);_===null?k=_=c:_=_.next=c}else k=_=c;f={baseState:y.baseState,firstBaseUpdate:k,lastBaseUpdate:_,shared:y.shared,effects:y.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}function Ud(o,c,f,y){var k=o.updateQueue;Sa=!1;var _=k.firstBaseUpdate,F=k.lastBaseUpdate,Q=k.shared.pending;if(Q!==null){k.shared.pending=null;var Z=Q,ie=Z.next;Z.next=null,F===null?_=ie:F.next=ie,F=Z;var me=o.alternate;me!==null&&(me=me.updateQueue,Q=me.lastBaseUpdate,Q!==F&&(Q===null?me.firstBaseUpdate=ie:Q.next=ie,me.lastBaseUpdate=Z))}if(_!==null){var pe=k.baseState;F=0,me=ie=Z=null,Q=_;do{var fe=Q.lane,ve=Q.eventTime;if((y&fe)===fe){me!==null&&(me=me.next={eventTime:ve,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Se=o,Ce=Q;switch(fe=c,ve=f,Ce.tag){case 1:if(Se=Ce.payload,typeof Se=="function"){pe=Se.call(ve,pe,fe);break e}pe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ce.payload,fe=typeof Se=="function"?Se.call(ve,pe,fe):Se,fe==null)break e;pe=L({},pe,fe);break e;case 2:Sa=!0}}Q.callback!==null&&Q.lane!==0&&(o.flags|=64,fe=k.effects,fe===null?k.effects=[Q]:fe.push(Q))}else ve={eventTime:ve,lane:fe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},me===null?(ie=me=ve,Z=pe):me=me.next=ve,F|=fe;if(Q=Q.next,Q===null){if(Q=k.shared.pending,Q===null)break;fe=Q,Q=fe.next,fe.next=null,k.lastBaseUpdate=fe,k.shared.pending=null}}while(!0);if(me===null&&(Z=pe),k.baseState=Z,k.firstBaseUpdate=ie,k.lastBaseUpdate=me,c=k.shared.interleaved,c!==null){k=c;do F|=k.lane,k=k.next;while(k!==c)}else _===null&&(k.shared.lanes=0);ps|=F,o.lanes=F,o.memoizedState=pe}}function Z1(o,c,f){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var y=o[c],k=y.callback;if(k!==null){if(y.callback=null,y=f,typeof k!="function")throw Error(n(191,k));k.call(y)}}}var vl={},wn=ja(vl),bl=ja(vl),jl=ja(vl);function fs(o){if(o===vl)throw Error(n(174));return o}function Vm(o,c){switch(at(jl,c),at(bl,o),at(wn,vl),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Qf(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=Qf(c,o)}dt(wn),at(wn,c)}function Si(){dt(wn),dt(bl),dt(jl)}function e2(o){fs(jl.current);var c=fs(wn.current),f=Qf(c,o.type);c!==f&&(at(bl,o),at(wn,f))}function Qm(o){bl.current===o&&(dt(wn),dt(bl))}var xt=ja(0);function Wd(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ym=[];function Xm(){for(var o=0;o<Ym.length;o++)Ym[o]._workInProgressVersionPrimary=null;Ym.length=0}var Hd=N.ReactCurrentDispatcher,Jm=N.ReactCurrentBatchConfig,ms=0,gt=null,_t=null,zt=null,Kd=!1,wl=!1,Nl=0,w8=0;function Jt(){throw Error(n(321))}function Zm(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!rn(o[f],c[f]))return!1;return!0}function ep(o,c,f,y,k,_){if(ms=_,gt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Hd.current=o===null||o.memoizedState===null?C8:A8,o=f(y,k),wl){_=0;do{if(wl=!1,Nl=0,25<=_)throw Error(n(301));_+=1,zt=_t=null,c.updateQueue=null,Hd.current=P8,o=f(y,k)}while(wl)}if(Hd.current=Qd,c=_t!==null&&_t.next!==null,ms=0,zt=_t=gt=null,Kd=!1,c)throw Error(n(300));return o}function tp(){var o=Nl!==0;return Nl=0,o}function Nn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?gt.memoizedState=zt=o:zt=zt.next=o,zt}function Fr(){if(_t===null){var o=gt.alternate;o=o!==null?o.memoizedState:null}else o=_t.next;var c=zt===null?gt.memoizedState:zt.next;if(c!==null)zt=c,_t=o;else{if(o===null)throw Error(n(310));_t=o,o={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},zt===null?gt.memoizedState=zt=o:zt=zt.next=o}return zt}function Sl(o,c){return typeof c=="function"?c(o):c}function rp(o){var c=Fr(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var y=_t,k=y.baseQueue,_=f.pending;if(_!==null){if(k!==null){var F=k.next;k.next=_.next,_.next=F}y.baseQueue=k=_,f.pending=null}if(k!==null){_=k.next,y=y.baseState;var Q=F=null,Z=null,ie=_;do{var me=ie.lane;if((ms&me)===me)Z!==null&&(Z=Z.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),y=ie.hasEagerState?ie.eagerState:o(y,ie.action);else{var pe={lane:me,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};Z===null?(Q=Z=pe,F=y):Z=Z.next=pe,gt.lanes|=me,ps|=me}ie=ie.next}while(ie!==null&&ie!==_);Z===null?F=y:Z.next=Q,rn(y,c.memoizedState)||(pr=!0),c.memoizedState=y,c.baseState=F,c.baseQueue=Z,f.lastRenderedState=y}if(o=f.interleaved,o!==null){k=o;do _=k.lane,gt.lanes|=_,ps|=_,k=k.next;while(k!==o)}else k===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function np(o){var c=Fr(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var y=f.dispatch,k=f.pending,_=c.memoizedState;if(k!==null){f.pending=null;var F=k=k.next;do _=o(_,F.action),F=F.next;while(F!==k);rn(_,c.memoizedState)||(pr=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),f.lastRenderedState=_}return[_,y]}function t2(){}function r2(o,c){var f=gt,y=Fr(),k=c(),_=!rn(y.memoizedState,k);if(_&&(y.memoizedState=k,pr=!0),y=y.queue,ap(s2.bind(null,f,y,o),[o]),y.getSnapshot!==c||_||zt!==null&&zt.memoizedState.tag&1){if(f.flags|=2048,kl(9,a2.bind(null,f,y,k,c),void 0,null),Bt===null)throw Error(n(349));(ms&30)!==0||n2(f,c,k)}return k}function n2(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=gt.updateQueue,c===null?(c={lastEffect:null,stores:null},gt.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function a2(o,c,f,y){c.value=f,c.getSnapshot=y,i2(c)&&o2(o)}function s2(o,c,f){return f(function(){i2(c)&&o2(o)})}function i2(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!rn(o,f)}catch{return!0}}function o2(o){var c=qn(o,1);c!==null&&ln(c,o,1,-1)}function l2(o){var c=Nn();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:o},c.queue=o,o=o.dispatch=k8.bind(null,gt,o),[c.memoizedState,o]}function kl(o,c,f,y){return o={tag:o,create:c,destroy:f,deps:y,next:null},c=gt.updateQueue,c===null?(c={lastEffect:null,stores:null},gt.updateQueue=c,c.lastEffect=o.next=o):(f=c.lastEffect,f===null?c.lastEffect=o.next=o:(y=f.next,f.next=o,o.next=y,c.lastEffect=o)),o}function c2(){return Fr().memoizedState}function Gd(o,c,f,y){var k=Nn();gt.flags|=o,k.memoizedState=kl(1|c,f,void 0,y===void 0?null:y)}function Vd(o,c,f,y){var k=Fr();y=y===void 0?null:y;var _=void 0;if(_t!==null){var F=_t.memoizedState;if(_=F.destroy,y!==null&&Zm(y,F.deps)){k.memoizedState=kl(c,f,_,y);return}}gt.flags|=o,k.memoizedState=kl(1|c,f,_,y)}function d2(o,c){return Gd(8390656,8,o,c)}function ap(o,c){return Vd(2048,8,o,c)}function u2(o,c){return Vd(4,2,o,c)}function h2(o,c){return Vd(4,4,o,c)}function f2(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function m2(o,c,f){return f=f!=null?f.concat([o]):null,Vd(4,4,f2.bind(null,c,o),f)}function sp(){}function p2(o,c){var f=Fr();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&Zm(c,y[1])?y[0]:(f.memoizedState=[o,c],o)}function x2(o,c){var f=Fr();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&Zm(c,y[1])?y[0]:(o=o(),f.memoizedState=[o,c],o)}function g2(o,c,f){return(ms&21)===0?(o.baseState&&(o.baseState=!1,pr=!0),o.memoizedState=f):(rn(f,c)||(f=Gw(),gt.lanes|=f,ps|=f,o.baseState=!0),c)}function N8(o,c){var f=et;et=f!==0&&4>f?f:4,o(!0);var y=Jm.transition;Jm.transition={};try{o(!1),c()}finally{et=f,Jm.transition=y}}function y2(){return Fr().memoizedState}function S8(o,c,f){var y=Oa(o);if(f={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null},v2(o))b2(c,f);else if(f=Y1(o,c,f,y),f!==null){var k=ir();ln(f,o,y,k),j2(f,c,y)}}function k8(o,c,f){var y=Oa(o),k={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null};if(v2(o))b2(c,k);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var F=c.lastRenderedState,Q=_(F,f);if(k.hasEagerState=!0,k.eagerState=Q,rn(Q,F)){var Z=c.interleaved;Z===null?(k.next=k,Km(c)):(k.next=Z.next,Z.next=k),c.interleaved=k;return}}catch{}finally{}f=Y1(o,c,k,y),f!==null&&(k=ir(),ln(f,o,y,k),j2(f,c,y))}}function v2(o){var c=o.alternate;return o===gt||c!==null&&c===gt}function b2(o,c){wl=Kd=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function j2(o,c,f){if((f&4194240)!==0){var y=c.lanes;y&=o.pendingLanes,f|=y,c.lanes=f,om(o,f)}}var Qd={readContext:Dr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},C8={readContext:Dr,useCallback:function(o,c){return Nn().memoizedState=[o,c===void 0?null:c],o},useContext:Dr,useEffect:d2,useImperativeHandle:function(o,c,f){return f=f!=null?f.concat([o]):null,Gd(4194308,4,f2.bind(null,c,o),f)},useLayoutEffect:function(o,c){return Gd(4194308,4,o,c)},useInsertionEffect:function(o,c){return Gd(4,2,o,c)},useMemo:function(o,c){var f=Nn();return c=c===void 0?null:c,o=o(),f.memoizedState=[o,c],o},useReducer:function(o,c,f){var y=Nn();return c=f!==void 0?f(c):c,y.memoizedState=y.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},y.queue=o,o=o.dispatch=S8.bind(null,gt,o),[y.memoizedState,o]},useRef:function(o){var c=Nn();return o={current:o},c.memoizedState=o},useState:l2,useDebugValue:sp,useDeferredValue:function(o){return Nn().memoizedState=o},useTransition:function(){var o=l2(!1),c=o[0];return o=N8.bind(null,o[1]),Nn().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,f){var y=gt,k=Nn();if(ht){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),Bt===null)throw Error(n(349));(ms&30)!==0||n2(y,c,f)}k.memoizedState=f;var _={value:f,getSnapshot:c};return k.queue=_,d2(s2.bind(null,y,_,o),[o]),y.flags|=2048,kl(9,a2.bind(null,y,_,f,c),void 0,null),f},useId:function(){var o=Nn(),c=Bt.identifierPrefix;if(ht){var f=Fn,y=Dn;f=(y&~(1<<32-tn(y)-1)).toString(32)+f,c=":"+c+"R"+f,f=Nl++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=w8++,c=":"+c+"r"+f.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},A8={readContext:Dr,useCallback:p2,useContext:Dr,useEffect:ap,useImperativeHandle:m2,useInsertionEffect:u2,useLayoutEffect:h2,useMemo:x2,useReducer:rp,useRef:c2,useState:function(){return rp(Sl)},useDebugValue:sp,useDeferredValue:function(o){var c=Fr();return g2(c,_t.memoizedState,o)},useTransition:function(){var o=rp(Sl)[0],c=Fr().memoizedState;return[o,c]},useMutableSource:t2,useSyncExternalStore:r2,useId:y2,unstable_isNewReconciler:!1},P8={readContext:Dr,useCallback:p2,useContext:Dr,useEffect:ap,useImperativeHandle:m2,useInsertionEffect:u2,useLayoutEffect:h2,useMemo:x2,useReducer:np,useRef:c2,useState:function(){return np(Sl)},useDebugValue:sp,useDeferredValue:function(o){var c=Fr();return _t===null?c.memoizedState=o:g2(c,_t.memoizedState,o)},useTransition:function(){var o=np(Sl)[0],c=Fr().memoizedState;return[o,c]},useMutableSource:t2,useSyncExternalStore:r2,useId:y2,unstable_isNewReconciler:!1};function an(o,c){if(o&&o.defaultProps){c=L({},c),o=o.defaultProps;for(var f in o)c[f]===void 0&&(c[f]=o[f]);return c}return c}function ip(o,c,f,y){c=o.memoizedState,f=f(y,c),f=f==null?c:L({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Yd={isMounted:function(o){return(o=o._reactInternals)?os(o)===o:!1},enqueueSetState:function(o,c,f){o=o._reactInternals;var y=ir(),k=Oa(o),_=zn(y,k);_.payload=c,f!=null&&(_.callback=f),c=ka(o,_,k),c!==null&&(ln(c,o,k,y),Bd(c,o,k))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var y=ir(),k=Oa(o),_=zn(y,k);_.tag=1,_.payload=c,f!=null&&(_.callback=f),c=ka(o,_,k),c!==null&&(ln(c,o,k,y),Bd(c,o,k))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=ir(),y=Oa(o),k=zn(f,y);k.tag=2,c!=null&&(k.callback=c),c=ka(o,k,y),c!==null&&(ln(c,o,y,f),Bd(c,o,y))}};function w2(o,c,f,y,k,_,F){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,_,F):c.prototype&&c.prototype.isPureReactComponent?!ul(f,y)||!ul(k,_):!0}function N2(o,c,f){var y=!1,k=wa,_=c.contextType;return typeof _=="object"&&_!==null?_=Dr(_):(k=mr(c)?cs:Xt.current,y=c.contextTypes,_=(y=y!=null)?gi(o,k):wa),c=new c(f,_),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Yd,o.stateNode=c,c._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=k,o.__reactInternalMemoizedMaskedChildContext=_),c}function S2(o,c,f,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,y),c.state!==o&&Yd.enqueueReplaceState(c,c.state,null)}function op(o,c,f,y){var k=o.stateNode;k.props=f,k.state=o.memoizedState,k.refs={},Gm(o);var _=c.contextType;typeof _=="object"&&_!==null?k.context=Dr(_):(_=mr(c)?cs:Xt.current,k.context=gi(o,_)),k.state=o.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(ip(o,c,_,f),k.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&Yd.enqueueReplaceState(k,k.state,null),Ud(o,f,k,y),k.state=o.memoizedState),typeof k.componentDidMount=="function"&&(o.flags|=4194308)}function ki(o,c){try{var f="",y=c;do f+=ue(y),y=y.return;while(y);var k=f}catch(_){k=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:c,stack:k,digest:null}}function lp(o,c,f){return{value:o,source:null,stack:f??null,digest:c??null}}function cp(o,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var O8=typeof WeakMap=="function"?WeakMap:Map;function k2(o,c,f){f=zn(-1,f),f.tag=3,f.payload={element:null};var y=c.value;return f.callback=function(){nu||(nu=!0,Sp=y),cp(o,c)},f}function C2(o,c,f){f=zn(-1,f),f.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var k=c.value;f.payload=function(){return y(k)},f.callback=function(){cp(o,c)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(f.callback=function(){cp(o,c),typeof y!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var F=c.stack;this.componentDidCatch(c.value,{componentStack:F!==null?F:""})}),f}function A2(o,c,f){var y=o.pingCache;if(y===null){y=o.pingCache=new O8;var k=new Set;y.set(c,k)}else k=y.get(c),k===void 0&&(k=new Set,y.set(c,k));k.has(f)||(k.add(f),o=U8.bind(null,o,c,f),c.then(o,o))}function P2(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function O2(o,c,f,y,k){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=zn(-1,1),c.tag=2,ka(f,c,1))),f.lanes|=1),o):(o.flags|=65536,o.lanes=k,o)}var E8=N.ReactCurrentOwner,pr=!1;function sr(o,c,f,y){c.child=o===null?Q1(c,null,f,y):ji(c,o.child,f,y)}function E2(o,c,f,y,k){f=f.render;var _=c.ref;return Ni(c,k),y=ep(o,c,f,y,_,k),f=tp(),o!==null&&!pr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,Bn(o,c,k)):(ht&&f&&Lm(c),c.flags|=1,sr(o,c,y,k),c.child)}function _2(o,c,f,y,k){if(o===null){var _=f.type;return typeof _=="function"&&!_p(_)&&_.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=_,T2(o,c,_,y,k)):(o=cu(f.type,null,y,c,c.mode,k),o.ref=c.ref,o.return=c,c.child=o)}if(_=o.child,(o.lanes&k)===0){var F=_.memoizedProps;if(f=f.compare,f=f!==null?f:ul,f(F,y)&&o.ref===c.ref)return Bn(o,c,k)}return c.flags|=1,o=_a(_,y),o.ref=c.ref,o.return=c,c.child=o}function T2(o,c,f,y,k){if(o!==null){var _=o.memoizedProps;if(ul(_,y)&&o.ref===c.ref)if(pr=!1,c.pendingProps=y=_,(o.lanes&k)!==0)(o.flags&131072)!==0&&(pr=!0);else return c.lanes=o.lanes,Bn(o,c,k)}return dp(o,c,f,y,k)}function R2(o,c,f){var y=c.pendingProps,k=y.children,_=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Ai,Pr),Pr|=f;else{if((f&1073741824)===0)return o=_!==null?_.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,at(Ai,Pr),Pr|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=_!==null?_.baseLanes:f,at(Ai,Pr),Pr|=y}else _!==null?(y=_.baseLanes|f,c.memoizedState=null):y=f,at(Ai,Pr),Pr|=y;return sr(o,c,k,f),c.child}function M2(o,c){var f=c.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function dp(o,c,f,y,k){var _=mr(f)?cs:Xt.current;return _=gi(c,_),Ni(c,k),f=ep(o,c,f,y,_,k),y=tp(),o!==null&&!pr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,Bn(o,c,k)):(ht&&y&&Lm(c),c.flags|=1,sr(o,c,f,k),c.child)}function I2(o,c,f,y,k){if(mr(f)){var _=!0;Md(c)}else _=!1;if(Ni(c,k),c.stateNode===null)Jd(o,c),N2(c,f,y),op(c,f,y,k),y=!0;else if(o===null){var F=c.stateNode,Q=c.memoizedProps;F.props=Q;var Z=F.context,ie=f.contextType;typeof ie=="object"&&ie!==null?ie=Dr(ie):(ie=mr(f)?cs:Xt.current,ie=gi(c,ie));var me=f.getDerivedStateFromProps,pe=typeof me=="function"||typeof F.getSnapshotBeforeUpdate=="function";pe||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(Q!==y||Z!==ie)&&S2(c,F,y,ie),Sa=!1;var fe=c.memoizedState;F.state=fe,Ud(c,y,F,k),Z=c.memoizedState,Q!==y||fe!==Z||fr.current||Sa?(typeof me=="function"&&(ip(c,f,me,y),Z=c.memoizedState),(Q=Sa||w2(c,f,Q,y,fe,Z,ie))?(pe||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(c.flags|=4194308)):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Z),F.props=y,F.state=Z,F.context=ie,y=Q):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{F=c.stateNode,X1(o,c),Q=c.memoizedProps,ie=c.type===c.elementType?Q:an(c.type,Q),F.props=ie,pe=c.pendingProps,fe=F.context,Z=f.contextType,typeof Z=="object"&&Z!==null?Z=Dr(Z):(Z=mr(f)?cs:Xt.current,Z=gi(c,Z));var ve=f.getDerivedStateFromProps;(me=typeof ve=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(Q!==pe||fe!==Z)&&S2(c,F,y,Z),Sa=!1,fe=c.memoizedState,F.state=fe,Ud(c,y,F,k);var Se=c.memoizedState;Q!==pe||fe!==Se||fr.current||Sa?(typeof ve=="function"&&(ip(c,f,ve,y),Se=c.memoizedState),(ie=Sa||w2(c,f,ie,y,fe,Se,Z)||!1)?(me||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(y,Se,Z),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(y,Se,Z)),typeof F.componentDidUpdate=="function"&&(c.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof F.componentDidUpdate!="function"||Q===o.memoizedProps&&fe===o.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&fe===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Se),F.props=y,F.state=Se,F.context=Z,y=ie):(typeof F.componentDidUpdate!="function"||Q===o.memoizedProps&&fe===o.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&fe===o.memoizedState||(c.flags|=1024),y=!1)}return up(o,c,f,y,_,k)}function up(o,c,f,y,k,_){M2(o,c);var F=(c.flags&128)!==0;if(!y&&!F)return k&&q1(c,f,!1),Bn(o,c,_);y=c.stateNode,E8.current=c;var Q=F&&typeof f.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,o!==null&&F?(c.child=ji(c,o.child,null,_),c.child=ji(c,null,Q,_)):sr(o,c,Q,_),c.memoizedState=y.state,k&&q1(c,f,!0),c.child}function $2(o){var c=o.stateNode;c.pendingContext?D1(o,c.pendingContext,c.pendingContext!==c.context):c.context&&D1(o,c.context,!1),Vm(o,c.containerInfo)}function L2(o,c,f,y,k){return bi(),zm(k),c.flags|=256,sr(o,c,f,y),c.child}var hp={dehydrated:null,treeContext:null,retryLane:0};function fp(o){return{baseLanes:o,cachePool:null,transitions:null}}function D2(o,c,f){var y=c.pendingProps,k=xt.current,_=!1,F=(c.flags&128)!==0,Q;if((Q=F)||(Q=o!==null&&o.memoizedState===null?!1:(k&2)!==0),Q?(_=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(k|=1),at(xt,k&1),o===null)return qm(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(F=y.children,o=y.fallback,_?(y=c.mode,_=c.child,F={mode:"hidden",children:F},(y&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=F):_=du(F,y,0,null),o=vs(o,y,f,null),_.return=c,o.return=c,_.sibling=o,c.child=_,c.child.memoizedState=fp(f),c.memoizedState=hp,o):mp(c,F));if(k=o.memoizedState,k!==null&&(Q=k.dehydrated,Q!==null))return _8(o,c,F,y,Q,k,f);if(_){_=y.fallback,F=c.mode,k=o.child,Q=k.sibling;var Z={mode:"hidden",children:y.children};return(F&1)===0&&c.child!==k?(y=c.child,y.childLanes=0,y.pendingProps=Z,c.deletions=null):(y=_a(k,Z),y.subtreeFlags=k.subtreeFlags&14680064),Q!==null?_=_a(Q,_):(_=vs(_,F,f,null),_.flags|=2),_.return=c,y.return=c,y.sibling=_,c.child=y,y=_,_=c.child,F=o.child.memoizedState,F=F===null?fp(f):{baseLanes:F.baseLanes|f,cachePool:null,transitions:F.transitions},_.memoizedState=F,_.childLanes=o.childLanes&~f,c.memoizedState=hp,y}return _=o.child,o=_.sibling,y=_a(_,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=f),y.return=c,y.sibling=null,o!==null&&(f=c.deletions,f===null?(c.deletions=[o],c.flags|=16):f.push(o)),c.child=y,c.memoizedState=null,y}function mp(o,c){return c=du({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Xd(o,c,f,y){return y!==null&&zm(y),ji(c,o.child,null,f),o=mp(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function _8(o,c,f,y,k,_,F){if(f)return c.flags&256?(c.flags&=-257,y=lp(Error(n(422))),Xd(o,c,F,y)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(_=y.fallback,k=c.mode,y=du({mode:"visible",children:y.children},k,0,null),_=vs(_,k,F,null),_.flags|=2,y.return=c,_.return=c,y.sibling=_,c.child=y,(c.mode&1)!==0&&ji(c,o.child,null,F),c.child.memoizedState=fp(F),c.memoizedState=hp,_);if((c.mode&1)===0)return Xd(o,c,F,null);if(k.data==="$!"){if(y=k.nextSibling&&k.nextSibling.dataset,y)var Q=y.dgst;return y=Q,_=Error(n(419)),y=lp(_,y,void 0),Xd(o,c,F,y)}if(Q=(F&o.childLanes)!==0,pr||Q){if(y=Bt,y!==null){switch(F&-F){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(y.suspendedLanes|F))!==0?0:k,k!==0&&k!==_.retryLane&&(_.retryLane=k,qn(o,k),ln(y,o,k,-1))}return Ep(),y=lp(Error(n(421))),Xd(o,c,F,y)}return k.data==="$?"?(c.flags|=128,c.child=o.child,c=W8.bind(null,o),k._reactRetry=c,null):(o=_.treeContext,Ar=ba(k.nextSibling),Cr=c,ht=!0,nn=null,o!==null&&($r[Lr++]=Dn,$r[Lr++]=Fn,$r[Lr++]=ds,Dn=o.id,Fn=o.overflow,ds=c),c=mp(c,y.children),c.flags|=4096,c)}function F2(o,c,f){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),Hm(o.return,c,f)}function pp(o,c,f,y,k){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:k}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=y,_.tail=f,_.tailMode=k)}function q2(o,c,f){var y=c.pendingProps,k=y.revealOrder,_=y.tail;if(sr(o,c,y.children,f),y=xt.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&F2(o,f,c);else if(o.tag===19)F2(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(at(xt,y),(c.mode&1)===0)c.memoizedState=null;else switch(k){case"forwards":for(f=c.child,k=null;f!==null;)o=f.alternate,o!==null&&Wd(o)===null&&(k=f),f=f.sibling;f=k,f===null?(k=c.child,c.child=null):(k=f.sibling,f.sibling=null),pp(c,!1,k,f,_);break;case"backwards":for(f=null,k=c.child,c.child=null;k!==null;){if(o=k.alternate,o!==null&&Wd(o)===null){c.child=k;break}o=k.sibling,k.sibling=f,f=k,k=o}pp(c,!0,f,null,_);break;case"together":pp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Jd(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Bn(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),ps|=c.lanes,(f&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,f=_a(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=_a(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function T8(o,c,f){switch(c.tag){case 3:$2(c),bi();break;case 5:e2(c);break;case 1:mr(c.type)&&Md(c);break;case 4:Vm(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,k=c.memoizedProps.value;at(qd,y._currentValue),y._currentValue=k;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(at(xt,xt.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?D2(o,c,f):(at(xt,xt.current&1),o=Bn(o,c,f),o!==null?o.sibling:null);at(xt,xt.current&1);break;case 19:if(y=(f&c.childLanes)!==0,(o.flags&128)!==0){if(y)return q2(o,c,f);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),at(xt,xt.current),y)break;return null;case 22:case 23:return c.lanes=0,R2(o,c,f)}return Bn(o,c,f)}var z2,xp,B2,U2;z2=function(o,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},xp=function(){},B2=function(o,c,f,y){var k=o.memoizedProps;if(k!==y){o=c.stateNode,fs(wn.current);var _=null;switch(f){case"input":k=je(o,k),y=je(o,y),_=[];break;case"select":k=L({},k,{value:void 0}),y=L({},y,{value:void 0}),_=[];break;case"textarea":k=en(o,k),y=en(o,y),_=[];break;default:typeof k.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=_d)}Yf(f,y);var F;f=null;for(ie in k)if(!y.hasOwnProperty(ie)&&k.hasOwnProperty(ie)&&k[ie]!=null)if(ie==="style"){var Q=k[ie];for(F in Q)Q.hasOwnProperty(F)&&(f||(f={}),f[F]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(s.hasOwnProperty(ie)?_||(_=[]):(_=_||[]).push(ie,null));for(ie in y){var Z=y[ie];if(Q=k!=null?k[ie]:void 0,y.hasOwnProperty(ie)&&Z!==Q&&(Z!=null||Q!=null))if(ie==="style")if(Q){for(F in Q)!Q.hasOwnProperty(F)||Z&&Z.hasOwnProperty(F)||(f||(f={}),f[F]="");for(F in Z)Z.hasOwnProperty(F)&&Q[F]!==Z[F]&&(f||(f={}),f[F]=Z[F])}else f||(_||(_=[]),_.push(ie,f)),f=Z;else ie==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Q=Q?Q.__html:void 0,Z!=null&&Q!==Z&&(_=_||[]).push(ie,Z)):ie==="children"?typeof Z!="string"&&typeof Z!="number"||(_=_||[]).push(ie,""+Z):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(s.hasOwnProperty(ie)?(Z!=null&&ie==="onScroll"&&ct("scroll",o),_||Q===Z||(_=[])):(_=_||[]).push(ie,Z))}f&&(_=_||[]).push("style",f);var ie=_;(c.updateQueue=ie)&&(c.flags|=4)}},U2=function(o,c,f,y){f!==y&&(c.flags|=4)};function Cl(o,c){if(!ht)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Zt(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,y=0;if(c)for(var k=o.child;k!==null;)f|=k.lanes|k.childLanes,y|=k.subtreeFlags&14680064,y|=k.flags&14680064,k.return=o,k=k.sibling;else for(k=o.child;k!==null;)f|=k.lanes|k.childLanes,y|=k.subtreeFlags,y|=k.flags,k.return=o,k=k.sibling;return o.subtreeFlags|=y,o.childLanes=f,c}function R8(o,c,f){var y=c.pendingProps;switch(Dm(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(c),null;case 1:return mr(c.type)&&Rd(),Zt(c),null;case 3:return y=c.stateNode,Si(),dt(fr),dt(Xt),Xm(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(Dd(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,nn!==null&&(Ap(nn),nn=null))),xp(o,c),Zt(c),null;case 5:Qm(c);var k=fs(jl.current);if(f=c.type,o!==null&&c.stateNode!=null)B2(o,c,f,y,k),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(n(166));return Zt(c),null}if(o=fs(wn.current),Dd(c)){y=c.stateNode,f=c.type;var _=c.memoizedProps;switch(y[jn]=c,y[xl]=_,o=(c.mode&1)!==0,f){case"dialog":ct("cancel",y),ct("close",y);break;case"iframe":case"object":case"embed":ct("load",y);break;case"video":case"audio":for(k=0;k<fl.length;k++)ct(fl[k],y);break;case"source":ct("error",y);break;case"img":case"image":case"link":ct("error",y),ct("load",y);break;case"details":ct("toggle",y);break;case"input":tt(y,_),ct("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!_.multiple},ct("invalid",y);break;case"textarea":si(y,_),ct("invalid",y)}Yf(f,_),k=null;for(var F in _)if(_.hasOwnProperty(F)){var Q=_[F];F==="children"?typeof Q=="string"?y.textContent!==Q&&(_.suppressHydrationWarning!==!0&&Ed(y.textContent,Q,o),k=["children",Q]):typeof Q=="number"&&y.textContent!==""+Q&&(_.suppressHydrationWarning!==!0&&Ed(y.textContent,Q,o),k=["children",""+Q]):s.hasOwnProperty(F)&&Q!=null&&F==="onScroll"&&ct("scroll",y)}switch(f){case"input":$e(y),Zr(y,_,!0);break;case"textarea":$e(y),Go(y);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(y.onclick=_d)}y=k,c.updateQueue=y,y!==null&&(c.flags|=4)}else{F=k.nodeType===9?k:k.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ow(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=F.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=F.createElement(f,{is:y.is}):(o=F.createElement(f),f==="select"&&(F=o,y.multiple?F.multiple=!0:y.size&&(F.size=y.size))):o=F.createElementNS(o,f),o[jn]=c,o[xl]=y,z2(o,c,!1,!1),c.stateNode=o;e:{switch(F=Xf(f,y),f){case"dialog":ct("cancel",o),ct("close",o),k=y;break;case"iframe":case"object":case"embed":ct("load",o),k=y;break;case"video":case"audio":for(k=0;k<fl.length;k++)ct(fl[k],o);k=y;break;case"source":ct("error",o),k=y;break;case"img":case"image":case"link":ct("error",o),ct("load",o),k=y;break;case"details":ct("toggle",o),k=y;break;case"input":tt(o,y),k=je(o,y),ct("invalid",o);break;case"option":k=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},k=L({},y,{value:void 0}),ct("invalid",o);break;case"textarea":si(o,y),k=en(o,y),ct("invalid",o);break;default:k=y}Yf(f,k),Q=k;for(_ in Q)if(Q.hasOwnProperty(_)){var Z=Q[_];_==="style"?Tw(o,Z):_==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&Ew(o,Z)):_==="children"?typeof Z=="string"?(f!=="textarea"||Z!=="")&&Vo(o,Z):typeof Z=="number"&&Vo(o,""+Z):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?Z!=null&&_==="onScroll"&&ct("scroll",o):Z!=null&&O(o,_,Z,F))}switch(f){case"input":$e(o),Zr(o,y,!1);break;case"textarea":$e(o),Go(o);break;case"option":y.value!=null&&o.setAttribute("value",""+te(y.value));break;case"select":o.multiple=!!y.multiple,_=y.value,_!=null?hr(o,!!y.multiple,_,!1):y.defaultValue!=null&&hr(o,!!y.multiple,y.defaultValue,!0);break;default:typeof k.onClick=="function"&&(o.onclick=_d)}switch(f){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Zt(c),null;case 6:if(o&&c.stateNode!=null)U2(o,c,o.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(f=fs(jl.current),fs(wn.current),Dd(c)){if(y=c.stateNode,f=c.memoizedProps,y[jn]=c,(_=y.nodeValue!==f)&&(o=Cr,o!==null))switch(o.tag){case 3:Ed(y.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Ed(y.nodeValue,f,(o.mode&1)!==0)}_&&(c.flags|=4)}else y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[jn]=c,c.stateNode=y}return Zt(c),null;case 13:if(dt(xt),y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(ht&&Ar!==null&&(c.mode&1)!==0&&(c.flags&128)===0)K1(),bi(),c.flags|=98560,_=!1;else if(_=Dd(c),y!==null&&y.dehydrated!==null){if(o===null){if(!_)throw Error(n(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[jn]=c}else bi(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Zt(c),_=!1}else nn!==null&&(Ap(nn),nn=null),_=!0;if(!_)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(xt.current&1)!==0?Tt===0&&(Tt=3):Ep())),c.updateQueue!==null&&(c.flags|=4),Zt(c),null);case 4:return Si(),xp(o,c),o===null&&ml(c.stateNode.containerInfo),Zt(c),null;case 10:return Wm(c.type._context),Zt(c),null;case 17:return mr(c.type)&&Rd(),Zt(c),null;case 19:if(dt(xt),_=c.memoizedState,_===null)return Zt(c),null;if(y=(c.flags&128)!==0,F=_.rendering,F===null)if(y)Cl(_,!1);else{if(Tt!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(F=Wd(o),F!==null){for(c.flags|=128,Cl(_,!1),y=F.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=f,f=c.child;f!==null;)_=f,o=y,_.flags&=14680066,F=_.alternate,F===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=F.childLanes,_.lanes=F.lanes,_.child=F.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=F.memoizedProps,_.memoizedState=F.memoizedState,_.updateQueue=F.updateQueue,_.type=F.type,o=F.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return at(xt,xt.current&1|2),c.child}o=o.sibling}_.tail!==null&&St()>Pi&&(c.flags|=128,y=!0,Cl(_,!1),c.lanes=4194304)}else{if(!y)if(o=Wd(F),o!==null){if(c.flags|=128,y=!0,f=o.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),Cl(_,!0),_.tail===null&&_.tailMode==="hidden"&&!F.alternate&&!ht)return Zt(c),null}else 2*St()-_.renderingStartTime>Pi&&f!==1073741824&&(c.flags|=128,y=!0,Cl(_,!1),c.lanes=4194304);_.isBackwards?(F.sibling=c.child,c.child=F):(f=_.last,f!==null?f.sibling=F:c.child=F,_.last=F)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=St(),c.sibling=null,f=xt.current,at(xt,y?f&1|2:f&1),c):(Zt(c),null);case 22:case 23:return Op(),y=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(Pr&1073741824)!==0&&(Zt(c),c.subtreeFlags&6&&(c.flags|=8192)):Zt(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function M8(o,c){switch(Dm(c),c.tag){case 1:return mr(c.type)&&Rd(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Si(),dt(fr),dt(Xt),Xm(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Qm(c),null;case 13:if(dt(xt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));bi()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return dt(xt),null;case 4:return Si(),null;case 10:return Wm(c.type._context),null;case 22:case 23:return Op(),null;case 24:return null;default:return null}}var Zd=!1,er=!1,I8=typeof WeakSet=="function"?WeakSet:Set,we=null;function Ci(o,c){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(y){vt(o,c,y)}else f.current=null}function gp(o,c,f){try{f()}catch(y){vt(o,c,y)}}var W2=!1;function $8(o,c){if(Om=vd,o=w1(),jm(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var k=y.anchorOffset,_=y.focusNode;y=y.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var F=0,Q=-1,Z=-1,ie=0,me=0,pe=o,fe=null;t:for(;;){for(var ve;pe!==f||k!==0&&pe.nodeType!==3||(Q=F+k),pe!==_||y!==0&&pe.nodeType!==3||(Z=F+y),pe.nodeType===3&&(F+=pe.nodeValue.length),(ve=pe.firstChild)!==null;)fe=pe,pe=ve;for(;;){if(pe===o)break t;if(fe===f&&++ie===k&&(Q=F),fe===_&&++me===y&&(Z=F),(ve=pe.nextSibling)!==null)break;pe=fe,fe=pe.parentNode}pe=ve}f=Q===-1||Z===-1?null:{start:Q,end:Z}}else f=null}f=f||{start:0,end:0}}else f=null;for(Em={focusedElem:o,selectionRange:f},vd=!1,we=c;we!==null;)if(c=we,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,we=o;else for(;we!==null;){c=we;try{var Se=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ce=Se.memoizedProps,kt=Se.memoizedState,ne=c.stateNode,ee=ne.getSnapshotBeforeUpdate(c.elementType===c.type?Ce:an(c.type,Ce),kt);ne.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ae=c.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(xe){vt(c,c.return,xe)}if(o=c.sibling,o!==null){o.return=c.return,we=o;break}we=c.return}return Se=W2,W2=!1,Se}function Al(o,c,f){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var k=y=y.next;do{if((k.tag&o)===o){var _=k.destroy;k.destroy=void 0,_!==void 0&&gp(c,f,_)}k=k.next}while(k!==y)}}function eu(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&o)===o){var y=f.create;f.destroy=y()}f=f.next}while(f!==c)}}function yp(o){var c=o.ref;if(c!==null){var f=o.stateNode;switch(o.tag){case 5:o=f;break;default:o=f}typeof c=="function"?c(o):c.current=o}}function H2(o){var c=o.alternate;c!==null&&(o.alternate=null,H2(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[jn],delete c[xl],delete c[Mm],delete c[y8],delete c[v8])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function K2(o){return o.tag===5||o.tag===3||o.tag===4}function G2(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||K2(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function vp(o,c,f){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(o,c):f.insertBefore(o,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(o,f)):(c=f,c.appendChild(o)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=_d));else if(y!==4&&(o=o.child,o!==null))for(vp(o,c,f),o=o.sibling;o!==null;)vp(o,c,f),o=o.sibling}function bp(o,c,f){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(bp(o,c,f),o=o.sibling;o!==null;)bp(o,c,f),o=o.sibling}var Vt=null,sn=!1;function Ca(o,c,f){for(f=f.child;f!==null;)V2(o,c,f),f=f.sibling}function V2(o,c,f){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(fd,f)}catch{}switch(f.tag){case 5:er||Ci(f,c);case 6:var y=Vt,k=sn;Vt=null,Ca(o,c,f),Vt=y,sn=k,Vt!==null&&(sn?(o=Vt,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):Vt.removeChild(f.stateNode));break;case 18:Vt!==null&&(sn?(o=Vt,f=f.stateNode,o.nodeType===8?Rm(o.parentNode,f):o.nodeType===1&&Rm(o,f),sl(o)):Rm(Vt,f.stateNode));break;case 4:y=Vt,k=sn,Vt=f.stateNode.containerInfo,sn=!0,Ca(o,c,f),Vt=y,sn=k;break;case 0:case 11:case 14:case 15:if(!er&&(y=f.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){k=y=y.next;do{var _=k,F=_.destroy;_=_.tag,F!==void 0&&((_&2)!==0||(_&4)!==0)&&gp(f,c,F),k=k.next}while(k!==y)}Ca(o,c,f);break;case 1:if(!er&&(Ci(f,c),y=f.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=f.memoizedProps,y.state=f.memoizedState,y.componentWillUnmount()}catch(Q){vt(f,c,Q)}Ca(o,c,f);break;case 21:Ca(o,c,f);break;case 22:f.mode&1?(er=(y=er)||f.memoizedState!==null,Ca(o,c,f),er=y):Ca(o,c,f);break;default:Ca(o,c,f)}}function Q2(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new I8),c.forEach(function(y){var k=H8.bind(null,o,y);f.has(y)||(f.add(y),y.then(k,k))})}}function on(o,c){var f=c.deletions;if(f!==null)for(var y=0;y<f.length;y++){var k=f[y];try{var _=o,F=c,Q=F;e:for(;Q!==null;){switch(Q.tag){case 5:Vt=Q.stateNode,sn=!1;break e;case 3:Vt=Q.stateNode.containerInfo,sn=!0;break e;case 4:Vt=Q.stateNode.containerInfo,sn=!0;break e}Q=Q.return}if(Vt===null)throw Error(n(160));V2(_,F,k),Vt=null,sn=!1;var Z=k.alternate;Z!==null&&(Z.return=null),k.return=null}catch(ie){vt(k,c,ie)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Y2(c,o),c=c.sibling}function Y2(o,c){var f=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(on(c,o),Sn(o),y&4){try{Al(3,o,o.return),eu(3,o)}catch(Ce){vt(o,o.return,Ce)}try{Al(5,o,o.return)}catch(Ce){vt(o,o.return,Ce)}}break;case 1:on(c,o),Sn(o),y&512&&f!==null&&Ci(f,f.return);break;case 5:if(on(c,o),Sn(o),y&512&&f!==null&&Ci(f,f.return),o.flags&32){var k=o.stateNode;try{Vo(k,"")}catch(Ce){vt(o,o.return,Ce)}}if(y&4&&(k=o.stateNode,k!=null)){var _=o.memoizedProps,F=f!==null?f.memoizedProps:_,Q=o.type,Z=o.updateQueue;if(o.updateQueue=null,Z!==null)try{Q==="input"&&_.type==="radio"&&_.name!=null&&yt(k,_),Xf(Q,F);var ie=Xf(Q,_);for(F=0;F<Z.length;F+=2){var me=Z[F],pe=Z[F+1];me==="style"?Tw(k,pe):me==="dangerouslySetInnerHTML"?Ew(k,pe):me==="children"?Vo(k,pe):O(k,me,pe,ie)}switch(Q){case"input":qt(k,_);break;case"textarea":Ko(k,_);break;case"select":var fe=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!_.multiple;var ve=_.value;ve!=null?hr(k,!!_.multiple,ve,!1):fe!==!!_.multiple&&(_.defaultValue!=null?hr(k,!!_.multiple,_.defaultValue,!0):hr(k,!!_.multiple,_.multiple?[]:"",!1))}k[xl]=_}catch(Ce){vt(o,o.return,Ce)}}break;case 6:if(on(c,o),Sn(o),y&4){if(o.stateNode===null)throw Error(n(162));k=o.stateNode,_=o.memoizedProps;try{k.nodeValue=_}catch(Ce){vt(o,o.return,Ce)}}break;case 3:if(on(c,o),Sn(o),y&4&&f!==null&&f.memoizedState.isDehydrated)try{sl(c.containerInfo)}catch(Ce){vt(o,o.return,Ce)}break;case 4:on(c,o),Sn(o);break;case 13:on(c,o),Sn(o),k=o.child,k.flags&8192&&(_=k.memoizedState!==null,k.stateNode.isHidden=_,!_||k.alternate!==null&&k.alternate.memoizedState!==null||(Np=St())),y&4&&Q2(o);break;case 22:if(me=f!==null&&f.memoizedState!==null,o.mode&1?(er=(ie=er)||me,on(c,o),er=ie):on(c,o),Sn(o),y&8192){if(ie=o.memoizedState!==null,(o.stateNode.isHidden=ie)&&!me&&(o.mode&1)!==0)for(we=o,me=o.child;me!==null;){for(pe=we=me;we!==null;){switch(fe=we,ve=fe.child,fe.tag){case 0:case 11:case 14:case 15:Al(4,fe,fe.return);break;case 1:Ci(fe,fe.return);var Se=fe.stateNode;if(typeof Se.componentWillUnmount=="function"){y=fe,f=fe.return;try{c=y,Se.props=c.memoizedProps,Se.state=c.memoizedState,Se.componentWillUnmount()}catch(Ce){vt(y,f,Ce)}}break;case 5:Ci(fe,fe.return);break;case 22:if(fe.memoizedState!==null){Z2(pe);continue}}ve!==null?(ve.return=fe,we=ve):Z2(pe)}me=me.sibling}e:for(me=null,pe=o;;){if(pe.tag===5){if(me===null){me=pe;try{k=pe.stateNode,ie?(_=k.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(Q=pe.stateNode,Z=pe.memoizedProps.style,F=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,Q.style.display=_w("display",F))}catch(Ce){vt(o,o.return,Ce)}}}else if(pe.tag===6){if(me===null)try{pe.stateNode.nodeValue=ie?"":pe.memoizedProps}catch(Ce){vt(o,o.return,Ce)}}else if((pe.tag!==22&&pe.tag!==23||pe.memoizedState===null||pe===o)&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===o)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===o)break e;me===pe&&(me=null),pe=pe.return}me===pe&&(me=null),pe.sibling.return=pe.return,pe=pe.sibling}}break;case 19:on(c,o),Sn(o),y&4&&Q2(o);break;case 21:break;default:on(c,o),Sn(o)}}function Sn(o){var c=o.flags;if(c&2){try{e:{for(var f=o.return;f!==null;){if(K2(f)){var y=f;break e}f=f.return}throw Error(n(160))}switch(y.tag){case 5:var k=y.stateNode;y.flags&32&&(Vo(k,""),y.flags&=-33);var _=G2(o);bp(o,_,k);break;case 3:case 4:var F=y.stateNode.containerInfo,Q=G2(o);vp(o,Q,F);break;default:throw Error(n(161))}}catch(Z){vt(o,o.return,Z)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function L8(o,c,f){we=o,X2(o)}function X2(o,c,f){for(var y=(o.mode&1)!==0;we!==null;){var k=we,_=k.child;if(k.tag===22&&y){var F=k.memoizedState!==null||Zd;if(!F){var Q=k.alternate,Z=Q!==null&&Q.memoizedState!==null||er;Q=Zd;var ie=er;if(Zd=F,(er=Z)&&!ie)for(we=k;we!==null;)F=we,Z=F.child,F.tag===22&&F.memoizedState!==null?eN(k):Z!==null?(Z.return=F,we=Z):eN(k);for(;_!==null;)we=_,X2(_),_=_.sibling;we=k,Zd=Q,er=ie}J2(o)}else(k.subtreeFlags&8772)!==0&&_!==null?(_.return=k,we=_):J2(o)}}function J2(o){for(;we!==null;){var c=we;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:er||eu(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!er)if(f===null)y.componentDidMount();else{var k=c.elementType===c.type?f.memoizedProps:an(c.type,f.memoizedProps);y.componentDidUpdate(k,f.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var _=c.updateQueue;_!==null&&Z1(c,_,y);break;case 3:var F=c.updateQueue;if(F!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}Z1(c,F,f)}break;case 5:var Q=c.stateNode;if(f===null&&c.flags&4){f=Q;var Z=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&f.focus();break;case"img":Z.src&&(f.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ie=c.alternate;if(ie!==null){var me=ie.memoizedState;if(me!==null){var pe=me.dehydrated;pe!==null&&sl(pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}er||c.flags&512&&yp(c)}catch(fe){vt(c,c.return,fe)}}if(c===o){we=null;break}if(f=c.sibling,f!==null){f.return=c.return,we=f;break}we=c.return}}function Z2(o){for(;we!==null;){var c=we;if(c===o){we=null;break}var f=c.sibling;if(f!==null){f.return=c.return,we=f;break}we=c.return}}function eN(o){for(;we!==null;){var c=we;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{eu(4,c)}catch(Z){vt(c,f,Z)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var k=c.return;try{y.componentDidMount()}catch(Z){vt(c,k,Z)}}var _=c.return;try{yp(c)}catch(Z){vt(c,_,Z)}break;case 5:var F=c.return;try{yp(c)}catch(Z){vt(c,F,Z)}}}catch(Z){vt(c,c.return,Z)}if(c===o){we=null;break}var Q=c.sibling;if(Q!==null){Q.return=c.return,we=Q;break}we=c.return}}var D8=Math.ceil,tu=N.ReactCurrentDispatcher,jp=N.ReactCurrentOwner,qr=N.ReactCurrentBatchConfig,He=0,Bt=null,Pt=null,Qt=0,Pr=0,Ai=ja(0),Tt=0,Pl=null,ps=0,ru=0,wp=0,Ol=null,xr=null,Np=0,Pi=1/0,Un=null,nu=!1,Sp=null,Aa=null,au=!1,Pa=null,su=0,El=0,kp=null,iu=-1,ou=0;function ir(){return(He&6)!==0?St():iu!==-1?iu:iu=St()}function Oa(o){return(o.mode&1)===0?1:(He&2)!==0&&Qt!==0?Qt&-Qt:j8.transition!==null?(ou===0&&(ou=Gw()),ou):(o=et,o!==0||(o=window.event,o=o===void 0?16:r1(o.type)),o)}function ln(o,c,f,y){if(50<El)throw El=0,kp=null,Error(n(185));el(o,f,y),((He&2)===0||o!==Bt)&&(o===Bt&&((He&2)===0&&(ru|=f),Tt===4&&Ea(o,Qt)),gr(o,y),f===1&&He===0&&(c.mode&1)===0&&(Pi=St()+500,Id&&Na()))}function gr(o,c){var f=o.callbackNode;jT(o,c);var y=xd(o,o===Bt?Qt:0);if(y===0)f!==null&&Ww(f),o.callbackNode=null,o.callbackPriority=0;else if(c=y&-y,o.callbackPriority!==c){if(f!=null&&Ww(f),c===1)o.tag===0?b8(rN.bind(null,o)):z1(rN.bind(null,o)),x8(function(){(He&6)===0&&Na()}),f=null;else{switch(Vw(y)){case 1:f=am;break;case 4:f=Hw;break;case 16:f=hd;break;case 536870912:f=Kw;break;default:f=hd}f=dN(f,tN.bind(null,o))}o.callbackPriority=c,o.callbackNode=f}}function tN(o,c){if(iu=-1,ou=0,(He&6)!==0)throw Error(n(327));var f=o.callbackNode;if(Oi()&&o.callbackNode!==f)return null;var y=xd(o,o===Bt?Qt:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||c)c=lu(o,y);else{c=y;var k=He;He|=2;var _=aN();(Bt!==o||Qt!==c)&&(Un=null,Pi=St()+500,gs(o,c));do try{z8();break}catch(Q){nN(o,Q)}while(!0);Um(),tu.current=_,He=k,Pt!==null?c=0:(Bt=null,Qt=0,c=Tt)}if(c!==0){if(c===2&&(k=sm(o),k!==0&&(y=k,c=Cp(o,k))),c===1)throw f=Pl,gs(o,0),Ea(o,y),gr(o,St()),f;if(c===6)Ea(o,y);else{if(k=o.current.alternate,(y&30)===0&&!F8(k)&&(c=lu(o,y),c===2&&(_=sm(o),_!==0&&(y=_,c=Cp(o,_))),c===1))throw f=Pl,gs(o,0),Ea(o,y),gr(o,St()),f;switch(o.finishedWork=k,o.finishedLanes=y,c){case 0:case 1:throw Error(n(345));case 2:ys(o,xr,Un);break;case 3:if(Ea(o,y),(y&130023424)===y&&(c=Np+500-St(),10<c)){if(xd(o,0)!==0)break;if(k=o.suspendedLanes,(k&y)!==y){ir(),o.pingedLanes|=o.suspendedLanes&k;break}o.timeoutHandle=Tm(ys.bind(null,o,xr,Un),c);break}ys(o,xr,Un);break;case 4:if(Ea(o,y),(y&4194240)===y)break;for(c=o.eventTimes,k=-1;0<y;){var F=31-tn(y);_=1<<F,F=c[F],F>k&&(k=F),y&=~_}if(y=k,y=St()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*D8(y/1960))-y,10<y){o.timeoutHandle=Tm(ys.bind(null,o,xr,Un),y);break}ys(o,xr,Un);break;case 5:ys(o,xr,Un);break;default:throw Error(n(329))}}}return gr(o,St()),o.callbackNode===f?tN.bind(null,o):null}function Cp(o,c){var f=Ol;return o.current.memoizedState.isDehydrated&&(gs(o,c).flags|=256),o=lu(o,c),o!==2&&(c=xr,xr=f,c!==null&&Ap(c)),o}function Ap(o){xr===null?xr=o:xr.push.apply(xr,o)}function F8(o){for(var c=o;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var y=0;y<f.length;y++){var k=f[y],_=k.getSnapshot;k=k.value;try{if(!rn(_(),k))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ea(o,c){for(c&=~wp,c&=~ru,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var f=31-tn(c),y=1<<f;o[f]=-1,c&=~y}}function rN(o){if((He&6)!==0)throw Error(n(327));Oi();var c=xd(o,0);if((c&1)===0)return gr(o,St()),null;var f=lu(o,c);if(o.tag!==0&&f===2){var y=sm(o);y!==0&&(c=y,f=Cp(o,y))}if(f===1)throw f=Pl,gs(o,0),Ea(o,c),gr(o,St()),f;if(f===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,ys(o,xr,Un),gr(o,St()),null}function Pp(o,c){var f=He;He|=1;try{return o(c)}finally{He=f,He===0&&(Pi=St()+500,Id&&Na())}}function xs(o){Pa!==null&&Pa.tag===0&&(He&6)===0&&Oi();var c=He;He|=1;var f=qr.transition,y=et;try{if(qr.transition=null,et=1,o)return o()}finally{et=y,qr.transition=f,He=c,(He&6)===0&&Na()}}function Op(){Pr=Ai.current,dt(Ai)}function gs(o,c){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,p8(f)),Pt!==null)for(f=Pt.return;f!==null;){var y=f;switch(Dm(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Rd();break;case 3:Si(),dt(fr),dt(Xt),Xm();break;case 5:Qm(y);break;case 4:Si();break;case 13:dt(xt);break;case 19:dt(xt);break;case 10:Wm(y.type._context);break;case 22:case 23:Op()}f=f.return}if(Bt=o,Pt=o=_a(o.current,null),Qt=Pr=c,Tt=0,Pl=null,wp=ru=ps=0,xr=Ol=null,hs!==null){for(c=0;c<hs.length;c++)if(f=hs[c],y=f.interleaved,y!==null){f.interleaved=null;var k=y.next,_=f.pending;if(_!==null){var F=_.next;_.next=k,y.next=F}f.pending=y}hs=null}return o}function nN(o,c){do{var f=Pt;try{if(Um(),Hd.current=Qd,Kd){for(var y=gt.memoizedState;y!==null;){var k=y.queue;k!==null&&(k.pending=null),y=y.next}Kd=!1}if(ms=0,zt=_t=gt=null,wl=!1,Nl=0,jp.current=null,f===null||f.return===null){Tt=1,Pl=c,Pt=null;break}e:{var _=o,F=f.return,Q=f,Z=c;if(c=Qt,Q.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var ie=Z,me=Q,pe=me.tag;if((me.mode&1)===0&&(pe===0||pe===11||pe===15)){var fe=me.alternate;fe?(me.updateQueue=fe.updateQueue,me.memoizedState=fe.memoizedState,me.lanes=fe.lanes):(me.updateQueue=null,me.memoizedState=null)}var ve=P2(F);if(ve!==null){ve.flags&=-257,O2(ve,F,Q,_,c),ve.mode&1&&A2(_,ie,c),c=ve,Z=ie;var Se=c.updateQueue;if(Se===null){var Ce=new Set;Ce.add(Z),c.updateQueue=Ce}else Se.add(Z);break e}else{if((c&1)===0){A2(_,ie,c),Ep();break e}Z=Error(n(426))}}else if(ht&&Q.mode&1){var kt=P2(F);if(kt!==null){(kt.flags&65536)===0&&(kt.flags|=256),O2(kt,F,Q,_,c),zm(ki(Z,Q));break e}}_=Z=ki(Z,Q),Tt!==4&&(Tt=2),Ol===null?Ol=[_]:Ol.push(_),_=F;do{switch(_.tag){case 3:_.flags|=65536,c&=-c,_.lanes|=c;var ne=k2(_,Z,c);J1(_,ne);break e;case 1:Q=Z;var ee=_.type,ae=_.stateNode;if((_.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(Aa===null||!Aa.has(ae)))){_.flags|=65536,c&=-c,_.lanes|=c;var xe=C2(_,Q,c);J1(_,xe);break e}}_=_.return}while(_!==null)}iN(f)}catch(Ae){c=Ae,Pt===f&&f!==null&&(Pt=f=f.return);continue}break}while(!0)}function aN(){var o=tu.current;return tu.current=Qd,o===null?Qd:o}function Ep(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Bt===null||(ps&268435455)===0&&(ru&268435455)===0||Ea(Bt,Qt)}function lu(o,c){var f=He;He|=2;var y=aN();(Bt!==o||Qt!==c)&&(Un=null,gs(o,c));do try{q8();break}catch(k){nN(o,k)}while(!0);if(Um(),He=f,tu.current=y,Pt!==null)throw Error(n(261));return Bt=null,Qt=0,Tt}function q8(){for(;Pt!==null;)sN(Pt)}function z8(){for(;Pt!==null&&!hT();)sN(Pt)}function sN(o){var c=cN(o.alternate,o,Pr);o.memoizedProps=o.pendingProps,c===null?iN(o):Pt=c,jp.current=null}function iN(o){var c=o;do{var f=c.alternate;if(o=c.return,(c.flags&32768)===0){if(f=R8(f,c,Pr),f!==null){Pt=f;return}}else{if(f=M8(f,c),f!==null){f.flags&=32767,Pt=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Tt=6,Pt=null;return}}if(c=c.sibling,c!==null){Pt=c;return}Pt=c=o}while(c!==null);Tt===0&&(Tt=5)}function ys(o,c,f){var y=et,k=qr.transition;try{qr.transition=null,et=1,B8(o,c,f,y)}finally{qr.transition=k,et=y}return null}function B8(o,c,f,y){do Oi();while(Pa!==null);if((He&6)!==0)throw Error(n(327));f=o.finishedWork;var k=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var _=f.lanes|f.childLanes;if(wT(o,_),o===Bt&&(Pt=Bt=null,Qt=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||au||(au=!0,dN(hd,function(){return Oi(),null})),_=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||_){_=qr.transition,qr.transition=null;var F=et;et=1;var Q=He;He|=4,jp.current=null,$8(o,f),Y2(f,o),l8(Em),vd=!!Om,Em=Om=null,o.current=f,L8(f),fT(),He=Q,et=F,qr.transition=_}else o.current=f;if(au&&(au=!1,Pa=o,su=k),_=o.pendingLanes,_===0&&(Aa=null),xT(f.stateNode),gr(o,St()),c!==null)for(y=o.onRecoverableError,f=0;f<c.length;f++)k=c[f],y(k.value,{componentStack:k.stack,digest:k.digest});if(nu)throw nu=!1,o=Sp,Sp=null,o;return(su&1)!==0&&o.tag!==0&&Oi(),_=o.pendingLanes,(_&1)!==0?o===kp?El++:(El=0,kp=o):El=0,Na(),null}function Oi(){if(Pa!==null){var o=Vw(su),c=qr.transition,f=et;try{if(qr.transition=null,et=16>o?16:o,Pa===null)var y=!1;else{if(o=Pa,Pa=null,su=0,(He&6)!==0)throw Error(n(331));var k=He;for(He|=4,we=o.current;we!==null;){var _=we,F=_.child;if((we.flags&16)!==0){var Q=_.deletions;if(Q!==null){for(var Z=0;Z<Q.length;Z++){var ie=Q[Z];for(we=ie;we!==null;){var me=we;switch(me.tag){case 0:case 11:case 15:Al(8,me,_)}var pe=me.child;if(pe!==null)pe.return=me,we=pe;else for(;we!==null;){me=we;var fe=me.sibling,ve=me.return;if(H2(me),me===ie){we=null;break}if(fe!==null){fe.return=ve,we=fe;break}we=ve}}}var Se=_.alternate;if(Se!==null){var Ce=Se.child;if(Ce!==null){Se.child=null;do{var kt=Ce.sibling;Ce.sibling=null,Ce=kt}while(Ce!==null)}}we=_}}if((_.subtreeFlags&2064)!==0&&F!==null)F.return=_,we=F;else e:for(;we!==null;){if(_=we,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Al(9,_,_.return)}var ne=_.sibling;if(ne!==null){ne.return=_.return,we=ne;break e}we=_.return}}var ee=o.current;for(we=ee;we!==null;){F=we;var ae=F.child;if((F.subtreeFlags&2064)!==0&&ae!==null)ae.return=F,we=ae;else e:for(F=ee;we!==null;){if(Q=we,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:eu(9,Q)}}catch(Ae){vt(Q,Q.return,Ae)}if(Q===F){we=null;break e}var xe=Q.sibling;if(xe!==null){xe.return=Q.return,we=xe;break e}we=Q.return}}if(He=k,Na(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(fd,o)}catch{}y=!0}return y}finally{et=f,qr.transition=c}}return!1}function oN(o,c,f){c=ki(f,c),c=k2(o,c,1),o=ka(o,c,1),c=ir(),o!==null&&(el(o,1,c),gr(o,c))}function vt(o,c,f){if(o.tag===3)oN(o,o,f);else for(;c!==null;){if(c.tag===3){oN(c,o,f);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Aa===null||!Aa.has(y))){o=ki(f,o),o=C2(c,o,1),c=ka(c,o,1),o=ir(),c!==null&&(el(c,1,o),gr(c,o));break}}c=c.return}}function U8(o,c,f){var y=o.pingCache;y!==null&&y.delete(c),c=ir(),o.pingedLanes|=o.suspendedLanes&f,Bt===o&&(Qt&f)===f&&(Tt===4||Tt===3&&(Qt&130023424)===Qt&&500>St()-Np?gs(o,0):wp|=f),gr(o,c)}function lN(o,c){c===0&&((o.mode&1)===0?c=1:(c=pd,pd<<=1,(pd&130023424)===0&&(pd=4194304)));var f=ir();o=qn(o,c),o!==null&&(el(o,c,f),gr(o,f))}function W8(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),lN(o,f)}function H8(o,c){var f=0;switch(o.tag){case 13:var y=o.stateNode,k=o.memoizedState;k!==null&&(f=k.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(c),lN(o,f)}var cN;cN=function(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps||fr.current)pr=!0;else{if((o.lanes&f)===0&&(c.flags&128)===0)return pr=!1,T8(o,c,f);pr=(o.flags&131072)!==0}else pr=!1,ht&&(c.flags&1048576)!==0&&B1(c,Ld,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;Jd(o,c),o=c.pendingProps;var k=gi(c,Xt.current);Ni(c,f),k=ep(null,c,y,o,k,f);var _=tp();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,mr(y)?(_=!0,Md(c)):_=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Gm(c),k.updater=Yd,c.stateNode=k,k._reactInternals=c,op(c,y,o,f),c=up(null,c,y,!0,_,f)):(c.tag=0,ht&&_&&Lm(c),sr(null,c,k,f),c=c.child),c;case 16:y=c.elementType;e:{switch(Jd(o,c),o=c.pendingProps,k=y._init,y=k(y._payload),c.type=y,k=c.tag=G8(y),o=an(y,o),k){case 0:c=dp(null,c,y,o,f);break e;case 1:c=I2(null,c,y,o,f);break e;case 11:c=E2(null,c,y,o,f);break e;case 14:c=_2(null,c,y,an(y.type,o),f);break e}throw Error(n(306,y,""))}return c;case 0:return y=c.type,k=c.pendingProps,k=c.elementType===y?k:an(y,k),dp(o,c,y,k,f);case 1:return y=c.type,k=c.pendingProps,k=c.elementType===y?k:an(y,k),I2(o,c,y,k,f);case 3:e:{if($2(c),o===null)throw Error(n(387));y=c.pendingProps,_=c.memoizedState,k=_.element,X1(o,c),Ud(c,y,null,f);var F=c.memoizedState;if(y=F.element,_.isDehydrated)if(_={element:y,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){k=ki(Error(n(423)),c),c=L2(o,c,y,f,k);break e}else if(y!==k){k=ki(Error(n(424)),c),c=L2(o,c,y,f,k);break e}else for(Ar=ba(c.stateNode.containerInfo.firstChild),Cr=c,ht=!0,nn=null,f=Q1(c,null,y,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(bi(),y===k){c=Bn(o,c,f);break e}sr(o,c,y,f)}c=c.child}return c;case 5:return e2(c),o===null&&qm(c),y=c.type,k=c.pendingProps,_=o!==null?o.memoizedProps:null,F=k.children,_m(y,k)?F=null:_!==null&&_m(y,_)&&(c.flags|=32),M2(o,c),sr(o,c,F,f),c.child;case 6:return o===null&&qm(c),null;case 13:return D2(o,c,f);case 4:return Vm(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=ji(c,null,y,f):sr(o,c,y,f),c.child;case 11:return y=c.type,k=c.pendingProps,k=c.elementType===y?k:an(y,k),E2(o,c,y,k,f);case 7:return sr(o,c,c.pendingProps,f),c.child;case 8:return sr(o,c,c.pendingProps.children,f),c.child;case 12:return sr(o,c,c.pendingProps.children,f),c.child;case 10:e:{if(y=c.type._context,k=c.pendingProps,_=c.memoizedProps,F=k.value,at(qd,y._currentValue),y._currentValue=F,_!==null)if(rn(_.value,F)){if(_.children===k.children&&!fr.current){c=Bn(o,c,f);break e}}else for(_=c.child,_!==null&&(_.return=c);_!==null;){var Q=_.dependencies;if(Q!==null){F=_.child;for(var Z=Q.firstContext;Z!==null;){if(Z.context===y){if(_.tag===1){Z=zn(-1,f&-f),Z.tag=2;var ie=_.updateQueue;if(ie!==null){ie=ie.shared;var me=ie.pending;me===null?Z.next=Z:(Z.next=me.next,me.next=Z),ie.pending=Z}}_.lanes|=f,Z=_.alternate,Z!==null&&(Z.lanes|=f),Hm(_.return,f,c),Q.lanes|=f;break}Z=Z.next}}else if(_.tag===10)F=_.type===c.type?null:_.child;else if(_.tag===18){if(F=_.return,F===null)throw Error(n(341));F.lanes|=f,Q=F.alternate,Q!==null&&(Q.lanes|=f),Hm(F,f,c),F=_.sibling}else F=_.child;if(F!==null)F.return=_;else for(F=_;F!==null;){if(F===c){F=null;break}if(_=F.sibling,_!==null){_.return=F.return,F=_;break}F=F.return}_=F}sr(o,c,k.children,f),c=c.child}return c;case 9:return k=c.type,y=c.pendingProps.children,Ni(c,f),k=Dr(k),y=y(k),c.flags|=1,sr(o,c,y,f),c.child;case 14:return y=c.type,k=an(y,c.pendingProps),k=an(y.type,k),_2(o,c,y,k,f);case 15:return T2(o,c,c.type,c.pendingProps,f);case 17:return y=c.type,k=c.pendingProps,k=c.elementType===y?k:an(y,k),Jd(o,c),c.tag=1,mr(y)?(o=!0,Md(c)):o=!1,Ni(c,f),N2(c,y,k),op(c,y,k,f),up(null,c,y,!0,o,f);case 19:return q2(o,c,f);case 22:return R2(o,c,f)}throw Error(n(156,c.tag))};function dN(o,c){return Uw(o,c)}function K8(o,c,f,y){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(o,c,f,y){return new K8(o,c,f,y)}function _p(o){return o=o.prototype,!(!o||!o.isReactComponent)}function G8(o){if(typeof o=="function")return _p(o)?1:0;if(o!=null){if(o=o.$$typeof,o===$)return 11;if(o===z)return 14}return 2}function _a(o,c){var f=o.alternate;return f===null?(f=zr(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function cu(o,c,f,y,k,_){var F=2;if(y=o,typeof o=="function")_p(o)&&(F=1);else if(typeof o=="string")F=5;else e:switch(o){case E:return vs(f.children,k,_,c);case T:F=8,k|=8;break;case R:return o=zr(12,f,c,k|2),o.elementType=R,o.lanes=_,o;case G:return o=zr(13,f,c,k),o.elementType=G,o.lanes=_,o;case V:return o=zr(19,f,c,k),o.elementType=V,o.lanes=_,o;case H:return du(f,k,_,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case I:F=10;break e;case M:F=9;break e;case $:F=11;break e;case z:F=14;break e;case U:F=16,y=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return c=zr(F,f,c,k),c.elementType=o,c.type=y,c.lanes=_,c}function vs(o,c,f,y){return o=zr(7,o,y,c),o.lanes=f,o}function du(o,c,f,y){return o=zr(22,o,y,c),o.elementType=H,o.lanes=f,o.stateNode={isHidden:!1},o}function Tp(o,c,f){return o=zr(6,o,null,c),o.lanes=f,o}function Rp(o,c,f){return c=zr(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function V8(o,c,f,y,k){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=im(0),this.expirationTimes=im(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=im(0),this.identifierPrefix=y,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Mp(o,c,f,y,k,_,F,Q,Z){return o=new V8(o,c,f,Q,Z),c===1?(c=1,_===!0&&(c|=8)):c=0,_=zr(3,null,null,c),o.current=_,_.stateNode=o,_.memoizedState={element:y,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gm(_),o}function Q8(o,c,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:y==null?null:""+y,children:o,containerInfo:c,implementation:f}}function uN(o){if(!o)return wa;o=o._reactInternals;e:{if(os(o)!==o||o.tag!==1)throw Error(n(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(mr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(o.tag===1){var f=o.type;if(mr(f))return F1(o,f,c)}return c}function hN(o,c,f,y,k,_,F,Q,Z){return o=Mp(f,y,!0,o,k,_,F,Q,Z),o.context=uN(null),f=o.current,y=ir(),k=Oa(f),_=zn(y,k),_.callback=c??null,ka(f,_,k),o.current.lanes=k,el(o,k,y),gr(o,y),o}function uu(o,c,f,y){var k=c.current,_=ir(),F=Oa(k);return f=uN(f),c.context===null?c.context=f:c.pendingContext=f,c=zn(_,F),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=ka(k,c,F),o!==null&&(ln(o,k,F,_),Bd(o,k,F)),F}function hu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function fN(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function Ip(o,c){fN(o,c),(o=o.alternate)&&fN(o,c)}function Y8(){return null}var mN=typeof reportError=="function"?reportError:function(o){console.error(o)};function $p(o){this._internalRoot=o}fu.prototype.render=$p.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));uu(o,c,null,null)},fu.prototype.unmount=$p.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;xs(function(){uu(null,o,null,null)}),c[$n]=null}};function fu(o){this._internalRoot=o}fu.prototype.unstable_scheduleHydration=function(o){if(o){var c=Xw();o={blockedOn:null,target:o,priority:c};for(var f=0;f<ga.length&&c!==0&&c<ga[f].priority;f++);ga.splice(f,0,o),f===0&&e1(o)}};function Lp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function mu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function pN(){}function X8(o,c,f,y,k){if(k){if(typeof y=="function"){var _=y;y=function(){var ie=hu(F);_.call(ie)}}var F=hN(c,y,o,0,null,!1,!1,"",pN);return o._reactRootContainer=F,o[$n]=F.current,ml(o.nodeType===8?o.parentNode:o),xs(),F}for(;k=o.lastChild;)o.removeChild(k);if(typeof y=="function"){var Q=y;y=function(){var ie=hu(Z);Q.call(ie)}}var Z=Mp(o,0,!1,null,null,!1,!1,"",pN);return o._reactRootContainer=Z,o[$n]=Z.current,ml(o.nodeType===8?o.parentNode:o),xs(function(){uu(c,Z,f,y)}),Z}function pu(o,c,f,y,k){var _=f._reactRootContainer;if(_){var F=_;if(typeof k=="function"){var Q=k;k=function(){var Z=hu(F);Q.call(Z)}}uu(c,F,o,k)}else F=X8(f,c,o,k,y);return hu(F)}Qw=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var f=Zo(c.pendingLanes);f!==0&&(om(c,f|1),gr(c,St()),(He&6)===0&&(Pi=St()+500,Na()))}break;case 13:xs(function(){var y=qn(o,1);if(y!==null){var k=ir();ln(y,o,1,k)}}),Ip(o,1)}},lm=function(o){if(o.tag===13){var c=qn(o,134217728);if(c!==null){var f=ir();ln(c,o,134217728,f)}Ip(o,134217728)}},Yw=function(o){if(o.tag===13){var c=Oa(o),f=qn(o,c);if(f!==null){var y=ir();ln(f,o,c,y)}Ip(o,c)}},Xw=function(){return et},Jw=function(o,c){var f=et;try{return et=o,c()}finally{et=f}},em=function(o,c,f){switch(c){case"input":if(qt(o,f),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var y=f[c];if(y!==o&&y.form===o.form){var k=Td(y);if(!k)throw Error(n(90));re(y),qt(y,k)}}}break;case"textarea":Ko(o,f);break;case"select":c=f.value,c!=null&&hr(o,!!f.multiple,c,!1)}},$w=Pp,Lw=xs;var J8={usingClientEntryPoint:!1,Events:[gl,pi,Td,Mw,Iw,Pp]},_l={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z8={bundleType:_l.bundleType,version:_l.version,rendererPackageName:_l.rendererPackageName,rendererConfig:_l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=zw(o),o===null?null:o.stateNode},findFiberByHostInstance:_l.findFiberByHostInstance||Y8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{fd=xu.inject(Z8),bn=xu}catch{}}return yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J8,yr.createPortal=function(o,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lp(c))throw Error(n(200));return Q8(o,c,null,f)},yr.createRoot=function(o,c){if(!Lp(o))throw Error(n(299));var f=!1,y="",k=mN;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=Mp(o,1,!1,null,null,f,!1,y,k),o[$n]=c.current,ml(o.nodeType===8?o.parentNode:o),new $p(c)},yr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=zw(c),o=o===null?null:o.stateNode,o},yr.flushSync=function(o){return xs(o)},yr.hydrate=function(o,c,f){if(!mu(c))throw Error(n(200));return pu(null,o,c,!0,f)},yr.hydrateRoot=function(o,c,f){if(!Lp(o))throw Error(n(405));var y=f!=null&&f.hydratedSources||null,k=!1,_="",F=mN;if(f!=null&&(f.unstable_strictMode===!0&&(k=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onRecoverableError!==void 0&&(F=f.onRecoverableError)),c=hN(c,null,o,1,f??null,k,!1,_,F),o[$n]=c.current,ml(o),y)for(o=0;o<y.length;o++)f=y[o],k=f._getVersion,k=k(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,k]:c.mutableSourceEagerHydrationData.push(f,k);return new fu(c)},yr.render=function(o,c,f){if(!mu(c))throw Error(n(200));return pu(null,o,c,!1,f)},yr.unmountComponentAtNode=function(o){if(!mu(o))throw Error(n(40));return o._reactRootContainer?(xs(function(){pu(null,null,o,!1,function(){o._reactRootContainer=null,o[$n]=null})}),!0):!1},yr.unstable_batchedUpdates=Pp,yr.unstable_renderSubtreeIntoContainer=function(o,c,f,y){if(!mu(f))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return pu(o,c,f,!1,y)},yr.version="18.3.1-next-f1338f8080-20240426",yr}var SN;function RP(){if(SN)return zp.exports;SN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),zp.exports=dR(),zp.exports}var kN;function uR(){if(kN)return bu;kN=1;var e=RP();return bu.createRoot=e.createRoot,bu.hydrateRoot=e.hydrateRoot,bu}var hR=uR();const fR=Ze(hR);var _o=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mR={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},$a,ej,wP,pR=(wP=class{constructor(){Pe(this,$a,mR);Pe(this,ej,!1)}setTimeoutProvider(e){ye(this,$a,e)}setTimeout(e,t){return J(this,$a).setTimeout(e,t)}clearTimeout(e){J(this,$a).clearTimeout(e)}setInterval(e,t){return J(this,$a).setInterval(e,t)}clearInterval(e){J(this,$a).clearInterval(e)}},$a=new WeakMap,ej=new WeakMap,wP),Cs=new pR;function xR(e){setTimeout(e,0)}var Ws=typeof window>"u"||"Deno"in globalThis;function lr(){}function gR(e,t){return typeof e=="function"?e(t):e}function iv(e){return typeof e=="number"&&e>=0&&e!==1/0}function MP(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Qa(e,t){return typeof e=="function"?e(t):e}function Kr(e,t){return typeof e=="function"?e(t):e}function CN(e,t){const{type:n="all",exact:a,fetchStatus:s,predicate:i,queryKey:l,stale:d}=e;if(l){if(a){if(t.queryHash!==rj(l,t.options))return!1}else if(!nc(t.queryKey,l))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||s&&s!==t.state.fetchStatus||i&&!i(t))}function AN(e,t){const{exact:n,status:a,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Hs(t.options.mutationKey)!==Hs(i))return!1}else if(!nc(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||s&&!s(t))}function rj(e,t){return((t==null?void 0:t.queryKeyHashFn)||Hs)(e)}function Hs(e){return JSON.stringify(e,(t,n)=>ov(n)?Object.keys(n).sort().reduce((a,s)=>(a[s]=n[s],a),{}):n)}function nc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>nc(e[n],t[n])):!1}var yR=Object.prototype.hasOwnProperty;function IP(e,t,n=0){if(e===t)return e;if(n>500)return t;const a=PN(e)&&PN(t);if(!a&&!(ov(e)&&ov(t)))return t;const i=(a?e:Object.keys(e)).length,l=a?t:Object.keys(t),d=l.length,u=a?new Array(d):{};let h=0;for(let p=0;p<d;p++){const m=a?p:l[p],g=e[m],j=t[m];if(g===j){u[m]=g,(a?p<i:yR.call(e,m))&&h++;continue}if(g===null||j===null||typeof g!="object"||typeof j!="object"){u[m]=j;continue}const v=IP(g,j,n+1);u[m]=v,v===g&&h++}return i===d&&h===i?e:u}function Wu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function PN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ov(e){if(!ON(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!ON(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ON(e){return Object.prototype.toString.call(e)==="[object Object]"}function vR(e){return new Promise(t=>{Cs.setTimeout(t,e)})}function lv(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?IP(e,t):t}function bR(e,t,n=0){const a=[...e,t];return n&&a.length>n?a.slice(1):a}function jR(e,t,n=0){const a=[t,...e];return n&&a.length>n?a.slice(0,-1):a}var nj=Symbol();function $P(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===nj?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function aj(e,t){return typeof e=="function"?e(...t):!!e}function wR(e,t,n){let a=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),a||(a=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Ts,La,Wi,NP,NR=(NP=class extends _o{constructor(){super();Pe(this,Ts);Pe(this,La);Pe(this,Wi);ye(this,Wi,t=>{if(!Ws&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,La)||this.setEventListener(J(this,Wi))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,La))==null||t.call(this),ye(this,La,void 0))}setEventListener(t){var n;ye(this,Wi,t),(n=J(this,La))==null||n.call(this),ye(this,La,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){J(this,Ts)!==t&&(ye(this,Ts,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof J(this,Ts)=="boolean"?J(this,Ts):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ts=new WeakMap,La=new WeakMap,Wi=new WeakMap,NP),sj=new NR;function cv(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function a(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{a({status:"fulfilled",value:s}),e(s)},n.reject=s=>{a({status:"rejected",reason:s}),t(s)},n}var SR=xR;function kR(){let e=[],t=0,n=d=>{d()},a=d=>{d()},s=SR;const i=d=>{t?e.push(d):s(()=>{n(d)})},l=()=>{const d=e;e=[],d.length&&s(()=>{a(()=>{d.forEach(u=>{n(u)})})})};return{batch:d=>{let u;t++;try{u=d()}finally{t--,t||l()}return u},batchCalls:d=>(...u)=>{i(()=>{d(...u)})},schedule:i,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{a=d},setScheduler:d=>{s=d}}}var $t=kR(),Hi,Da,Ki,SP,CR=(SP=class extends _o{constructor(){super();Pe(this,Hi,!0);Pe(this,Da);Pe(this,Ki);ye(this,Ki,t=>{if(!Ws&&window.addEventListener){const n=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}})}onSubscribe(){J(this,Da)||this.setEventListener(J(this,Ki))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,Da))==null||t.call(this),ye(this,Da,void 0))}setEventListener(t){var n;ye(this,Ki,t),(n=J(this,Da))==null||n.call(this),ye(this,Da,t(this.setOnline.bind(this)))}setOnline(t){J(this,Hi)!==t&&(ye(this,Hi,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return J(this,Hi)}},Hi=new WeakMap,Da=new WeakMap,Ki=new WeakMap,SP),Hu=new CR;function AR(e){return Math.min(1e3*2**e,3e4)}function LP(e){return(e??"online")==="online"?Hu.isOnline():!0}var dv=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function DP(e){let t=!1,n=0,a;const s=cv(),i=()=>s.status!=="pending",l=w=>{var x;if(!i()){const S=new dv(w);g(S),(x=e.onCancel)==null||x.call(e,S)}},d=()=>{t=!0},u=()=>{t=!1},h=()=>sj.isFocused()&&(e.networkMode==="always"||Hu.isOnline())&&e.canRun(),p=()=>LP(e.networkMode)&&e.canRun(),m=w=>{i()||(a==null||a(),s.resolve(w))},g=w=>{i()||(a==null||a(),s.reject(w))},j=()=>new Promise(w=>{var x;a=S=>{(i()||h())&&w(S)},(x=e.onPause)==null||x.call(e)}).then(()=>{var w;a=void 0,i()||(w=e.onContinue)==null||w.call(e)}),v=()=>{if(i())return;let w;const x=n===0?e.initialPromise:void 0;try{w=x??e.fn()}catch(S){w=Promise.reject(S)}Promise.resolve(w).then(m).catch(S=>{var C;if(i())return;const P=e.retry??(Ws?0:3),O=e.retryDelay??AR,N=typeof O=="function"?O(n,S):O,A=P===!0||typeof P=="number"&&n<P||typeof P=="function"&&P(n,S);if(t||!A){g(S);return}n++,(C=e.onFail)==null||C.call(e,n,S),vR(N).then(()=>h()?void 0:j()).then(()=>{t?g(S):v()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(a==null||a(),s),cancelRetry:d,continueRetry:u,canStart:p,start:()=>(p()?v():j().then(v),s)}}var Rs,kP,FP=(kP=class{constructor(){Pe(this,Rs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),iv(this.gcTime)&&ye(this,Rs,Cs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ws?1/0:300*1e3))}clearGcTimeout(){J(this,Rs)&&(Cs.clearTimeout(J(this,Rs)),ye(this,Rs,void 0))}},Rs=new WeakMap,kP),Ms,Gi,Hr,Is,Wt,Bc,$s,dn,Kn,CP,PR=(CP=class extends FP{constructor(t){super();Pe(this,dn);Pe(this,Ms);Pe(this,Gi);Pe(this,Hr);Pe(this,Is);Pe(this,Wt);Pe(this,Bc);Pe(this,$s);ye(this,$s,!1),ye(this,Bc,t.defaultOptions),this.setOptions(t.options),this.observers=[],ye(this,Is,t.client),ye(this,Hr,J(this,Is).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ye(this,Ms,_N(this.options)),this.state=t.state??J(this,Ms),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=J(this,Wt))==null?void 0:t.promise}setOptions(t){if(this.options={...J(this,Bc),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=_N(this.options);n.data!==void 0&&(this.setState(EN(n.data,n.dataUpdatedAt)),ye(this,Ms,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Hr).remove(this)}setData(t,n){const a=lv(this.state.data,t,this.options);return Be(this,dn,Kn).call(this,{data:a,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),a}setState(t,n){Be(this,dn,Kn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var a,s;const n=(a=J(this,Wt))==null?void 0:a.promise;return(s=J(this,Wt))==null||s.cancel(t),n?n.then(lr).catch(lr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Ms))}isActive(){return this.observers.some(t=>Kr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===nj||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Qa(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!MP(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,Wt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,Wt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),J(this,Hr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(J(this,Wt)&&(J(this,$s)?J(this,Wt).cancel({revert:!0}):J(this,Wt).cancelRetry()),this.scheduleGc()),J(this,Hr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Be(this,dn,Kn).call(this,{type:"invalidate"})}async fetch(t,n){var u,h,p,m,g,j,v,w,x,S,P,O;if(this.state.fetchStatus!=="idle"&&((u=J(this,Wt))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,Wt))return J(this,Wt).continueRetry(),J(this,Wt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(A=>A.options.queryFn);N&&this.setOptions(N.options)}const a=new AbortController,s=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(ye(this,$s,!0),a.signal)})},i=()=>{const N=$P(this.options,n),C=(()=>{const E={client:J(this,Is),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return ye(this,$s,!1),this.options.persister?this.options.persister(N,C,this):N(C)},d=(()=>{const N={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:J(this,Is),state:this.state,fetchFn:i};return s(N),N})();(h=this.options.behavior)==null||h.onFetch(d,this),ye(this,Gi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=d.fetchOptions)==null?void 0:p.meta))&&Be(this,dn,Kn).call(this,{type:"fetch",meta:(m=d.fetchOptions)==null?void 0:m.meta}),ye(this,Wt,DP({initialPromise:n==null?void 0:n.initialPromise,fn:d.fetchFn,onCancel:N=>{N instanceof dv&&N.revert&&this.setState({...J(this,Gi),fetchStatus:"idle"}),a.abort()},onFail:(N,A)=>{Be(this,dn,Kn).call(this,{type:"failed",failureCount:N,error:A})},onPause:()=>{Be(this,dn,Kn).call(this,{type:"pause"})},onContinue:()=>{Be(this,dn,Kn).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const N=await J(this,Wt).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(j=(g=J(this,Hr).config).onSuccess)==null||j.call(g,N,this),(w=(v=J(this,Hr).config).onSettled)==null||w.call(v,N,this.state.error,this),N}catch(N){if(N instanceof dv){if(N.silent)return J(this,Wt).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw Be(this,dn,Kn).call(this,{type:"error",error:N}),(S=(x=J(this,Hr).config).onError)==null||S.call(x,N,this),(O=(P=J(this,Hr).config).onSettled)==null||O.call(P,this.state.data,N,this),N}finally{this.scheduleGc()}}},Ms=new WeakMap,Gi=new WeakMap,Hr=new WeakMap,Is=new WeakMap,Wt=new WeakMap,Bc=new WeakMap,$s=new WeakMap,dn=new WeakSet,Kn=function(t){const n=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...qP(a.data,this.options),fetchMeta:t.meta??null};case"success":const s={...a,...EN(t.data,t.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ye(this,Gi,t.manual?s:void 0),s;case"error":const i=t.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=n(this.state),$t.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),J(this,Hr).notify({query:this,type:"updated",action:t})})},CP);function qP(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:LP(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function EN(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _N(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,a=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var vr,We,Uc,or,Ls,Vi,Vn,Fa,Wc,Qi,Yi,Ds,Fs,qa,Xi,Je,Hl,uv,hv,fv,mv,pv,xv,gv,zP,AP,OR=(AP=class extends _o{constructor(t,n){super();Pe(this,Je);Pe(this,vr);Pe(this,We);Pe(this,Uc);Pe(this,or);Pe(this,Ls);Pe(this,Vi);Pe(this,Vn);Pe(this,Fa);Pe(this,Wc);Pe(this,Qi);Pe(this,Yi);Pe(this,Ds);Pe(this,Fs);Pe(this,qa);Pe(this,Xi,new Set);this.options=n,ye(this,vr,t),ye(this,Fa,null),ye(this,Vn,cv()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,We).addObserver(this),TN(J(this,We),this.options)?Be(this,Je,Hl).call(this):this.updateResult(),Be(this,Je,mv).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return yv(J(this,We),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return yv(J(this,We),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Be(this,Je,pv).call(this),Be(this,Je,xv).call(this),J(this,We).removeObserver(this)}setOptions(t){const n=this.options,a=J(this,We);if(this.options=J(this,vr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Kr(this.options.enabled,J(this,We))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Be(this,Je,gv).call(this),J(this,We).setOptions(this.options),n._defaulted&&!Wu(this.options,n)&&J(this,vr).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,We),observer:this});const s=this.hasListeners();s&&RN(J(this,We),a,this.options,n)&&Be(this,Je,Hl).call(this),this.updateResult(),s&&(J(this,We)!==a||Kr(this.options.enabled,J(this,We))!==Kr(n.enabled,J(this,We))||Qa(this.options.staleTime,J(this,We))!==Qa(n.staleTime,J(this,We)))&&Be(this,Je,uv).call(this);const i=Be(this,Je,hv).call(this);s&&(J(this,We)!==a||Kr(this.options.enabled,J(this,We))!==Kr(n.enabled,J(this,We))||i!==J(this,qa))&&Be(this,Je,fv).call(this,i)}getOptimisticResult(t){const n=J(this,vr).getQueryCache().build(J(this,vr),t),a=this.createResult(n,t);return _R(this,a)&&(ye(this,or,a),ye(this,Vi,this.options),ye(this,Ls,J(this,We).state)),a}getCurrentResult(){return J(this,or)}trackResult(t,n){return new Proxy(t,{get:(a,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&J(this,Vn).status==="pending"&&J(this,Vn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,s))})}trackProp(t){J(this,Xi).add(t)}getCurrentQuery(){return J(this,We)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=J(this,vr).defaultQueryOptions(t),a=J(this,vr).getQueryCache().build(J(this,vr),n);return a.fetch().then(()=>this.createResult(a,n))}fetch(t){return Be(this,Je,Hl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,or)))}createResult(t,n){var R;const a=J(this,We),s=this.options,i=J(this,or),l=J(this,Ls),d=J(this,Vi),h=t!==a?t.state:J(this,Uc),{state:p}=t;let m={...p},g=!1,j;if(n._optimisticResults){const I=this.hasListeners(),M=!I&&TN(t,n),$=I&&RN(t,a,n,s);(M||$)&&(m={...m,...qP(p.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:v,errorUpdatedAt:w,status:x}=m;j=m.data;let S=!1;if(n.placeholderData!==void 0&&j===void 0&&x==="pending"){let I;i!=null&&i.isPlaceholderData&&n.placeholderData===(d==null?void 0:d.placeholderData)?(I=i.data,S=!0):I=typeof n.placeholderData=="function"?n.placeholderData((R=J(this,Yi))==null?void 0:R.state.data,J(this,Yi)):n.placeholderData,I!==void 0&&(x="success",j=lv(i==null?void 0:i.data,I,n),g=!0)}if(n.select&&j!==void 0&&!S)if(i&&j===(l==null?void 0:l.data)&&n.select===J(this,Wc))j=J(this,Qi);else try{ye(this,Wc,n.select),j=n.select(j),j=lv(i==null?void 0:i.data,j,n),ye(this,Qi,j),ye(this,Fa,null)}catch(I){ye(this,Fa,I)}J(this,Fa)&&(v=J(this,Fa),j=J(this,Qi),w=Date.now(),x="error");const P=m.fetchStatus==="fetching",O=x==="pending",N=x==="error",A=O&&P,C=j!==void 0,T={status:x,fetchStatus:m.fetchStatus,isPending:O,isSuccess:x==="success",isError:N,isInitialLoading:A,isLoading:A,data:j,dataUpdatedAt:m.dataUpdatedAt,error:v,errorUpdatedAt:w,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:P,isRefetching:P&&!O,isLoadingError:N&&!C,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:N&&C,isStale:ij(t,n),refetch:this.refetch,promise:J(this,Vn),isEnabled:Kr(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const I=T.data!==void 0,M=T.status==="error"&&!I,$=z=>{M?z.reject(T.error):I&&z.resolve(T.data)},G=()=>{const z=ye(this,Vn,T.promise=cv());$(z)},V=J(this,Vn);switch(V.status){case"pending":t.queryHash===a.queryHash&&$(V);break;case"fulfilled":(M||T.data!==V.value)&&G();break;case"rejected":(!M||T.error!==V.reason)&&G();break}}return T}updateResult(){const t=J(this,or),n=this.createResult(J(this,We),this.options);if(ye(this,Ls,J(this,We).state),ye(this,Vi,this.options),J(this,Ls).data!==void 0&&ye(this,Yi,J(this,We)),Wu(n,t))return;ye(this,or,n);const a=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!J(this,Xi).size)return!0;const l=new Set(i??J(this,Xi));return this.options.throwOnError&&l.add("error"),Object.keys(J(this,or)).some(d=>{const u=d;return J(this,or)[u]!==t[u]&&l.has(u)})};Be(this,Je,zP).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Be(this,Je,mv).call(this)}},vr=new WeakMap,We=new WeakMap,Uc=new WeakMap,or=new WeakMap,Ls=new WeakMap,Vi=new WeakMap,Vn=new WeakMap,Fa=new WeakMap,Wc=new WeakMap,Qi=new WeakMap,Yi=new WeakMap,Ds=new WeakMap,Fs=new WeakMap,qa=new WeakMap,Xi=new WeakMap,Je=new WeakSet,Hl=function(t){Be(this,Je,gv).call(this);let n=J(this,We).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(lr)),n},uv=function(){Be(this,Je,pv).call(this);const t=Qa(this.options.staleTime,J(this,We));if(Ws||J(this,or).isStale||!iv(t))return;const a=MP(J(this,or).dataUpdatedAt,t)+1;ye(this,Ds,Cs.setTimeout(()=>{J(this,or).isStale||this.updateResult()},a))},hv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,We)):this.options.refetchInterval)??!1},fv=function(t){Be(this,Je,xv).call(this),ye(this,qa,t),!(Ws||Kr(this.options.enabled,J(this,We))===!1||!iv(J(this,qa))||J(this,qa)===0)&&ye(this,Fs,Cs.setInterval(()=>{(this.options.refetchIntervalInBackground||sj.isFocused())&&Be(this,Je,Hl).call(this)},J(this,qa)))},mv=function(){Be(this,Je,uv).call(this),Be(this,Je,fv).call(this,Be(this,Je,hv).call(this))},pv=function(){J(this,Ds)&&(Cs.clearTimeout(J(this,Ds)),ye(this,Ds,void 0))},xv=function(){J(this,Fs)&&(Cs.clearInterval(J(this,Fs)),ye(this,Fs,void 0))},gv=function(){const t=J(this,vr).getQueryCache().build(J(this,vr),this.options);if(t===J(this,We))return;const n=J(this,We);ye(this,We,t),ye(this,Uc,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},zP=function(t){$t.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(J(this,or))}),J(this,vr).getQueryCache().notify({query:J(this,We),type:"observerResultsUpdated"})})},AP);function ER(e,t){return Kr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function TN(e,t){return ER(e,t)||e.state.data!==void 0&&yv(e,t,t.refetchOnMount)}function yv(e,t,n){if(Kr(t.enabled,e)!==!1&&Qa(t.staleTime,e)!=="static"){const a=typeof n=="function"?n(e):n;return a==="always"||a!==!1&&ij(e,t)}return!1}function RN(e,t,n,a){return(e!==t||Kr(a.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ij(e,n)}function ij(e,t){return Kr(t.enabled,e)!==!1&&e.isStaleByTime(Qa(t.staleTime,e))}function _R(e,t){return!Wu(e.getCurrentResult(),t)}function MN(e){return{onFetch:(t,n)=>{var p,m,g,j,v;const a=t.options,s=(g=(m=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,i=((j=t.state.data)==null?void 0:j.pages)||[],l=((v=t.state.data)==null?void 0:v.pageParams)||[];let d={pages:[],pageParams:[]},u=0;const h=async()=>{let w=!1;const x=O=>{wR(O,()=>t.signal,()=>w=!0)},S=$P(t.options,t.fetchOptions),P=async(O,N,A)=>{if(w)return Promise.reject();if(N==null&&O.pages.length)return Promise.resolve(O);const E=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:N,direction:A?"backward":"forward",meta:t.options.meta};return x(M),M})(),T=await S(E),{maxPages:R}=t.options,I=A?jR:bR;return{pages:I(O.pages,T,R),pageParams:I(O.pageParams,N,R)}};if(s&&i.length){const O=s==="backward",N=O?TR:IN,A={pages:i,pageParams:l},C=N(a,A);d=await P(A,C,O)}else{const O=e??i.length;do{const N=u===0?l[0]??a.initialPageParam:IN(a,d);if(u>0&&N==null)break;d=await P(d,N),u++}while(u<O)}return d};t.options.persister?t.fetchFn=()=>{var w,x;return(x=(w=t.options).persister)==null?void 0:x.call(w,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function IN(e,{pages:t,pageParams:n}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,n[a],n):void 0}function TR(e,{pages:t,pageParams:n}){var a;return t.length>0?(a=e.getPreviousPageParam)==null?void 0:a.call(e,t[0],t,n[0],n):void 0}var Hc,Cn,tr,qs,An,Ra,PP,RR=(PP=class extends FP{constructor(t){super();Pe(this,An);Pe(this,Hc);Pe(this,Cn);Pe(this,tr);Pe(this,qs);ye(this,Hc,t.client),this.mutationId=t.mutationId,ye(this,tr,t.mutationCache),ye(this,Cn,[]),this.state=t.state||BP(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){J(this,Cn).includes(t)||(J(this,Cn).push(t),this.clearGcTimeout(),J(this,tr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ye(this,Cn,J(this,Cn).filter(n=>n!==t)),this.scheduleGc(),J(this,tr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){J(this,Cn).length||(this.state.status==="pending"?this.scheduleGc():J(this,tr).remove(this))}continue(){var t;return((t=J(this,qs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,d,u,h,p,m,g,j,v,w,x,S,P,O,N,A,C,E;const n=()=>{Be(this,An,Ra).call(this,{type:"continue"})},a={client:J(this,Hc),meta:this.options.meta,mutationKey:this.options.mutationKey};ye(this,qs,DP({fn:()=>this.options.mutationFn?this.options.mutationFn(t,a):Promise.reject(new Error("No mutationFn found")),onFail:(T,R)=>{Be(this,An,Ra).call(this,{type:"failed",failureCount:T,error:R})},onPause:()=>{Be(this,An,Ra).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,tr).canRun(this)}));const s=this.state.status==="pending",i=!J(this,qs).canStart();try{if(s)n();else{Be(this,An,Ra).call(this,{type:"pending",variables:t,isPaused:i}),J(this,tr).config.onMutate&&await J(this,tr).config.onMutate(t,this,a);const R=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,t,a));R!==this.state.context&&Be(this,An,Ra).call(this,{type:"pending",context:R,variables:t,isPaused:i})}const T=await J(this,qs).start();return await((h=(u=J(this,tr).config).onSuccess)==null?void 0:h.call(u,T,t,this.state.context,this,a)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,T,t,this.state.context,a)),await((j=(g=J(this,tr).config).onSettled)==null?void 0:j.call(g,T,null,this.state.variables,this.state.context,this,a)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,T,null,t,this.state.context,a)),Be(this,An,Ra).call(this,{type:"success",data:T}),T}catch(T){try{await((S=(x=J(this,tr).config).onError)==null?void 0:S.call(x,T,t,this.state.context,this,a))}catch(R){Promise.reject(R)}try{await((O=(P=this.options).onError)==null?void 0:O.call(P,T,t,this.state.context,a))}catch(R){Promise.reject(R)}try{await((A=(N=J(this,tr).config).onSettled)==null?void 0:A.call(N,void 0,T,this.state.variables,this.state.context,this,a))}catch(R){Promise.reject(R)}try{await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,T,t,this.state.context,a))}catch(R){Promise.reject(R)}throw Be(this,An,Ra).call(this,{type:"error",error:T}),T}finally{J(this,tr).runNext(this)}}},Hc=new WeakMap,Cn=new WeakMap,tr=new WeakMap,qs=new WeakMap,An=new WeakSet,Ra=function(t){const n=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),$t.batch(()=>{J(this,Cn).forEach(a=>{a.onMutationUpdate(t)}),J(this,tr).notify({mutation:this,type:"updated",action:t})})},PP);function BP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qn,un,Kc,OP,MR=(OP=class extends _o{constructor(t={}){super();Pe(this,Qn);Pe(this,un);Pe(this,Kc);this.config=t,ye(this,Qn,new Set),ye(this,un,new Map),ye(this,Kc,0)}build(t,n,a){const s=new RR({client:t,mutationCache:this,mutationId:++yu(this,Kc)._,options:t.defaultMutationOptions(n),state:a});return this.add(s),s}add(t){J(this,Qn).add(t);const n=ju(t);if(typeof n=="string"){const a=J(this,un).get(n);a?a.push(t):J(this,un).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(J(this,Qn).delete(t)){const n=ju(t);if(typeof n=="string"){const a=J(this,un).get(n);if(a)if(a.length>1){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}else a[0]===t&&J(this,un).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=ju(t);if(typeof n=="string"){const a=J(this,un).get(n),s=a==null?void 0:a.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var a;const n=ju(t);if(typeof n=="string"){const s=(a=J(this,un).get(n))==null?void 0:a.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$t.batch(()=>{J(this,Qn).forEach(t=>{this.notify({type:"removed",mutation:t})}),J(this,Qn).clear(),J(this,un).clear()})}getAll(){return Array.from(J(this,Qn))}find(t){const n={exact:!0,...t};return this.getAll().find(a=>AN(n,a))}findAll(t={}){return this.getAll().filter(n=>AN(t,n))}notify(t){$t.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return $t.batch(()=>Promise.all(t.map(n=>n.continue().catch(lr))))}},Qn=new WeakMap,un=new WeakMap,Kc=new WeakMap,OP);function ju(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Yn,za,br,Xn,sa,Fu,vv,EP,IR=(EP=class extends _o{constructor(n,a){super();Pe(this,sa);Pe(this,Yn);Pe(this,za);Pe(this,br);Pe(this,Xn);ye(this,Yn,n),this.setOptions(a),this.bindMethods(),Be(this,sa,Fu).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const a=this.options;this.options=J(this,Yn).defaultMutationOptions(n),Wu(this.options,a)||J(this,Yn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:J(this,br),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&Hs(a.mutationKey)!==Hs(this.options.mutationKey)?this.reset():((s=J(this,br))==null?void 0:s.state.status)==="pending"&&J(this,br).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=J(this,br))==null||n.removeObserver(this)}onMutationUpdate(n){Be(this,sa,Fu).call(this),Be(this,sa,vv).call(this,n)}getCurrentResult(){return J(this,za)}reset(){var n;(n=J(this,br))==null||n.removeObserver(this),ye(this,br,void 0),Be(this,sa,Fu).call(this),Be(this,sa,vv).call(this)}mutate(n,a){var s;return ye(this,Xn,a),(s=J(this,br))==null||s.removeObserver(this),ye(this,br,J(this,Yn).getMutationCache().build(J(this,Yn),this.options)),J(this,br).addObserver(this),J(this,br).execute(n)}},Yn=new WeakMap,za=new WeakMap,br=new WeakMap,Xn=new WeakMap,sa=new WeakSet,Fu=function(){var a;const n=((a=J(this,br))==null?void 0:a.state)??BP();ye(this,za,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},vv=function(n){$t.batch(()=>{var a,s,i,l,d,u,h,p;if(J(this,Xn)&&this.hasListeners()){const m=J(this,za).variables,g=J(this,za).context,j={client:J(this,Yn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(a=J(this,Xn)).onSuccess)==null||s.call(a,n.data,m,g,j)}catch(v){Promise.reject(v)}try{(l=(i=J(this,Xn)).onSettled)==null||l.call(i,n.data,null,m,g,j)}catch(v){Promise.reject(v)}}else if((n==null?void 0:n.type)==="error"){try{(u=(d=J(this,Xn)).onError)==null||u.call(d,n.error,m,g,j)}catch(v){Promise.reject(v)}try{(p=(h=J(this,Xn)).onSettled)==null||p.call(h,void 0,n.error,m,g,j)}catch(v){Promise.reject(v)}}}this.listeners.forEach(m=>{m(J(this,za))})})},EP),Pn,_P,$R=(_P=class extends _o{constructor(t={}){super();Pe(this,Pn);this.config=t,ye(this,Pn,new Map)}build(t,n,a){const s=n.queryKey,i=n.queryHash??rj(s,n);let l=this.get(i);return l||(l=new PR({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:a,defaultOptions:t.getQueryDefaults(s)}),this.add(l)),l}add(t){J(this,Pn).has(t.queryHash)||(J(this,Pn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=J(this,Pn).get(t.queryHash);n&&(t.destroy(),n===t&&J(this,Pn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){$t.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return J(this,Pn).get(t)}getAll(){return[...J(this,Pn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(a=>CN(n,a))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(a=>CN(t,a)):n}notify(t){$t.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){$t.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){$t.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Pn=new WeakMap,_P),bt,Ba,Ua,Ji,Zi,Wa,eo,to,TP,LR=(TP=class{constructor(e={}){Pe(this,bt);Pe(this,Ba);Pe(this,Ua);Pe(this,Ji);Pe(this,Zi);Pe(this,Wa);Pe(this,eo);Pe(this,to);ye(this,bt,e.queryCache||new $R),ye(this,Ba,e.mutationCache||new MR),ye(this,Ua,e.defaultOptions||{}),ye(this,Ji,new Map),ye(this,Zi,new Map),ye(this,Wa,0)}mount(){yu(this,Wa)._++,J(this,Wa)===1&&(ye(this,eo,sj.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,bt).onFocus())})),ye(this,to,Hu.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,bt).onOnline())})))}unmount(){var e,t;yu(this,Wa)._--,J(this,Wa)===0&&((e=J(this,eo))==null||e.call(this),ye(this,eo,void 0),(t=J(this,to))==null||t.call(this),ye(this,to,void 0))}isFetching(e){return J(this,bt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return J(this,Ba).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,bt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=J(this,bt).build(this,t),a=n.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Qa(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return J(this,bt).findAll(e).map(({queryKey:t,state:n})=>{const a=n.data;return[t,a]})}setQueryData(e,t,n){const a=this.defaultQueryOptions({queryKey:e}),s=J(this,bt).get(a.queryHash),i=s==null?void 0:s.state.data,l=gR(t,i);if(l!==void 0)return J(this,bt).build(this,a).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return $t.batch(()=>J(this,bt).findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,bt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=J(this,bt);$t.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=J(this,bt);return $t.batch(()=>(n.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},a=$t.batch(()=>J(this,bt).findAll(e).map(s=>s.cancel(n)));return Promise.all(a).then(lr).catch(lr)}invalidateQueries(e,t={}){return $t.batch(()=>(J(this,bt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},a=$t.batch(()=>J(this,bt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(lr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(lr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=J(this,bt).build(this,t);return n.isStaleByTime(Qa(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(lr).catch(lr)}fetchInfiniteQuery(e){return e.behavior=MN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(lr).catch(lr)}ensureInfiniteQueryData(e){return e.behavior=MN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Hu.isOnline()?J(this,Ba).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,bt)}getMutationCache(){return J(this,Ba)}getDefaultOptions(){return J(this,Ua)}setDefaultOptions(e){ye(this,Ua,e)}setQueryDefaults(e,t){J(this,Ji).set(Hs(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...J(this,Ji).values()],n={};return t.forEach(a=>{nc(e,a.queryKey)&&Object.assign(n,a.defaultOptions)}),n}setMutationDefaults(e,t){J(this,Zi).set(Hs(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...J(this,Zi).values()],n={};return t.forEach(a=>{nc(e,a.mutationKey)&&Object.assign(n,a.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...J(this,Ua).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=rj(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===nj&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...J(this,Ua).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){J(this,bt).clear(),J(this,Ba).clear()}},bt=new WeakMap,Ba=new WeakMap,Ua=new WeakMap,Ji=new WeakMap,Zi=new WeakMap,Wa=new WeakMap,eo=new WeakMap,to=new WeakMap,TP),UP=b.createContext(void 0),lt=e=>{const t=b.useContext(UP);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},DR=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(UP.Provider,{value:e,children:t})),WP=b.createContext(!1),FR=()=>b.useContext(WP);WP.Provider;function qR(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var zR=b.createContext(qR()),BR=()=>b.useContext(zR),UR=(e,t,n)=>{const a=n!=null&&n.state.error&&typeof e.throwOnError=="function"?aj(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||a)&&(t.isReset()||(e.retryOnMount=!1))},WR=e=>{b.useEffect(()=>{e.clearReset()},[e])},HR=({result:e,errorResetBoundary:t,throwOnError:n,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&e.data===void 0||aj(n,[e.error,a])),KR=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...s)=>n(a(...s)):n(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},GR=(e,t)=>e.isLoading&&e.isFetching&&!t,VR=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,$N=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function QR(e,t,n){var g,j,v,w;const a=FR(),s=BR(),i=lt(),l=i.defaultQueryOptions(e);(j=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||j.call(g,l);const d=i.getQueryCache().get(l.queryHash);l._optimisticResults=a?"isRestoring":"optimistic",KR(l),UR(l,s,d),WR(s);const u=!i.getQueryCache().get(l.queryHash),[h]=b.useState(()=>new t(i,l)),p=h.getOptimisticResult(l),m=!a&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(x=>{const S=m?h.subscribe($t.batchCalls(x)):lr;return h.updateResult(),S},[h,m]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),b.useEffect(()=>{h.setOptions(l)},[l,h]),VR(l,p))throw $N(l,h,s);if(HR({result:p,errorResetBoundary:s,throwOnError:l.throwOnError,query:d,suspense:l.suspense}))throw p.error;if((w=(v=i.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||w.call(v,l,p),l.experimental_prefetchInRender&&!Ws&&GR(p,a)){const x=u?$N(l,h,s):d==null?void 0:d.promise;x==null||x.catch(lr).finally(()=>{h.updateResult()})}return l.notifyOnChangeProps?p:h.trackResult(p)}function At(e,t){return QR(e,OR)}function pt(e,t){const n=lt(),[a]=b.useState(()=>new IR(n,e));b.useEffect(()=>{a.setOptions(e)},[a,e]);const s=b.useSyncExternalStore(b.useCallback(l=>a.subscribe($t.batchCalls(l)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=b.useCallback((l,d)=>{a.mutate(l,d).catch(lr)},[a]);if(s.error&&aj(a.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}RP();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ac(){return ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ac.apply(this,arguments)}var Ha;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ha||(Ha={}));const LN="popstate";function YR(e){e===void 0&&(e={});function t(a,s){let{pathname:i,search:l,hash:d}=a.location;return bv("",{pathname:i,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:Ku(s)}return JR(t,n,null,e)}function Ct(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function XR(){return Math.random().toString(36).substr(2,8)}function DN(e,t){return{usr:e.state,key:e.key,idx:t}}function bv(e,t,n,a){return n===void 0&&(n=null),ac({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?To(t):t,{state:n,key:t&&t.key||a||XR()})}function Ku(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function To(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function JR(e,t,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,l=s.history,d=Ha.Pop,u=null,h=p();h==null&&(h=0,l.replaceState(ac({},l.state,{idx:h}),""));function p(){return(l.state||{idx:null}).idx}function m(){d=Ha.Pop;let x=p(),S=x==null?null:x-h;h=x,u&&u({action:d,location:w.location,delta:S})}function g(x,S){d=Ha.Push;let P=bv(w.location,x,S);h=p()+1;let O=DN(P,h),N=w.createHref(P);try{l.pushState(O,"",N)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(N)}i&&u&&u({action:d,location:w.location,delta:1})}function j(x,S){d=Ha.Replace;let P=bv(w.location,x,S);h=p();let O=DN(P,h),N=w.createHref(P);l.replaceState(O,"",N),i&&u&&u({action:d,location:w.location,delta:0})}function v(x){let S=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof x=="string"?x:Ku(x);return P=P.replace(/ $/,"%20"),Ct(S,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,S)}let w={get action(){return d},get location(){return e(s,l)},listen(x){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(LN,m),u=x,()=>{s.removeEventListener(LN,m),u=null}},createHref(x){return t(s,x)},createURL:v,encodeLocation(x){let S=v(x);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:j,go(x){return l.go(x)}};return w}var FN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(FN||(FN={}));function ZR(e,t,n){return n===void 0&&(n="/"),eM(e,t,n)}function eM(e,t,n,a){let s=typeof t=="string"?To(t):t,i=lj(s.pathname||"/",n);if(i==null)return null;let l=HP(e);tM(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=fM(i);d=dM(l[u],h)}return d}function HP(e,t,n,a){t===void 0&&(t=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(i,l,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};u.relativePath.startsWith("/")&&(Ct(u.relativePath.startsWith(a),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(a.length));let h=Ya([a,u.relativePath]),p=n.concat(u);i.children&&i.children.length>0&&(Ct(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),HP(i.children,t,p,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:lM(h,i.index),routesMeta:p})};return e.forEach((i,l)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))s(i,l);else for(let u of KP(i.path))s(i,l,u)}),t}function KP(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let l=KP(a.join("/")),d=[];return d.push(...l.map(u=>u===""?i:[i,u].join("/"))),s&&d.push(...l),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function tM(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:cM(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const rM=/^:[\w-]+$/,nM=3,aM=2,sM=1,iM=10,oM=-2,qN=e=>e==="*";function lM(e,t){let n=e.split("/"),a=n.length;return n.some(qN)&&(a+=oM),t&&(a+=aM),n.filter(s=>!qN(s)).reduce((s,i)=>s+(rM.test(i)?nM:i===""?sM:iM),a)}function cM(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function dM(e,t,n){let{routesMeta:a}=e,s={},i="/",l=[];for(let d=0;d<a.length;++d){let u=a[d],h=d===a.length-1,p=i==="/"?t:t.slice(i.length)||"/",m=uM({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),g=u.route;if(!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:Ya([i,m.pathname]),pathnameBase:yM(Ya([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Ya([i,m.pathnameBase]))}return l}function uM(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=hM(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((h,p,m)=>{let{paramName:g,isOptional:j}=p;if(g==="*"){let w=d[m]||"";l=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=d[m];return j&&!v?h[g]=void 0:h[g]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:e}}function hM(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),oj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(a.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function fM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return oj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function lj(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}const mM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pM=e=>mM.test(e);function xM(e,t){t===void 0&&(t="/");let{pathname:n,search:a="",hash:s=""}=typeof e=="string"?To(e):e,i;if(n)if(pM(n))i=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),oj(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?i=zN(n.substring(1),"/"):i=zN(n,t)}else i=t;return{pathname:i,search:vM(a),hash:bM(s)}}function zN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Wp(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gM(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function cj(e,t){let n=gM(e);return t?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function dj(e,t,n,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=To(e):(s=ac({},e),Ct(!s.pathname||!s.pathname.includes("?"),Wp("?","pathname","search",s)),Ct(!s.pathname||!s.pathname.includes("#"),Wp("#","pathname","hash",s)),Ct(!s.search||!s.search.includes("#"),Wp("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,d;if(l==null)d=n;else{let m=t.length-1;if(!a&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}d=m>=0?t[m]:"/"}let u=xM(s,d),h=l&&l!=="/"&&l.endsWith("/"),p=(i||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}const Ya=e=>e.join("/").replace(/\/\/+/g,"/"),yM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const GP=["post","put","patch","delete"];new Set(GP);const wM=["get",...GP];new Set(wM);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sc(){return sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sc.apply(this,arguments)}const uj=b.createContext(null),NM=b.createContext(null),es=b.createContext(null),Zh=b.createContext(null),ca=b.createContext({outlet:null,matches:[],isDataRoute:!1}),VP=b.createContext(null);function SM(e,t){let{relative:n}=t===void 0?{}:t;Ro()||Ct(!1);let{basename:a,navigator:s}=b.useContext(es),{hash:i,pathname:l,search:d}=YP(e,{relative:n}),u=l;return a!=="/"&&(u=l==="/"?a:Ya([a,l])),s.createHref({pathname:u,search:d,hash:i})}function Ro(){return b.useContext(Zh)!=null}function ts(){return Ro()||Ct(!1),b.useContext(Zh).location}function QP(e){b.useContext(es).static||b.useLayoutEffect(e)}function Zs(){let{isDataRoute:e}=b.useContext(ca);return e?LM():kM()}function kM(){Ro()||Ct(!1);let e=b.useContext(uj),{basename:t,future:n,navigator:a}=b.useContext(es),{matches:s}=b.useContext(ca),{pathname:i}=ts(),l=JSON.stringify(cj(s,n.v7_relativeSplatPath)),d=b.useRef(!1);return QP(()=>{d.current=!0}),b.useCallback(function(h,p){if(p===void 0&&(p={}),!d.current)return;if(typeof h=="number"){a.go(h);return}let m=dj(h,JSON.parse(l),i,p.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ya([t,m.pathname])),(p.replace?a.replace:a.push)(m,p.state,p)},[t,a,l,i,e])}function ef(){let{matches:e}=b.useContext(ca),t=e[e.length-1];return t?t.params:{}}function YP(e,t){let{relative:n}=t===void 0?{}:t,{future:a}=b.useContext(es),{matches:s}=b.useContext(ca),{pathname:i}=ts(),l=JSON.stringify(cj(s,a.v7_relativeSplatPath));return b.useMemo(()=>dj(e,JSON.parse(l),i,n==="path"),[e,l,i,n])}function CM(e,t){return AM(e,t)}function AM(e,t,n,a){Ro()||Ct(!1);let{navigator:s}=b.useContext(es),{matches:i}=b.useContext(ca),l=i[i.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let h=ts(),p;if(t){var m;let x=typeof t=="string"?To(t):t;u==="/"||(m=x.pathname)!=null&&m.startsWith(u)||Ct(!1),p=x}else p=h;let g=p.pathname||"/",j=g;if(u!=="/"){let x=u.replace(/^\//,"").split("/");j="/"+g.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=ZR(e,{pathname:j}),w=TM(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},d,x.params),pathname:Ya([u,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Ya([u,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,a);return t&&w?b.createElement(Zh.Provider,{value:{location:sc({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ha.Pop}},w):w}function PM(){let e=$M(),t=jM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:s},n):null,null)}const OM=b.createElement(PM,null);class EM extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(ca.Provider,{value:this.props.routeContext},b.createElement(VP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _M(e){let{routeContext:t,match:n,children:a}=e,s=b.useContext(uj);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ca.Provider,{value:t},a)}function TM(e,t,n,a){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),a===void 0&&(a=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,d=(s=n)==null?void 0:s.errors;if(d!=null){let p=l.findIndex(m=>m.route.id&&(d==null?void 0:d[m.route.id])!==void 0);p>=0||Ct(!1),l=l.slice(0,Math.min(l.length,p+1))}let u=!1,h=-1;if(n&&a&&a.v7_partialHydration)for(let p=0;p<l.length;p++){let m=l[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:g,errors:j}=n,v=m.route.loader&&g[m.route.id]===void 0&&(!j||j[m.route.id]===void 0);if(m.route.lazy||v){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((p,m,g)=>{let j,v=!1,w=null,x=null;n&&(j=d&&m.route.id?d[m.route.id]:void 0,w=m.route.errorElement||OM,u&&(h<0&&g===0?(DM("route-fallback"),v=!0,x=null):h===g&&(v=!0,x=m.route.hydrateFallbackElement||null)));let S=t.concat(l.slice(0,g+1)),P=()=>{let O;return j?O=w:v?O=x:m.route.Component?O=b.createElement(m.route.Component,null):m.route.element?O=m.route.element:O=p,b.createElement(_M,{match:m,routeContext:{outlet:p,matches:S,isDataRoute:n!=null},children:O})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?b.createElement(EM,{location:n.location,revalidation:n.revalidation,component:w,error:j,children:P(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):P()},null)}var XP=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(XP||{}),JP=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(JP||{});function RM(e){let t=b.useContext(uj);return t||Ct(!1),t}function MM(e){let t=b.useContext(NM);return t||Ct(!1),t}function IM(e){let t=b.useContext(ca);return t||Ct(!1),t}function ZP(e){let t=IM(),n=t.matches[t.matches.length-1];return n.route.id||Ct(!1),n.route.id}function $M(){var e;let t=b.useContext(VP),n=MM(),a=ZP();return t!==void 0?t:(e=n.errors)==null?void 0:e[a]}function LM(){let{router:e}=RM(XP.UseNavigateStable),t=ZP(JP.UseNavigateStable),n=b.useRef(!1);return QP(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,sc({fromRouteId:t},i)))},[e,t])}const BN={};function DM(e,t,n){BN[e]||(BN[e]=!0)}function FM(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function eO(e){let{to:t,replace:n,state:a,relative:s}=e;Ro()||Ct(!1);let{future:i,static:l}=b.useContext(es),{matches:d}=b.useContext(ca),{pathname:u}=ts(),h=Zs(),p=dj(t,cj(d,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(p);return b.useEffect(()=>h(JSON.parse(m),{replace:n,state:a,relative:s}),[h,m,s,n,a]),null}function Oe(e){Ct(!1)}function qM(e){let{basename:t="/",children:n=null,location:a,navigationType:s=Ha.Pop,navigator:i,static:l=!1,future:d}=e;Ro()&&Ct(!1);let u=t.replace(/^\/*/,"/"),h=b.useMemo(()=>({basename:u,navigator:i,static:l,future:sc({v7_relativeSplatPath:!1},d)}),[u,d,i,l]);typeof a=="string"&&(a=To(a));let{pathname:p="/",search:m="",hash:g="",state:j=null,key:v="default"}=a,w=b.useMemo(()=>{let x=lj(p,u);return x==null?null:{location:{pathname:x,search:m,hash:g,state:j,key:v},navigationType:s}},[u,p,m,g,j,v,s]);return w==null?null:b.createElement(es.Provider,{value:h},b.createElement(Zh.Provider,{children:n,value:w}))}function zM(e){let{children:t,location:n}=e;return CM(jv(t),n)}new Promise(()=>{});function jv(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(a,s)=>{if(!b.isValidElement(a))return;let i=[...t,s];if(a.type===b.Fragment){n.push.apply(n,jv(a.props.children,i));return}a.type!==Oe&&Ct(!1),!a.props.index||!a.props.children||Ct(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=jv(a.props.children,i)),n.push(l)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wv.apply(this,arguments)}function BM(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function UM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function WM(e,t){return e.button===0&&(!t||t==="_self")&&!UM(e)}function Nv(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let a=e[n];return t.concat(Array.isArray(a)?a.map(s=>[n,s]):[[n,a]])},[]))}function HM(e,t){let n=Nv(e);return t&&t.forEach((a,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}const KM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GM="6";try{window.__reactRouterVersion=GM}catch{}const VM="startTransition",UN=oR[VM];function QM(e){let{basename:t,children:n,future:a,window:s}=e,i=b.useRef();i.current==null&&(i.current=YR({window:s,v5Compat:!0}));let l=i.current,[d,u]=b.useState({action:l.action,location:l.location}),{v7_startTransition:h}=a||{},p=b.useCallback(m=>{h&&UN?UN(()=>u(m)):u(m)},[u,h]);return b.useLayoutEffect(()=>l.listen(p),[l,p]),b.useEffect(()=>FM(a),[a]),b.createElement(qM,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:l,future:a})}const YM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=b.forwardRef(function(t,n){let{onClick:a,relative:s,reloadDocument:i,replace:l,state:d,target:u,to:h,preventScrollReset:p,viewTransition:m}=t,g=BM(t,KM),{basename:j}=b.useContext(es),v,w=!1;if(typeof h=="string"&&XM.test(h)&&(v=h,YM))try{let O=new URL(window.location.href),N=h.startsWith("//")?new URL(O.protocol+h):new URL(h),A=lj(N.pathname,j);N.origin===O.origin&&A!=null?h=A+N.search+N.hash:w=!0}catch{}let x=SM(h,{relative:s}),S=JM(h,{replace:l,state:d,target:u,preventScrollReset:p,relative:s,viewTransition:m});function P(O){a&&a(O),O.defaultPrevented||S(O)}return b.createElement("a",wv({},g,{href:v||x,onClick:w||i?a:P,ref:n,target:u}))});var WN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(WN||(WN={}));var HN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(HN||(HN={}));function JM(e,t){let{target:n,replace:a,state:s,preventScrollReset:i,relative:l,viewTransition:d}=t===void 0?{}:t,u=Zs(),h=ts(),p=YP(e,{relative:l});return b.useCallback(m=>{if(WM(m,n)){m.preventDefault();let g=a!==void 0?a:Ku(h)===Ku(p);u(e,{replace:g,state:s,preventScrollReset:i,relative:l,viewTransition:d})}},[h,u,p,a,s,n,e,i,l,d])}function Gc(e){let t=b.useRef(Nv(e)),n=b.useRef(!1),a=ts(),s=b.useMemo(()=>HM(a.search,n.current?null:t.current),[a.search]),i=Zs(),l=b.useCallback((d,u)=>{const h=Nv(typeof d=="function"?d(s):d);n.current=!0,i("?"+h,u)},[i,s]);return[s,l]}function ZM({onClick:e,loading:t=!1}){return r.jsxs("button",{onClick:e,disabled:t,className:"flex items-center justify-center gap-3 w-full px-6 py-3 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z",fill:"#4285F4"}),r.jsx("path",{d:"M9.003 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.96v2.332C2.44 15.983 5.485 18 9.003 18z",fill:"#34A853"}),r.jsx("path",{d:"M3.964 10.712c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.96H.957C.347 6.175 0 7.55 0 9.002c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05"}),r.jsx("path",{d:"M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.426 0 9.003 0 5.485 0 2.44 2.017.96 4.958L3.967 7.29c.708-2.127 2.692-3.71 5.036-3.71z",fill:"#EA4335"})]}),r.jsx("span",{className:"text-gray-700 font-medium",children:t?"Signing in...":"Sign in with Google"})]})}const KN={session_expired:"Your login session has expired. Please try again.",auth_failed:"Authentication failed. Please try again.",access_denied:"Access was denied. Please try again and grant the required permissions.",invalid_request:"Invalid authentication request. Please try again.",server_error:"Server error occurred. Please try again later."};function eI(){const[e]=Gc(),[t,n]=b.useState(null);b.useEffect(()=>{const s=e.get("error");if(s&&KN[s]){n(KN[s]);const i=new URLSearchParams(e);i.delete("error");const l=i.toString();window.history.replaceState({},"",l?`/login?${l}`:"/login")}},[e]);const a=()=>{const s="https://auth.nubabel.com",i=e.get("returnUrl")||"/dashboard";window.location.href=`${s}/auth/google?returnUrl=${encodeURIComponent(i)}`};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:r.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Nubabel"}),r.jsx("p",{className:"text-gray-600",children:"AI-Powered Workflow Automation"})]}),t&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-700 text-sm text-center",children:t})}),r.jsx(ZM,{onClick:a}),r.jsx("p",{className:"text-center text-sm text-gray-500 mt-6",children:"Sign in with your company Google account"})]})})}function wu({title:e,value:t,change:n,icon:a,trend:s}){const[i,l]=b.useState(0);return b.useEffect(()=>{if(typeof t!="number")return;const d=1e3,u=Date.now(),h=()=>{const p=Date.now()-u,m=Math.min(p/d,1),g=1-Math.pow(1-m,3);l(Math.round(g*t)),m<1&&requestAnimationFrame(h)};h()},[t]),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-500",children:e}),r.jsx("span",{className:"text-gray-400",children:a})]}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:typeof t=="number"?i.toLocaleString():t}),n!==void 0&&r.jsxs("div",{className:`text-sm mt-1 ${s==="up"?"text-green-600":s==="down"?"text-red-600":"text-gray-500"}`,children:[n>0?"+":"",n,"% from last week"]})]})}function tI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Sv=b.forwardRef(tI);function rI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const nI=b.forwardRef(rI);function aI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const sI=b.forwardRef(aI);function iI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}const kv=b.forwardRef(iI);function oI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const lI=b.forwardRef(oI);function cI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const tO=b.forwardRef(cI);function dI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Gu=b.forwardRef(dI);function uI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const hI=b.forwardRef(uI);function fI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const mI=b.forwardRef(fI);function pI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const xI=b.forwardRef(pI);function gI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const Cv=b.forwardRef(gI);function yI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const vI=b.forwardRef(yI);function bI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const rO=b.forwardRef(bI);function jI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const wI=b.forwardRef(jI);function NI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"}))}const SI=b.forwardRef(NI);function kI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const Av=b.forwardRef(kI);function CI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const AI=b.forwardRef(CI);function PI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const hj=b.forwardRef(PI);function OI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Vu=b.forwardRef(OI);function EI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const _I=b.forwardRef(EI);function TI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const tf=b.forwardRef(TI);function RI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const MI=b.forwardRef(RI);function II({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Qu=b.forwardRef(II);function $I({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Yu=b.forwardRef($I);function LI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const DI=b.forwardRef(LI);function FI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Xu=b.forwardRef(FI);function qI({title:e,titleId:t,...n},a){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const rf=b.forwardRef(qI),zI=[{id:"new-workflow",label:"New Workflow",icon:r.jsx(tf,{className:"h-5 w-5"}),shortcut:"N",path:"/workflows?create=true"},{id:"run-workflow",label:"Run Workflow",icon:r.jsx(_I,{className:"h-5 w-5"}),shortcut:"R",path:"/workflows"},{id:"settings",label:"Settings",icon:r.jsx(vI,{className:"h-5 w-5"}),shortcut:"S",path:"/settings"},{id:"help",label:"Help & Docs",icon:r.jsx(MI,{className:"h-5 w-5"}),shortcut:"?",path:"/help"}];function BI(){const e=Zs();return r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider mb-3",children:"Quick Actions"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:zI.map(t=>r.jsxs("button",{onClick:()=>e(t.path),className:"flex items-center gap-3 px-3 py-2 text-left rounded-lg hover:bg-gray-50 transition-colors group",children:[r.jsx("span",{className:"text-gray-400 group-hover:text-indigo-600",children:t.icon}),r.jsx("span",{className:"flex-1 text-sm text-gray-700",children:t.label}),t.shortcut&&r.jsx("kbd",{className:"px-2 py-0.5 text-xs bg-gray-100 rounded text-gray-500",children:t.shortcut})]},t.id))})]})}function UI(){const[e]=b.useState([{id:"1",type:"execution",title:"Workflow completed",description:"Daily report",timestamp:new Date,status:"success"},{id:"2",type:"message",title:"New message",description:"From Slack #general",timestamp:new Date(Date.now()-6e4)},{id:"3",type:"system",title:"System update",timestamp:new Date(Date.now()-12e4)}]),t={success:"bg-green-100 text-green-800",error:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"};return r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider mb-3",children:"Recent Activity"}),r.jsxs("div",{className:"space-y-3",children:[e.map((n,a)=>r.jsxs("div",{className:"flex items-start gap-3 py-2 animate-fade-in",style:{animationDelay:`${a*100}ms`},children:[r.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${n.status?t[n.status].split(" ")[0]:"bg-gray-300"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:n.title}),n.description&&r.jsx("p",{className:"text-xs text-gray-500",children:n.description})]}),r.jsx("span",{className:"text-xs text-gray-400",children:WI(n.timestamp)})]},n.id)),e.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No recent activity"})]})]})}function WI(e){const t=Date.now()-e.getTime();return t<6e4?"Just now":t<36e5?`${Math.floor(t/6e4)}m ago`:`${Math.floor(t/36e5)}h ago`}function Hp({className:e="",style:t}){return r.jsx("div",{className:`animate-pulse bg-gray-200 rounded ${e}`,style:t})}function Qr(){return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-2",children:[r.jsx(Hp,{className:"h-3 w-1/2"}),r.jsx(Hp,{className:"h-8 w-2/3"}),r.jsx(Hp,{className:"h-3 w-1/3"})]})}function nO(e,t){return function(){return e.apply(t,arguments)}}const{toString:HI}=Object.prototype,{getPrototypeOf:fj}=Object,{iterator:nf,toStringTag:aO}=Symbol,af=(e=>t=>{const n=HI.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),xn=e=>(e=e.toLowerCase(),t=>af(t)===e),sf=e=>t=>typeof t===e,{isArray:Mo}=Array,ro=sf("undefined");function Vc(e){return e!==null&&!ro(e)&&e.constructor!==null&&!ro(e.constructor)&&wr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const sO=xn("ArrayBuffer");function KI(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&sO(e.buffer),t}const GI=sf("string"),wr=sf("function"),iO=sf("number"),Qc=e=>e!==null&&typeof e=="object",VI=e=>e===!0||e===!1,qu=e=>{if(af(e)!=="object")return!1;const t=fj(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(aO in e)&&!(nf in e)},QI=e=>{if(!Qc(e)||Vc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},YI=xn("Date"),XI=xn("File"),JI=xn("Blob"),ZI=xn("FileList"),e$=e=>Qc(e)&&wr(e.pipe),t$=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||wr(e.append)&&((t=af(e))==="formdata"||t==="object"&&wr(e.toString)&&e.toString()==="[object FormData]"))},r$=xn("URLSearchParams"),[n$,a$,s$,i$]=["ReadableStream","Request","Response","Headers"].map(xn),o$=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),Mo(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{if(Vc(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let d;for(a=0;a<l;a++)d=i[a],t.call(null,e[d],d,e)}}function oO(e,t){if(Vc(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a=n.length,s;for(;a-- >0;)if(s=n[a],t===s.toLowerCase())return s;return null}const As=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,lO=e=>!ro(e)&&e!==As;function Pv(){const{caseless:e,skipUndefined:t}=lO(this)&&this||{},n={},a=(s,i)=>{const l=e&&oO(n,i)||i;qu(n[l])&&qu(s)?n[l]=Pv(n[l],s):qu(s)?n[l]=Pv({},s):Mo(s)?n[l]=s.slice():(!t||!ro(s))&&(n[l]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Yc(arguments[s],a);return n}const l$=(e,t,n,{allOwnKeys:a}={})=>(Yc(t,(s,i)=>{n&&wr(s)?Object.defineProperty(e,i,{value:nO(s,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,i,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:a}),e),c$=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),d$=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},u$=(e,t,n,a)=>{let s,i,l;const d={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)l=s[i],(!a||a(l,e,t))&&!d[l]&&(t[l]=e[l],d[l]=!0);e=n!==!1&&fj(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},h$=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},f$=e=>{if(!e)return null;if(Mo(e))return e;let t=e.length;if(!iO(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},m$=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&fj(Uint8Array)),p$=(e,t)=>{const a=(e&&e[nf]).call(e);let s;for(;(s=a.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},x$=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},g$=xn("HTMLFormElement"),y$=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,s){return a.toUpperCase()+s}),GN=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),v$=xn("RegExp"),cO=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};Yc(n,(s,i)=>{let l;(l=t(s,i,e))!==!1&&(a[i]=l||s)}),Object.defineProperties(e,a)},b$=e=>{cO(e,(t,n)=>{if(wr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(wr(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},j$=(e,t)=>{const n={},a=s=>{s.forEach(i=>{n[i]=!0})};return Mo(e)?a(e):a(String(e).split(t)),n},w$=()=>{},N$=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function S$(e){return!!(e&&wr(e.append)&&e[aO]==="FormData"&&e[nf])}const k$=e=>{const t=new Array(10),n=(a,s)=>{if(Qc(a)){if(t.indexOf(a)>=0)return;if(Vc(a))return a;if(!("toJSON"in a)){t[s]=a;const i=Mo(a)?[]:{};return Yc(a,(l,d)=>{const u=n(l,s+1);!ro(u)&&(i[d]=u)}),t[s]=void 0,i}}return a};return n(e,0)},C$=xn("AsyncFunction"),A$=e=>e&&(Qc(e)||wr(e))&&wr(e.then)&&wr(e.catch),dO=((e,t)=>e?setImmediate:t?((n,a)=>(As.addEventListener("message",({source:s,data:i})=>{s===As&&i===n&&a.length&&a.shift()()},!1),s=>{a.push(s),As.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",wr(As.postMessage)),P$=typeof queueMicrotask<"u"?queueMicrotask.bind(As):typeof process<"u"&&process.nextTick||dO,O$=e=>e!=null&&wr(e[nf]),ce={isArray:Mo,isArrayBuffer:sO,isBuffer:Vc,isFormData:t$,isArrayBufferView:KI,isString:GI,isNumber:iO,isBoolean:VI,isObject:Qc,isPlainObject:qu,isEmptyObject:QI,isReadableStream:n$,isRequest:a$,isResponse:s$,isHeaders:i$,isUndefined:ro,isDate:YI,isFile:XI,isBlob:JI,isRegExp:v$,isFunction:wr,isStream:e$,isURLSearchParams:r$,isTypedArray:m$,isFileList:ZI,forEach:Yc,merge:Pv,extend:l$,trim:o$,stripBOM:c$,inherits:d$,toFlatObject:u$,kindOf:af,kindOfTest:xn,endsWith:h$,toArray:f$,forEachEntry:p$,matchAll:x$,isHTMLForm:g$,hasOwnProperty:GN,hasOwnProp:GN,reduceDescriptors:cO,freezeMethods:b$,toObjectSet:j$,toCamelCase:y$,noop:w$,toFiniteNumber:N$,findKey:oO,global:As,isContextDefined:lO,isSpecCompliantForm:S$,toJSONObject:k$,isAsyncFn:C$,isThenable:A$,setImmediate:dO,asap:P$,isIterable:O$};let Le=class uO extends Error{static from(t,n,a,s,i,l){const d=new uO(t.message,n||t.code,a,s,i);return d.cause=t,d.name=t.name,l&&Object.assign(d,l),d}constructor(t,n,a,s,i){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),a&&(this.config=a),s&&(this.request=s),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}};Le.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Le.ERR_BAD_OPTION="ERR_BAD_OPTION";Le.ECONNABORTED="ECONNABORTED";Le.ETIMEDOUT="ETIMEDOUT";Le.ERR_NETWORK="ERR_NETWORK";Le.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Le.ERR_DEPRECATED="ERR_DEPRECATED";Le.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Le.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Le.ERR_CANCELED="ERR_CANCELED";Le.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Le.ERR_INVALID_URL="ERR_INVALID_URL";const E$=null;function Ov(e){return ce.isPlainObject(e)||ce.isArray(e)}function hO(e){return ce.endsWith(e,"[]")?e.slice(0,-2):e}function VN(e,t,n){return e?e.concat(t).map(function(s,i){return s=hO(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function _$(e){return ce.isArray(e)&&!e.some(Ov)}const T$=ce.toFlatObject(ce,{},null,function(t){return/^is[A-Z]/.test(t)});function of(e,t,n){if(!ce.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ce.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,x){return!ce.isUndefined(x[w])});const a=n.metaTokens,s=n.visitor||p,i=n.dots,l=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(t);if(!ce.isFunction(s))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(ce.isDate(v))return v.toISOString();if(ce.isBoolean(v))return v.toString();if(!u&&ce.isBlob(v))throw new Le("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(v)||ce.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function p(v,w,x){let S=v;if(v&&!x&&typeof v=="object"){if(ce.endsWith(w,"{}"))w=a?w:w.slice(0,-2),v=JSON.stringify(v);else if(ce.isArray(v)&&_$(v)||(ce.isFileList(v)||ce.endsWith(w,"[]"))&&(S=ce.toArray(v)))return w=hO(w),S.forEach(function(O,N){!(ce.isUndefined(O)||O===null)&&t.append(l===!0?VN([w],N,i):l===null?w:w+"[]",h(O))}),!1}return Ov(v)?!0:(t.append(VN(x,w,i),h(v)),!1)}const m=[],g=Object.assign(T$,{defaultVisitor:p,convertValue:h,isVisitable:Ov});function j(v,w){if(!ce.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+w.join("."));m.push(v),ce.forEach(v,function(S,P){(!(ce.isUndefined(S)||S===null)&&s.call(t,S,ce.isString(P)?P.trim():P,w,g))===!0&&j(S,w?w.concat(P):[P])}),m.pop()}}if(!ce.isObject(e))throw new TypeError("data must be an object");return j(e),t}function QN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function mj(e,t){this._pairs=[],e&&of(e,this,t)}const fO=mj.prototype;fO.append=function(t,n){this._pairs.push([t,n])};fO.toString=function(t){const n=t?function(a){return t.call(this,a,QN)}:QN;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function R$(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function mO(e,t,n){if(!t)return e;const a=n&&n.encode||R$,s=ce.isFunction(n)?{serialize:n}:n,i=s&&s.serialize;let l;if(i?l=i(t,s):l=ce.isURLSearchParams(t)?t.toString():new mj(t,s).toString(a),l){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class YN{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ce.forEach(this.handlers,function(a){a!==null&&t(a)})}}const pO={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},M$=typeof URLSearchParams<"u"?URLSearchParams:mj,I$=typeof FormData<"u"?FormData:null,$$=typeof Blob<"u"?Blob:null,L$={isBrowser:!0,classes:{URLSearchParams:M$,FormData:I$,Blob:$$},protocols:["http","https","file","blob","url","data"]},pj=typeof window<"u"&&typeof document<"u",Ev=typeof navigator=="object"&&navigator||void 0,D$=pj&&(!Ev||["ReactNative","NativeScript","NS"].indexOf(Ev.product)<0),F$=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",q$=pj&&window.location.href||"http://localhost",z$=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pj,hasStandardBrowserEnv:D$,hasStandardBrowserWebWorkerEnv:F$,navigator:Ev,origin:q$},Symbol.toStringTag,{value:"Module"})),ar={...z$,...L$};function B$(e,t){return of(e,new ar.classes.URLSearchParams,{visitor:function(n,a,s,i){return ar.isNode&&ce.isBuffer(n)?(this.append(a,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function U$(e){return ce.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function W$(e){const t={},n=Object.keys(e);let a;const s=n.length;let i;for(a=0;a<s;a++)i=n[a],t[i]=e[i];return t}function xO(e){function t(n,a,s,i){let l=n[i++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),u=i>=n.length;return l=!l&&ce.isArray(s)?s.length:l,u?(ce.hasOwnProp(s,l)?s[l]=[s[l],a]:s[l]=a,!d):((!s[l]||!ce.isObject(s[l]))&&(s[l]=[]),t(n,a,s[l],i)&&ce.isArray(s[l])&&(s[l]=W$(s[l])),!d)}if(ce.isFormData(e)&&ce.isFunction(e.entries)){const n={};return ce.forEachEntry(e,(a,s)=>{t(U$(a),s,n,0)}),n}return null}function H$(e,t,n){if(ce.isString(e))try{return(t||JSON.parse)(e),ce.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const Xc={transitional:pO,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",s=a.indexOf("application/json")>-1,i=ce.isObject(t);if(i&&ce.isHTMLForm(t)&&(t=new FormData(t)),ce.isFormData(t))return s?JSON.stringify(xO(t)):t;if(ce.isArrayBuffer(t)||ce.isBuffer(t)||ce.isStream(t)||ce.isFile(t)||ce.isBlob(t)||ce.isReadableStream(t))return t;if(ce.isArrayBufferView(t))return t.buffer;if(ce.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return B$(t,this.formSerializer).toString();if((d=ce.isFileList(t))||a.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return of(d?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),H$(t)):t}],transformResponse:[function(t){const n=this.transitional||Xc.transitional,a=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ce.isResponse(t)||ce.isReadableStream(t))return t;if(t&&ce.isString(t)&&(a&&!this.responseType||s)){const l=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(d){if(l)throw d.name==="SyntaxError"?Le.from(d,Le.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ar.classes.FormData,Blob:ar.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],e=>{Xc.headers[e]={}});const K$=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),G$=e=>{const t={};let n,a,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),a=l.substring(s+1).trim(),!(!n||t[n]&&K$[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},XN=Symbol("internals");function Rl(e){return e&&String(e).trim().toLowerCase()}function zu(e){return e===!1||e==null?e:ce.isArray(e)?e.map(zu):String(e)}function V$(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const Q$=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Kp(e,t,n,a,s){if(ce.isFunction(a))return a.call(this,t,n);if(s&&(t=n),!!ce.isString(t)){if(ce.isString(a))return t.indexOf(a)!==-1;if(ce.isRegExp(a))return a.test(t)}}function Y$(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function X$(e,t){const n=ce.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(s,i,l){return this[a].call(this,t,s,i,l)},configurable:!0})})}let Nr=class{constructor(t){t&&this.set(t)}set(t,n,a){const s=this;function i(d,u,h){const p=Rl(u);if(!p)throw new Error("header name must be a non-empty string");const m=ce.findKey(s,p);(!m||s[m]===void 0||h===!0||h===void 0&&s[m]!==!1)&&(s[m||u]=zu(d))}const l=(d,u)=>ce.forEach(d,(h,p)=>i(h,p,u));if(ce.isPlainObject(t)||t instanceof this.constructor)l(t,n);else if(ce.isString(t)&&(t=t.trim())&&!Q$(t))l(G$(t),n);else if(ce.isObject(t)&&ce.isIterable(t)){let d={},u,h;for(const p of t){if(!ce.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[h=p[0]]=(u=d[h])?ce.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}l(d,n)}else t!=null&&i(n,t,a);return this}get(t,n){if(t=Rl(t),t){const a=ce.findKey(this,t);if(a){const s=this[a];if(!n)return s;if(n===!0)return V$(s);if(ce.isFunction(n))return n.call(this,s,a);if(ce.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Rl(t),t){const a=ce.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||Kp(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let s=!1;function i(l){if(l=Rl(l),l){const d=ce.findKey(a,l);d&&(!n||Kp(a,a[d],d,n))&&(delete a[d],s=!0)}}return ce.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let a=n.length,s=!1;for(;a--;){const i=n[a];(!t||Kp(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,a={};return ce.forEach(this,(s,i)=>{const l=ce.findKey(a,i);if(l){n[l]=zu(s),delete n[i];return}const d=t?Y$(i):String(i).trim();d!==i&&delete n[i],n[d]=zu(s),a[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ce.forEach(this,(a,s)=>{a!=null&&a!==!1&&(n[s]=t&&ce.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(s=>a.set(s)),a}static accessor(t){const a=(this[XN]=this[XN]={accessors:{}}).accessors,s=this.prototype;function i(l){const d=Rl(l);a[d]||(X$(s,l),a[d]=!0)}return ce.isArray(t)?t.forEach(i):i(t),this}};Nr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(Nr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});ce.freezeMethods(Nr);function Gp(e,t){const n=this||Xc,a=t||n,s=Nr.from(a.headers);let i=a.data;return ce.forEach(e,function(d){i=d.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function gO(e){return!!(e&&e.__CANCEL__)}let Jc=class extends Le{constructor(t,n,a){super(t??"canceled",Le.ERR_CANCELED,n,a),this.name="CanceledError",this.__CANCEL__=!0}};function yO(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new Le("Request failed with status code "+n.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function J$(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Z$(e,t){e=e||10;const n=new Array(e),a=new Array(e);let s=0,i=0,l;return t=t!==void 0?t:1e3,function(u){const h=Date.now(),p=a[i];l||(l=h),n[s]=u,a[s]=h;let m=i,g=0;for(;m!==s;)g+=n[m++],m=m%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),h-l<t)return;const j=p&&h-p;return j?Math.round(g*1e3/j):void 0}}function e7(e,t){let n=0,a=1e3/t,s,i;const l=(h,p=Date.now())=>{n=p,s=null,i&&(clearTimeout(i),i=null),e(...h)};return[(...h)=>{const p=Date.now(),m=p-n;m>=a?l(h,p):(s=h,i||(i=setTimeout(()=>{i=null,l(s)},a-m)))},()=>s&&l(s)]}const Ju=(e,t,n=3)=>{let a=0;const s=Z$(50,250);return e7(i=>{const l=i.loaded,d=i.lengthComputable?i.total:void 0,u=l-a,h=s(u),p=l<=d;a=l;const m={loaded:l,total:d,progress:d?l/d:void 0,bytes:u,rate:h||void 0,estimated:h&&d&&p?(d-l)/h:void 0,event:i,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(m)},n)},JN=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},ZN=e=>(...t)=>ce.asap(()=>e(...t)),t7=ar.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ar.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ar.origin),ar.navigator&&/(msie|trident)/i.test(ar.navigator.userAgent)):()=>!0,r7=ar.hasStandardBrowserEnv?{write(e,t,n,a,s,i,l){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(t)}`];ce.isNumber(n)&&d.push(`expires=${new Date(n).toUTCString()}`),ce.isString(a)&&d.push(`path=${a}`),ce.isString(s)&&d.push(`domain=${s}`),i===!0&&d.push("secure"),ce.isString(l)&&d.push(`SameSite=${l}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function n7(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function a7(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function vO(e,t,n){let a=!n7(t);return e&&(a||n==!1)?a7(e,t):t}const eS=e=>e instanceof Nr?{...e}:e;function Ks(e,t){t=t||{};const n={};function a(h,p,m,g){return ce.isPlainObject(h)&&ce.isPlainObject(p)?ce.merge.call({caseless:g},h,p):ce.isPlainObject(p)?ce.merge({},p):ce.isArray(p)?p.slice():p}function s(h,p,m,g){if(ce.isUndefined(p)){if(!ce.isUndefined(h))return a(void 0,h,m,g)}else return a(h,p,m,g)}function i(h,p){if(!ce.isUndefined(p))return a(void 0,p)}function l(h,p){if(ce.isUndefined(p)){if(!ce.isUndefined(h))return a(void 0,h)}else return a(void 0,p)}function d(h,p,m){if(m in t)return a(h,p);if(m in e)return a(void 0,h)}const u={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(h,p,m)=>s(eS(h),eS(p),m,!0)};return ce.forEach(Object.keys({...e,...t}),function(p){const m=u[p]||s,g=m(e[p],t[p],p);ce.isUndefined(g)&&m!==d||(n[p]=g)}),n}const bO=e=>{const t=Ks({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:i,headers:l,auth:d}=t;if(t.headers=l=Nr.from(l),t.url=mO(vO(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),ce.isFormData(n)){if(ar.hasStandardBrowserEnv||ar.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ce.isFunction(n.getHeaders)){const u=n.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([p,m])=>{h.includes(p.toLowerCase())&&l.set(p,m)})}}if(ar.hasStandardBrowserEnv&&(a&&ce.isFunction(a)&&(a=a(t)),a||a!==!1&&t7(t.url))){const u=s&&i&&r7.read(i);u&&l.set(s,u)}return t},s7=typeof XMLHttpRequest<"u",i7=s7&&function(e){return new Promise(function(n,a){const s=bO(e);let i=s.data;const l=Nr.from(s.headers).normalize();let{responseType:d,onUploadProgress:u,onDownloadProgress:h}=s,p,m,g,j,v;function w(){j&&j(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function S(){if(!x)return;const O=Nr.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),A={data:!d||d==="text"||d==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:O,config:e,request:x};yO(function(E){n(E),w()},function(E){a(E),w()},A),x=null}"onloadend"in x?x.onloadend=S:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(S)},x.onabort=function(){x&&(a(new Le("Request aborted",Le.ECONNABORTED,e,x)),x=null)},x.onerror=function(N){const A=N&&N.message?N.message:"Network Error",C=new Le(A,Le.ERR_NETWORK,e,x);C.event=N||null,a(C),x=null},x.ontimeout=function(){let N=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const A=s.transitional||pO;s.timeoutErrorMessage&&(N=s.timeoutErrorMessage),a(new Le(N,A.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,e,x)),x=null},i===void 0&&l.setContentType(null),"setRequestHeader"in x&&ce.forEach(l.toJSON(),function(N,A){x.setRequestHeader(A,N)}),ce.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),d&&d!=="json"&&(x.responseType=s.responseType),h&&([g,v]=Ju(h,!0),x.addEventListener("progress",g)),u&&x.upload&&([m,j]=Ju(u),x.upload.addEventListener("progress",m),x.upload.addEventListener("loadend",j)),(s.cancelToken||s.signal)&&(p=O=>{x&&(a(!O||O.type?new Jc(null,e,x):O),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const P=J$(s.url);if(P&&ar.protocols.indexOf(P)===-1){a(new Le("Unsupported protocol "+P+":",Le.ERR_BAD_REQUEST,e));return}x.send(i||null)})},o7=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,s;const i=function(h){if(!s){s=!0,d();const p=h instanceof Error?h:this.reason;a.abort(p instanceof Le?p:new Jc(p instanceof Error?p.message:p))}};let l=t&&setTimeout(()=>{l=null,i(new Le(`timeout of ${t}ms exceeded`,Le.ETIMEDOUT))},t);const d=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),e=null)};e.forEach(h=>h.addEventListener("abort",i));const{signal:u}=a;return u.unsubscribe=()=>ce.asap(d),u}},l7=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,s;for(;a<n;)s=a+t,yield e.slice(a,s),a=s},c7=async function*(e,t){for await(const n of d7(e))yield*l7(n,t)},d7=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},tS=(e,t,n,a)=>{const s=c7(e,t);let i=0,l,d=u=>{l||(l=!0,a&&a(u))};return new ReadableStream({async pull(u){try{const{done:h,value:p}=await s.next();if(h){d(),u.close();return}let m=p.byteLength;if(n){let g=i+=m;n(g)}u.enqueue(new Uint8Array(p))}catch(h){throw d(h),h}},cancel(u){return d(u),s.return()}},{highWaterMark:2})},rS=64*1024,{isFunction:Nu}=ce,u7=(({Request:e,Response:t})=>({Request:e,Response:t}))(ce.global),{ReadableStream:nS,TextEncoder:aS}=ce.global,sS=(e,...t)=>{try{return!!e(...t)}catch{return!1}},h7=e=>{e=ce.merge.call({skipUndefined:!0},u7,e);const{fetch:t,Request:n,Response:a}=e,s=t?Nu(t):typeof fetch=="function",i=Nu(n),l=Nu(a);if(!s)return!1;const d=s&&Nu(nS),u=s&&(typeof aS=="function"?(v=>w=>v.encode(w))(new aS):async v=>new Uint8Array(await new n(v).arrayBuffer())),h=i&&d&&sS(()=>{let v=!1;const w=new n(ar.origin,{body:new nS,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!w}),p=l&&d&&sS(()=>ce.isReadableStream(new a("").body)),m={stream:p&&(v=>v.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!m[v]&&(m[v]=(w,x)=>{let S=w&&w[v];if(S)return S.call(w);throw new Le(`Response type '${v}' is not supported`,Le.ERR_NOT_SUPPORT,x)})});const g=async v=>{if(v==null)return 0;if(ce.isBlob(v))return v.size;if(ce.isSpecCompliantForm(v))return(await new n(ar.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(v)||ce.isArrayBuffer(v))return v.byteLength;if(ce.isURLSearchParams(v)&&(v=v+""),ce.isString(v))return(await u(v)).byteLength},j=async(v,w)=>{const x=ce.toFiniteNumber(v.getContentLength());return x??g(w)};return async v=>{let{url:w,method:x,data:S,signal:P,cancelToken:O,timeout:N,onDownloadProgress:A,onUploadProgress:C,responseType:E,headers:T,withCredentials:R="same-origin",fetchOptions:I}=bO(v),M=t||fetch;E=E?(E+"").toLowerCase():"text";let $=o7([P,O&&O.toAbortSignal()],N),G=null;const V=$&&$.unsubscribe&&(()=>{$.unsubscribe()});let z;try{if(C&&h&&x!=="get"&&x!=="head"&&(z=await j(T,S))!==0){let q=new n(w,{method:"POST",body:S,duplex:"half"}),K;if(ce.isFormData(S)&&(K=q.headers.get("content-type"))&&T.setContentType(K),q.body){const[Y,W]=JN(z,Ju(ZN(C)));S=tS(q.body,rS,Y,W)}}ce.isString(R)||(R=R?"include":"omit");const U=i&&"credentials"in n.prototype,H={...I,signal:$,method:x.toUpperCase(),headers:T.normalize().toJSON(),body:S,duplex:"half",credentials:U?R:void 0};G=i&&new n(w,H);let B=await(i?M(G,I):M(w,H));const D=p&&(E==="stream"||E==="response");if(p&&(A||D&&V)){const q={};["status","statusText","headers"].forEach(ue=>{q[ue]=B[ue]});const K=ce.toFiniteNumber(B.headers.get("content-length")),[Y,W]=A&&JN(K,Ju(ZN(A),!0))||[];B=new a(tS(B.body,rS,Y,()=>{W&&W(),V&&V()}),q)}E=E||"text";let L=await m[ce.findKey(m,E)||"text"](B,v);return!D&&V&&V(),await new Promise((q,K)=>{yO(q,K,{data:L,headers:Nr.from(B.headers),status:B.status,statusText:B.statusText,config:v,request:G})})}catch(U){throw V&&V(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,v,G),{cause:U.cause||U}):Le.from(U,U&&U.code,v,G)}}},f7=new Map,jO=e=>{let t=e&&e.env||{};const{fetch:n,Request:a,Response:s}=t,i=[a,s,n];let l=i.length,d=l,u,h,p=f7;for(;d--;)u=i[d],h=p.get(u),h===void 0&&p.set(u,h=d?new Map:h7(t)),p=h;return h};jO();const xj={http:E$,xhr:i7,fetch:{get:jO}};ce.forEach(xj,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const iS=e=>`- ${e}`,m7=e=>ce.isFunction(e)||e===null||e===!1;function p7(e,t){e=ce.isArray(e)?e:[e];const{length:n}=e;let a,s;const i={};for(let l=0;l<n;l++){a=e[l];let d;if(s=a,!m7(a)&&(s=xj[(d=String(a)).toLowerCase()],s===void 0))throw new Le(`Unknown adapter '${d}'`);if(s&&(ce.isFunction(s)||(s=s.get(t))))break;i[d||"#"+l]=s}if(!s){const l=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let d=n?l.length>1?`since :
`+l.map(iS).join(`
`):" "+iS(l[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s}const wO={getAdapter:p7,adapters:xj};function Vp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Jc(null,e)}function oS(e){return Vp(e),e.headers=Nr.from(e.headers),e.data=Gp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),wO.getAdapter(e.adapter||Xc.adapter,e)(e).then(function(a){return Vp(e),a.data=Gp.call(e,e.transformResponse,a),a.headers=Nr.from(a.headers),a},function(a){return gO(a)||(Vp(e),a&&a.response&&(a.response.data=Gp.call(e,e.transformResponse,a.response),a.response.headers=Nr.from(a.response.headers))),Promise.reject(a)})}const NO="1.13.4",lf={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{lf[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const lS={};lf.transitional=function(t,n,a){function s(i,l){return"[Axios v"+NO+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,d)=>{if(t===!1)throw new Le(s(l," has been removed"+(n?" in "+n:"")),Le.ERR_DEPRECATED);return n&&!lS[l]&&(lS[l]=!0,console.warn(s(l," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,l,d):!0}};lf.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function x7(e,t,n){if(typeof e!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const i=a[s],l=t[i];if(l){const d=e[i],u=d===void 0||l(d,i,e);if(u!==!0)throw new Le("option "+i+" must be "+u,Le.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Le("Unknown option "+i,Le.ERR_BAD_OPTION)}}const Bu={assertOptions:x7,validators:lf},kn=Bu.validators;let zs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new YN,response:new YN}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ks(this.defaults,n);const{transitional:a,paramsSerializer:s,headers:i}=n;a!==void 0&&Bu.assertOptions(a,{silentJSONParsing:kn.transitional(kn.boolean),forcedJSONParsing:kn.transitional(kn.boolean),clarifyTimeoutError:kn.transitional(kn.boolean)},!1),s!=null&&(ce.isFunction(s)?n.paramsSerializer={serialize:s}:Bu.assertOptions(s,{encode:kn.function,serialize:kn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Bu.assertOptions(n,{baseUrl:kn.spelling("baseURL"),withXsrfToken:kn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=i&&ce.merge(i.common,i[n.method]);i&&ce.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=Nr.concat(l,i);const d=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(u=u&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let p,m=0,g;if(!u){const v=[oS.bind(this),void 0];for(v.unshift(...d),v.push(...h),g=v.length,p=Promise.resolve(n);m<g;)p=p.then(v[m++],v[m++]);return p}g=d.length;let j=n;for(;m<g;){const v=d[m++],w=d[m++];try{j=v(j)}catch(x){w.call(this,x);break}}try{p=oS.call(this,j)}catch(v){return Promise.reject(v)}for(m=0,g=h.length;m<g;)p=p.then(h[m++],h[m++]);return p}getUri(t){t=Ks(this.defaults,t);const n=vO(t.baseURL,t.url,t.allowAbsoluteUrls);return mO(n,t.params,t.paramsSerializer)}};ce.forEach(["delete","get","head","options"],function(t){zs.prototype[t]=function(n,a){return this.request(Ks(a||{},{method:t,url:n,data:(a||{}).data}))}});ce.forEach(["post","put","patch"],function(t){function n(a){return function(i,l,d){return this.request(Ks(d||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}zs.prototype[t]=n(),zs.prototype[t+"Form"]=n(!0)});let g7=class SO{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const a=this;this.promise.then(s=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](s);a._listeners=null}),this.promise.then=s=>{let i;const l=new Promise(d=>{a.subscribe(d),i=d}).then(s);return l.cancel=function(){a.unsubscribe(i)},l},t(function(i,l,d){a.reason||(a.reason=new Jc(i,l,d),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new SO(function(s){t=s}),cancel:t}}};function y7(e){return function(n){return e.apply(null,n)}}function v7(e){return ce.isObject(e)&&e.isAxiosError===!0}const _v={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(_v).forEach(([e,t])=>{_v[t]=e});function kO(e){const t=new zs(e),n=nO(zs.prototype.request,t);return ce.extend(n,zs.prototype,t,{allOwnKeys:!0}),ce.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return kO(Ks(e,s))},n}const wt=kO(Xc);wt.Axios=zs;wt.CanceledError=Jc;wt.CancelToken=g7;wt.isCancel=gO;wt.VERSION=NO;wt.toFormData=of;wt.AxiosError=Le;wt.Cancel=wt.CanceledError;wt.all=function(t){return Promise.all(t)};wt.spread=y7;wt.isAxiosError=v7;wt.mergeConfig=Ks;wt.AxiosHeaders=Nr;wt.formToJSON=e=>xO(ce.isHTMLForm(e)?new FormData(e):e);wt.getAdapter=wO.getAdapter;wt.HttpStatusCode=_v;wt.default=wt;const{Axios:Dne,AxiosError:Fne,CanceledError:qne,isCancel:zne,CancelToken:Bne,VERSION:Une,all:Wne,Cancel:Hne,isAxiosError:Kne,spread:Gne,toFormData:Vne,AxiosHeaders:Qne,HttpStatusCode:Yne,formToJSON:Xne,getAdapter:Jne,mergeConfig:Zne}=wt;class Ke extends Error{constructor(n,a,s){super(n);gu(this,"status");gu(this,"data");this.name="ApiError",this.status=a,this.data=s}}const It=wt.create({baseURL:"https://auth.nubabel.com",withCredentials:!0,headers:{"Content-Type":"application/json"}});function b7(){const e=document.cookie.match(/csrf_token=([^;]+)/);return e?decodeURIComponent(e[1]):""}It.interceptors.request.use(e=>{const t=b7();return t&&e.method&&!["get","head","options"].includes(e.method.toLowerCase())&&(e.headers["X-CSRF-Token"]=t),e});function j7(e){var n,a;if(wt.isAxiosError(e)){const s=e,i=((n=s.response)==null?void 0:n.status)??null,l=(a=s.response)==null?void 0:a.data,d=typeof(l==null?void 0:l.error)=="string"&&l.error||typeof(l==null?void 0:l.message)=="string"&&l.message||s.message||"Request failed";return new Ke(d,i,l)}const t=e instanceof Error?e.message:String(e);return new Ke(t,null,null)}let Qp=!1,Yp=null;async function w7(){try{return await It.post("/auth/refresh"),!0}catch{return!1}}It.interceptors.response.use(e=>e,async e=>{var n,a,s;const t=e.config;if(((n=e.response)==null?void 0:n.status)===401&&t&&!t._retried&&!((a=t.url)!=null&&a.includes("/auth/refresh"))&&!((s=t.url)!=null&&s.includes("/auth/login"))){t._retried=!0,Qp||(Qp=!0,Yp=w7());const i=await Yp;return Qp=!1,Yp=null,i?It.request(t):(window.location.href="/login?error=session_expired",Promise.reject(e))}return Promise.reject(e)});async function se(e){try{return(await It.request(e)).data}catch(t){throw j7(t)}}function N7(){var h;const[e,t]=b.useState(!0),[n,a]=b.useState(null),[s,i]=b.useState(null),[l,d]=b.useState({account:!0,slack:!1,workflow:!1});b.useEffect(()=>{async function p(){try{t(!0);const m=await It.get("/api/dashboard/stats");a(m.data),i(null)}catch(m){console.error("Failed to fetch dashboard stats:",m),i("Failed to load stats")}finally{t(!1)}}p()},[]);const u=p=>{d(m=>({...m,[p]:!m[p]}))};return r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Welcome to Nubabel - AI-Powered Workflow Automation Platform"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:e?r.jsxs(r.Fragment,{children:[r.jsx(Qr,{}),r.jsx(Qr,{}),r.jsx(Qr,{}),r.jsx(Qr,{})]}):s?r.jsx("div",{className:"col-span-4 text-center py-4 text-gray-500",children:s}):r.jsxs(r.Fragment,{children:[r.jsx(wu,{title:"Total Workflows",value:String((n==null?void 0:n.totalWorkflows)??0),icon:r.jsx(tO,{className:"h-5 w-5"}),trend:"neutral",change:0}),r.jsx(wu,{title:"Recent Executions",value:String((n==null?void 0:n.recentExecutions)??0),icon:r.jsx(DI,{className:"h-5 w-5"}),trend:"neutral",change:0}),r.jsx(wu,{title:"Success Rate",value:`${(n==null?void 0:n.successRate)??0}%`,icon:r.jsx(rO,{className:"h-5 w-5"}),trend:"neutral",change:0}),r.jsx(wu,{title:"Active Integrations",value:String(((h=n==null?void 0:n.activeIntegrations)==null?void 0:h.length)??0),icon:r.jsx(AI,{className:"h-5 w-5"}),trend:"neutral",change:0})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[r.jsx(BI,{}),r.jsx(UI,{})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:" Getting Started"}),r.jsx("p",{className:"text-blue-800 mb-4",children:"Complete these steps to start automating your workflows:"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",checked:l.account,onChange:()=>u("account"),className:"h-5 w-5 rounded border-blue-300 text-blue-600 focus:ring-blue-500 cursor-pointer"}),r.jsx("span",{className:`text-blue-800 group-hover:text-blue-900 ${l.account?"line-through opacity-75":""}`,children:"Set up your account"})]}),r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",checked:l.slack,onChange:()=>u("slack"),className:"h-5 w-5 rounded border-blue-300 text-blue-600 focus:ring-blue-500 cursor-pointer"}),r.jsx("span",{className:`text-blue-800 group-hover:text-blue-900 ${l.slack?"line-through opacity-75":""}`,children:"Configure your integrations (Slack, Notion, etc.)"})]}),r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",checked:l.workflow,onChange:()=>u("workflow"),className:"h-5 w-5 rounded border-blue-300 text-blue-600 focus:ring-blue-500 cursor-pointer"}),r.jsx("span",{className:`text-blue-800 group-hover:text-blue-900 ${l.workflow?"line-through opacity-75":""}`,children:"Create and run your first workflow"})]})]})]})]})}function S7({workflow:e,onExecute:t}){return r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${e.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.enabled?"Enabled":"Disabled"})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:e.description||"No description"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:["Created ",new Date(e.createdAt).toLocaleDateString()]}),r.jsx("button",{onClick:()=>t(e.id),disabled:!e.enabled,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Execute"})]})]})}function k7({workflowId:e,workflowName:t,isOpen:n,onClose:a,onSuccess:s}){const[i,l]=b.useState("{}"),[d,u]=b.useState("idle"),[h,p]=b.useState("");if(!n)return null;const m=async()=>{u("executing"),p("");try{let g={};i.trim()&&(g=JSON.parse(i)),await se({url:`/api/workflows/${e}/execute`,method:"POST",data:{inputData:g}}),u("success"),setTimeout(()=>{s==null||s(),a()},1500)}catch(g){g instanceof SyntaxError?p("Invalid JSON format"):g instanceof Ke?p(g.message):p("Execution failed"),u("error")}};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:a}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",onClick:g=>g.stopPropagation(),children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",onClick:g=>g.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Execute: ",t]}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Input Data (JSON)"}),r.jsx("textarea",{value:i,onChange:g=>l(g.target.value),disabled:d==="executing",className:"w-full h-48 px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100",placeholder:'{"key": "value"}'}),d==="executing"&&r.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-3",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-600"}),r.jsx("span",{className:"text-blue-800",children:"Executing workflow..."})]}),d==="success"&&r.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[r.jsx("span",{className:"text-green-600 text-xl",children:""}),r.jsx("span",{className:"text-green-800",children:"Workflow executed successfully!"})]}),d==="error"&&r.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("span",{className:"text-red-800",children:h})})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[r.jsx("button",{onClick:a,disabled:d==="executing",className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:m,disabled:d==="executing"||d==="success",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d==="executing"?"Executing...":"Execute"})]})]})})]})}function C7({isOpen:e,onClose:t,onSuccess:n}){const[a,s]=b.useState(""),[i,l]=b.useState(""),[d,u]=b.useState(!1),[h,p]=b.useState(null),m=async()=>{if(!a.trim()){p("Workflow name is required");return}u(!0),p(null);try{await se({url:"/api/workflows",method:"POST",data:{name:a.trim(),description:i.trim()||void 0,enabled:!0,config:{}}}),n(),t(),s(""),l("")}catch(g){let j="Failed to create workflow";g instanceof Ke&&(g.status===403?j="You don't have permission to create workflows. Please contact your organization admin to get elevated permissions.":j=g.message),p(j)}finally{u(!1)}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t,children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:g=>g.stopPropagation(),children:r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create Workflow"}),h&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-800 rounded-lg text-sm",children:h}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{id:"name",type:"text",value:a,onChange:g=>s(g.target.value),placeholder:"My Workflow",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{id:"description",value:i,onChange:g=>l(g.target.value),placeholder:"Describe what this workflow does...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),r.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{onClick:m,disabled:d,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating...":"Create"})]})]})})}):null}function A7(){const[e,t]=Gc(),[n,a]=b.useState([]),[s,i]=b.useState(!0),[l,d]=b.useState(null),[u,h]=b.useState(null),[p,m]=b.useState(!1),g=async()=>{try{d(null);const x=await se({url:"/api/workflows",method:"GET"});a(x.workflows)}catch(x){const S=x instanceof Ke?x.message:"Failed to fetch workflows";d(S)}finally{i(!1)}};b.useEffect(()=>{g()},[]),b.useEffect(()=>{e.get("create")==="true"&&(m(!0),e.delete("create"),t(e))},[e,t]);const j=x=>{const S=n.find(P=>P.id===x);S&&h(S)},v=()=>{h(null)},w=()=>{g()};return s?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading workflows..."})]})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Workflows"}),r.jsx("p",{className:"text-gray-600",children:"Manage and execute automation workflows"})]}),r.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:"+"}),"Create Workflow"]})]}),l&&r.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800",children:l})}),n.length===0&&!l?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No workflows yet"}),r.jsx("p",{className:"text-gray-600",children:"Create your first workflow to get started with automation"})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(x=>r.jsx(S7,{workflow:x,onExecute:j},x.id))}),u&&r.jsx(k7,{workflowId:u.id,workflowName:u.name,isOpen:!0,onClose:v,onSuccess:w}),r.jsx(C7,{isOpen:p,onClose:()=>m(!1),onSuccess:g})]})}function P7(){const{id:e}=ef(),[t,n]=b.useState(null),[a,s]=b.useState([]),[i,l]=b.useState(!0);b.useEffect(()=>{(async()=>{if(e)try{const[h,p]=await Promise.all([se({url:`/api/workflows/${e}`,method:"GET"}),se({url:`/api/workflows/${e}/executions`,method:"GET"})]);n(h.workflow),s(p.executions||[])}catch(h){console.error("Failed to fetch workflow:",h)}finally{l(!1)}})()},[e]);const d=u=>{switch(u){case"success":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"running":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return i?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading workflow..."})]})}):t?r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx(ft,{to:"/workflows",className:"text-indigo-600 hover:underline text-sm mb-2 inline-block",children:" Back to workflows"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.name}),t.description&&r.jsx("p",{className:"text-gray-600",children:t.description})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${t.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.enabled?"Enabled":"Disabled"}),r.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Execute"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("p",{className:"mt-2 text-lg text-gray-900",children:new Date(t.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),r.jsx("p",{className:"mt-2 text-lg text-gray-900",children:t.updatedAt?new Date(t.updatedAt).toLocaleDateString():"-"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Total Executions"}),r.jsx("p",{className:"mt-2 text-lg text-gray-900",children:a.length})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-6 py-4 border-b",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Executions"})}),a.length===0?r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-gray-500",children:"No executions yet"})}):r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Started"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.slice(0,10).map(u=>{const h=u.startedAt&&u.completedAt?Math.round((new Date(u.completedAt).getTime()-new Date(u.startedAt).getTime())/1e3):null;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${d(u.status)}`,children:u.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.startedAt?new Date(u.startedAt).toLocaleString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h!==null?`${h}s`:"-"})]},u.id)})})]})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Workflow not found"}),r.jsx(ft,{to:"/workflows",className:"text-indigo-600 hover:underline mt-4 inline-block",children:"Back to workflows"})]})}function O7(){const[e,t]=b.useState([]),[n,a]=b.useState(!0),[s,i]=b.useState("all");b.useEffect(()=>{(async()=>{try{const p=await se({url:"/api/executions",method:"GET"});t(p.executions||[])}catch(p){console.error("Failed to fetch executions:",p)}finally{a(!1)}})()},[]);const l=e.filter(h=>s==="all"?!0:h.status===s),d=h=>{switch(h){case"success":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"running":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},u=h=>{switch(h){case"success":return"";case"failed":return"";case"running":return"";default:return""}};return n?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading executions..."})]})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Executions"}),r.jsx("p",{className:"text-gray-600",children:"View workflow execution history"})]}),r.jsxs("div",{className:"mb-6 flex gap-2",children:[r.jsx("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-lg font-medium ${s==="all"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"All"}),r.jsx("button",{onClick:()=>i("success"),className:`px-4 py-2 rounded-lg font-medium ${s==="success"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"Success"}),r.jsx("button",{onClick:()=>i("failed"),className:`px-4 py-2 rounded-lg font-medium ${s==="failed"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"Failed"}),r.jsx("button",{onClick:()=>i("running"),className:`px-4 py-2 rounded-lg font-medium ${s==="running"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"Running"})]}),l.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No executions yet"}),r.jsx("p",{className:"text-gray-600",children:"Execute workflows to see their history here"})]})}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Workflow"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Started"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(h=>{var m;const p=h.startedAt&&h.completedAt?Math.round((new Date(h.completedAt).getTime()-new Date(h.startedAt).getTime())/1e3):null;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${d(h.status)}`,children:[u(h.status)," ",h.status]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((m=h.workflow)==null?void 0:m.name)||"Unknown"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.startedAt?new Date(h.startedAt).toLocaleString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p!==null?`${p}s`:"-"})]},h.id)})})]})})]})}function E7(){const{id:e}=ef(),[t,n]=b.useState(null),[a,s]=b.useState(!0),[i,l]=b.useState(null);b.useEffect(()=>{(async()=>{if(e)try{const m=await se({url:`/api/executions/${e}`,method:"GET"});n(m.execution)}catch(m){console.error("Failed to fetch execution:",m),l(m instanceof Error?m.message:"An error occurred")}finally{s(!1)}})()},[e]);const d=p=>{switch(p){case"success":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"running":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},u=p=>{switch(p){case"success":return"";case"failed":return"";case"running":return"";default:return""}};if(a)return r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading execution..."})]})});if(!t)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Execution not found"}),r.jsx(ft,{to:"/executions",className:"text-indigo-600 hover:underline mt-4 inline-block",children:"Back to executions"})]});const h=t.startedAt&&t.completedAt?Math.round((new Date(t.completedAt).getTime()-new Date(t.startedAt).getTime())/1e3):null;return r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx(ft,{to:"/executions",className:"text-indigo-600 hover:underline text-sm mb-2 inline-block",children:" Back to executions"}),i&&r.jsx("div",{className:"text-red-500 p-4 mb-4",children:i}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Execution Details"}),t.workflowName&&r.jsxs("p",{className:"text-gray-600",children:["Workflow: ",t.workflowName]})]}),r.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${d(t.status)}`,children:[u(t.status)," ",t.status]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Started"}),r.jsx("p",{className:"mt-2 text-lg text-gray-900",children:t.startedAt?new Date(t.startedAt).toLocaleString():"-"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),r.jsx("p",{className:"mt-2 text-lg text-gray-900",children:t.completedAt?new Date(t.completedAt).toLocaleString():"-"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),r.jsx("p",{className:"mt-2 text-lg text-gray-900",children:h!==null?`${h}s`:"-"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Execution ID"}),r.jsx("p",{className:"mt-2 text-sm text-gray-900 font-mono truncate",children:t.id})]})]}),t.errorMessage&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-8",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Error"}),r.jsx("pre",{className:"text-sm text-red-700 whitespace-pre-wrap font-mono",children:t.errorMessage})]}),t.steps&&t.steps.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[r.jsx("div",{className:"px-6 py-4 border-b",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Execution Steps"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:t.steps.map((p,m)=>r.jsx("div",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-sm font-medium text-gray-600",children:m+1}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-gray-900",children:p.name}),r.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs font-medium ${d(p.status)}`,children:p.status})]}),p.error&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.error})]})]})},p.id))})]}),(t.input||t.output)&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.input&&r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-6 py-4 border-b",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Input"})}),r.jsx("pre",{className:"p-6 text-sm text-gray-700 overflow-auto",children:JSON.stringify(t.input,null,2)})]}),t.output&&r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-6 py-4 border-b",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Output"})}),r.jsx("pre",{className:"p-6 text-sm text-gray-700 overflow-auto",children:JSON.stringify(t.output,null,2)})]})]})]})}const cS=e=>{let t;const n=new Set,a=(h,p)=>{const m=typeof h=="function"?h(t):h;if(!Object.is(m,t)){const g=t;t=p??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(j=>j(t,g))}},s=()=>t,d={setState:a,getState:s,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h))},u=t=e(a,s,d);return d},_7=(e=>e?cS(e):cS),T7=e=>e;function R7(e,t=T7){const n=X.useSyncExternalStore(e.subscribe,X.useCallback(()=>t(e.getState()),[e,t]),X.useCallback(()=>t(e.getInitialState()),[e,t]));return X.useDebugValue(n),n}const dS=e=>{const t=_7(e),n=a=>R7(t,a);return Object.assign(n,t),n},gj=(e=>e?dS(e):dS),rs=gj((e,t)=>({user:null,currentOrganization:null,organizations:[],membership:null,isLoading:!0,hasCheckedAuth:!1,fetchUser:async()=>{if(!t().hasCheckedAuth){e({isLoading:!0,hasCheckedAuth:!0});try{const n=await se({url:"/auth/me",method:"GET"});e({user:n.user,currentOrganization:n.currentOrganization,organizations:n.organizations||[],membership:n.membership||null,isLoading:!1})}catch(n){console.error("Failed to fetch user:",n),e({user:null,currentOrganization:null,organizations:[],membership:null,isLoading:!1})}}},logout:async()=>{try{await se({url:"/auth/logout",method:"POST"}),e({user:null,currentOrganization:null,organizations:[],membership:null}),window.location.href="/login"}catch(n){console.error("Logout failed:",n)}},switchOrganization:async n=>{try{const a=await se({url:"/auth/switch-org",method:"POST",data:{organizationId:n}});if(a.redirectUrl){window.location.href=a.redirectUrl;return}window.location.reload()}catch(a){console.error("Switch organization failed:",a)}},setUser:n=>{e({user:n})}}));function M7(){const{user:e,currentOrganization:t}=rs(),[n,a]=b.useState((e==null?void 0:e.name)||""),[s,i]=b.useState(!1),[l,d]=b.useState(null),[u,h]=b.useState(!0),[p,m]=b.useState(!1),g=async()=>{i(!0);try{await se({url:"/api/user/profile",method:"PUT",data:{name:n}}),alert("Profile updated successfully")}catch(w){const x=w instanceof Ke?w.message:"Failed to update profile";console.error("Save failed:",w),alert(x)}finally{i(!1)}},j=async()=>{if(confirm("Are you sure you want to logout from all devices?"))try{await se({url:"/api/auth/logout-all",method:"POST"}),window.location.href="/login"}catch(w){const x=w instanceof Ke?w.message:"Failed to logout from all devices";console.error("Logout all failed:",w),alert(x)}};b.useEffect(()=>{(async()=>{try{const x=await se({url:"/api/slack/my-identity",method:"GET"});d(x)}catch(x){console.error("Failed to fetch Slack identity:",x),d({linked:!1})}finally{h(!1)}})()},[]);const v=async()=>{m(!0);try{const w=await se({url:"/api/slack/sync-my-identity",method:"POST"});w.success&&(d(x=>x&&{...x,displayName:w.displayName,email:w.email,avatarUrl:w.avatarUrl,lastSyncedAt:w.lastSyncedAt}),alert("Slack profile synced successfully"))}catch(w){const x=w instanceof Ke?w.message:"Failed to sync Slack profile";console.error("Sync failed:",w),alert(x)}finally{m(!1)}};return r.jsxs("div",{className:"max-w-4xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),r.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Profile"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),r.jsx("input",{type:"text",value:n,onChange:w=>a(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email cannot be changed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Avatar"}),r.jsxs("div",{className:"flex items-center gap-4",children:[e!=null&&e.picture?r.jsx("img",{src:e.picture,alt:e.name,className:"w-16 h-16 rounded-full"}):r.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-600 flex items-center justify-center",children:r.jsx("span",{className:"text-white text-2xl font-medium",children:((e==null?void 0:e.name)||(e==null?void 0:e.email)||"?").charAt(0).toUpperCase()})}),r.jsxs("div",{children:[r.jsx("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Change Avatar"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"JPG, PNG or GIF (max. 2MB)"})]})]})]}),r.jsx("div",{className:"pt-4",children:r.jsx("button",{onClick:g,disabled:s,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Saving...":"Save Changes"})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Organization"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Name"}),r.jsx("input",{type:"text",value:(t==null?void 0:t.name)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Domain"}),r.jsx("input",{type:"text",value:(t==null?void 0:t.domain)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Members"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Member management coming soon"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Security"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Active Sessions"}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"You are currently logged in on this device. Session management coming soon."}),r.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Logout from All Devices"})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Slack Connection"}),u?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):l!=null&&l.linked?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[l.avatarUrl?r.jsx("img",{src:l.avatarUrl,alt:l.displayName||"Slack avatar",className:"w-12 h-12 rounded-full"}):r.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-600 flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xl font-medium",children:(l.displayName||l.email||"S").charAt(0).toUpperCase()})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:l.displayName||"Slack User"}),r.jsx("p",{className:"text-sm text-gray-500",children:l.email})]}),r.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"Connected"})]}),l.lastSyncedAt&&r.jsxs("p",{className:"text-sm text-gray-500",children:["Last synced: ",new Date(l.lastSyncedAt).toLocaleString()]}),r.jsx("div",{className:"flex gap-3 pt-2",children:r.jsx("button",{onClick:v,disabled:p,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Syncing...":"Sync Profile"})})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zm1.271 0a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zm2.521-10.122a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zm0 1.271a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.835a2.528 2.528 0 0 1 2.522-2.52h6.312zm10.122 2.521a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.835a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.835zm-1.27 0a2.528 2.528 0 0 1-2.521 2.521 2.528 2.528 0 0 1-2.521-2.521V2.522A2.528 2.528 0 0 1 15.165 0a2.528 2.528 0 0 1 2.521 2.522v6.313zm-2.521 10.122a2.528 2.528 0 0 1 2.521 2.522A2.528 2.528 0 0 1 15.165 24a2.528 2.528 0 0 1-2.521-2.522v-2.522h2.521zm0-1.27a2.528 2.528 0 0 1-2.521-2.521 2.528 2.528 0 0 1 2.521-2.521h6.313A2.528 2.528 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.521h-6.313z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Your Slack"}),r.jsx("p",{className:"text-gray-500 mb-4 max-w-sm mx-auto",children:"Link your Slack account to use @Nubabel in your workspace"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-600 max-w-md mx-auto",children:[r.jsx("p",{className:"font-medium mb-2",children:"How to connect:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-left",children:[r.jsx("li",{children:"Go to your Slack workspace"}),r.jsxs("li",{children:["Mention ",r.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"@Nubabel"})," in any channel"]}),r.jsx("li",{children:'Click the "Link My Account" button that appears'})]})]})]})]})]})]})}function I7(){const[e,t]=Gc(),[n,a]=b.useState(null),[s,i]=b.useState([]),[l,d]=b.useState(!0),[u,h]=b.useState(!1),[p,m]=b.useState(null);b.useEffect(()=>{const S=e.get("success"),P=e.get("error");S==="true"?(m({type:"success",text:"Notion workspace connected successfully!"}),t({})):P&&(m({type:"error",text:{access_denied:"You denied the Notion authorization request.",missing_params:"Missing required parameters from Notion.",invalid_state:"Invalid state parameter. Please try again.",token_exchange_failed:"Failed to exchange token with Notion.",server_error:"Server error occurred. Please try again.",notion_not_configured:"Notion integration is not yet configured. Please contact support."}[P]||`Error: ${P}`}),t({})),g()},[e,t]);const g=async()=>{try{const S=await se({url:"/api/notion/oauth/status",method:"GET"});a(S),S.connected&&await j()}catch(S){if(S instanceof Ke&&S.status===404){a({connected:!1,method:"none",workspaceId:null,workspaceName:null,workspaceIcon:null,botId:null,connectedAt:null,defaultDatabaseId:null});return}console.error("Fetch status error:",S)}finally{d(!1)}},j=async()=>{try{const S=await se({url:"/api/notion/databases",method:"GET"});i(S.databases||[])}catch{i([])}},v=()=>{window.location.href="/api/notion/oauth/install"},w=async()=>{if(confirm("Are you sure you want to disconnect Notion?")){h(!0),m(null);try{await se({url:"/api/notion/oauth/disconnect",method:"DELETE"}),a({connected:!1,method:"none",workspaceId:null,workspaceName:null,workspaceIcon:null,botId:null,connectedAt:null,defaultDatabaseId:null}),i([]),m({type:"success",text:"Notion disconnected successfully."})}catch{m({type:"error",text:"Failed to disconnect Notion."})}finally{h(!1)}}};if(l)return r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]})});const x=(n==null?void 0:n.connected)??!1;return r.jsxs("div",{className:"max-w-4xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Notion Integration"}),r.jsx("p",{className:"text-gray-600",children:"Connect your Notion workspace for workflows and knowledge management"})]}),p&&r.jsx("div",{className:`mb-6 p-4 rounded-lg ${p.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:p.text}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:x&&n?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-black rounded-lg flex items-center justify-center",children:n.workspaceIcon?r.jsx("img",{src:n.workspaceIcon,alt:"",className:"w-8 h-8 rounded"}):r.jsx("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M4 4.5C4 3.12 5.119 2 6.5 2h11C18.881 2 20 3.119 20 4.5v15c0 1.381-1.119 2.5-2.5 2.5h-11C5.119 22 4 20.881 4 19.5v-15zM6.5 4C6.224 4 6 4.224 6 4.5v15c0 .276.224.5.5.5h11c.276 0 .5-.224.5-.5v-15c0-.276-.224-.5-.5-.5h-11zM8 7h8v2H8V7zm0 4h8v2H8v-2zm0 4h5v2H8v-2z"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:n.workspaceName||"Notion Workspace"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Connected via OAuth"})]})]}),r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Connected"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm border-t border-gray-100 pt-4",children:[n.workspaceId&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Workspace ID:"}),r.jsx("span",{className:"ml-2 font-mono text-xs text-gray-700",children:n.workspaceId})]}),n.botId&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Bot ID:"}),r.jsx("span",{className:"ml-2 font-mono text-xs text-gray-700",children:n.botId})]}),n.connectedAt&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Connected:"}),r.jsx("span",{className:"ml-2 text-gray-700",children:new Date(n.connectedAt).toLocaleDateString()})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-100",children:[r.jsx("button",{onClick:v,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Reconnect"}),r.jsx("button",{onClick:w,disabled:u,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Disconnecting...":"Disconnect"})]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-black rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-10 h-10 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M4 4.5C4 3.12 5.119 2 6.5 2h11C18.881 2 20 3.119 20 4.5v15c0 1.381-1.119 2.5-2.5 2.5h-11C5.119 22 4 20.881 4 19.5v-15zM6.5 4C6.224 4 6 4.224 6 4.5v15c0 .276.224.5.5.5h11c.276 0 .5-.224.5-.5v-15c0-.276-.224-.5-.5-.5h-11zM8 7h8v2H8V7zm0 4h8v2H8v-2zm0 4h5v2H8v-2z"})})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect your Notion workspace"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Click the button below to authorize Nubabel to access your Notion workspace. Your team's pages and databases will be available for AI workflows."}),r.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors font-medium text-lg",children:[r.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M4 4.5C4 3.12 5.119 2 6.5 2h11C18.881 2 20 3.119 20 4.5v15c0 1.381-1.119 2.5-2.5 2.5h-11C5.119 22 4 20.881 4 19.5v-15zM6.5 4C6.224 4 6 4.224 6 4.5v15c0 .276.224.5.5.5h11c.276 0 .5-.224.5-.5v-15c0-.276-.224-.5-.5-.5h-11zM8 7h8v2H8V7zm0 4h8v2H8v-2zm0 4h5v2H8v-2z"})}),"Connect to Notion"]})]})}),x&&s.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Available Databases"}),r.jsx("button",{onClick:j,className:"text-sm text-indigo-600 hover:text-indigo-700",children:"Refresh"})]}),r.jsx("div",{className:"space-y-2",children:s.map(S=>r.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-indigo-300 transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:S.title}),r.jsx("p",{className:"text-sm text-gray-500 font-mono",children:S.id})]}),r.jsx("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm",children:"Open in Notion"})]})},S.id))})]}),x&&s.length===0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:[r.jsx("h3",{className:"text-lg font-medium text-yellow-900 mb-2",children:"No databases found"}),r.jsx("p",{className:"text-yellow-700 mb-4",children:"Your Notion workspace is connected, but no databases are accessible yet. Grant access to specific pages in Notion for the integration to see them."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("a",{href:"https://notion.so",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-md hover:bg-yellow-700",children:["Open Notion",r.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),r.jsx("button",{onClick:j,className:"inline-flex items-center px-4 py-2 bg-white border border-yellow-300 text-yellow-700 text-sm font-medium rounded-md hover:bg-yellow-50",children:"Refresh Databases"})]})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"How It Works"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-medium",children:"1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Connect your workspace"}),r.jsx("p",{className:"text-sm text-gray-600",children:'Click "Connect to Notion" and authorize Nubabel to access your workspace.'})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-medium",children:"2"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Share pages with the integration"}),r.jsx("p",{className:"text-sm text-gray-600",children:"In Notion, share specific pages or databases with the Nubabel integration to give it access."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-medium",children:"3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Use in workflows"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Your Notion content will be available to AI agents for knowledge retrieval and automation."})]})]})]})]})]})}function $7(){const[e,t]=Gc(),[n,a]=b.useState(null),[s,i]=b.useState(!0),[l,d]=b.useState(!1),[u,h]=b.useState(null);b.useEffect(()=>{const v=e.get("success"),w=e.get("error");v==="true"?(h({type:"success",text:"Slack workspace connected successfully!"}),t({})):w&&(h({type:"error",text:{access_denied:"You denied the Slack authorization request.",missing_params:"Missing required parameters from Slack.",server_config:"Server configuration error. Please contact support.",invalid_state:"Invalid state parameter. Please try again.",token_exchange_failed:"Failed to exchange token with Slack.",server_error:"Server error occurred. Please try again.",slack_not_configured:"Slack integration is not yet configured. Please contact support."}[w]||`Error: ${w}`}),t({})),p()},[e,t]);const p=async()=>{try{const v=await se({url:"/api/slack/integration",method:"GET"});a(v.integration)}catch(v){if(v instanceof Ke&&v.status===404){a(null);return}console.error("Fetch integration error:",v)}finally{i(!1)}},m=()=>{window.location.href="/api/slack/oauth/install"},g=async()=>{if(confirm("Are you sure you want to disconnect Slack?")){d(!0),h(null);try{await se({url:"/api/slack/integration",method:"DELETE"}),a(null),h({type:"success",text:"Slack disconnected successfully."})}catch{h({type:"error",text:"Failed to disconnect Slack."})}finally{d(!1)}}};if(s)return r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]})});const j=!!(n!=null&&n.hasWorkspace&&(n!=null&&n.workspaceId));return r.jsxs("div",{className:"max-w-4xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Slack Integration"}),r.jsx("p",{className:"text-gray-600",children:"Connect your Slack workspace to enable AI-powered automation"})]}),u&&r.jsx("div",{className:`mb-6 p-4 rounded-lg ${u.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:u.text}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:j&&n?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-[#4A154B] rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:n.workspaceName}),r.jsx("p",{className:"text-sm text-gray-500",children:"Connected Workspace"})]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.enabled&&n.healthStatus==="healthy"?"bg-green-100 text-green-800":n.healthStatus==="degraded"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:n.enabled&&n.healthStatus==="healthy"?"Connected":n.healthStatus==="degraded"?"Degraded":"Disconnected"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm border-t border-gray-100 pt-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Workspace ID:"}),r.jsx("span",{className:"ml-2 font-mono text-xs text-gray-700",children:n.workspaceId})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Bot User ID:"}),r.jsx("span",{className:"ml-2 font-mono text-xs text-gray-700",children:n.botUserId||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Installed:"}),r.jsx("span",{className:"ml-2 text-gray-700",children:n.installedAt?new Date(n.installedAt).toLocaleDateString():"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Last Updated:"}),r.jsx("span",{className:"ml-2 text-gray-700",children:new Date(n.updatedAt).toLocaleDateString()})]})]}),n.scopes&&n.scopes.length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Permissions:"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:n.scopes.map(v=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:v},v))})]}),r.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-100",children:[r.jsx("button",{onClick:m,className:"px-4 py-2 bg-[#4A154B] text-white rounded-lg hover:bg-[#3e1240] transition-colors",children:"Reconnect Workspace"}),r.jsx("button",{onClick:g,disabled:l,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Disconnecting...":"Disconnect"})]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-[#4A154B] rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-10 h-10 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect your Slack workspace"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Click the button below to authorize Nubabel in your Slack workspace. Your team will be able to interact with AI agents directly from Slack."}),r.jsxs("button",{onClick:m,className:"inline-flex items-center gap-2 px-6 py-3 bg-[#4A154B] text-white rounded-lg hover:bg-[#3e1240] transition-colors font-medium text-lg",children:[r.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})}),"Connect to Slack"]})]})}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"How It Works"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-medium",children:"1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Connect your workspace"}),r.jsx("p",{className:"text-sm text-gray-600",children:'Click "Connect to Slack" and authorize Nubabel in your workspace.'})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-medium",children:"2"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Invite the bot to channels"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Add the Nubabel bot to the channels where you want AI assistance."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-medium",children:"3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Start using AI automation"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Mention the bot or use slash commands to interact with your AI agents."})]})]})]})]})]})}function L7(){const[e,t]=b.useState(null),[n,a]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const d=await se({url:"/api/settings/google-calendar",method:"GET"});t(d.connection)}catch(d){console.error("Failed to fetch Google Calendar connection:",d)}finally{a(!1)}})()},[]);const s=async()=>{try{const l=await se({url:"/api/settings/google-calendar/connect",method:"POST"});window.location.href=l.authUrl}catch(l){console.error("Failed to initiate connection:",l)}},i=async()=>{if(confirm("Are you sure you want to disconnect Google Calendar?"))try{await se({url:"/api/settings/google-calendar/disconnect",method:"POST"}),t(null)}catch(l){console.error("Failed to disconnect:",l)}};return n?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx(ft,{to:"/settings",className:"text-indigo-600 hover:underline text-sm mb-2 inline-block",children:" Back to settings"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Google Calendar Settings"}),r.jsx("p",{className:"text-gray-600",children:"Connect your Google Calendar to enable scheduling workflows"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"p-6 border-b",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zM9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Google Calendar"}),r.jsx("p",{className:"text-sm text-gray-500",children:e!=null&&e.connected?`Connected as ${e.email}`:"Not connected"})]}),e!=null&&e.connected?r.jsx("button",{onClick:i,className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 font-medium",children:"Disconnect"}):r.jsx("button",{onClick:s,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Connect"})]})}),(e==null?void 0:e.connected)&&e.calendars&&r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider mb-4",children:"Available Calendars"}),r.jsx("div",{className:"space-y-3",children:e.calendars.map(l=>r.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-900",children:l.name}),l.primary&&r.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:"Primary"})]})},l.id))})]}),!(e!=null&&e.connected)&&r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"What you can do with Google Calendar:"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-500",children:""}),"Create and manage calendar events"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-500",children:""}),"Trigger workflows based on calendar events"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-500",children:""}),"Sync meeting schedules automatically"]})]})]})]})]})}function D7(){return At({queryKey:["identities","user"],queryFn:async()=>(await se({url:"/api/identities",method:"GET"})).identities})}function F7(){return At({queryKey:["identities","suggestions"],queryFn:async()=>(await se({url:"/api/identities/suggestions",method:"GET"})).suggestions})}function q7(){const e=lt();return pt({mutationFn:async({identityId:t,reason:n})=>se({url:`/api/identities/${t}/unlink`,method:"POST",data:{reason:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["identities","user"]})}})}function z7(){const e=lt();return pt({mutationFn:async({suggestionId:t,reason:n})=>se({url:`/api/identities/suggestions/${t}/accept`,method:"POST",data:{reason:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["identities","user"]}),e.invalidateQueries({queryKey:["identities","suggestions"]})}})}function B7(){const e=lt();return pt({mutationFn:async({suggestionId:t,reason:n})=>se({url:`/api/identities/suggestions/${t}/reject`,method:"POST",data:{reason:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["identities","suggestions"]})}})}const CO={slack:{name:"Slack",color:"#4A154B",icon:r.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})})},google:{name:"Google",color:"#4285F4",icon:r.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),r.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),r.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]})},notion:{name:"Notion",color:"#000000",icon:r.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M4.459 4.208c.746.606 1.026.56 2.428.466l13.215-.793c.28 0 .047-.28-.046-.326L17.86 1.968c-.42-.326-.981-.7-2.055-.607L3.01 2.295c-.466.046-.56.28-.374.466zm.793 3.08v13.904c0 .747.373 1.027 1.214.98l14.523-.84c.841-.046.935-.56.935-1.167V6.354c0-.606-.233-.933-.748-.887l-15.177.887c-.56.047-.747.327-.747.933zm14.337.745c.093.42 0 .84-.42.888l-.7.14v10.264c-.608.327-1.168.514-1.635.514-.748 0-.935-.234-1.495-.933l-4.577-7.186v6.952L12.21 19s0 .84-1.168.84l-3.222.186c-.093-.186 0-.653.327-.746l.84-.233V9.854L7.822 9.76c-.094-.42.14-1.026.793-1.073l3.456-.233 4.764 7.279v-6.44l-1.215-.139c-.093-.514.28-.887.747-.933zM1.936 1.035l13.31-.98c1.634-.14 2.055-.047 3.082.7l4.249 2.986c.7.513.934.653.934 1.213v16.378c0 1.026-.373 1.634-1.68 1.726l-15.458.934c-.98.047-1.448-.093-1.962-.747l-3.129-4.06c-.56-.747-.793-1.306-.793-1.96V2.667c0-.839.374-1.54 1.447-1.632z"})})}};function U7({identity:e,onUnlink:t,isUnlinking:n}){const a=CO[e.provider];return r.jsxs("div",{className:"border-4 border-black bg-white",children:[r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 flex items-center justify-center border-4 border-black",style:{backgroundColor:a.color,color:"white"},children:a.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"font-mono text-lg font-bold uppercase tracking-tight",children:a.name}),e.displayName&&r.jsx("div",{className:"text-sm text-gray-900",children:e.displayName}),e.email&&r.jsx("div",{className:"text-xs font-mono text-gray-600",children:e.email})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t-2 border-black",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-mono font-bold uppercase tracking-wider text-gray-500",children:"Linked"}),r.jsx("div",{className:"text-sm font-mono",children:e.linkedAt?new Date(e.linkedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-mono font-bold uppercase tracking-wider text-gray-500",children:"Method"}),r.jsx("div",{className:"text-sm font-mono uppercase",children:e.linkMethod||"N/A"})]})]})]}),r.jsx("div",{className:"border-t-4 border-black bg-gray-50 px-6 py-3",children:r.jsx("button",{onClick:()=>t(e.id),disabled:n,className:"w-full font-mono text-sm font-bold uppercase tracking-wider py-2 px-4 border-2 border-black bg-white hover:bg-red-600 hover:text-white hover:border-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:n?"UNLINKING...":"UNLINK"})})]})}function W7({suggestion:e,onAccept:t,onReject:n,isProcessing:a}){const s=CO[e.externalIdentity.provider],i=Math.round(e.confidenceScore*100);return r.jsxs("div",{className:"border-4 border-black bg-yellow-50",children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 flex items-center justify-center border-4 border-black",style:{backgroundColor:s.color,color:"white"},children:s.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"font-mono text-lg font-bold uppercase tracking-tight",children:s.name}),e.externalIdentity.displayName&&r.jsx("div",{className:"text-sm text-gray-900",children:e.externalIdentity.displayName}),e.externalIdentity.email&&r.jsx("div",{className:"text-xs font-mono text-gray-600",children:e.externalIdentity.email})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs font-mono font-bold uppercase tracking-wider text-gray-500",children:"Confidence"}),r.jsxs("div",{className:"text-2xl font-mono font-bold",children:[i,"%"]})]})]}),r.jsxs("div",{className:"pt-4 border-t-2 border-black",children:[r.jsx("div",{className:"text-xs font-mono font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Match Method"}),r.jsx("div",{className:"text-sm font-mono",children:e.matchMethod})]})]}),r.jsx("div",{className:"border-t-4 border-black bg-white px-6 py-3",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>t(e.id),disabled:a,className:"flex-1 font-mono text-sm font-bold uppercase tracking-wider py-2 px-4 border-2 border-black bg-green-400 hover:bg-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"ACCEPT"}),r.jsx("button",{onClick:()=>n(e.id),disabled:a,className:"flex-1 font-mono text-sm font-bold uppercase tracking-wider py-2 px-4 border-2 border-black bg-white hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"REJECT"})]})})]})}function H7(){const[e,t]=b.useState(null),{data:n,isLoading:a}=D7(),{data:s,isLoading:i}=F7(),l=q7(),d=z7(),u=B7(),h=async w=>{if(confirm("Are you sure you want to unlink this identity?"))try{await l.mutateAsync({identityId:w}),t({type:"success",text:"Identity unlinked successfully"}),setTimeout(()=>t(null),5e3)}catch(x){t({type:"error",text:x.message||"Failed to unlink identity"}),setTimeout(()=>t(null),5e3)}},p=async w=>{try{await d.mutateAsync({suggestionId:w}),t({type:"success",text:"Suggestion accepted and identity linked"}),setTimeout(()=>t(null),5e3)}catch(x){t({type:"error",text:x.message||"Failed to accept suggestion"}),setTimeout(()=>t(null),5e3)}},m=async w=>{try{await u.mutateAsync({suggestionId:w}),t({type:"success",text:"Suggestion rejected"}),setTimeout(()=>t(null),5e3)}catch(x){t({type:"error",text:x.message||"Failed to reject suggestion"}),setTimeout(()=>t(null),5e3)}};if(a||i)return r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block w-16 h-16 border-8 border-black border-t-transparent animate-spin"}),r.jsx("p",{className:"mt-4 font-mono font-bold uppercase tracking-wider",children:"LOADING..."})]})});const j=(n==null?void 0:n.filter(w=>w.linkStatus==="linked"))||[],v=s||[];return r.jsxs("div",{className:"max-w-6xl",children:[r.jsxs("div",{className:"mb-8 pb-6 border-b-4 border-black",children:[r.jsx("h1",{className:"text-5xl font-mono font-black uppercase tracking-tighter mb-2",children:"Linked Identities"}),r.jsx("p",{className:"text-lg font-mono text-gray-700",children:"Manage external service connections to your account"})]}),e&&r.jsx("div",{className:`mb-6 p-4 border-4 font-mono ${e.type==="success"?"border-green-600 bg-green-50 text-green-900":"border-red-600 bg-red-50 text-red-900"}`,children:e.text}),v.length>0&&r.jsxs("div",{className:"mb-12",children:[r.jsxs("h2",{className:"text-2xl font-mono font-black uppercase tracking-tight mb-4 border-b-4 border-black pb-2",children:["Pending Suggestions (",v.length,")"]}),r.jsx("p",{className:"text-sm font-mono text-gray-600 mb-6",children:"We found these identities that might belong to you. Review and accept or reject them."}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.map(w=>r.jsx(W7,{suggestion:w,onAccept:p,onReject:m,isProcessing:d.isPending||u.isPending},w.id))})]}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-mono font-black uppercase tracking-tight mb-4 border-b-4 border-black pb-2",children:["Linked Identities (",j.length,")"]}),j.length===0?r.jsxs("div",{className:"border-4 border-black bg-gray-50 p-12 text-center",children:[r.jsx("div",{className:"mb-4",children:r.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"square",strokeLinejoin:"miter",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),r.jsx("h3",{className:"font-mono font-bold text-lg uppercase tracking-tight text-gray-900 mb-2",children:"No Linked Identities"}),r.jsxs("p",{className:"font-mono text-sm text-gray-600",children:["You haven't linked any external service identities yet.",r.jsx("br",{}),"Check pending suggestions above or contact your administrator."]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:j.map(w=>r.jsx(U7,{identity:w,onUnlink:h,isUnlinking:l.isPending},w.id))})]})]})}function K7(){return At({queryKey:["member-identities"],queryFn:async()=>{const e=await se({url:"/api/admin/identities",method:"GET",params:{status:"linked",limit:1e3}}),t=new Map;return e.identities.forEach(n=>{if(n.userId){const a=t.get(n.userId)||[];a.push(n),t.set(n.userId,a)}}),t},staleTime:6e4})}function G7(e){return At({queryKey:["admin","identities",e],queryFn:async()=>{const t=new URLSearchParams;e!=null&&e.status&&t.set("status",e.status),e!=null&&e.provider&&t.set("provider",e.provider),e!=null&&e.page&&t.set("page",e.page.toString()),e!=null&&e.limit&&t.set("limit",e.limit.toString());const n=await fetch(`/api/admin/identities?${t}`,{credentials:"include"});if(!n.ok)throw new Error("Failed to fetch identities");return n.json()}})}function V7(){return At({queryKey:["admin","identities","stats"],queryFn:async()=>{const e=await fetch("/api/admin/identities/stats",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch identity stats");return e.json()}})}function Q7(){return At({queryKey:["admin","identities","suggestions"],queryFn:async()=>{const e=await fetch("/api/admin/identities/suggestions",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch suggestions");return(await e.json()).suggestions}})}function Y7(){const e=lt();return pt({mutationFn:async({identityId:t,userId:n,reason:a})=>{const s=await fetch(`/api/admin/identities/${t}/link`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userId:n,reason:a})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to link identity")}return s.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","identities"]}),e.invalidateQueries({queryKey:["admin","identities","stats"]})}})}function X7(){const e=lt();return pt({mutationFn:async({identityId:t,reason:n})=>{const a=await fetch(`/api/admin/identities/${t}/unlink`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reason:n})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to unlink identity")}return a.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","identities"]}),e.invalidateQueries({queryKey:["admin","identities","stats"]})}})}function J7(){const e=lt();return pt({mutationFn:async({suggestionId:t,reason:n})=>{const a=await fetch(`/api/identities/suggestions/${t}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reason:n})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to accept suggestion")}return a.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","identities"]}),e.invalidateQueries({queryKey:["admin","identities","suggestions"]}),e.invalidateQueries({queryKey:["admin","identities","stats"]})}})}function Z7(){const e=lt();return pt({mutationFn:async({suggestionId:t,reason:n})=>{const a=await fetch(`/api/identities/suggestions/${t}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reason:n})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to reject suggestion")}return a.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","identities","suggestions"]})}})}function AO(){const e=lt();return pt({mutationFn:async()=>(await It.post("admin/identities/sync-slack")).data,onSuccess:()=>{e.invalidateQueries({queryKey:["admin","identities"]}),e.invalidateQueries({queryKey:["admin","identities","stats"]}),e.invalidateQueries({queryKey:["admin","identities","suggestions"]})}})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=(...e)=>e.filter((t,n,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,a)=>a?a.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=e=>{const t=tL(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:l,...d},u)=>b.createElement("svg",{ref:u,...rL,width:t,height:t,stroke:e,strokeWidth:a?Number(n)*24/Number(t):n,className:PO("lucide",s),...!i&&!nL(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,p])=>b.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=(e,t)=>{const n=b.forwardRef(({className:a,...s},i)=>b.createElement(aL,{ref:i,iconNode:t,className:PO(`lucide-${eL(uS(e))}`,`lucide-${e}`,a),...s}));return n.displayName=uS(e),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],iL=Nt("bookmark",sL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ka=Nt("check",oL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],no=Nt("circle-alert",lL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ql=Nt("circle-check-big",cL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uL=Nt("clock",dL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Xp=Nt("copy",hL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],OO=Nt("external-link",fL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cf=Nt("file-text",mL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],yj=Nt("link",pL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Jp=Nt("loader-circle",xL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],df=Nt("mail",gL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],uf=Nt("message-square",yL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],bL=Nt("pen",vL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jn=Nt("refresh-cw",jL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],NL=Nt("rotate-ccw",wL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kL=Nt("search",SL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],AL=Nt("terminal",CL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],OL=Nt("trash-2",PL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],_L=Nt("unlink",EL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],EO=Nt("users",TL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_O=Nt("x",RL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],IL=Nt("zap",ML);function $L(){return At({queryKey:["members","invite","sources"],queryFn:async()=>{const e=await fetch("/api/members/invite/sources",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch connected services");return(await e.json()).sources}})}function LL(e,t){return At({queryKey:["members","invite","users",e,t],queryFn:async()=>{if(!e)return[];const n=new URLSearchParams({provider:e});t&&n.set("search",t);const a=await fetch(`/api/members/invite/users?${n}`,{credentials:"include"});if(!a.ok)throw new Error("Failed to fetch users");return(await a.json()).users},enabled:!!e,staleTime:3e4})}function DL(){const e=lt();return pt({mutationFn:async t=>{const n=await fetch("/api/members/invite",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!n.ok){const a=await n.json();throw new Error(a.error||"Failed to invite members")}return n.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["members"]}),e.invalidateQueries({queryKey:["members","invite","users"]})}})}function FL({provider:e,size:t=20}){const n={slack:r.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})}),google:r.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",children:[r.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),r.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),r.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),notion:r.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M4.459 4.208c.746.606 1.026.56 2.428.466l13.215-.793c.28 0 .047-.28-.046-.326L17.86 1.968c-.42-.326-.98-.7-2.055-.607L3.01 2.295c-.466.046-.56.28-.373.466l1.822 1.447zm.793 3.08v13.904c0 .747.373 1.027 1.214.98l14.523-.84c.84-.046.934-.56.934-1.166V6.354c0-.606-.233-.933-.746-.886l-15.177.887c-.56.047-.747.327-.747.933zm14.337.745c.093.42 0 .84-.42.888l-.7.14v10.264c-.608.327-1.168.514-1.635.514-.747 0-.934-.234-1.495-.933l-4.577-7.186v6.952l1.448.327s0 .84-1.168.84l-3.22.186c-.094-.186 0-.653.327-.746l.84-.233V9.854L7.822 9.76c-.094-.42.14-1.026.793-1.073l3.454-.233 4.763 7.278v-6.44l-1.215-.14c-.093-.514.28-.886.747-.933l3.222-.186zm-14.617-7c-.094-.093-.047-.14.093-.14l13.028-.792c.14-.047.186.047.14.093l-1.868 1.447c-.28.233-.42.327-.747.373L2.775 2.808c-.186.046-.186.14-.047.186l1.914 1.04z"})})};return r.jsx("span",{className:"text-gray-600",children:n[e]})}function qL({isOpen:e,onClose:t,onSuccess:n}){const[a,s]=b.useState(null),[i,l]=b.useState(""),[d,u]=b.useState(new Set),[h,p]=b.useState("member"),[m,g]=b.useState(!1),{data:j,isLoading:v}=$L(),{data:w,isLoading:x}=LL(a,i),S=DL();b.useEffect(()=>{j&&j.length>0&&!a&&s(j[0].provider)},[j,a]),b.useEffect(()=>{u(new Set),l("")},[a]),b.useEffect(()=>{e||(s(null),u(new Set),l(""),p("member"),g(!1),S.reset())},[e]);const P=b.useMemo(()=>{if(!w)return[];if(!i)return w;const E=i.toLowerCase();return w.filter(T=>{var R,I;return((R=T.displayName)==null?void 0:R.toLowerCase().includes(E))||((I=T.email)==null?void 0:I.toLowerCase().includes(E))})},[w,i]),O=E=>{u(T=>{const R=new Set(T);return R.has(E)?R.delete(E):R.add(E),R})},N=()=>{d.size===P.length?u(new Set):u(new Set(P.map(E=>E.providerUserId)))},A=async()=>{if(!(!a||d.size===0))try{(await S.mutateAsync({provider:a,providerUserIds:Array.from(d),role:h})).summary.invited>0&&n(),g(!0)}catch{}};if(!e)return null;const C=j==null?void 0:j.find(E=>E.provider===a);return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white w-full max-w-2xl max-h-[90vh] flex flex-col border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b-4 border-black bg-yellow-300",children:[r.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Invite from Connected Services"}),r.jsx("button",{onClick:t,className:"p-1 hover:bg-black/10 transition-colors",children:r.jsx(_O,{size:24,strokeWidth:3})})]}),r.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:v?r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsx(Jp,{className:"animate-spin",size:32})}):j&&j.length===0?r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[r.jsx(no,{size:48,className:"text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-bold mb-2",children:"No Connected Services"}),r.jsx("p",{className:"text-gray-600 max-w-sm",children:"Connect Slack, Google, or Notion to invite members from those services."})]}):m&&S.data?r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-500 flex items-center justify-center mb-4",children:r.jsx(Ka,{size:32,className:"text-white",strokeWidth:3})}),r.jsx("h3",{className:"text-xl font-black mb-4",children:"Invitations Sent!"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[S.data.summary.invited>0&&r.jsxs("p",{className:"text-green-600 font-medium",children:[S.data.summary.invited," user",S.data.summary.invited!==1?"s":""," invited"]}),S.data.summary.alreadyMembers>0&&r.jsxs("p",{className:"text-yellow-600",children:[S.data.summary.alreadyMembers," already member",S.data.summary.alreadyMembers!==1?"s":""]}),S.data.summary.errors>0&&r.jsxs("p",{className:"text-red-600",children:[S.data.summary.errors," error",S.data.summary.errors!==1?"s":""]})]}),r.jsx("button",{onClick:t,className:"mt-6 px-6 py-2 bg-black text-white font-bold uppercase hover:bg-gray-800 transition-colors",children:"Done"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex border-b-4 border-black bg-gray-100",children:j==null?void 0:j.map(E=>r.jsxs("button",{onClick:()=>s(E.provider),className:`flex-1 px-4 py-3 flex items-center justify-center gap-2 font-bold uppercase text-sm transition-colors ${a===E.provider?"bg-white border-r-4 border-black -mb-1 pb-4":"hover:bg-gray-200"}`,children:[r.jsx(FL,{provider:E.provider,size:18}),r.jsx("span",{children:E.provider}),r.jsx("span",{className:"px-2 py-0.5 bg-black text-white text-xs",children:E.userCount})]},E.provider))}),C&&r.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b-2 border-gray-200 text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Workspace: "}),r.jsx("span",{className:"font-medium",children:C.workspaceName||C.provider})]}),r.jsx("div",{className:"px-6 py-4 border-b-2 border-gray-200",children:r.jsxs("div",{className:"relative",children:[r.jsx(kL,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",value:i,onChange:E=>l(E.target.value),placeholder:"Search by name or email...",className:"w-full pl-10 pr-4 py-2 border-2 border-black focus:outline-none focus:ring-2 focus:ring-yellow-300"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:x?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Jp,{className:"animate-spin",size:24})}):P.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[r.jsx(EO,{size:40,className:"mb-3"}),r.jsx("p",{className:"font-medium",children:"No users found"}),r.jsx("p",{className:"text-sm",children:i?"Try a different search term":"All users are already members"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"px-6 py-2 bg-gray-50 border-b border-gray-200 flex items-center gap-3",children:r.jsxs("button",{onClick:N,className:"flex items-center gap-2 text-sm font-medium hover:text-black transition-colors",children:[r.jsx("div",{className:`w-5 h-5 border-2 border-black flex items-center justify-center ${d.size===P.length&&P.length>0?"bg-yellow-300":"bg-white"}`,children:d.size===P.length&&P.length>0&&r.jsx(Ka,{size:14,strokeWidth:3})}),"Select All (",P.length,")"]})}),r.jsx("div",{className:"divide-y divide-gray-100",children:P.map(E=>r.jsxs("button",{onClick:()=>O(E.providerUserId),className:"w-full px-6 py-3 flex items-center gap-4 hover:bg-gray-50 transition-colors text-left",children:[r.jsx("div",{className:`w-5 h-5 border-2 border-black flex items-center justify-center flex-shrink-0 ${d.has(E.providerUserId)?"bg-yellow-300":"bg-white"}`,children:d.has(E.providerUserId)&&r.jsx(Ka,{size:14,strokeWidth:3})}),E.avatarUrl?r.jsx("img",{src:E.avatarUrl,alt:"",className:"w-10 h-10 border-2 border-black"}):r.jsx("div",{className:"w-10 h-10 border-2 border-black bg-gray-200 flex items-center justify-center font-bold text-gray-600",children:(E.displayName||E.email||"?").charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold truncate",children:E.displayName||E.email||"Unknown User"}),E.email&&E.displayName&&r.jsx("p",{className:"text-sm text-gray-500 truncate",children:E.email})]})]},E.providerUserId))})]})}),r.jsxs("div",{className:"px-6 py-4 border-t-4 border-black bg-gray-50",children:[S.error&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 border-2 border-red-500 text-red-700 text-sm font-medium",children:S.error.message}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("label",{className:"text-sm font-bold uppercase",children:"Role:"}),r.jsxs("select",{value:h,onChange:E=>p(E.target.value),className:"px-3 py-2 border-2 border-black font-medium focus:outline-none focus:ring-2 focus:ring-yellow-300",children:[r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"member",children:"Member"}),r.jsx("option",{value:"viewer",children:"Viewer"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-sm text-gray-600",children:[d.size," selected"]}),r.jsx("button",{onClick:t,className:"px-4 py-2 border-2 border-black font-bold uppercase hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:A,disabled:d.size===0||S.isPending,className:"px-6 py-2 bg-black text-white font-bold uppercase hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:S.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Jp,{size:16,className:"animate-spin"}),"Inviting..."]}):`Invite ${d.size>0?`(${d.size})`:""}`})]})]})]})]})})]})})}function zL({organizationId:e,isOpen:t,onClose:n,onSuccess:a}){const[s,i]=b.useState(""),[l,d]=b.useState("member"),[u,h]=b.useState(!1),[p,m]=b.useState(null),g=async()=>{if(!s.trim()){m("Email is required");return}h(!0),m(null);try{await se({url:`/api/organizations/${e}/members/invite`,method:"POST",data:{email:s.trim(),role:l}}),a(),n(),i(""),d("member")}catch(j){const v=j instanceof Ke?j.message:"Failed to invite member";m(v)}finally{h(!1)}};return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Invite Member"}),p&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-800 rounded-lg text-sm",children:p}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),r.jsx("input",{id:"email",type:"email",value:s,onChange:j=>i(j.target.value),placeholder:"colleague@company.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),r.jsxs("select",{id:"role",value:l,onChange:j=>d(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"admin",children:"Admin - Full access"}),r.jsx("option",{value:"member",children:"Member - Can execute workflows"}),r.jsx("option",{value:"viewer",children:"Viewer - Read only"})]})]})]}),r.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[r.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{onClick:g,disabled:u,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Inviting...":"Send Invitation"})]})]})})}):null}function BL({userId:e,currentRole:t,organizationId:n,currentUserId:a,onSuccess:s}){const[i,l]=b.useState(!1),d=e===a,u=async h=>{if(h!==t){l(!0);try{await se({url:`/api/organizations/${n}/members/${e}/role`,method:"PUT",data:{role:h}}),s()}catch(p){const m=p instanceof Ke?p.message:"Failed to update role";alert(m)}finally{l(!1)}}};return r.jsxs("select",{value:t,onChange:h=>u(h.target.value),disabled:i||d,className:`px-2 py-1 text-sm border border-gray-300 rounded ${d?"bg-gray-100 cursor-not-allowed":"hover:border-gray-400"} ${i?"opacity-50":""}`,children:[r.jsx("option",{value:"owner",children:"Owner"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"member",children:"Member"}),r.jsx("option",{value:"viewer",children:"Viewer"})]})}const TO={slack:uf,google:df,notion:cf},UL={slack:"bg-purple-100 text-purple-600",google:"bg-blue-100 text-blue-600",notion:"bg-gray-100 text-gray-600"},Tv={slack:"Slack",google:"Google",notion:"Notion"};function WL({identity:e}){const t=TO[e.provider],n=UL[e.provider],a=Tv[e.provider],s=e.email||e.displayName||`${a} Account`;return r.jsxs("div",{className:"relative group",children:[r.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md ${n} transition-all hover:shadow-sm`,title:s,children:[r.jsx(t,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs font-medium",children:a})]}),r.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-10",children:s})]})}function HL({identities:e,allProviders:t}){return r.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:t.map(n=>{const a=e.find(i=>i.provider===n),s=TO[n];return a?r.jsx(WL,{identity:a},n):r.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-gray-50 text-gray-300 border border-gray-200",title:`No ${Tv[n]} account linked`,children:[r.jsx(s,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs font-medium",children:Tv[n]})]},n)})})}function KL(){const{currentOrganization:e,user:t}=rs(),[n,a]=b.useState([]),[s,i]=b.useState(!0),[l,d]=b.useState(!1),[u,h]=b.useState(!1),[p,m]=b.useState("all"),[g,j]=b.useState("all"),v=e==null?void 0:e.id,w=t==null?void 0:t.id,{data:x,isLoading:S,refetch:P}=K7(),O=AO(),N=()=>{confirm("Slack    . ?")&&O.mutate(void 0,{onSuccess:I=>{alert(` !

 : ${I.stats.total}
: ${I.stats.synced}
 : ${I.stats.autoLinked}
 : ${I.stats.suggested}`),P()},onError:I=>{alert(` : ${I.message}`)}})},A=b.useCallback(async()=>{if(v)try{const I=await se({url:`/api/organizations/${v}/members`,method:"GET"});a(I.members)}catch(I){console.error("Failed to fetch members:",I)}finally{i(!1)}},[v]);b.useEffect(()=>{A()},[A]);const C=async(I,M)=>{if(confirm(`Are you sure you want to remove ${M} from this organization?`))try{await se({url:`/api/organizations/${v}/members/${I}`,method:"DELETE"}),A()}catch($){const G=$ instanceof Ke?$.message:"Failed to remove member";alert(G)}},E=I=>I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",T=n.filter(I=>{const M=(x==null?void 0:x.get(I.userId))||[];if(p!=="all"&&!M.some(G=>G.provider===p))return!1;if(g==="linked"){if(M.length===0)return!1}else if(g==="unlinked"&&M.length>0)return!1;return!0}),R={total:n.length,withSlack:n.filter(I=>((x==null?void 0:x.get(I.userId))||[]).some(M=>M.provider==="slack")).length,withGoogle:n.filter(I=>((x==null?void 0:x.get(I.userId))||[]).some(M=>M.provider==="google")).length,withNotion:n.filter(I=>((x==null?void 0:x.get(I.userId))||[]).some(M=>M.provider==="notion")).length,fullyLinked:n.filter(I=>((x==null?void 0:x.get(I.userId))||[]).length===3).length,noLinks:n.filter(I=>((x==null?void 0:x.get(I.userId))||[]).length===0).length};return s?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading members..."})]})}):r.jsxs("div",{className:"max-w-7xl",children:[r.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Members"}),r.jsx("p",{className:"text-gray-600",children:"Manage your organization members and their linked accounts"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:N,disabled:O.isPending,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:[r.jsx(Jn,{size:18,className:O.isPending?"animate-spin":""}),O.isPending?" ...":"Slack "]}),r.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(EO,{size:18}),"Invite from Services"]}),r.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:"+"}),"Invite by Email"]})]})]}),!S&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:R.total}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Members"})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg shadow p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(uf,{className:"w-4 h-4 text-purple-600"}),r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:R.withSlack})]}),r.jsx("div",{className:"text-sm text-purple-700",children:"Slack Linked"})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg shadow p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(df,{className:"w-4 h-4 text-blue-600"}),r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:R.withGoogle})]}),r.jsx("div",{className:"text-sm text-blue-700",children:"Google Linked"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg shadow p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(cf,{className:"w-4 h-4 text-gray-600"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:R.withNotion})]}),r.jsx("div",{className:"text-sm text-gray-700",children:"Notion Linked"})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg shadow p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(yj,{className:"w-4 h-4 text-green-600"}),r.jsx("div",{className:"text-2xl font-bold text-green-900",children:R.fullyLinked})]}),r.jsx("div",{className:"text-sm text-green-700",children:"Fully Linked"})]}),r.jsxs("div",{className:"bg-orange-50 rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:R.noLinks}),r.jsx("div",{className:"text-sm text-orange-700",children:"No Links"})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:r.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Provider:"}),r.jsxs("select",{value:p,onChange:I=>m(I.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Providers"}),r.jsx("option",{value:"slack",children:"Slack Only"}),r.jsx("option",{value:"google",children:"Google Only"}),r.jsx("option",{value:"notion",children:"Notion Only"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Link Status:"}),r.jsxs("select",{value:g,onChange:I=>j(I.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Members"}),r.jsx("option",{value:"linked",children:"Has Linked Accounts"}),r.jsx("option",{value:"unlinked",children:"No Linked Accounts"})]})]}),r.jsxs("div",{className:"ml-auto text-sm text-gray-600",children:["Showing ",T.length," of ",n.length," members"]})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Linked Accounts"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(I=>{const M=(x==null?void 0:x.get(I.userId))||[];return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:I.avatarUrl?r.jsx("img",{className:"h-10 w-10 rounded-full",src:I.avatarUrl,alt:I.name}):r.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-600 flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:I.name.charAt(0).toUpperCase()})})}),r.jsxs("div",{className:"ml-4",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[I.name,I.userId===w&&r.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(you)"})]}),r.jsx("div",{className:"text-sm text-gray-500",children:I.email})]})]})}),r.jsx("td",{className:"px-6 py-4",children:S?r.jsx("div",{className:"text-sm text-gray-400",children:"Loading..."}):M.length>0?r.jsx(HL,{identities:M,allProviders:["slack","google","notion"]}):r.jsx("div",{className:"text-sm text-gray-400 italic",children:"No linked accounts"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v&&w&&r.jsx(BL,{userId:I.userId,currentRole:I.role,organizationId:v,currentUserId:w,onSuccess:A})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:I.status==="active"?"Active":"Pending"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E(I.joinedAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:I.userId!==w&&r.jsx("button",{onClick:()=>C(I.userId,I.name),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},I.id)})})]}),T.length===0&&n.length>0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No members match filters"}),r.jsx("p",{className:"text-gray-600",children:"Try adjusting your filter criteria"})]}),n.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No members yet"}),r.jsx("p",{className:"text-gray-600",children:"Invite team members to collaborate"})]})]}),v&&r.jsx(zL,{organizationId:v,isOpen:l,onClose:()=>d(!1),onSuccess:A}),r.jsx(qL,{isOpen:u,onClose:()=>h(!1),onSuccess:A})]})}function GL(){const[e,t]=b.useState([]),[n,a]=b.useState(!0),[s,i]=b.useState(null),[l,d]=b.useState("pending"),[u,h]=b.useState("all"),[p,m]=b.useState({page:1,total:0,totalPages:0}),[g,j]=b.useState(null),v=b.useCallback(async()=>{a(!0),i(null);try{const N=await se({url:"/api/approvals",method:"GET",params:{status:l,type:u,page:p.page,limit:20}});t(N.approvals),m({page:N.pagination.page,total:N.pagination.total,totalPages:N.pagination.totalPages})}catch(N){const A=N instanceof Ke?N.message:"Failed to fetch approvals";i(A)}finally{a(!1)}},[l,u,p.page]);b.useEffect(()=>{v()},[v]);const w=async(N,A)=>{j(N);try{await se({url:`/api/approvals/${N}/respond`,method:"PUT",data:{action:A}}),v()}catch(C){const E=C instanceof Ke?C.message:"Failed to respond to approval";i(E)}finally{j(null)}},x=N=>{const A={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"};return r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A[N]}`,children:N.charAt(0).toUpperCase()+N.slice(1)})},S=N=>{const A={budget:{bg:"bg-blue-100 text-blue-800",emoji:"money"},deployment:{bg:"bg-purple-100 text-purple-800",emoji:"rocket"},content:{bg:"bg-orange-100 text-orange-800",emoji:"document"}};return r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A[N].bg}`,children:N.charAt(0).toUpperCase()+N.slice(1)})},P=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=N=>new Date(N)<new Date;return n&&e.length===0?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading approvals..."})]})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Approvals"}),r.jsx("p",{className:"text-gray-600",children:"Review and respond to approval requests"})]}),s&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-800 rounded-lg text-sm",children:s}),r.jsxs("div",{className:"mb-6 flex flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:l,onChange:N=>{d(N.target.value),m(A=>({...A,page:1}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"expired",children:"Expired"}),r.jsx("option",{value:"all",children:"All"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),r.jsxs("select",{value:u,onChange:N=>{h(N.target.value),m(A=>({...A,page:1}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"budget",children:"Budget"}),r.jsx("option",{value:"deployment",children:"Deployment"}),r.jsx("option",{value:"content",children:"Content"})]})]})]}),e.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"text-6xl mb-4",children:l==="pending"?"":""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:l==="pending"?"No pending approvals":"No approvals found"}),r.jsx("p",{className:"text-gray-600",children:l==="pending"?"You're all caught up!":"Try changing the filters to see more approvals."})]})}):r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(N=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title}),r.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:N.description})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S(N.type)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x(N.status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O(N.expiresAt)?r.jsx("span",{className:"text-red-600",children:"Expired"}):P(N.expiresAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.status==="pending"&&!O(N.expiresAt)?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>w(N.id,"approved"),disabled:g===N.id,className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:g===N.id?"...":"Approve"}),r.jsx("button",{onClick:()=>w(N.id,"rejected"),disabled:g===N.id,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:g===N.id?"...":"Reject"})]}):r.jsx("span",{className:"text-sm text-gray-400",children:N.respondedAt?P(N.respondedAt):"-"})})]},N.id))})]}),p.totalPages>1&&r.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-700",children:["Showing page ",p.page," of ",p.totalPages," (",p.total," total)"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>m(N=>({...N,page:N.page-1})),disabled:p.page<=1,className:"px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),r.jsx("button",{onClick:()=>m(N=>({...N,page:N.page+1})),disabled:p.page>=p.totalPages,className:"px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Next"})]})]})]})]})}const VL=["execution:started","execution:progress","execution:completed","execution:failed","workflow:updated","notification"];function QL(e={}){const{url:t="/api/events",reconnectDelay:n=3e3,maxReconnectAttempts:a=10,onEvent:s}=e,[i,l]=b.useState(!1),[d,u]=b.useState(null),[h,p]=b.useState(null),m=b.useRef(null),g=b.useRef(0),j=b.useRef(null),v=b.useRef(s),w=b.useRef([]);b.useEffect(()=>{v.current=s},[s]);const x=b.useCallback(()=>{m.current&&(w.current.forEach(({type:O,handler:N})=>{var A;(A=m.current)==null||A.removeEventListener(O,N)}),w.current=[],m.current.close(),m.current=null),j.current&&(clearTimeout(j.current),j.current=null)},[]),S=b.useCallback(()=>{x();const N=`https://auth.nubabel.com${t}`;try{const A=new EventSource(N,{withCredentials:!0});m.current=A,A.onopen=()=>{l(!0),p(null),g.current=0},A.onerror=()=>{if(l(!1),x(),g.current<a){const C=n*Math.pow(2,g.current);g.current+=1,j.current=setTimeout(()=>{S()},C)}else p("Failed to connect to server. Please refresh the page.")},A.onmessage=C=>{var E;try{const T=JSON.parse(C.data),R={type:T.type||"message",data:T.data||T,timestamp:Date.now()};u(R),(E=v.current)==null||E.call(v,R)}catch{C.data!=="heartbeat"&&console.warn("Failed to parse SSE message:",C.data)}},VL.forEach(C=>{const E=T=>{var R;try{const M=JSON.parse(T.data),$={type:C,data:M,timestamp:Date.now()};u($),(R=v.current)==null||R.call(v,$)}catch(I){console.warn(`Failed to parse ${C} event:`,I)}};A.addEventListener(C,E),w.current.push({type:C,handler:E})})}catch(A){p("Failed to create EventSource connection"),console.error("SSE connection error:",A)}},[t,n,a,x]),P=b.useCallback(()=>{g.current=0,S()},[S]);return b.useEffect(()=>(S(),x),[S,x]),{isConnected:i,lastEvent:d,error:h,reconnect:P}}const hS={sisyphus:"",oracle:"",explore:"",librarian:"",executor:"","executor-high":"",architect:"",designer:"",qa_tester:"",build_fixer:"",writer:"",default:""};function YL(e){const t=e.toLowerCase().replace(/-/g,"_");return hS[t]||hS.default}function XL(e,t){switch(e){case"pending":return r.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded-full",children:"pending"});case"in_progress":return r.jsxs("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded-full flex items-center gap-1",children:[r.jsx("span",{className:"animate-pulse",children:""}),t!==void 0?`${t}%`:"running"]});case"completed":return r.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full",children:" done"});case"failed":return r.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-700 rounded-full",children:" failed"});case"cancelled":return r.jsx("span",{className:"px-2 py-0.5 text-xs bg-yellow-100 text-yellow-700 rounded-full",children:"cancelled"});default:return null}}function JL(e){return e<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${Math.floor(e/6e4)}m ${Math.round(e%6e4/1e3)}s`}function RO({agent:e,children:t,allAgents:n,depth:a,onSelectAgent:s}){const i=t.filter(l=>l.parentId===e.id);return r.jsxs("div",{className:`${a>0?"ml-6 border-l-2 border-gray-200 pl-4":""}`,children:[r.jsxs("div",{className:`flex items-center gap-3 py-2 px-3 rounded-lg cursor-pointer transition hover:bg-gray-50 ${e.status==="in_progress"?"bg-blue-50":""}`,onClick:()=>s==null?void 0:s(e),children:[r.jsx("span",{className:"text-xl",children:YL(e.agentType)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-gray-900 truncate",children:e.agentName||e.agentType}),XL(e.status,e.progress)]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-0.5",children:[e.category&&r.jsx("span",{className:"bg-gray-100 px-1.5 py-0.5 rounded",children:e.category}),e.duration!==void 0&&r.jsxs("span",{children:[" ",JL(e.duration)]})]})]}),e.status==="in_progress"&&e.progress!==void 0&&r.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${e.progress}%`}})})]}),e.status==="failed"&&e.errorMessage&&r.jsx("div",{className:"ml-9 mt-1 p-2 bg-red-50 text-red-700 text-xs rounded border border-red-200",children:e.errorMessage}),i.length>0&&r.jsx("div",{className:"mt-1",children:i.map(l=>r.jsx(RO,{agent:l,children:n,allAgents:n,depth:a+1,onSelectAgent:s},l.id))})]})}function ZL({agents:e,selectedSessionId:t,onSelectAgent:n}){const a=b.useMemo(()=>t?e.filter(l=>l.sessionId===t):e,[e,t]),s=b.useMemo(()=>a.filter(l=>!l.parentId),[a]),i=b.useMemo(()=>{const l=a.length,d=a.filter(p=>p.status==="completed").length,u=a.filter(p=>p.status==="failed").length,h=a.filter(p=>p.status==="in_progress").length;return{total:l,completed:d,failed:u,inProgress:h}},[a]);return a.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Agent Hierarchy"})]}),r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("div",{className:"text-3xl mb-2",children:""}),r.jsx("p",{children:"No active agents"}),r.jsx("p",{className:"text-sm mt-1",children:"Agent delegation hierarchy will appear here"})]})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Agent Hierarchy"})]}),r.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[r.jsxs("span",{className:"text-gray-600",children:["Total: ",i.total]}),i.inProgress>0&&r.jsxs("span",{className:"text-blue-600",children:[" ",i.inProgress," running"]}),i.completed>0&&r.jsxs("span",{className:"text-green-600",children:[" ",i.completed," done"]}),i.failed>0&&r.jsxs("span",{className:"text-red-600",children:[" ",i.failed," failed"]})]})]}),r.jsx("div",{className:"p-4 max-h-[500px] overflow-y-auto",children:s.map(l=>r.jsx(RO,{agent:l,children:a,allAgents:a,depth:0,onSelectAgent:n},l.id))})]})}function eD({accounts:e,selectedAccountId:t,onRefresh:n}){const[a,s]=b.useState(Date.now());b.useEffect(()=>{const m=setInterval(()=>s(Date.now()),6e4);return()=>clearInterval(m)},[]);const i=m=>{switch(m){case"active":return"";case"rate_limited":return"";case"exhausted":return"";case"cooldown":return"";default:return""}},l=m=>m<50?"bg-green-500":m<75?"bg-yellow-500":m<90?"bg-orange-500":"bg-red-500",d=m=>{if(!m)return null;const j=new Date(m).getTime()-a;if(j<=0)return null;const v=Math.floor(j/6e4);return v<60?`${v}m`:`${Math.floor(v/60)}h ${v%60}m`},u=[...e].sort((m,g)=>m.id===t?-1:g.id===t?1:g.priority-m.priority),h=e.filter(m=>m.status==="active").length,p=e.length>0?Math.round(e.reduce((m,g)=>m+g.estimatedUsagePercent,0)/e.length):0;return r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Claude Max Pool"})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[h,"/",e.length," active  ",p,"% avg usage"]})]}),n&&r.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition",title:"Refresh",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})}),r.jsx("div",{className:"p-4 space-y-3 max-h-[400px] overflow-y-auto",children:u.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("div",{className:"text-3xl mb-2",children:""}),r.jsx("p",{children:"No accounts configured"})]}):u.map(m=>{const g=d(m.cooldownUntil),j=m.id===t;return r.jsxs("div",{className:`p-3 rounded-lg border-2 transition ${j?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:i(m.status)}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-900",children:m.nickname}),j&&r.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-blue-500 text-white rounded-full",children:"Active"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[m.estimatedUsagePercent.toFixed(1),"%"]}),g&&r.jsxs("div",{className:"text-xs text-orange-600",children:[" ",g]})]})]}),r.jsx("div",{className:"relative h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`absolute left-0 top-0 h-full rounded-full transition-all duration-500 ${l(m.estimatedUsagePercent)}`,style:{width:`${Math.min(m.estimatedUsagePercent,100)}%`}})}),r.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[r.jsx("span",{className:"truncate max-w-[150px]",title:m.email,children:m.email}),r.jsx("span",{className:`px-2 py-0.5 rounded-full ${m.status==="active"?"bg-green-100 text-green-700":m.status==="rate_limited"?"bg-yellow-100 text-yellow-700":m.status==="exhausted"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:m.status.replace("_"," ")})]})]},m.id)})})]})}const tD=["all","agent:started","agent:progress","agent:completed","agent:failed","agent_delegated","account_selected","execution:started","execution:completed"];function rD(){const[e,t]=b.useState([]),[n,a]=b.useState("all"),[s,i]=b.useState(new Map),[l,d]=b.useState([]),[u,h]=b.useState(),[p,m]=b.useState(),g=b.useCallback(C=>{const E={id:`${C.timestamp}-${Math.random().toString(36).slice(2)}`,type:C.type,data:C.data,timestamp:C.timestamp};t(R=>[E,...R].slice(0,100));const T=C.data;if(C.type==="agent:started"||C.type==="agent_delegated"){const R={id:T.activityId||T.id||E.id,sessionId:T.sessionId||"unknown",agentType:T.agentType||"unknown",agentName:T.agentName,category:T.category,status:"in_progress",parentId:T.parentActivityId,startedAt:new Date(C.timestamp).toISOString()};i(I=>new Map(I).set(R.id,R))}if(C.type==="agent:progress"){const R=T.activityId;R&&i(I=>{const M=new Map(I),$=M.get(R);return $&&M.set(R,{...$,progress:T.progress,status:"in_progress"}),M})}if(C.type==="agent:completed"||C.type==="agent:failed"){const R=T.activityId;R&&i(I=>{const M=new Map(I),$=M.get(R);return $&&M.set(R,{...$,status:C.type==="agent:completed"?"completed":"failed",duration:T.duration,errorMessage:T.errorMessage,completedAt:new Date(C.timestamp).toISOString()}),M})}C.type==="account_selected"&&(h(T.accountId),T.accounts&&d(T.accounts))},[]),{isConnected:j,error:v,reconnect:w}=QL({url:"/api/events",onEvent:g}),x=b.useMemo(()=>e.filter(C=>n==="all"?!0:C.type===n||C.type.startsWith(n.split(":")[0])),[e,n]),S=b.useMemo(()=>Array.from(s.values()),[s]),P=b.useMemo(()=>{const C=new Set(S.map(E=>E.sessionId));return Array.from(C)},[S]),O=C=>C.includes("started")?"bg-blue-100 text-blue-800":C.includes("completed")?"bg-green-100 text-green-800":C.includes("failed")||C.includes("error")?"bg-red-100 text-red-800":C.includes("progress")?"bg-yellow-100 text-yellow-800":C.includes("delegated")?"bg-purple-100 text-purple-800":C.includes("account")?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800",N=C=>C.includes("started")?"":C.includes("completed")?"":C.includes("failed")?"":C.includes("progress")?"":C.includes("delegated")?"":C.includes("account")?"":"",A=C=>new Date(C).toLocaleTimeString();return r.jsxs("div",{className:"p-6 min-h-screen bg-gray-50",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Agent Activity"}),r.jsx("p",{className:"text-gray-600",children:"Real-time monitoring of OMC agent operations"})]}),r.jsxs("div",{className:"mb-4 flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${j?"bg-green-500 animate-pulse":"bg-red-500"}`}),r.jsx("span",{className:"text-sm text-gray-600",children:j?"Live":"Disconnected"})]}),!j&&r.jsx("button",{onClick:w,className:"text-sm text-blue-600 hover:text-blue-800",children:"Reconnect"}),v&&r.jsx("span",{className:"text-sm text-red-600",children:v})]}),P.length>0&&r.jsxs("select",{value:p||"",onChange:C=>m(C.target.value||void 0),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"All Sessions"}),P.map(C=>r.jsxs("option",{value:C,children:["Session: ",C.slice(0,12),"..."]},C))]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"lg:col-span-3",children:r.jsx(ZL,{agents:S,selectedSessionId:p,onSelectAgent:C=>m(C.sessionId)})}),r.jsx("div",{className:"lg:col-span-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Event Feed"}),r.jsxs("span",{className:"text-sm text-gray-500",children:[x.length," events"]})]}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:tD.map(C=>r.jsx("button",{onClick:()=>a(C),className:`px-3 py-1 rounded-full text-xs transition ${n===C?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:C==="all"?"All":C.replace(":"," ")},C))})]}),r.jsx("div",{className:"p-4 max-h-[600px] overflow-y-auto space-y-3",children:x.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h2",{className:"text-lg font-medium",children:"Waiting for events..."}),r.jsx("p",{className:"text-sm mt-1",children:"Events appear here in real-time"})]}):x.map(C=>r.jsx("div",{className:"p-3 rounded-lg border border-gray-200 hover:border-gray-300 transition",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-xl",children:N(C.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${O(C.type)}`,children:C.type}),r.jsx("span",{className:"text-xs text-gray-500",children:A(C.timestamp)})]}),Object.keys(C.data).length>0&&r.jsx("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs",children:r.jsx("pre",{className:"text-gray-600 overflow-x-auto whitespace-pre-wrap",children:JSON.stringify(C.data,null,2)})})]})]})},C.id))}),e.length>0&&r.jsx("div",{className:"p-3 border-t border-gray-200 text-center",children:r.jsx("button",{onClick:()=>{t([]),i(new Map)},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})})]})}),r.jsx("div",{className:"lg:col-span-3",children:r.jsx(eD,{accounts:l,selectedAccountId:u,onRefresh:()=>{fetch("/api/claude-max-accounts").then(C=>C.json()).then(C=>d(C.accounts||[])).catch(console.error)}})})]})]})}function nD(){var l,d,u;const[e,t]=b.useState(null),[n,a]=b.useState(!0),[s,i]=b.useState(null);return b.useEffect(()=>{(async()=>{try{const p=await se({url:"/api/metrics/agents",method:"GET"});t(p)}catch(p){console.error("Failed to fetch metrics:",p),i(p instanceof Error?p.message:"An error occurred")}finally{a(!1)}})()},[]),n?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading metrics..."})]})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Agent Metrics"}),r.jsx("p",{className:"text-gray-600",children:"Monitor agent performance and statistics"})]}),s&&r.jsx("div",{className:"text-red-500 p-4",children:s}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Total Executions"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:(e==null?void 0:e.totalExecutions)||0})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Success Rate"}),r.jsxs("p",{className:"mt-2 text-3xl font-bold text-green-600",children:[((l=e==null?void 0:e.overallSuccessRate)==null?void 0:l.toFixed(1))||0,"%"]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Active Agents"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-indigo-600",children:((d=e==null?void 0:e.agents)==null?void 0:d.length)||0})]})]}),(u=e==null?void 0:e.agents)!=null&&u.length?r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Executions"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Success Rate"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Duration"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Run"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.agents.map(h=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.agentName}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.totalExecutions}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${h.successRate>=90?"bg-green-100 text-green-800":h.successRate>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[h.successRate.toFixed(1),"%"]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[h.avgDuration.toFixed(1),"s"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.lastExecution?new Date(h.lastExecution).toLocaleString():"-"})]},h.agentId))})]})}):r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No metrics yet"}),r.jsx("p",{className:"text-gray-600",children:"Agent metrics will appear here after executions"})]})})]})}function aD(){const[e,t]=b.useState([]),[n,a]=b.useState(!0),[s,i]=b.useState(""),[l,d]=b.useState(""),[u,h]=b.useState(0),[p,m]=b.useState(null),[g,j]=b.useState(""),v=20;b.useEffect(()=>{(async()=>{try{a(!0);const A=new URLSearchParams({limit:v.toString(),offset:u.toString()});s&&A.append("type",s),l&&A.append("impactLevel",l);const C=await se({url:`/api/org-changes?${A.toString()}`,method:"GET"});t(C.data||[])}catch(A){console.error("Failed to fetch organization changes:",A)}finally{a(!1)}})()},[s,l,u]);const w=N=>{switch(N){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},x=N=>{switch(N){case"new_member":return"";case"role_change":return"";case"workflow_added":return"";case"workflow_deleted":return"";case"integration_added":return"";case"settings_changed":return"";default:return""}},S=N=>{switch(N){case"merged":return"bg-purple-100 text-purple-800";case"open":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},P=async N=>{try{await se({url:`/api/org-changes/${N}/link-pr`,method:"POST",data:{prUrl:g}});const A=new URLSearchParams({limit:v.toString(),offset:u.toString()});s&&A.append("type",s),l&&A.append("impactLevel",l);const C=await se({url:`/api/org-changes?${A.toString()}`,method:"GET"});t(C.data||[]),m(null),j("")}catch(A){console.error("Failed to link PR:",A),alert("Failed to link PR. Please check the URL format.")}},O=async N=>{try{await se({url:`/api/org-changes/${N}/pr-status`,method:"GET"});const A=new URLSearchParams({limit:v.toString(),offset:u.toString()});s&&A.append("type",s),l&&A.append("impactLevel",l);const C=await se({url:`/api/org-changes?${A.toString()}`,method:"GET"});t(C.data||[])}catch(A){console.error("Failed to sync PR status:",A)}};return n&&e.length===0?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading organization changes..."})]})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Organization Changes"}),r.jsx("p",{className:"text-gray-600",children:"Track organizational changes and updates"})]}),r.jsxs("div",{className:"mb-6 flex gap-4 flex-wrap",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Type"}),r.jsxs("select",{value:s,onChange:N=>{i(N.target.value),h(0)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-600",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"new_member",children:"New Member"}),r.jsx("option",{value:"role_change",children:"Role Change"}),r.jsx("option",{value:"workflow_added",children:"Workflow Added"}),r.jsx("option",{value:"workflow_deleted",children:"Workflow Deleted"}),r.jsx("option",{value:"integration_added",children:"Integration Added"}),r.jsx("option",{value:"settings_changed",children:"Settings Changed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Impact"}),r.jsxs("select",{value:l,onChange:N=>{d(N.target.value),h(0)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-600",children:[r.jsx("option",{value:"",children:"All Impact Levels"}),r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"})]})]})]}),e.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No changes yet"}),r.jsx("p",{className:"text-gray-600",children:"Organization changes will appear here"})]})}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Impact"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PR Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(N=>{var A;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[r.jsx("span",{className:"mr-2",children:x(N.type)}),N.type.replace(/_/g," ")]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-700 max-w-md truncate",children:N.description}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${w(N.impactLevel)}`,children:N.impactLevel})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.prUrl&&((A=N.metadata)!=null&&A.pr)?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("a",{href:N.prUrl,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${S(N.metadata.pr.state)}`,children:[N.metadata.pr.state," #",N.metadata.pr.number]}),r.jsx("button",{onClick:()=>O(N.id),className:"text-gray-400 hover:text-gray-600",title:"Refresh PR status",children:""})]}):p===N.id?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:g,onChange:C=>j(C.target.value),placeholder:"https://github.com/...",className:"px-2 py-1 text-xs border border-gray-300 rounded"}),r.jsx("button",{onClick:()=>P(N.id),className:"px-2 py-1 text-xs bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Link"}),r.jsx("button",{onClick:()=>{m(null),j("")},className:"px-2 py-1 text-xs bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"})]}):r.jsx("button",{onClick:()=>m(N.id),className:"text-xs text-indigo-600 hover:text-indigo-800",children:"+ Link PR"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(N.createdAt).toLocaleString()})]},N.id)})})]})}),e.length>0&&r.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[r.jsx("button",{onClick:()=>h(Math.max(0,u-v)),disabled:u===0,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",u+1," to ",Math.min(u+v,u+e.length)]}),r.jsx("button",{onClick:()=>h(u+v),disabled:e.length<v,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}function sD(e){return{id:e.id,title:e.title,description:e.description||void 0,progress:e.progress,keyResults:e.keyResults.map(t=>({id:t.id,title:t.title,currentValue:t.current,targetValue:t.target,unit:t.unit})),owner:e.ownerId||"Unassigned",quarter:e.quarter}}function iD(){const[e,t]=b.useState([]),[n,a]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const l=await se({url:"/api/okr",method:"GET"});t((l.objectives||[]).map(sD))}catch(l){console.error("Failed to fetch OKRs:",l)}finally{a(!1)}})()},[]);const s=i=>i>=70?"bg-green-500":i>=40?"bg-yellow-500":"bg-red-500";return n?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading OKRs..."})]})}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"OKRs"}),r.jsx("p",{className:"text-gray-600",children:"Track objectives and key results"})]}),r.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"New Objective"})]}),e.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No OKRs yet"}),r.jsx("p",{className:"text-gray-600",children:"Create your first objective to start tracking progress"})]})}):r.jsx("div",{className:"space-y-6",children:e.map(i=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:i.title}),i.description&&r.jsx("p",{className:"text-gray-600 mt-1",children:i.description}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Owner: ",i.owner,i.quarter&&` | ${i.quarter}`]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[i.progress,"%"]})})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:r.jsx("div",{className:`h-2 rounded-full ${s(i.progress)}`,style:{width:`${i.progress}%`}})}),i.keyResults.length>0&&r.jsxs("div",{className:"border-t pt-4 mt-4 space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase",children:"Key Results"}),i.keyResults.map(l=>{const d=l.targetValue>0?Math.round(l.currentValue/l.targetValue*100):0;return r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-700",children:l.title}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full ${s(d)}`,style:{width:`${Math.min(d,100)}%`}})}),r.jsxs("span",{className:"text-xs text-gray-500",children:[l.currentValue,"/",l.targetValue," ",l.unit]})]})]})},l.id)})]})]},i.id))})]})}function oD({agent:e,onEdit:t,onDelete:n,onViewActivity:a,onToggleEnabled:s}){const[i,l]=b.useState(!1),[d,u]=b.useState(!1),h=async()=>{if(!(!s||d)){u(!0);try{await s(e,!e.enabled)}finally{u(!1)}}},p=m=>({ops:"bg-blue-100 text-blue-800",brand:"bg-purple-100 text-purple-800",hr:"bg-green-100 text-green-800",finance:"bg-yellow-100 text-yellow-800",cs:"bg-pink-100 text-pink-800",product:"bg-indigo-100 text-indigo-800"})[m]||"bg-gray-100 text-gray-800";return r.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center",children:r.jsxs("span",{className:"text-2xl text-white",children:[e.function==="ops"&&"",e.function==="brand"&&"",e.function==="hr"&&"",e.function==="finance"&&"",e.function==="cs"&&"",e.function==="product"&&"",!["ops","brand","hr","finance","cs","product"].includes(e.function)&&""]})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500",children:e.id})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(e.function)}`,children:e.function}),s&&r.jsx("button",{onClick:h,disabled:d,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${e.enabled!==!1?"bg-green-500":"bg-gray-300"} ${d?"opacity-50":""}`,title:e.enabled!==!1?"Enabled - Click to disable":"Disabled - Click to enable",children:r.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${e.enabled!==!1?"translate-x-5":"translate-x-0"}`})})]})]}),r.jsx("p",{className:"mt-4 text-gray-600 text-sm",children:e.description}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Skills"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[(e.skillDetails||e.skills.map(m=>({id:m,name:m}))).map(m=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:m.name},m.id)),e.skills.length===0&&r.jsx("span",{className:"text-xs text-gray-400",children:"No skills assigned"})]})]}),r.jsxs("button",{onClick:()=>l(!i),className:"mt-4 text-sm text-indigo-600 hover:text-indigo-800 flex items-center gap-1",children:[i?"Hide details":"Show details",r.jsx("svg",{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Tools"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.tools.map(m=>r.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:m},m)),e.tools.length===0&&r.jsx("span",{className:"text-xs text-gray-400",children:"No tools configured"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Routing Keywords"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.routing_keywords.map(m=>r.jsx("span",{className:"px-2 py-1 bg-orange-50 text-orange-700 text-xs rounded-full",children:m},m)),e.routing_keywords.length===0&&r.jsx("span",{className:"text-xs text-gray-400",children:"No keywords configured"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Permissions"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Read:"}),r.jsxs("ul",{className:"mt-1 space-y-1",children:[e.permissions.read.map(m=>r.jsx("li",{className:"text-green-700 font-mono",children:m},m)),e.permissions.read.length===0&&r.jsx("li",{className:"text-gray-400",children:"None"})]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Write:"}),r.jsxs("ul",{className:"mt-1 space-y-1",children:[e.permissions.write.map(m=>r.jsx("li",{className:"text-yellow-700 font-mono",children:m},m)),e.permissions.write.length===0&&r.jsx("li",{className:"text-gray-400",children:"None"})]})]})]})]})]})]}),r.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-between items-center rounded-b-lg",children:[r.jsx("button",{onClick:()=>a==null?void 0:a(e),className:"text-sm text-gray-600 hover:text-gray-900",children:"View Activity"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>t(e),className:"px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Edit"}),r.jsx("button",{onClick:()=>n(e),className:"px-3 py-1.5 text-sm text-red-600 bg-white border border-red-300 rounded-md hover:bg-red-50",children:"Delete"})]})]})]})}const lD=[{value:"ops",label:"Operations"},{value:"brand",label:"Brand/Marketing"},{value:"hr",label:"Human Resources"},{value:"finance",label:"Finance"},{value:"cs",label:"Customer Success"},{value:"product",label:"Product"}];function cD({isOpen:e,onClose:t,onSuccess:n,agent:a,availableSkills:s,availableTools:i}){const l=!!a,[d,u]=b.useState({id:"",name:"",function:"ops",description:"",skills:[],tools:[],routing_keywords:[],permissions:{read:[],write:[]}}),[h,p]=b.useState(""),[m,g]=b.useState(""),[j,v]=b.useState(""),[w,x]=b.useState(!1),[S,P]=b.useState(null);b.useEffect(()=>{u(a?{id:a.id,name:a.name,function:a.function,description:a.description,skills:[...a.skills],tools:[...a.tools],routing_keywords:[...a.routing_keywords],permissions:{read:[...a.permissions.read],write:[...a.permissions.write]}}:{id:"",name:"",function:"ops",description:"",skills:[],tools:[],routing_keywords:[],permissions:{read:[],write:[]}}),P(null)},[a,e]);const O=async $=>{$.preventDefault(),x(!0),P(null);try{l?await se({url:`/api/admin/agents/${d.id}`,method:"PUT",data:{name:d.name,function:d.function,description:d.description,skills:d.skills,tools:d.tools,routing_keywords:d.routing_keywords,permissions:d.permissions}}):await se({url:"/api/admin/agents",method:"POST",data:d}),n(),t()}catch(G){const V=G instanceof Ke?G.message:"Failed to save agent";P(V)}finally{x(!1)}},N=()=>{h.trim()&&!d.routing_keywords.includes(h.trim())&&(u({...d,routing_keywords:[...d.routing_keywords,h.trim()]}),p(""))},A=$=>{u({...d,routing_keywords:d.routing_keywords.filter(G=>G!==$)})},C=()=>{m.trim()&&!d.permissions.read.includes(m.trim())&&(u({...d,permissions:{...d.permissions,read:[...d.permissions.read,m.trim()]}}),g(""))},E=$=>{u({...d,permissions:{...d.permissions,read:d.permissions.read.filter(G=>G!==$)}})},T=()=>{j.trim()&&!d.permissions.write.includes(j.trim())&&(u({...d,permissions:{...d.permissions,write:[...d.permissions.write,j.trim()]}}),v(""))},R=$=>{u({...d,permissions:{...d.permissions,write:d.permissions.write.filter(G=>G!==$)}})},I=$=>{const G=d.skills.includes($)?d.skills.filter(V=>V!==$):[...d.skills,$];u({...d,skills:G})},M=$=>{const G=d.tools.includes($)?d.tools.filter(V=>V!==$):[...d.tools,$];u({...d,tools:G})};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:O,children:[r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:l?"Edit Agent":"Create Agent"}),S&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-800 rounded-lg text-sm",children:S}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"id",className:"block text-sm font-medium text-gray-700 mb-1",children:"ID (slug) *"}),r.jsx("input",{id:"id",type:"text",value:d.id,onChange:$=>u({...d,id:$.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")}),placeholder:"brand-agent",disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lowercase letters, numbers, and hyphens only"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{id:"name",type:"text",value:d.name,onChange:$=>u({...d,name:$.target.value}),placeholder:"Brand Agent",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"function",className:"block text-sm font-medium text-gray-700 mb-1",children:"Function *"}),r.jsx("select",{id:"function",value:d.function,onChange:$=>u({...d,function:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:lD.map($=>r.jsx("option",{value:$.value,children:$.label},$.value))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("textarea",{id:"description",value:d.description,onChange:$=>u({...d,description:$.target.value}),placeholder:"Agent description...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),r.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg max-h-32 overflow-y-auto",children:[s.map($=>r.jsx("button",{type:"button",onClick:()=>I($.id),className:`px-3 py-1 text-sm rounded-full transition-colors ${d.skills.includes($.id)?"bg-indigo-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:$.name},$.id)),s.length===0&&r.jsx("span",{className:"text-sm text-gray-500",children:"No skills available"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tools"}),r.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg max-h-32 overflow-y-auto",children:i.map($=>r.jsx("button",{type:"button",onClick:()=>M($.id),className:`px-3 py-1 text-sm rounded-full transition-colors ${d.tools.includes($.id)?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-100"}`,title:$.description,children:$.name},$.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Routing Keywords"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:h,onChange:$=>p($.target.value),onKeyDown:$=>$.key==="Enter"&&($.preventDefault(),N()),placeholder:"Add keyword...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),r.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Add"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:d.routing_keywords.map($=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-800 text-sm rounded-full",children:[$,r.jsx("button",{type:"button",onClick:()=>A($),className:"text-orange-600 hover:text-orange-800",children:""})]},$))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Read Paths"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:m,onChange:$=>g($.target.value),onKeyDown:$=>$.key==="Enter"&&($.preventDefault(),C()),placeholder:"/sops/*",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"}),r.jsx("button",{type:"button",onClick:C,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"+"})]}),r.jsx("ul",{className:"space-y-1 max-h-24 overflow-y-auto",children:d.permissions.read.map($=>r.jsxs("li",{className:"flex items-center justify-between text-sm bg-green-50 px-2 py-1 rounded",children:[r.jsx("span",{className:"font-mono text-green-700",children:$}),r.jsx("button",{type:"button",onClick:()=>E($),className:"text-green-600 hover:text-green-800",children:""})]},$))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Write Paths"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:j,onChange:$=>v($.target.value),onKeyDown:$=>$.key==="Enter"&&($.preventDefault(),T()),placeholder:"/sops/*",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"}),r.jsx("button",{type:"button",onClick:T,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"+"})]}),r.jsx("ul",{className:"space-y-1 max-h-24 overflow-y-auto",children:d.permissions.write.map($=>r.jsxs("li",{className:"flex items-center justify-between text-sm bg-yellow-50 px-2 py-1 rounded",children:[r.jsx("span",{className:"font-mono text-yellow-700",children:$}),r.jsx("button",{type:"button",onClick:()=>R($),className:"text-yellow-600 hover:text-yellow-800",children:""})]},$))})]})]})]})]}),r.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center rounded-b-lg",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Changes will create a GitHub PR for review"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:w||!d.id||!d.name||!d.description,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Creating PR...":l?"Update Agent":"Create Agent"})]})]})]})})}):null}function dD(){const[e,t]=b.useState([]),[n,a]=b.useState([]),[s,i]=b.useState([]),[l,d]=b.useState(!0),[u,h]=b.useState(null),[p,m]=b.useState(!1),[g,j]=b.useState(null),[v,w]=b.useState([]),[x,S]=b.useState(null),[P,O]=b.useState(""),[N,A]=b.useState("all"),C=async()=>{try{const U=await se({url:"/api/admin/pending-prs?type=agent",method:"GET"});w(U.pullRequests)}catch(U){console.error("Failed to fetch pending PRs:",U)}},E=async()=>{try{const U=await se({url:"/api/admin/agents",method:"GET"});t(U.agents)}catch(U){const H=U instanceof Ke?U.message:"Failed to fetch agents";h(H)}},T=async()=>{try{const U=await se({url:"/api/admin/skills",method:"GET"});a(U.skills.map(H=>({id:H.id,name:H.name})))}catch(U){console.error("Failed to fetch skills:",U)}},R=async()=>{try{const U=await se({url:"/api/admin/tools",method:"GET"});i(U.tools)}catch(U){console.error("Failed to fetch tools:",U)}};b.useEffect(()=>{(async()=>{d(!0),await Promise.all([E(),T(),R(),C()]),d(!1)})()},[]);const I=()=>{j(null),m(!0)},M=U=>{j(U),m(!0)},$=async U=>{if(confirm(`Are you sure you want to delete "${U.name}"? This will create a PR.`))try{const H=await se({url:`/api/admin/agents/${U.id}`,method:"DELETE"});S(`PR created to delete agent. View at: ${H.pullRequest.html_url}`),E(),C()}catch(H){const B=H instanceof Ke?H.message:"Failed to delete agent";h(B)}},G=()=>{S("Changes submitted successfully. A GitHub PR has been created for review."),E(),C()},V=U=>{window.location.href=`/activity?agent=${U.id}`},z=async(U,H)=>{try{const B=await se({url:`/api/admin/agents/${U.id}`,method:"PUT",data:{...U,enabled:H}});S(`PR created to ${H?"enable":"disable"} agent. View at: ${B.pullRequest.html_url}`),E(),C()}catch(B){const D=B instanceof Ke?B.message:"Failed to toggle agent status";h(D)}};return l?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading agents..."})]})}):r.jsxs("div",{className:"max-w-7xl",children:[r.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Agents"}),r.jsx("p",{className:"text-gray-600",children:"Manage AI agents and their configurations"})]}),r.jsxs("button",{onClick:I,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:"+"}),"Create Agent"]})]}),x&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-800 rounded-lg flex justify-between items-center",children:[r.jsx("span",{children:x}),r.jsx("button",{onClick:()=>S(null),className:"text-green-600 hover:text-green-800",children:""})]}),u&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-800 rounded-lg flex justify-between items-center",children:[r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>h(null),className:"text-red-600 hover:text-red-800",children:""})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:e.length}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Agents"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:new Set(e.map(U=>U.function)).size}),r.jsx("div",{className:"text-sm text-gray-500",children:"Functions"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:new Set(e.flatMap(U=>U.skills)).size}),r.jsx("div",{className:"text-sm text-gray-500",children:"Unique Skills"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:new Set(e.flatMap(U=>U.tools)).size}),r.jsx("div",{className:"text-sm text-gray-500",children:"Tools in Use"})]})]}),r.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:"Search agents by name, ID, or keyword...",value:P,onChange:U=>O(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("select",{value:N,onChange:U=>A(U.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Functions"}),Array.from(new Set(e.map(U=>U.function))).map(U=>r.jsx("option",{value:U,children:U.charAt(0).toUpperCase()+U.slice(1)},U))]})})]}),v.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Pending Pull Requests (",v.length,")"]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-yellow-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"PR"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"Agent"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"Author"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"Created"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-yellow-200",children:v.map(U=>r.jsxs("tr",{className:"hover:bg-yellow-100",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsxs("a",{href:U.html_url,target:"_blank",rel:"noopener noreferrer",className:"text-yellow-800 hover:underline font-medium",children:["#",U.number]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"text-sm text-gray-700",children:U.resource_id})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:U.author_avatar,alt:U.author,className:"w-6 h-6 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-700",children:U.author})]})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(U.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-4 py-3",children:U.draft?r.jsx("span",{className:"px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded-full",children:"Draft"}):r.jsx("span",{className:"px-2 py-1 text-xs bg-green-200 text-green-800 rounded-full",children:"Ready"})})]},U.number))})]})})]}),(()=>{const U=e.filter(H=>{const B=P.toLowerCase(),D=!B||H.name.toLowerCase().includes(B)||H.id.toLowerCase().includes(B)||H.description.toLowerCase().includes(B)||H.routing_keywords.some(q=>q.toLowerCase().includes(B)),L=N==="all"||H.function===N;return D&&L});return e.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No agents yet"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first agent to get started"}),r.jsx("button",{onClick:I,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Create Agent"})]}):U.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No matching agents"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search or filters"}),r.jsx("button",{onClick:()=>{O(""),A("all")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Clear Filters"})]}):r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:U.map(H=>r.jsx(oD,{agent:H,onEdit:M,onDelete:$,onViewActivity:V,onToggleEnabled:z},H.id))})})(),r.jsx(cD,{isOpen:p,onClose:()=>m(!1),onSuccess:G,agent:g,availableSkills:n,availableTools:s})]})}function uD({skill:e,onEdit:t,onDelete:n}){var l;const[a,s]=b.useState(!1),i=d=>({operations:"bg-blue-100 text-blue-800",marketing:"bg-purple-100 text-purple-800",hr:"bg-green-100 text-green-800",finance:"bg-yellow-100 text-yellow-800",customer:"bg-pink-100 text-pink-800",product:"bg-indigo-100 text-indigo-800"})[d]||"bg-gray-100 text-gray-800";return r.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-2xl text-white",children:""})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500",children:e.id})]})]}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(e.category)}`,children:e.category})]}),r.jsx("p",{className:"mt-4 text-gray-600 text-sm",children:e.description}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Triggers"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.triggers.map((d,u)=>r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:d},u)),e.triggers.length===0&&r.jsx("span",{className:"text-xs text-gray-400",children:"No triggers configured"})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Used by Agents"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:((l=e.agentDetails)==null?void 0:l.map(d=>r.jsx("span",{className:"px-2 py-1 bg-indigo-50 text-indigo-700 text-xs rounded-full",children:d.name},d.id)))||r.jsx("span",{className:"text-xs text-gray-400",children:"Not bound to any agent"})})]}),r.jsxs("button",{onClick:()=>s(!a),className:"mt-4 text-sm text-purple-600 hover:text-purple-800 flex items-center gap-1",children:[a?"Hide details":"Show details",r.jsx("svg",{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Required Tools"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.tools_required.map(d=>r.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:d},d)),e.tools_required.length===0&&r.jsx("span",{className:"text-xs text-gray-400",children:"No tools required"})]})]}),e.parameters&&e.parameters.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Parameters"}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:e.parameters.map(d=>r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-medium text-gray-700",children:d.name}),r.jsxs("span",{className:"text-gray-400 mx-1",children:["(",d.type,")"]}),d.required&&r.jsx("span",{className:"text-red-500 text-xs",children:"*"}),r.jsx("p",{className:"text-gray-500 text-xs",children:d.description}),d.default!==void 0&&r.jsxs("span",{className:"text-xs text-blue-600",children:["Default: ",JSON.stringify(d.default)]})]},d.name))})]}),e.outputs&&e.outputs.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Outputs"}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:e.outputs.map(d=>r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-medium text-gray-700",children:d.name}),r.jsxs("span",{className:"text-gray-400 mx-1",children:["(",d.type,")"]}),r.jsx("p",{className:"text-gray-500 text-xs",children:d.description})]},d.name))})]})]})]}),r.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-end items-center gap-2 rounded-b-lg",children:[r.jsx("button",{onClick:()=>t(e),className:"px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Edit"}),r.jsx("button",{onClick:()=>n(e),className:"px-3 py-1.5 text-sm text-red-600 bg-white border border-red-300 rounded-md hover:bg-red-50",children:"Delete"})]})]})}const hD=[{value:"operations",label:"Operations"},{value:"marketing",label:"Marketing"},{value:"hr",label:"Human Resources"},{value:"finance",label:"Finance"},{value:"customer",label:"Customer Success"},{value:"product",label:"Product"}],fS=["string","number","boolean","object","array"];function fD({isOpen:e,onClose:t,onSuccess:n,skill:a,availableAgents:s,availableTools:i}){const l=!!a,[d,u]=b.useState({id:"",name:"",description:"",category:"operations",triggers:[],parameters:[],outputs:[],tools_required:[]}),[h,p]=b.useState(""),[m,g]=b.useState({name:"",type:"string",description:"",required:!1,default:""}),[j,v]=b.useState({name:"",type:"string",description:""}),[w,x]=b.useState(!1),[S,P]=b.useState(null);b.useEffect(()=>{u(a?{id:a.id,name:a.name,description:a.description,category:a.category,triggers:[...a.triggers],parameters:a.parameters?[...a.parameters]:[],outputs:a.outputs?[...a.outputs]:[],tools_required:[...a.tools_required]}:{id:"",name:"",description:"",category:"operations",triggers:[],parameters:[],outputs:[],tools_required:[]}),P(null)},[a,e]);const O=async M=>{M.preventDefault(),x(!0),P(null);try{l?await se({url:`/api/admin/skills/${d.id}`,method:"PUT",data:{name:d.name,description:d.description,category:d.category,triggers:d.triggers,parameters:d.parameters,outputs:d.outputs,tools_required:d.tools_required}}):await se({url:"/api/admin/skills",method:"POST",data:d}),n(),t()}catch($){const G=$ instanceof Ke?$.message:"Failed to save skill";P(G)}finally{x(!1)}},N=()=>{h.trim()&&!d.triggers.includes(h.trim())&&(u({...d,triggers:[...d.triggers,h.trim()]}),p(""))},A=M=>{u({...d,triggers:d.triggers.filter(($,G)=>G!==M)})},C=()=>{if(m.name.trim()&&m.description.trim()){const M={name:m.name.trim(),type:m.type,description:m.description.trim(),required:m.required};if(m.default.trim())try{M.default=JSON.parse(m.default)}catch{M.default=m.default}u({...d,parameters:[...d.parameters,M]}),g({name:"",type:"string",description:"",required:!1,default:""})}},E=M=>{u({...d,parameters:d.parameters.filter(($,G)=>G!==M)})},T=()=>{j.name.trim()&&j.description.trim()&&(u({...d,outputs:[...d.outputs,{...j,name:j.name.trim(),description:j.description.trim()}]}),v({name:"",type:"string",description:""}))},R=M=>{u({...d,outputs:d.outputs.filter(($,G)=>G!==M)})},I=M=>{const $=d.tools_required.includes(M)?d.tools_required.filter(G=>G!==M):[...d.tools_required,M];u({...d,tools_required:$})};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:O,children:[r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:l?"Edit Skill":"Create Skill"}),S&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-800 rounded-lg text-sm",children:S}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"id",className:"block text-sm font-medium text-gray-700 mb-1",children:"ID (slug) *"}),r.jsx("input",{id:"id",type:"text",value:d.id,onChange:M=>u({...d,id:M.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")}),placeholder:"resource-planning",disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 disabled:bg-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{id:"name",type:"text",value:d.name,onChange:M=>u({...d,name:M.target.value}),placeholder:"Resource Planning",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("textarea",{id:"description",value:d.description,onChange:M=>u({...d,description:M.target.value}),placeholder:"Skill description...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),r.jsx("select",{id:"category",value:d.category,onChange:M=>u({...d,category:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:hD.map(M=>r.jsx("option",{value:M.value,children:M.label},M.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Triggers"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:h,onChange:M=>p(M.target.value),onKeyDown:M=>M.key==="Enter"&&(M.preventDefault(),N()),placeholder:"Add trigger keyword...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),r.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Add"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:d.triggers.map((M,$)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:[M,r.jsx("button",{type:"button",onClick:()=>A($),className:"text-green-600 hover:text-green-800",children:""})]},$))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Tools"}),r.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg max-h-32 overflow-y-auto",children:i.map(M=>r.jsx("button",{type:"button",onClick:()=>I(M.id),className:`px-3 py-1 text-sm rounded-full transition-colors ${d.tools_required.includes(M.id)?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-100"}`,title:M.description,children:M.name},M.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parameters"}),r.jsxs("div",{className:"space-y-2 mb-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:m.name,onChange:M=>g({...m,name:M.target.value}),placeholder:"Name",className:"w-1/4 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),r.jsx("select",{value:m.type,onChange:M=>g({...m,type:M.target.value}),className:"w-1/6 px-2 py-2 border border-gray-300 rounded-lg text-sm",children:fS.map(M=>r.jsx("option",{value:M,children:M},M))}),r.jsx("input",{type:"text",value:m.description,onChange:M=>g({...m,description:M.target.value}),placeholder:"Description",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),r.jsx("button",{type:"button",onClick:C,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"+"})]}),r.jsxs("div",{className:"flex gap-2 items-center pl-2",children:[r.jsxs("label",{className:"flex items-center gap-1 text-xs text-gray-600",children:[r.jsx("input",{type:"checkbox",checked:m.required,onChange:M=>g({...m,required:M.target.checked}),className:"w-3 h-3"}),"Required"]}),r.jsx("input",{type:"text",value:m.default,onChange:M=>g({...m,default:M.target.value}),placeholder:"Default value (optional)",className:"flex-1 px-2 py-1 border border-gray-300 rounded text-xs"})]})]}),d.parameters.length>0&&r.jsx("div",{className:"bg-gray-50 rounded-lg p-2 space-y-1",children:d.parameters.map((M,$)=>r.jsxs("div",{className:"flex items-center justify-between text-sm bg-white px-2 py-1 rounded",children:[r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:M.name}),r.jsxs("span",{className:"text-gray-400 mx-1",children:["(",M.type,")"]}),M.required&&r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("span",{className:"text-gray-500 text-xs ml-2",children:M.description})]}),r.jsx("button",{type:"button",onClick:()=>E($),className:"text-gray-400 hover:text-gray-600",children:""})]},$))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Outputs"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:j.name,onChange:M=>v({...j,name:M.target.value}),placeholder:"Name",className:"w-1/4 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),r.jsx("select",{value:j.type,onChange:M=>v({...j,type:M.target.value}),className:"w-1/6 px-2 py-2 border border-gray-300 rounded-lg text-sm",children:fS.map(M=>r.jsx("option",{value:M,children:M},M))}),r.jsx("input",{type:"text",value:j.description,onChange:M=>v({...j,description:M.target.value}),placeholder:"Description",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),r.jsx("button",{type:"button",onClick:T,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"+"})]}),d.outputs.length>0&&r.jsx("div",{className:"bg-gray-50 rounded-lg p-2 space-y-1",children:d.outputs.map((M,$)=>r.jsxs("div",{className:"flex items-center justify-between text-sm bg-white px-2 py-1 rounded",children:[r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:M.name}),r.jsxs("span",{className:"text-gray-400 mx-1",children:["(",M.type,")"]}),r.jsx("span",{className:"text-gray-500 text-xs ml-2",children:M.description})]}),r.jsx("button",{type:"button",onClick:()=>R($),className:"text-gray-400 hover:text-gray-600",children:""})]},$))})]})]})]}),r.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center rounded-b-lg",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Changes will create a GitHub PR for review"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:w||!d.id||!d.name||!d.description,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Creating PR...":l?"Update Skill":"Create Skill"})]})]})]})})}):null}function mD(){const[e,t]=b.useState([]),[n,a]=b.useState([]),[s,i]=b.useState([]),[l,d]=b.useState(!0),[u,h]=b.useState(null),[p,m]=b.useState(!1),[g,j]=b.useState(null),[v,w]=b.useState([]),[x,S]=b.useState(null),[P,O]=b.useState("all"),[N,A]=b.useState(""),[C,E]=b.useState("skills"),[T,R]=b.useState([]),[I,M]=b.useState([]),[$,G]=b.useState([]),[V,z]=b.useState(!1),U=async()=>{try{const oe=await se({url:"/api/admin/pending-prs?type=skill",method:"GET"});w(oe.pullRequests)}catch(oe){console.error("Failed to fetch pending PRs:",oe)}},H=async()=>{try{const oe=await se({url:"/api/admin/skills",method:"GET"});t(oe.skills)}catch(oe){const te=oe instanceof Ke?oe.message:"Failed to fetch skills";h(te)}},B=async()=>{try{const oe=await se({url:"/api/admin/agents",method:"GET"});a(oe.agents.map(te=>({id:te.id,name:te.name})))}catch(oe){console.error("Failed to fetch agents:",oe)}},D=async()=>{try{const oe=await se({url:"/api/admin/tools",method:"GET"});i(oe.tools)}catch(oe){console.error("Failed to fetch tools:",oe)}},L=async()=>{z(!0);try{const[oe,te,le]=await Promise.all([se({url:"/api/optimization/skills/metrics",method:"GET"}).catch(()=>({metrics:[]})),se({url:"/api/optimization/skills/top",method:"GET"}).catch(()=>({skills:[]})),se({url:"/api/optimization/skills/poor",method:"GET"}).catch(()=>({skills:[]}))]);R(oe.metrics),M(te.skills),G(le.skills)}catch{}finally{z(!1)}};b.useEffect(()=>{(async()=>{d(!0),await Promise.all([H(),B(),D(),U()]),d(!1)})()},[]),b.useEffect(()=>{C==="performance"&&L()},[C]);const q=()=>{j(null),m(!0)},K=oe=>{j(oe),m(!0)},Y=async oe=>{if(confirm(`Are you sure you want to delete "${oe.name}"? This will create a PR.`))try{const te=await se({url:`/api/admin/skills/${oe.id}`,method:"DELETE"});S(`PR created to delete skill. View at: ${te.pullRequest.html_url}`),H(),U()}catch(te){const le=te instanceof Ke?te.message:"Failed to delete skill";h(le)}},W=()=>{S("Changes submitted successfully. A GitHub PR has been created for review."),H(),U()},ue=Array.from(new Set(e.map(oe=>oe.category))),he=e.filter(oe=>{const te=N.toLowerCase(),le=!te||oe.name.toLowerCase().includes(te)||oe.id.toLowerCase().includes(te)||oe.description.toLowerCase().includes(te)||oe.triggers.some($e=>$e.toLowerCase().includes(te)),ke=P==="all"||oe.category===P;return le&&ke});return l?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading skills..."})]})}):r.jsxs("div",{className:"max-w-7xl",children:[r.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Skills"}),r.jsx("p",{className:"text-gray-600",children:"Manage AI skills and their configurations"})]}),r.jsxs("button",{onClick:q,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:"+"}),"Create Skill"]})]}),x&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-800 rounded-lg flex justify-between items-center",children:[r.jsx("span",{children:x}),r.jsx("button",{onClick:()=>S(null),className:"text-green-600 hover:text-green-800",children:""})]}),u&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-800 rounded-lg flex justify-between items-center",children:[r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>h(null),className:"text-red-600 hover:text-red-800",children:""})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsx("button",{onClick:()=>E("skills"),className:`px-4 py-2 rounded-lg text-sm font-medium ${C==="skills"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Skills Management"}),r.jsx("button",{onClick:()=>E("performance"),className:`px-4 py-2 rounded-lg text-sm font-medium ${C==="performance"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Performance Dashboard"})]}),C==="skills"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.length}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Skills"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:ue.length}),r.jsx("div",{className:"text-sm text-gray-500",children:"Categories"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.reduce((oe,te)=>oe+te.triggers.length,0)}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Triggers"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:e.reduce((oe,te)=>{var le;return oe+(((le=te.agentDetails)==null?void 0:le.length)||0)},0)}),r.jsx("div",{className:"text-sm text-gray-500",children:"Agent Bindings"})]})]}),r.jsxs("div",{className:"mb-6 space-y-4",children:[r.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:r.jsx("input",{type:"text",placeholder:"Search skills by name, ID, or trigger...",value:N,onChange:oe=>A(oe.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Filter by category:"}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("button",{onClick:()=>O("all"),className:`px-3 py-1 text-sm rounded-full ${P==="all"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All (",e.length,")"]}),ue.map(oe=>r.jsxs("button",{onClick:()=>O(oe),className:`px-3 py-1 text-sm rounded-full capitalize ${P===oe?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[oe," (",e.filter(te=>te.category===oe).length,")"]},oe))]})]})]}),v.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Pending Pull Requests (",v.length,")"]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-yellow-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"PR"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"Skill"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"Author"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"Created"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-yellow-800",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-yellow-200",children:v.map(oe=>r.jsxs("tr",{className:"hover:bg-yellow-100",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsxs("a",{href:oe.html_url,target:"_blank",rel:"noopener noreferrer",className:"text-yellow-800 hover:underline font-medium",children:["#",oe.number]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"text-sm text-gray-700",children:oe.resource_id})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:oe.author_avatar,alt:oe.author,className:"w-6 h-6 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-700",children:oe.author})]})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(oe.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-4 py-3",children:oe.draft?r.jsx("span",{className:"px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded-full",children:"Draft"}):r.jsx("span",{className:"px-2 py-1 text-xs bg-green-200 text-green-800 rounded-full",children:"Ready"})})]},oe.number))})]})})]}),he.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[r.jsx("div",{className:"text-6xl mb-4",children:e.length===0?"":""}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.length===0?"No skills yet":"No matching skills"}),r.jsx("p",{className:"text-gray-600 mb-4",children:e.length===0?"Create your first skill to get started":"Try adjusting your search or filters"}),e.length===0?r.jsx("button",{onClick:q,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Create Skill"}):r.jsx("button",{onClick:()=>{A(""),O("all")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Clear Filters"})]}):r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:he.map(oe=>r.jsx(uD,{skill:oe,onEdit:K,onDelete:Y},oe.id))})]}),C==="performance"&&r.jsx("div",{children:V?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-600"})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Total Skills Tracked"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:T.length})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Total Executions"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:T.reduce((oe,te)=>oe+te.totalExecutions,0).toLocaleString()})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Avg Success Rate"}),r.jsx("div",{className:"text-2xl font-bold text-green-600 mt-1",children:T.length>0?`${Math.round(T.reduce((oe,te)=>oe+te.successRate,0)/T.length*100)}%`:"N/A"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Needs Attention"}),r.jsx("div",{className:"text-2xl font-bold text-amber-600 mt-1",children:$.length})]})]}),I.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Skills"}),r.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Skill"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Executions"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Success Rate"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Avg Latency"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"P95 Latency"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:I.map(oe=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:oe.skillId}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:oe.totalExecutions}),r.jsx("td",{className:"px-4 py-3 text-sm text-right",children:r.jsxs("span",{className:`font-medium ${oe.successRate>=.9?"text-green-600":oe.successRate>=.7?"text-amber-600":"text-red-600"}`,children:[Math.round(oe.successRate*100),"%"]})}),r.jsxs("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:[oe.avgDurationMs,"ms"]}),r.jsxs("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:[oe.p95DurationMs,"ms"]})]},oe.skillId))})]})})]}),$.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Needs Attention"}),r.jsx("div",{className:"space-y-3",children:$.map(oe=>r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:oe.skillId}),r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:oe.successRate<.7?`Low success rate: ${Math.round(oe.successRate*100)}%`:`High latency: ${oe.avgDurationMs}ms avg`})]}),r.jsxs("div",{className:"text-right text-sm",children:[r.jsxs("div",{className:"text-gray-500",children:[oe.totalExecutions," executions"]}),r.jsxs("div",{className:"text-gray-500",children:[oe.failureCount," failures"]})]})]},oe.skillId))})]}),T.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"All Skills"}),r.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Skill"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Total"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Success"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Failed"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Rate"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Avg (ms)"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"P95 (ms)"}),r.jsx("th",{className:"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3",children:"Last Run"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:T.map(oe=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:oe.skillId}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:oe.totalExecutions}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-green-600",children:oe.successCount}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-red-600",children:oe.failureCount}),r.jsx("td",{className:"px-4 py-3 text-sm text-right",children:r.jsxs("span",{className:`font-medium ${oe.successRate>=.9?"text-green-600":oe.successRate>=.7?"text-amber-600":"text-red-600"}`,children:[Math.round(oe.successRate*100),"%"]})}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:oe.avgDurationMs}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:oe.p95DurationMs}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-500",children:oe.lastExecutedAt?new Date(oe.lastExecutedAt).toLocaleDateString():"Never"})]},oe.skillId))})]})})]}),T.length===0&&!V&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No performance data yet"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Skill metrics will appear here once skills are executed"})]})]})}),r.jsx(fD,{isOpen:p,onClose:()=>m(!1),onSuccess:W,skill:g,availableAgents:n,availableTools:s})]})}function pD(){const[e,t]=b.useState([]),[n,a]=b.useState(!0),[s,i]=b.useState("all"),[l,d]=b.useState(null),[u,h]=b.useState(!1),[p,m]=b.useState(0);b.useEffect(()=>{g()},[s]);const g=async()=>{a(!0);try{const S=new URLSearchParams;s!=="all"&&S.set("source",s);const P=await se({url:`/api/conversations${S.toString()?`?${S.toString()}`:""}`,method:"GET"});t(P.conversations||[]),m(P.total||0)}catch(S){console.error("Failed to fetch conversations:",S)}finally{a(!1)}},j=async S=>{h(!0);try{const P=await se({url:`/api/conversations/${S}`,method:"GET"});d(P.conversation)}catch(P){console.error("Failed to fetch conversation detail:",P)}finally{h(!1)}},v=S=>{switch(S){case"slack":return"";case"web":return"";case"terminal":return"";case"api":return"";default:return""}},w=S=>{switch(S){case"slack":return"bg-purple-100 text-purple-800";case"web":return"bg-blue-100 text-blue-800";case"terminal":return"bg-gray-100 text-gray-800";case"api":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},x=S=>{const P=new Date(S),N=new Date().getTime()-P.getTime(),A=Math.floor(N/(1e3*60*60)),C=Math.floor(N/(1e3*60*60*24));return A<1?"Just now":A<24?`${A}h ago`:C<7?`${C}d ago`:P.toLocaleDateString()};return n?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading conversations..."})]})}):r.jsxs("div",{className:"flex h-full",children:[r.jsxs("div",{className:`${l?"w-1/2":"w-full"} transition-all duration-300`,children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Conversations"}),r.jsxs("p",{className:"text-gray-600",children:["View AI conversation history from Slack and other sources (",p," total)"]})]}),r.jsx("div",{className:"mb-6 flex gap-2 flex-wrap",children:["all","slack","web","terminal","api"].map(S=>r.jsx("button",{onClick:()=>i(S),className:`px-4 py-2 rounded-lg font-medium capitalize ${s===S?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:S==="all"?"All Sources":S},S))}),e.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No conversations yet"}),r.jsx("p",{className:"text-gray-600",children:"Start chatting with the AI via Slack or web to see conversation history here"})]})}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"divide-y divide-gray-200",children:e.map(S=>r.jsx("div",{onClick:()=>j(S.id),className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${(l==null?void 0:l.id)===S.id?"bg-indigo-50":""}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${w(S.source)}`,children:[v(S.source)," ",S.source||"unknown"]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[S.messageCount," messages"]})]}),r.jsx("p",{className:"text-sm text-gray-900 truncate",children:S.preview||"No preview available"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"text-xs text-gray-500",children:S.userName}),r.jsx("span",{className:"text-xs text-gray-400",children:""}),r.jsx("span",{className:"text-xs text-gray-500",children:x(S.lastUsedAt)})]})]}),r.jsx("div",{className:"ml-4 flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},S.id))})})]}),l&&r.jsxs("div",{className:"w-1/2 pl-6 border-l border-gray-200",children:[r.jsx("div",{className:"sticky top-0 bg-gray-50 -mx-6 px-6 pt-0",children:r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${w(l.source)}`,children:[v(l.source)," ",l.source||"unknown"]}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Conversation Detail"})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[l.userName," "," ",new Date(l.createdAt).toLocaleString()]})]}),r.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:r.jsx("svg",{className:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),u?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"space-y-4 pb-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:[l.history.map((S,P)=>r.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[85%] rounded-lg px-4 py-2 ${S.role==="user"?"bg-indigo-600 text-white":S.role==="system"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-gray-100 text-gray-900"}`,children:[S.role==="system"&&r.jsx("span",{className:"text-xs font-medium block mb-1",children:"System"}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:S.content}),S.timestamp&&r.jsx("p",{className:`text-xs mt-1 ${S.role==="user"?"text-indigo-200":"text-gray-400"}`,children:new Date(S.timestamp).toLocaleTimeString()})]})},P)),l.history.length===0&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No messages in this conversation"})]})]})]})}const mS={notion:{icon:"N",color:"text-black",bg:"bg-white border border-gray-300"},drive:{icon:"G",color:"text-blue-600",bg:"bg-blue-50"},github:{icon:"GH",color:"text-gray-800",bg:"bg-gray-100"},slack:{icon:"S",color:"text-purple-600",bg:"bg-purple-50"}},xD={notion:"Notion",drive:"Google Drive",github:"GitHub",slack:"Slack"};function gD({result:e,onClick:t,onCopyLink:n}){const[a,s]=b.useState(!1),i=mS[e.source]||mS.notion,l=h=>{h.stopPropagation(),navigator.clipboard.writeText(e.url),s(!0),n==null||n(e.url),setTimeout(()=>s(!1),2e3)},d=h=>{h.stopPropagation(),window.open(e.url,"_blank","noopener,noreferrer")},u=h=>h?new Date(h).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}):null;return r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>t==null?void 0:t(e),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm ${i.bg} ${i.color}`,children:i.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:e.title}),r.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[r.jsx("span",{className:"text-xs text-gray-500",children:xD[e.source]}),e.lastModified&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-300",children:"|"}),r.jsx("span",{className:"text-xs text-gray-500",children:u(e.lastModified)})]}),e.author&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-300",children:"|"}),r.jsx("span",{className:"text-xs text-gray-500",children:e.author})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[r.jsx("button",{onClick:l,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Copy link",children:a?r.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),r.jsx("button",{onClick:d,className:"p-1.5 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:"Open in new tab",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})]}),e.aiSummary?r.jsxs("div",{className:"mt-2 p-2 bg-indigo-50 rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-1 text-xs text-indigo-600 font-medium mb-1",children:[r.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"AI Summary"]}),r.jsx("p",{className:"text-sm text-gray-700",children:e.aiSummary})]}):r.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:e.relevantExcerpt||e.snippet||"No preview available"}),r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 h-1 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${Math.round(e.score*100)}%`}})}),r.jsxs("span",{className:"text-xs text-gray-400",children:[Math.round(e.score*100),"% match"]})]})]})]})})}function Zp(){const e=document.cookie.match(/csrf_token=([^;]+)/);return e?decodeURIComponent(e[1]):""}const yD={notion:"Notion",drive:"Google Drive",github:"GitHub",slack:"Slack"};function vD(){const[e,t]=b.useState(""),[n,a]=b.useState(null),[s,i]=b.useState(!1),[l,d]=b.useState(null),[u,h]=b.useState([]),[p,m]=b.useState(null),[g,j]=b.useState("");b.useEffect(()=>{const N=setTimeout(()=>{j(e)},300);return()=>clearTimeout(N)},[e]);const v=b.useCallback(async N=>{if(!N.trim()){a(null);return}i(!0),d(null);try{const A=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":Zp()},credentials:"include",body:JSON.stringify({query:N,sources:u.length>0?u:void 0,limit:20,includeAiSummary:!0})});if(!A.ok)throw new Error("Search failed");const C=await A.json();a(C),C.results.length>0&&m(null)}catch(A){d(A instanceof Error?A.message:"Search failed")}finally{i(!1)}},[u]);b.useEffect(()=>{g&&v(g)},[g,v]);const w=async N=>{if(p)try{await fetch("/api/search/analytics",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":Zp()},credentials:"include",body:JSON.stringify({analyticsId:p,clickedResult:N.url,clickedSource:N.source})})}catch{}window.open(N.url,"_blank","noopener,noreferrer")},x=N=>{t(N)},S=async N=>{if(p)try{await fetch("/api/search/analytics",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":Zp()},credentials:"include",body:JSON.stringify({analyticsId:p,aiAnswerUseful:N})})}catch{}},P=N=>{h(A=>A.includes(N)?A.filter(C=>C!==N):[...A,N])},O=(n==null?void 0:n.sources.filter(N=>N.connected).map(N=>N.source))||[];return r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Unified Search"}),r.jsx("p",{className:"text-gray-600",children:"Search across all your connected integrations"})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:r.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),r.jsx("input",{type:"text",value:e,onChange:N=>t(N.target.value),placeholder:"Search documents, messages, issues...",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg"}),s&&r.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:r.jsx("div",{className:"w-5 h-5 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"})})]})}),O.length>0&&r.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[r.jsx("span",{className:"text-sm text-gray-500 py-1",children:"Filter by:"}),O.map(N=>{var A;return r.jsxs("button",{onClick:()=>P(N),className:`px-3 py-1 text-sm rounded-full transition-colors ${u.length===0||u.includes(N)?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[yD[N],n&&r.jsxs("span",{className:"ml-1 text-xs",children:["(",((A=n.sources.find(C=>C.source===N))==null?void 0:A.count)||0,")"]})]},N)})]}),l&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:l}),n&&r.jsxs("div",{className:"space-y-6",children:[n.aiAnswer&&r.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Answer"})]}),r.jsx("p",{className:"text-gray-700 leading-relaxed",children:n.aiAnswer}),r.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Was this helpful?"}),r.jsx("button",{onClick:()=>S(!0),className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Yes"}),r.jsx("button",{onClick:()=>S(!1),className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"No"})]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[r.jsxs("span",{children:[n.totalCount," result",n.totalCount!==1?"s":""," ","found"]}),n.responseTimeMs&&r.jsxs("span",{children:[(n.responseTimeMs/1e3).toFixed(2),"s"]})]}),n.results.length>0?r.jsx("div",{className:"space-y-3",children:n.results.map((N,A)=>r.jsx(gD,{result:N,onClick:w},`${N.source}-${N.id}-${A}`))}):r.jsxs("div",{className:"text-center py-12 text-gray-500",children:['No results found for "',e,'"']}),n.relatedQuestions&&n.relatedQuestions.length>0&&r.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Related Questions"}),r.jsx("div",{className:"space-y-2",children:n.relatedQuestions.map((N,A)=>r.jsxs("button",{onClick:()=>x(N),className:"w-full text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg text-sm text-gray-700 transition-colors flex items-center gap-3",children:[r.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),N]},A))})]})]}),!n&&!s&&!e&&r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Start searching"}),r.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"Search across Notion, Google Drive, GitHub, and Slack to find documents, messages, and issues."})]})]})}function bD(){const[e,t]=b.useState(null),[n,a]=b.useState(null),[s,i]=b.useState([]),[l,d]=b.useState(!0),[u,h]=b.useState(null);b.useEffect(()=>{p();const m=setInterval(p,3e4);return()=>clearInterval(m)},[]);const p=async()=>{try{const[m,g,j]=await Promise.all([fetch("/api/admin/metrics",{credentials:"include"}),fetch("/api/admin/system/health",{credentials:"include"}),fetch("/api/admin/metrics/revenue",{credentials:"include"})]);if(m.ok&&t(await m.json()),g.ok&&a(await g.json()),j.ok){const v=await j.json();i(v.topOrganizations||[])}h(null)}catch{h("Failed to load dashboard data")}finally{d(!1)}};return l?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):u?r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:u}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Platform overview and monitoring"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm text-gray-500",children:["Last updated: ",e!=null&&e.timestamp?new Date(e.timestamp).toLocaleTimeString():"N/A"]}),r.jsx("button",{onClick:p,className:"px-3 py-1.5 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Refresh"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(Su,{title:"MRR",value:`$${((e==null?void 0:e.revenue.mrr)||0).toLocaleString()}`,subtext:`ARR: $${((e==null?void 0:e.revenue.arr)||0).toLocaleString()}`,trend:12,trendLabel:"vs last month",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"green"}),r.jsx(Su,{title:"Total Users",value:((e==null?void 0:e.users.total)||0).toLocaleString(),subtext:`${(e==null?void 0:e.users.activeThisMonth)||0} active this month`,trend:8,trendLabel:"vs last month",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),color:"blue"}),r.jsx(Su,{title:"Organizations",value:((e==null?void 0:e.organizations.total)||0).toLocaleString(),subtext:`${(e==null?void 0:e.organizations.newThisMonth)||0} new this month`,trend:(e==null?void 0:e.organizations.newThisMonth)||0,trendLabel:"new signups",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),color:"purple"}),r.jsx(Su,{title:"System Uptime",value:`${((e==null?void 0:e.system.uptime)||99.9).toFixed(1)}%`,subtext:`${(e==null?void 0:e.system.avgLatency)||0}ms avg latency`,icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),color:e!=null&&e.system.uptime&&e.system.uptime>=99.9?"green":"yellow"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue by Plan"}),r.jsx("div",{className:"space-y-3",children:Object.entries((e==null?void 0:e.revenue.revenueByPlan)||{}).map(([m,g])=>r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"w-24 text-sm text-gray-600 capitalize",children:m}),r.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${e!=null&&e.revenue.mrr?g/e.revenue.mrr*100:0}%`}})}),r.jsxs("span",{className:"w-20 text-sm text-gray-900 text-right",children:["$",g.toLocaleString()]})]},m))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"System Health"}),r.jsx(jD,{status:(n==null?void 0:n.status)||"healthy"})]}),r.jsx("div",{className:"space-y-3",children:n==null?void 0:n.components.map(m=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[r.jsx("span",{className:"text-sm text-gray-600 capitalize",children:m.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[m.latency&&r.jsxs("span",{className:"text-xs text-gray-400",children:[m.latency,"ms"]}),r.jsx(wD,{status:m.status})]})]},m.name))})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Top Organizations by Spend"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Organization"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Plan"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Monthly Spend"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-200",children:[s.map(m=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"font-medium text-gray-900",children:m.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full capitalize",children:m.plan})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-900",children:["$",m.monthlySpend.toLocaleString()]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"View"})})]},m.id)),s.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:"No organizations found"})})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Plan Distribution"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries((e==null?void 0:e.organizations.byPlan)||{}).map(([m,g])=>r.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g}),r.jsx("p",{className:"text-sm text-gray-500 capitalize",children:m})]},m))})]})]})}function Su({title:e,value:t,subtext:n,trend:a,trendLabel:s,icon:i,color:l="gray"}){const d={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600",yellow:"bg-yellow-100 text-yellow-600",gray:"bg-gray-100 text-gray-600"};return r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`p-2 rounded-lg ${d[l]}`,children:i}),a!==void 0&&r.jsxs("span",{className:`text-sm font-medium ${a>=0?"text-green-600":"text-red-600"}`,children:[a>=0?"+":"",a,"%"]})]}),r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:e}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n})]})}function jD({status:e}){const t={healthy:{bg:"bg-green-100",text:"text-green-700",label:"Healthy"},degraded:{bg:"bg-yellow-100",text:"text-yellow-700",label:"Degraded"},unhealthy:{bg:"bg-red-100",text:"text-red-700",label:"Unhealthy"}},{bg:n,text:a,label:s}=t[e];return r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${n} ${a}`,children:s})}function wD({status:e}){const t={healthy:"bg-green-500",degraded:"bg-yellow-500",unhealthy:"bg-red-500"};return r.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${t[e]}`})}function ND(){const[e,t]=b.useState([]),[n,a]=b.useState({total:0,page:1,pageSize:20,totalPages:0}),[s,i]=b.useState(!0),[l,d]=b.useState(null),[u,h]=b.useState(""),[p,m]=b.useState("all"),[g,j]=b.useState("all"),[v,w]=b.useState("createdAt"),[x,S]=b.useState("desc"),P=b.useCallback(async()=>{i(!0);try{const I=new URLSearchParams({page:n.page.toString(),limit:n.pageSize.toString(),sortBy:v,sortOrder:x});u&&I.append("search",u),p!=="all"&&I.append("status",p),g!=="all"&&I.append("plan",g);const M=await fetch(`/api/admin/organizations?${I}`,{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch organizations");const $=await M.json();t($.organizations||[]),a(G=>({...G,total:$.total||0,totalPages:Math.ceil(($.total||0)/G.pageSize)}))}catch(I){d(I instanceof Error?I.message:"Failed to load organizations")}finally{i(!1)}},[n.page,n.pageSize,u,p,g,v,x]);b.useEffect(()=>{P()},[P]);const O=I=>{v===I?S(x==="asc"?"desc":"asc"):(w(I),S("desc"))},N=async I=>{if(confirm("Are you sure you want to suspend this organization?"))try{if(!(await fetch(`/api/admin/organizations/${I}/suspend`,{method:"POST",credentials:"include"})).ok)throw new Error("Failed to suspend organization");P()}catch(M){alert(M instanceof Error?M.message:"Failed to suspend organization")}},A=async I=>{try{if(!(await fetch(`/api/admin/organizations/${I}/reactivate`,{method:"POST",credentials:"include"})).ok)throw new Error("Failed to reactivate organization");P()}catch(M){alert(M instanceof Error?M.message:"Failed to reactivate organization")}},C=I=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(I),E=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),T=I=>{switch(I){case"active":return"bg-green-100 text-green-800";case"suspended":return"bg-red-100 text-red-800";case"trial":return"bg-blue-100 text-blue-800";case"churned":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},R=I=>{switch(I.toLowerCase()){case"enterprise":return"bg-purple-100 text-purple-800";case"pro":return"bg-indigo-100 text-indigo-800";case"starter":return"bg-blue-100 text-blue-800";case"free":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return l?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"text-red-600 text-lg mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600",children:l}),r.jsx("button",{onClick:P,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Retry"})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Organizations"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage all platform organizations"})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"text-sm text-gray-500",children:[n.total," total"]})})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"flex-1 min-w-[200px]",children:r.jsx("input",{type:"text",placeholder:"Search organizations...",value:u,onChange:I=>{h(I.target.value),a(M=>({...M,page:1}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),r.jsxs("select",{value:p,onChange:I=>{m(I.target.value),a(M=>({...M,page:1}))},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"all",children:"All Statuses"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"trial",children:"Trial"}),r.jsx("option",{value:"suspended",children:"Suspended"}),r.jsx("option",{value:"churned",children:"Churned"})]}),r.jsxs("select",{value:g,onChange:I=>{j(I.target.value),a(M=>({...M,page:1}))},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"all",children:"All Plans"}),r.jsx("option",{value:"free",children:"Free"}),r.jsx("option",{value:"starter",children:"Starter"}),r.jsx("option",{value:"pro",children:"Pro"}),r.jsx("option",{value:"enterprise",children:"Enterprise"})]}),r.jsx("button",{onClick:P,disabled:s,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:r.jsx("svg",{className:`w-5 h-5 ${s?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>O("name"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Organization",v==="name"&&r.jsx("span",{children:x==="asc"?"":""})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>O("userCount"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Users",v==="userCount"&&r.jsx("span",{children:x==="asc"?"":""})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>O("mrr"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["MRR",v==="mrr"&&r.jsx("span",{children:x==="asc"?"":""})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>O("createdAt"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Created",v==="createdAt"&&r.jsx("span",{children:x==="asc"?"":""})]})}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})})})}):e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No organizations found"})}):e.map(I=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:I.name}),r.jsx("div",{className:"text-sm text-gray-500",children:I.slug})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${R(I.plan)}`,children:I.plan})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${T(I.status)}`,children:I.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.userCount}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C(I.mrr)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E(I.createdAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("a",{href:`/admin/organizations/${I.id}`,className:"text-indigo-600 hover:text-indigo-900 font-medium",children:"View"}),I.status==="active"?r.jsx("button",{onClick:()=>N(I.id),className:"text-red-600 hover:text-red-900 font-medium",children:"Suspend"}):I.status==="suspended"?r.jsx("button",{onClick:()=>A(I.id),className:"text-green-600 hover:text-green-900 font-medium",children:"Reactivate"}):null]})})]},I.id))})]})}),n.totalPages>1&&r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(n.page-1)*n.pageSize+1," to"," ",Math.min(n.page*n.pageSize,n.total)," of"," ",n.total," results"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>a(I=>({...I,page:I.page-1})),disabled:n.page===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",n.page," of ",n.totalPages]}),r.jsx("button",{onClick:()=>a(I=>({...I,page:I.page+1})),disabled:n.page===n.totalPages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]})}function SD(){const[e,t]=b.useState("all"),[n,a]=b.useState("all"),[s,i]=b.useState(""),[l,d]=b.useState(1),[u,h]=b.useState(null),[p,m]=b.useState(""),{data:g}=V7(),{data:j,isLoading:v}=G7({status:e==="all"?void 0:e,provider:n==="all"?void 0:n,page:l,limit:20}),{data:w}=Q7(),x=Y7(),S=X7(),P=J7(),O=Z7(),N=AO(),A=g||{total:0,linked:0,unlinked:0,suggested:0,byProvider:{slack:0,google:0,notion:0}},C=(j==null?void 0:j.identities)||[],E=(j==null?void 0:j.pagination)||{page:1,totalPages:0},T=C.filter(V=>{var U,H,B,D,L,q;if(!s)return!0;const z=s.toLowerCase();return((U=V.email)==null?void 0:U.toLowerCase().includes(z))||((H=V.displayName)==null?void 0:H.toLowerCase().includes(z))||((D=(B=V.linkedUser)==null?void 0:B.email)==null?void 0:D.toLowerCase().includes(z))||((q=(L=V.linkedUser)==null?void 0:L.displayName)==null?void 0:q.toLowerCase().includes(z))}),R=V=>{if(!p.trim()){alert("Please enter a user ID");return}x.mutate({identityId:V,userId:p},{onSuccess:()=>{h(null),m("")},onError:z=>{alert(z.message)}})},I=V=>{confirm("Unlink this identity?")&&S.mutate({identityId:V},{onError:z=>{alert(z.message)}})},M=V=>{P.mutate({suggestionId:V},{onError:z=>{alert(z.message)}})},$=V=>{O.mutate({suggestionId:V},{onError:z=>{alert(z.message)}})},G=()=>{confirm("Sync all Slack users to the identity system? This will create identity records and attempt auto-linking.")&&N.mutate(void 0,{onSuccess:V=>{alert(`Sync complete: ${V.message}

Auto-linked: ${V.stats.autoLinked}
Suggestions created: ${V.stats.suggested}`)},onError:V=>{alert(V.message)}})};return r.jsxs("div",{className:"min-h-screen bg-black text-white",children:[r.jsx("div",{className:"border-b-4 border-white bg-black",children:r.jsxs("div",{className:"p-8 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-6xl font-black uppercase tracking-tighter mb-2",children:"Identity"}),r.jsx("p",{className:"text-xl font-mono text-gray-400",children:"CONTROL PANEL"})]}),r.jsxs("button",{onClick:G,disabled:N.isPending,className:"px-6 py-3 border-2 border-white text-white font-mono font-bold uppercase hover:bg-white hover:text-black transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[r.jsx(Jn,{className:`w-5 h-5 ${N.isPending?"animate-spin":""}`}),N.isPending?"SYNCING...":"SYNC SLACK USERS"]})]})}),r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(ku,{label:"TOTAL",value:A.total,color:"border-white"}),r.jsx(ku,{label:"LINKED",value:A.linked,color:"border-green-500"}),r.jsx(ku,{label:"UNLINKED",value:A.unlinked,color:"border-red-500"}),r.jsx(ku,{label:"SUGGESTED",value:A.suggested,color:"border-yellow-500"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[r.jsx(ex,{provider:"SLACK",count:A.byProvider.slack,icon:r.jsx(uf,{className:"w-8 h-8"})}),r.jsx(ex,{provider:"GOOGLE",count:A.byProvider.google,icon:r.jsx(df,{className:"w-8 h-8"})}),r.jsx(ex,{provider:"NOTION",count:A.byProvider.notion,icon:r.jsx(cf,{className:"w-8 h-8"})})]}),w&&w.length>0&&r.jsx(kD,{suggestions:w,onAccept:M,onReject:$}),r.jsx("div",{className:"border-4 border-white bg-black p-6 mb-8",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-mono font-bold mb-2 uppercase",children:"Search"}),r.jsx("input",{type:"text",value:s,onChange:V=>i(V.target.value),placeholder:"Email or name...",className:"w-full bg-black border-2 border-white px-4 py-3 font-mono text-white placeholder-gray-600 focus:outline-none focus:border-yellow-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-mono font-bold mb-2 uppercase",children:"Status"}),r.jsxs("select",{value:e,onChange:V=>{t(V.target.value),d(1)},className:"w-full bg-black border-2 border-white px-4 py-3 font-mono text-white focus:outline-none focus:border-yellow-500",children:[r.jsx("option",{value:"all",children:"ALL"}),r.jsx("option",{value:"linked",children:"LINKED"}),r.jsx("option",{value:"unlinked",children:"UNLINKED"}),r.jsx("option",{value:"suggested",children:"SUGGESTED"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-mono font-bold mb-2 uppercase",children:"Provider"}),r.jsxs("select",{value:n,onChange:V=>{a(V.target.value),d(1)},className:"w-full bg-black border-2 border-white px-4 py-3 font-mono text-white focus:outline-none focus:border-yellow-500",children:[r.jsx("option",{value:"all",children:"ALL"}),r.jsx("option",{value:"slack",children:"SLACK"}),r.jsx("option",{value:"google",children:"GOOGLE"}),r.jsx("option",{value:"notion",children:"NOTION"})]})]})]})}),r.jsxs("div",{className:"border-4 border-white bg-black overflow-hidden",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-4 border-white",children:[r.jsx("th",{className:"text-left p-4 font-mono text-xs font-bold uppercase",children:"Provider"}),r.jsx("th",{className:"text-left p-4 font-mono text-xs font-bold uppercase",children:"Identity"}),r.jsx("th",{className:"text-left p-4 font-mono text-xs font-bold uppercase",children:"Status"}),r.jsx("th",{className:"text-left p-4 font-mono text-xs font-bold uppercase",children:"Linked User"}),r.jsx("th",{className:"text-right p-4 font-mono text-xs font-bold uppercase",children:"Actions"})]})}),r.jsx("tbody",{children:v?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-12 text-center",children:r.jsx("div",{className:"inline-block w-8 h-8 border-4 border-white border-t-transparent animate-spin"})})}):T.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-12 text-center font-mono text-gray-600",children:"NO IDENTITIES FOUND"})}):T.map(V=>r.jsx(CD,{identity:V,onLink:()=>h(V),onUnlink:()=>I(V.id)},V.id))})]}),E.totalPages>1&&r.jsxs("div",{className:"border-t-4 border-white p-4 flex justify-between items-center",children:[r.jsxs("div",{className:"font-mono text-sm",children:["PAGE ",E.page," / ",E.totalPages]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>d(V=>Math.max(1,V-1)),disabled:l===1,className:"px-4 py-2 border-2 border-white font-mono font-bold disabled:opacity-30 disabled:cursor-not-allowed hover:bg-white hover:text-black transition-colors",children:"PREV"}),r.jsx("button",{onClick:()=>d(V=>Math.min(E.totalPages,V+1)),disabled:l===E.totalPages,className:"px-4 py-2 border-2 border-white font-mono font-bold disabled:opacity-30 disabled:cursor-not-allowed hover:bg-white hover:text-black transition-colors",children:"NEXT"})]})]})]})]}),u&&r.jsx(AD,{identity:u,linkUserId:p,setLinkUserId:m,onLink:()=>R(u.id),onClose:()=>{h(null),m("")},isLoading:x.isPending})]})}function ku({label:e,value:t,color:n}){return r.jsxs("div",{className:`border-4 ${n} bg-black p-6`,children:[r.jsx("div",{className:"text-5xl font-black mb-2",children:t}),r.jsx("div",{className:"text-xs font-mono font-bold",children:e})]})}function ex({provider:e,count:t,icon:n}){return r.jsxs("div",{className:"border-4 border-white bg-black p-6 flex items-center gap-4",children:[r.jsx("div",{className:"text-white",children:n}),r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl font-black",children:t}),r.jsx("div",{className:"text-xs font-mono font-bold",children:e})]})]})}function kD({suggestions:e,onAccept:t,onReject:n}){return r.jsxs("div",{className:"border-4 border-yellow-500 bg-black p-6 mb-8",children:[r.jsxs("h2",{className:"text-2xl font-black uppercase mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-4 h-4 bg-yellow-500 animate-pulse"}),"PENDING SUGGESTIONS (",e.length,")"]}),r.jsx("div",{className:"space-y-4",children:e.map(a=>r.jsxs("div",{className:"border-2 border-yellow-500 bg-black p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-mono text-sm mb-1",children:a.externalIdentity.displayName||a.externalIdentity.email}),r.jsxs("div",{className:"text-xs text-gray-400 font-mono",children:[a.externalIdentity.provider.toUpperCase()," "," ",a.suggestedUser.email]}),r.jsxs("div",{className:"text-xs text-yellow-500 font-mono mt-1",children:["CONFIDENCE: ",Math.round(a.confidenceScore*100),"%"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>t(a.id),className:"px-4 py-2 border-2 border-green-500 text-green-500 font-mono font-bold hover:bg-green-500 hover:text-black transition-colors flex items-center gap-2",children:[r.jsx(Ka,{className:"w-4 h-4"}),"ACCEPT"]}),r.jsxs("button",{onClick:()=>n(a.id),className:"px-4 py-2 border-2 border-red-500 text-red-500 font-mono font-bold hover:bg-red-500 hover:text-black transition-colors flex items-center gap-2",children:[r.jsx(_O,{className:"w-4 h-4"}),"REJECT"]})]})]},a.id))})]})}function CD({identity:e,onLink:t,onUnlink:n}){const a={slack:uf,google:df,notion:cf}[e.provider],s={linked:"border-green-500 text-green-500",unlinked:"border-red-500 text-red-500",suggested:"border-yellow-500 text-yellow-500"};return r.jsxs("tr",{className:"border-b-2 border-gray-800 hover:bg-gray-900 transition-colors",children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(a,{className:"w-5 h-5"}),r.jsx("span",{className:"font-mono text-xs uppercase",children:e.provider})]})}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"font-mono text-sm",children:e.displayName||e.email||"Unknown"}),e.email&&e.displayName&&r.jsx("div",{className:"font-mono text-xs text-gray-500",children:e.email})]}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`inline-block px-3 py-1 border-2 ${s[e.linkStatus]} font-mono text-xs font-bold uppercase`,children:e.linkStatus})}),r.jsx("td",{className:"p-4",children:e.linkedUser?r.jsxs("div",{children:[r.jsx("div",{className:"font-mono text-sm",children:e.linkedUser.displayName}),r.jsx("div",{className:"font-mono text-xs text-gray-500",children:e.linkedUser.email})]}):r.jsx("span",{className:"font-mono text-xs text-gray-600",children:"NOT LINKED"})}),r.jsx("td",{className:"p-4 text-right",children:r.jsx("div",{className:"flex justify-end gap-2",children:e.linkStatus==="linked"?r.jsxs("button",{onClick:n,className:"px-3 py-1.5 border-2 border-red-500 text-red-500 font-mono text-xs font-bold hover:bg-red-500 hover:text-black transition-colors flex items-center gap-1",children:[r.jsx(_L,{className:"w-3 h-3"}),"UNLINK"]}):r.jsxs("button",{onClick:t,className:"px-3 py-1.5 border-2 border-green-500 text-green-500 font-mono text-xs font-bold hover:bg-green-500 hover:text-black transition-colors flex items-center gap-1",children:[r.jsx(yj,{className:"w-3 h-3"}),"LINK"]})})})]})}function AD({identity:e,linkUserId:t,setLinkUserId:n,onLink:a,onClose:s,isLoading:i}){return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"border-4 border-white bg-black p-8 max-w-lg w-full",children:[r.jsx("h2",{className:"text-3xl font-black uppercase mb-6",children:"LINK IDENTITY"}),r.jsxs("div",{className:"mb-6 p-4 border-2 border-gray-700",children:[r.jsx("div",{className:"font-mono text-sm mb-2",children:e.displayName||e.email||"Unknown"}),r.jsx("div",{className:"font-mono text-xs text-gray-500 uppercase",children:e.provider})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-xs font-mono font-bold mb-2 uppercase",children:"User ID"}),r.jsx("input",{type:"text",value:t,onChange:l=>n(l.target.value),placeholder:"Enter user ID...",className:"w-full bg-black border-2 border-white px-4 py-3 font-mono text-white placeholder-gray-600 focus:outline-none focus:border-yellow-500",autoFocus:!0})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:a,disabled:i,className:"flex-1 px-6 py-3 border-2 border-green-500 text-green-500 font-mono font-bold hover:bg-green-500 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:i?"LINKING...":"LINK"}),r.jsx("button",{onClick:s,disabled:i,className:"flex-1 px-6 py-3 border-2 border-white text-white font-mono font-bold hover:bg-white hover:text-black transition-colors disabled:opacity-30",children:"CANCEL"})]})]})})}function Io(e){return e.status===404||e.status===502}function Zc({title:e,description:t,onRetry:n}){return r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-12 text-center max-w-lg",children:[r.jsx("div",{className:"text-4xl mb-4",children:r.jsx("svg",{className:"w-12 h-12 mx-auto text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.42 15.17l-5.28-3.3a.5.5 0 010-.84l5.28-3.3a.5.5 0 01.76.42v6.6a.5.5 0 01-.76.42zM20 7l-8 5 8 5V7z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:e}),r.jsx("p",{className:"text-blue-700 text-sm",children:t||"This feature is currently being set up. Please check back later."}),n&&r.jsx("button",{onClick:n,className:"mt-4 px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Retry"})]})})}function MO(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=MO(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function ze(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=MO(e))&&(a&&(a+=" "),a+=t);return a}var tx,pS;function Sr(){if(pS)return tx;pS=1;var e=Array.isArray;return tx=e,tx}var rx,xS;function IO(){if(xS)return rx;xS=1;var e=typeof vu=="object"&&vu&&vu.Object===Object&&vu;return rx=e,rx}var nx,gS;function Mn(){if(gS)return nx;gS=1;var e=IO(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return nx=n,nx}var ax,yS;function ed(){if(yS)return ax;yS=1;var e=Mn(),t=e.Symbol;return ax=t,ax}var sx,vS;function PD(){if(vS)return sx;vS=1;var e=ed(),t=Object.prototype,n=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(l){var d=n.call(l,s),u=l[s];try{l[s]=void 0;var h=!0}catch{}var p=a.call(l);return h&&(d?l[s]=u:delete l[s]),p}return sx=i,sx}var ix,bS;function OD(){if(bS)return ix;bS=1;var e=Object.prototype,t=e.toString;function n(a){return t.call(a)}return ix=n,ix}var ox,jS;function da(){if(jS)return ox;jS=1;var e=ed(),t=PD(),n=OD(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function l(d){return d==null?d===void 0?s:a:i&&i in Object(d)?t(d):n(d)}return ox=l,ox}var lx,wS;function ua(){if(wS)return lx;wS=1;function e(t){return t!=null&&typeof t=="object"}return lx=e,lx}var cx,NS;function $o(){if(NS)return cx;NS=1;var e=da(),t=ua(),n="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==n}return cx=a,cx}var dx,SS;function vj(){if(SS)return dx;SS=1;var e=Sr(),t=$o(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,l){if(e(i))return!1;var d=typeof i;return d=="number"||d=="symbol"||d=="boolean"||i==null||t(i)?!0:a.test(i)||!n.test(i)||l!=null&&i in Object(l)}return dx=s,dx}var ux,kS;function ns(){if(kS)return ux;kS=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return ux=e,ux}var hx,CS;function bj(){if(CS)return hx;CS=1;var e=da(),t=ns(),n="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function l(d){if(!t(d))return!1;var u=e(d);return u==a||u==s||u==n||u==i}return hx=l,hx}var fx,AS;function ED(){if(AS)return fx;AS=1;var e=Mn(),t=e["__core-js_shared__"];return fx=t,fx}var mx,PS;function _D(){if(PS)return mx;PS=1;var e=ED(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function n(a){return!!t&&t in a}return mx=n,mx}var px,OS;function $O(){if(OS)return px;OS=1;var e=Function.prototype,t=e.toString;function n(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return px=n,px}var xx,ES;function TD(){if(ES)return xx;ES=1;var e=bj(),t=_D(),n=ns(),a=$O(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,u=l.toString,h=d.hasOwnProperty,p=RegExp("^"+u.call(h).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(g){if(!n(g)||t(g))return!1;var j=e(g)?p:i;return j.test(a(g))}return xx=m,xx}var gx,_S;function RD(){if(_S)return gx;_S=1;function e(t,n){return t==null?void 0:t[n]}return gx=e,gx}var yx,TS;function ei(){if(TS)return yx;TS=1;var e=TD(),t=RD();function n(a,s){var i=t(a,s);return e(i)?i:void 0}return yx=n,yx}var vx,RS;function hf(){if(RS)return vx;RS=1;var e=ei(),t=e(Object,"create");return vx=t,vx}var bx,MS;function MD(){if(MS)return bx;MS=1;var e=hf();function t(){this.__data__=e?e(null):{},this.size=0}return bx=t,bx}var jx,IS;function ID(){if(IS)return jx;IS=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return jx=e,jx}var wx,$S;function $D(){if($S)return wx;$S=1;var e=hf(),t="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function s(i){var l=this.__data__;if(e){var d=l[i];return d===t?void 0:d}return a.call(l,i)?l[i]:void 0}return wx=s,wx}var Nx,LS;function LD(){if(LS)return Nx;LS=1;var e=hf(),t=Object.prototype,n=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:n.call(i,s)}return Nx=a,Nx}var Sx,DS;function DD(){if(DS)return Sx;DS=1;var e=hf(),t="__lodash_hash_undefined__";function n(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return Sx=n,Sx}var kx,FS;function FD(){if(FS)return kx;FS=1;var e=MD(),t=ID(),n=$D(),a=LD(),s=DD();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var h=l[d];this.set(h[0],h[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,kx=i,kx}var Cx,qS;function qD(){if(qS)return Cx;qS=1;function e(){this.__data__=[],this.size=0}return Cx=e,Cx}var Ax,zS;function jj(){if(zS)return Ax;zS=1;function e(t,n){return t===n||t!==t&&n!==n}return Ax=e,Ax}var Px,BS;function ff(){if(BS)return Px;BS=1;var e=jj();function t(n,a){for(var s=n.length;s--;)if(e(n[s][0],a))return s;return-1}return Px=t,Px}var Ox,US;function zD(){if(US)return Ox;US=1;var e=ff(),t=Array.prototype,n=t.splice;function a(s){var i=this.__data__,l=e(i,s);if(l<0)return!1;var d=i.length-1;return l==d?i.pop():n.call(i,l,1),--this.size,!0}return Ox=a,Ox}var Ex,WS;function BD(){if(WS)return Ex;WS=1;var e=ff();function t(n){var a=this.__data__,s=e(a,n);return s<0?void 0:a[s][1]}return Ex=t,Ex}var _x,HS;function UD(){if(HS)return _x;HS=1;var e=ff();function t(n){return e(this.__data__,n)>-1}return _x=t,_x}var Tx,KS;function WD(){if(KS)return Tx;KS=1;var e=ff();function t(n,a){var s=this.__data__,i=e(s,n);return i<0?(++this.size,s.push([n,a])):s[i][1]=a,this}return Tx=t,Tx}var Rx,GS;function mf(){if(GS)return Rx;GS=1;var e=qD(),t=zD(),n=BD(),a=UD(),s=WD();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var h=l[d];this.set(h[0],h[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Rx=i,Rx}var Mx,VS;function wj(){if(VS)return Mx;VS=1;var e=ei(),t=Mn(),n=e(t,"Map");return Mx=n,Mx}var Ix,QS;function HD(){if(QS)return Ix;QS=1;var e=FD(),t=mf(),n=wj();function a(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Ix=a,Ix}var $x,YS;function KD(){if(YS)return $x;YS=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return $x=e,$x}var Lx,XS;function pf(){if(XS)return Lx;XS=1;var e=KD();function t(n,a){var s=n.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return Lx=t,Lx}var Dx,JS;function GD(){if(JS)return Dx;JS=1;var e=pf();function t(n){var a=e(this,n).delete(n);return this.size-=a?1:0,a}return Dx=t,Dx}var Fx,ZS;function VD(){if(ZS)return Fx;ZS=1;var e=pf();function t(n){return e(this,n).get(n)}return Fx=t,Fx}var qx,e5;function QD(){if(e5)return qx;e5=1;var e=pf();function t(n){return e(this,n).has(n)}return qx=t,qx}var zx,t5;function YD(){if(t5)return zx;t5=1;var e=pf();function t(n,a){var s=e(this,n),i=s.size;return s.set(n,a),this.size+=s.size==i?0:1,this}return zx=t,zx}var Bx,r5;function Nj(){if(r5)return Bx;r5=1;var e=HD(),t=GD(),n=VD(),a=QD(),s=YD();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var h=l[d];this.set(h[0],h[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Bx=i,Bx}var Ux,n5;function LO(){if(n5)return Ux;n5=1;var e=Nj(),t="Expected a function";function n(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var l=arguments,d=s?s.apply(this,l):l[0],u=i.cache;if(u.has(d))return u.get(d);var h=a.apply(this,l);return i.cache=u.set(d,h)||u,h};return i.cache=new(n.Cache||e),i}return n.Cache=e,Ux=n,Ux}var Wx,a5;function XD(){if(a5)return Wx;a5=1;var e=LO(),t=500;function n(a){var s=e(a,function(l){return i.size===t&&i.clear(),l}),i=s.cache;return s}return Wx=n,Wx}var Hx,s5;function JD(){if(s5)return Hx;s5=1;var e=XD(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(l,d,u,h){i.push(u?h.replace(n,"$1"):d||l)}),i});return Hx=a,Hx}var Kx,i5;function Sj(){if(i5)return Kx;i5=1;function e(t,n){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=n(t[a],a,t);return i}return Kx=e,Kx}var Gx,o5;function ZD(){if(o5)return Gx;o5=1;var e=ed(),t=Sj(),n=Sr(),a=$o(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function l(d){if(typeof d=="string")return d;if(n(d))return t(d,l)+"";if(a(d))return i?i.call(d):"";var u=d+"";return u=="0"&&1/d==-1/0?"-0":u}return Gx=l,Gx}var Vx,l5;function DO(){if(l5)return Vx;l5=1;var e=ZD();function t(n){return n==null?"":e(n)}return Vx=t,Vx}var Qx,c5;function FO(){if(c5)return Qx;c5=1;var e=Sr(),t=vj(),n=JD(),a=DO();function s(i,l){return e(i)?i:t(i,l)?[i]:n(a(i))}return Qx=s,Qx}var Yx,d5;function xf(){if(d5)return Yx;d5=1;var e=$o();function t(n){if(typeof n=="string"||e(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return Yx=t,Yx}var Xx,u5;function kj(){if(u5)return Xx;u5=1;var e=FO(),t=xf();function n(a,s){s=e(s,a);for(var i=0,l=s.length;a!=null&&i<l;)a=a[t(s[i++])];return i&&i==l?a:void 0}return Xx=n,Xx}var Jx,h5;function qO(){if(h5)return Jx;h5=1;var e=kj();function t(n,a,s){var i=n==null?void 0:e(n,a);return i===void 0?s:i}return Jx=t,Jx}var e9=qO();const Mr=Ze(e9);var Zx,f5;function t9(){if(f5)return Zx;f5=1;function e(t){return t==null}return Zx=e,Zx}var r9=t9();const qe=Ze(r9);var eg,m5;function n9(){if(m5)return eg;m5=1;var e=da(),t=Sr(),n=ua(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&n(i)&&e(i)==a}return eg=s,eg}var a9=n9();const Gs=Ze(a9);var s9=bj();const Fe=Ze(s9);var i9=ns();const Lo=Ze(i9);var tg={exports:{}},Ye={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p5;function o9(){if(p5)return Ye;p5=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function w(x){if(typeof x=="object"&&x!==null){var S=x.$$typeof;switch(S){case e:switch(x=x.type,x){case n:case s:case a:case h:case p:return x;default:switch(x=x&&x.$$typeof,x){case d:case l:case u:case g:case m:case i:return x;default:return S}}case t:return S}}}return Ye.ContextConsumer=l,Ye.ContextProvider=i,Ye.Element=e,Ye.ForwardRef=u,Ye.Fragment=n,Ye.Lazy=g,Ye.Memo=m,Ye.Portal=t,Ye.Profiler=s,Ye.StrictMode=a,Ye.Suspense=h,Ye.SuspenseList=p,Ye.isAsyncMode=function(){return!1},Ye.isConcurrentMode=function(){return!1},Ye.isContextConsumer=function(x){return w(x)===l},Ye.isContextProvider=function(x){return w(x)===i},Ye.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===e},Ye.isForwardRef=function(x){return w(x)===u},Ye.isFragment=function(x){return w(x)===n},Ye.isLazy=function(x){return w(x)===g},Ye.isMemo=function(x){return w(x)===m},Ye.isPortal=function(x){return w(x)===t},Ye.isProfiler=function(x){return w(x)===s},Ye.isStrictMode=function(x){return w(x)===a},Ye.isSuspense=function(x){return w(x)===h},Ye.isSuspenseList=function(x){return w(x)===p},Ye.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===s||x===a||x===h||x===p||x===j||typeof x=="object"&&x!==null&&(x.$$typeof===g||x.$$typeof===m||x.$$typeof===i||x.$$typeof===l||x.$$typeof===u||x.$$typeof===v||x.getModuleId!==void 0)},Ye.typeOf=w,Ye}var x5;function l9(){return x5||(x5=1,tg.exports=o9()),tg.exports}var c9=l9(),rg,g5;function zO(){if(g5)return rg;g5=1;var e=da(),t=ua(),n="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==n}return rg=a,rg}var ng,y5;function d9(){if(y5)return ng;y5=1;var e=zO();function t(n){return e(n)&&n!=+n}return ng=t,ng}var u9=d9();const td=Ze(u9);var h9=zO();const f9=Ze(h9);var cr=function(t){return t===0?0:t>0?1:-1},Ps=function(t){return Gs(t)&&t.indexOf("%")===t.length-1},ge=function(t){return f9(t)&&!td(t)},m9=function(t){return qe(t)},Dt=function(t){return ge(t)||Gs(t)},p9=0,Do=function(t){var n=++p9;return"".concat(t||"").concat(n)},dr=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ge(t)&&!Gs(t))return a;var i;if(Ps(t)){var l=t.indexOf("%");i=n*parseFloat(t.slice(0,l))/100}else i=+t;return td(i)&&(i=a),s&&i>n&&(i=n),i},Ia=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},x9=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,a={},s=0;s<n;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},Tr=function(t,n){return ge(t)&&ge(n)?function(a){return t+a*(n-t)}:function(){return n}};function Zu(e,t,n){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):Mr(a,t))===n})}var g9=function(t,n){return ge(t)&&ge(n)?t-n:Gs(t)&&Gs(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function zi(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}var y9=["viewBox","children"],v9=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],v5=["points","pathLength"],ag={svg:y9,polygon:v5,polyline:v5},Cj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],eh=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(b.isValidElement(t)&&(a=t.props),!Lo(a))return null;var s={};return Object.keys(a).forEach(function(i){Cj.includes(i)&&(s[i]=n||function(l){return a[i](a,l)})}),s},b9=function(t,n,a){return function(s){return t(n,a,s),null}},Vs=function(t,n,a){if(!Lo(t)||Rv(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var l=t[i];Cj.includes(i)&&typeof l=="function"&&(s||(s={}),s[i]=b9(l,n,a))}),s},j9=["children"],w9=["children"];function b5(e,t){if(e==null)return{};var n=N9(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function N9(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}var j5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ra=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},w5=null,sg=null,Aj=function e(t){if(t===w5&&Array.isArray(sg))return sg;var n=[];return b.Children.forEach(t,function(a){qe(a)||(c9.isFragment(a)?n=n.concat(e(a.props.children)):n.push(a))}),sg=n,w5=t,n};function Ir(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(function(s){return ra(s)}):a=[ra(t)],Aj(e).forEach(function(s){var i=Mr(s,"type.displayName")||Mr(s,"type.name");a.indexOf(i)!==-1&&n.push(s)}),n}function _r(e,t){var n=Ir(e,t);return n&&n[0]}var N5=function(t){if(!t||!t.props)return!1;var n=t.props,a=n.width,s=n.height;return!(!ge(a)||a<=0||!ge(s)||s<=0)},S9=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],k9=function(t){return t&&t.type&&Gs(t.type)&&S9.indexOf(t.type)>=0},C9=function(t){return t&&Mv(t)==="object"&&"clipDot"in t},A9=function(t,n,a,s){var i,l=(i=ag==null?void 0:ag[s])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Fe(t)&&(s&&l.includes(n)||v9.includes(n))||a&&Cj.includes(n)},Re=function(t,n,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(b.isValidElement(t)&&(s=t.props),!Lo(s))return null;var i={};return Object.keys(s).forEach(function(l){var d;A9((d=s)===null||d===void 0?void 0:d[l],l,n,a)&&(i[l]=s[l])}),i},Iv=function e(t,n){if(t===n)return!0;var a=b.Children.count(t);if(a!==b.Children.count(n))return!1;if(a===0)return!0;if(a===1)return S5(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var s=0;s<a;s++){var i=t[s],l=n[s];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!S5(i,l))return!1}return!0},S5=function(t,n){if(qe(t)&&qe(n))return!0;if(!qe(t)&&!qe(n)){var a=t.props||{},s=a.children,i=b5(a,j9),l=n.props||{},d=l.children,u=b5(l,w9);return s&&d?zi(i,u)&&Iv(s,d):!s&&!d?zi(i,u):!1}return!1},k5=function(t,n){var a=[],s={};return Aj(t).forEach(function(i,l){if(k9(i))a.push(i);else if(i){var d=ra(i.type),u=n[d]||{},h=u.handler,p=u.once;if(h&&(!p||!s[d])){var m=h(i,d,l);a.push(m),s[d]=!0}}}),a},P9=function(t){var n=t&&t.type;return n&&j5[n]?j5[n]:null},O9=function(t,n){return Aj(n).indexOf(t)},E9=["children","width","height","viewBox","className","style","title","desc"];function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$v.apply(this,arguments)}function _9(e,t){if(e==null)return{};var n=T9(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function T9(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Lv(e){var t=e.children,n=e.width,a=e.height,s=e.viewBox,i=e.className,l=e.style,d=e.title,u=e.desc,h=_9(e,E9),p=s||{width:n,height:a,x:0,y:0},m=ze("recharts-surface",i);return X.createElement("svg",$v({},Re(h,!0,"svg"),{className:m,width:n,height:a,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),X.createElement("title",null,d),X.createElement("desc",null,u),t)}var R9=["children","className"];function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dv.apply(this,arguments)}function M9(e,t){if(e==null)return{};var n=I9(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function I9(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var Ve=X.forwardRef(function(e,t){var n=e.children,a=e.className,s=M9(e,R9),i=ze("recharts-layer",a);return X.createElement("g",Dv({className:i},Re(s,!0),{ref:t}),n)}),pn=function(t,n){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},ig,C5;function $9(){if(C5)return ig;C5=1;function e(t,n,a){var s=-1,i=t.length;n<0&&(n=-n>i?0:i+n),a=a>i?i:a,a<0&&(a+=i),i=n>a?0:a-n>>>0,n>>>=0;for(var l=Array(i);++s<i;)l[s]=t[s+n];return l}return ig=e,ig}var og,A5;function L9(){if(A5)return og;A5=1;var e=$9();function t(n,a,s){var i=n.length;return s=s===void 0?i:s,!a&&s>=i?n:e(n,a,s)}return og=t,og}var lg,P5;function BO(){if(P5)return lg;P5=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+n+a,i="\\ufe0e\\ufe0f",l="\\u200d",d=RegExp("["+l+e+s+i+"]");function u(h){return d.test(h)}return lg=u,lg}var cg,O5;function D9(){if(O5)return cg;O5=1;function e(t){return t.split("")}return cg=e,cg}var dg,E5;function F9(){if(E5)return dg;E5=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+n+a,i="\\ufe0e\\ufe0f",l="["+e+"]",d="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",h="(?:"+d+"|"+u+")",p="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",j="\\u200d",v=h+"?",w="["+i+"]?",x="(?:"+j+"(?:"+[p,m,g].join("|")+")"+w+v+")*",S=w+v+x,P="(?:"+[p+d+"?",d,m,g,l].join("|")+")",O=RegExp(u+"(?="+u+")|"+P+S,"g");function N(A){return A.match(O)||[]}return dg=N,dg}var ug,_5;function q9(){if(_5)return ug;_5=1;var e=D9(),t=BO(),n=F9();function a(s){return t(s)?n(s):e(s)}return ug=a,ug}var hg,T5;function z9(){if(T5)return hg;T5=1;var e=L9(),t=BO(),n=q9(),a=DO();function s(i){return function(l){l=a(l);var d=t(l)?n(l):void 0,u=d?d[0]:l.charAt(0),h=d?e(d,1).join(""):l.slice(1);return u[i]()+h}}return hg=s,hg}var fg,R5;function B9(){if(R5)return fg;R5=1;var e=z9(),t=e("toUpperCase");return fg=t,fg}var U9=B9();const gf=Ze(U9);function it(e){return function(){return e}}const UO=Math.cos,th=Math.sin,gn=Math.sqrt,rh=Math.PI,yf=2*rh,Fv=Math.PI,qv=2*Fv,Ns=1e-6,W9=qv-Ns;function WO(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function H9(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return WO;const n=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+a[s]}}class K9{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?WO:H9(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,s){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,n,a,s,i,l){this._append`C${+t},${+n},${+a},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,n,a,s,i){if(t=+t,n=+n,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,d=this._y1,u=a-t,h=s-n,p=l-t,m=d-n,g=p*p+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Ns)if(!(Math.abs(m*u-h*p)>Ns)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let j=a-l,v=s-d,w=u*u+h*h,x=j*j+v*v,S=Math.sqrt(w),P=Math.sqrt(g),O=i*Math.tan((Fv-Math.acos((w+g-x)/(2*S*P)))/2),N=O/P,A=O/S;Math.abs(N-1)>Ns&&this._append`L${t+N*p},${n+N*m}`,this._append`A${i},${i},0,0,${+(m*j>p*v)},${this._x1=t+A*u},${this._y1=n+A*h}`}}arc(t,n,a,s,i,l){if(t=+t,n=+n,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(s),u=a*Math.sin(s),h=t+d,p=n+u,m=1^l,g=l?s-i:i-s;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Ns||Math.abs(this._y1-p)>Ns)&&this._append`L${h},${p}`,a&&(g<0&&(g=g%qv+qv),g>W9?this._append`A${a},${a},0,1,${m},${t-d},${n-u}A${a},${a},0,1,${m},${this._x1=h},${this._y1=p}`:g>Ns&&this._append`A${a},${a},0,${+(g>=Fv)},${m},${this._x1=t+a*Math.cos(i)},${this._y1=n+a*Math.sin(i)}`)}rect(t,n,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Pj(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new K9(t)}function Oj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function HO(e){this._context=e}HO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function vf(e){return new HO(e)}function KO(e){return e[0]}function GO(e){return e[1]}function VO(e,t){var n=it(!0),a=null,s=vf,i=null,l=Pj(d);e=typeof e=="function"?e:e===void 0?KO:it(e),t=typeof t=="function"?t:t===void 0?GO:it(t);function d(u){var h,p=(u=Oj(u)).length,m,g=!1,j;for(a==null&&(i=s(j=l())),h=0;h<=p;++h)!(h<p&&n(m=u[h],h,u))===g&&((g=!g)?i.lineStart():i.lineEnd()),g&&i.point(+e(m,h,u),+t(m,h,u));if(j)return i=null,j+""||null}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:it(+u),d):e},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:it(+u),d):t},d.defined=function(u){return arguments.length?(n=typeof u=="function"?u:it(!!u),d):n},d.curve=function(u){return arguments.length?(s=u,a!=null&&(i=s(a)),d):s},d.context=function(u){return arguments.length?(u==null?a=i=null:i=s(a=u),d):a},d}function Cu(e,t,n){var a=null,s=it(!0),i=null,l=vf,d=null,u=Pj(h);e=typeof e=="function"?e:e===void 0?KO:it(+e),t=typeof t=="function"?t:it(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?GO:it(+n);function h(m){var g,j,v,w=(m=Oj(m)).length,x,S=!1,P,O=new Array(w),N=new Array(w);for(i==null&&(d=l(P=u())),g=0;g<=w;++g){if(!(g<w&&s(x=m[g],g,m))===S)if(S=!S)j=g,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),v=g-1;v>=j;--v)d.point(O[v],N[v]);d.lineEnd(),d.areaEnd()}S&&(O[g]=+e(x,g,m),N[g]=+t(x,g,m),d.point(a?+a(x,g,m):O[g],n?+n(x,g,m):N[g]))}if(P)return d=null,P+""||null}function p(){return VO().defined(s).curve(l).context(i)}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:it(+m),a=null,h):e},h.x0=function(m){return arguments.length?(e=typeof m=="function"?m:it(+m),h):e},h.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:it(+m),h):a},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:it(+m),n=null,h):t},h.y0=function(m){return arguments.length?(t=typeof m=="function"?m:it(+m),h):t},h.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:it(+m),h):n},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(n)},h.lineX1=function(){return p().x(a).y(t)},h.defined=function(m){return arguments.length?(s=typeof m=="function"?m:it(!!m),h):s},h.curve=function(m){return arguments.length?(l=m,i!=null&&(d=l(i)),h):l},h.context=function(m){return arguments.length?(m==null?i=d=null:d=l(i=m),h):i},h}class QO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function G9(e){return new QO(e,!0)}function V9(e){return new QO(e,!1)}const Ej={draw(e,t){const n=gn(t/rh);e.moveTo(n,0),e.arc(0,0,n,0,yf)}},Q9={draw(e,t){const n=gn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},YO=gn(1/3),Y9=YO*2,X9={draw(e,t){const n=gn(t/Y9),a=n*YO;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},J9={draw(e,t){const n=gn(t),a=-n/2;e.rect(a,a,n,n)}},Z9=.8908130915292852,XO=th(rh/10)/th(7*rh/10),eF=th(yf/10)*XO,tF=-UO(yf/10)*XO,rF={draw(e,t){const n=gn(t*Z9),a=eF*n,s=tF*n;e.moveTo(0,-n),e.lineTo(a,s);for(let i=1;i<5;++i){const l=yf*i/5,d=UO(l),u=th(l);e.lineTo(u*n,-d*n),e.lineTo(d*a-u*s,u*a+d*s)}e.closePath()}},mg=gn(3),nF={draw(e,t){const n=-gn(t/(mg*3));e.moveTo(0,n*2),e.lineTo(-mg*n,-n),e.lineTo(mg*n,-n),e.closePath()}},Br=-.5,Ur=gn(3)/2,zv=1/gn(12),aF=(zv/2+1)*3,sF={draw(e,t){const n=gn(t/aF),a=n/2,s=n*zv,i=a,l=n*zv+n,d=-i,u=l;e.moveTo(a,s),e.lineTo(i,l),e.lineTo(d,u),e.lineTo(Br*a-Ur*s,Ur*a+Br*s),e.lineTo(Br*i-Ur*l,Ur*i+Br*l),e.lineTo(Br*d-Ur*u,Ur*d+Br*u),e.lineTo(Br*a+Ur*s,Br*s-Ur*a),e.lineTo(Br*i+Ur*l,Br*l-Ur*i),e.lineTo(Br*d+Ur*u,Br*u-Ur*d),e.closePath()}};function iF(e,t){let n=null,a=Pj(s);e=typeof e=="function"?e:it(e||Ej),t=typeof t=="function"?t:it(t===void 0?64:+t);function s(){let i;if(n||(n=i=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:it(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:it(+i),s):t},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function nh(){}function ah(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function JO(e){this._context=e}JO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ah(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ah(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oF(e){return new JO(e)}function ZO(e){this._context=e}ZO.prototype={areaStart:nh,areaEnd:nh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ah(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lF(e){return new ZO(e)}function eE(e){this._context=e}eE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:ah(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cF(e){return new eE(e)}function tE(e){this._context=e}tE.prototype={areaStart:nh,areaEnd:nh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function dF(e){return new tE(e)}function M5(e){return e<0?-1:1}function I5(e,t,n){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),l=(n-e._y1)/(s||a<0&&-0),d=(i*s+l*a)/(a+s);return(M5(i)+M5(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(d))||0}function $5(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function pg(e,t,n){var a=e._x0,s=e._y0,i=e._x1,l=e._y1,d=(i-a)/3;e._context.bezierCurveTo(a+d,s+d*t,i-d,l-d*n,i,l)}function sh(e){this._context=e}sh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pg(this,this._t0,$5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pg(this,$5(this,n=I5(this,e,t)),n);break;default:pg(this,this._t0,n=I5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function rE(e){this._context=new nE(e)}(rE.prototype=Object.create(sh.prototype)).point=function(e,t){sh.prototype.point.call(this,t,e)};function nE(e){this._context=e}nE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,s,i){this._context.bezierCurveTo(t,e,a,n,i,s)}};function uF(e){return new sh(e)}function hF(e){return new rE(e)}function aE(e){this._context=e}aE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=L5(e),s=L5(t),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function L5(e){var t,n=e.length-1,a,s=new Array(n),i=new Array(n),l=new Array(n);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,i[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=s[t]/i[t-1],i[t]-=a,l[t]-=a*l[t-1];for(s[n-1]=l[n-1]/i[n-1],t=n-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function fF(e){return new aE(e)}function bf(e,t){this._context=e,this._t=t}bf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function mF(e){return new bf(e,.5)}function pF(e){return new bf(e,0)}function xF(e){return new bf(e,1)}function ao(e,t){if((l=e.length)>1)for(var n=1,a,s,i=e[t[0]],l,d=i.length;n<l;++n)for(s=i,i=e[t[n]],a=0;a<d;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function Bv(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function gF(e,t){return e[t]}function yF(e){const t=[];return t.key=e,t}function vF(){var e=it([]),t=Bv,n=ao,a=gF;function s(i){var l=Array.from(e.apply(this,arguments),yF),d,u=l.length,h=-1,p;for(const m of i)for(d=0,++h;d<u;++d)(l[d][h]=[0,+a(m,l[d].key,h,i)]).data=m;for(d=0,p=Oj(t(l));d<u;++d)l[p[d]].index=d;return n(l,p),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:it(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:it(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?Bv:typeof i=="function"?i:it(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(n=i??ao,s):n},s}function bF(e,t){if((a=e.length)>0){for(var n,a,s=0,i=e[0].length,l;s<i;++s){for(l=n=0;n<a;++n)l+=e[n][s][1]||0;if(l)for(n=0;n<a;++n)e[n][s][1]/=l}ao(e,t)}}function jF(e,t){if((s=e.length)>0){for(var n=0,a=e[t[0]],s,i=a.length;n<i;++n){for(var l=0,d=0;l<s;++l)d+=e[l][n][1]||0;a[n][1]+=a[n][0]=-d/2}ao(e,t)}}function wF(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var n=0,a=1,s,i,l;a<i;++a){for(var d=0,u=0,h=0;d<l;++d){for(var p=e[t[d]],m=p[a][1]||0,g=p[a-1][1]||0,j=(m-g)/2,v=0;v<d;++v){var w=e[t[v]],x=w[a][1]||0,S=w[a-1][1]||0;j+=x-S}u+=m,h+=j*m}s[a-1][1]+=s[a-1][0]=n,u&&(n-=h/u)}s[a-1][1]+=s[a-1][0]=n,ao(e,t)}}function ic(e){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ic(e)}var NF=["type","size","sizeType"];function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Uv.apply(this,arguments)}function D5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function F5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(n),!0).forEach(function(a){SF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SF(e,t,n){return t=kF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kF(e){var t=CF(e,"string");return ic(t)=="symbol"?t:t+""}function CF(e,t){if(ic(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ic(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AF(e,t){if(e==null)return{};var n=PF(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function PF(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var sE={symbolCircle:Ej,symbolCross:Q9,symbolDiamond:X9,symbolSquare:J9,symbolStar:rF,symbolTriangle:nF,symbolWye:sF},OF=Math.PI/180,EF=function(t){var n="symbol".concat(gf(t));return sE[n]||Ej},_F=function(t,n,a){if(n==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*OF;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},TF=function(t,n){sE["symbol".concat(gf(t))]=n},_j=function(t){var n=t.type,a=n===void 0?"circle":n,s=t.size,i=s===void 0?64:s,l=t.sizeType,d=l===void 0?"area":l,u=AF(t,NF),h=F5(F5({},u),{},{type:a,size:i,sizeType:d}),p=function(){var x=EF(a),S=iF().type(x).size(_F(i,d,a));return S()},m=h.className,g=h.cx,j=h.cy,v=Re(h,!0);return g===+g&&j===+j&&i===+i?X.createElement("path",Uv({},v,{className:ze("recharts-symbols",m),transform:"translate(".concat(g,", ").concat(j,")"),d:p()})):null};_j.registerSymbol=TF;function so(e){"@babel/helpers - typeof";return so=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},so(e)}function Wv(){return Wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wv.apply(this,arguments)}function q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function RF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q5(Object(n),!0).forEach(function(a){oc(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function MF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IF(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,oE(a.key),a)}}function $F(e,t,n){return t&&IF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LF(e,t,n){return t=ih(t),DF(e,iE()?Reflect.construct(t,n||[],ih(e).constructor):t.apply(e,n))}function DF(e,t){if(t&&(so(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FF(e)}function FF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iE=function(){return!!e})()}function ih(e){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ih(e)}function qF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hv(e,t)}function Hv(e,t){return Hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Hv(e,t)}function oc(e,t,n){return t=oE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oE(e){var t=zF(e,"string");return so(t)=="symbol"?t:t+""}function zF(e,t){if(so(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(so(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Wr=32,Tj=(function(e){function t(){return MF(this,t),LF(this,t,arguments)}return qF(t,e),$F(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=Wr/2,l=Wr/6,d=Wr/3,u=a.inactive?s:a.color;if(a.type==="plainline")return X.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:Wr,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return X.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(d,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*d,",").concat(i,`
            H`).concat(Wr,"M").concat(2*d,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(d,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return X.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Wr/8,"h").concat(Wr,"v").concat(Wr*3/4,"h").concat(-Wr,"z"),className:"recharts-legend-icon"});if(X.isValidElement(a.legendIcon)){var h=RF({},a);return delete h.legendIcon,X.cloneElement(a.legendIcon,h)}return X.createElement(_j,{fill:u,cx:i,cy:i,size:Wr,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,l=s.iconSize,d=s.layout,u=s.formatter,h=s.inactiveColor,p={x:0,y:0,width:Wr,height:Wr},m={display:d==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(j,v){var w=j.formatter||u,x=ze(oc(oc({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",j.inactive));if(j.type==="none")return null;var S=Fe(j.value)?null:j.value;pn(!Fe(j.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var P=j.inactive?h:j.color;return X.createElement("li",Wv({className:x,style:m,key:"legend-item-".concat(v)},Vs(a.props,j,v)),X.createElement(Lv,{width:l,height:l,viewBox:p,style:g},a.renderIcon(j)),X.createElement("span",{className:"recharts-legend-item-text",style:{color:P}},w?w(S,j,v):S))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,l=a.align;if(!s||!s.length)return null;var d={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return X.createElement("ul",{className:"recharts-default-legend",style:d},this.renderItems())}}])})(b.PureComponent);oc(Tj,"displayName","Legend");oc(Tj,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var xg,z5;function BF(){if(z5)return xg;z5=1;var e=mf();function t(){this.__data__=new e,this.size=0}return xg=t,xg}var gg,B5;function UF(){if(B5)return gg;B5=1;function e(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}return gg=e,gg}var yg,U5;function WF(){if(U5)return yg;U5=1;function e(t){return this.__data__.get(t)}return yg=e,yg}var vg,W5;function HF(){if(W5)return vg;W5=1;function e(t){return this.__data__.has(t)}return vg=e,vg}var bg,H5;function KF(){if(H5)return bg;H5=1;var e=mf(),t=wj(),n=Nj(),a=200;function s(i,l){var d=this.__data__;if(d instanceof e){var u=d.__data__;if(!t||u.length<a-1)return u.push([i,l]),this.size=++d.size,this;d=this.__data__=new n(u)}return d.set(i,l),this.size=d.size,this}return bg=s,bg}var jg,K5;function lE(){if(K5)return jg;K5=1;var e=mf(),t=BF(),n=UF(),a=WF(),s=HF(),i=KF();function l(d){var u=this.__data__=new e(d);this.size=u.size}return l.prototype.clear=t,l.prototype.delete=n,l.prototype.get=a,l.prototype.has=s,l.prototype.set=i,jg=l,jg}var wg,G5;function GF(){if(G5)return wg;G5=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return wg=t,wg}var Ng,V5;function VF(){if(V5)return Ng;V5=1;function e(t){return this.__data__.has(t)}return Ng=e,Ng}var Sg,Q5;function cE(){if(Q5)return Sg;Q5=1;var e=Nj(),t=GF(),n=VF();function a(s){var i=-1,l=s==null?0:s.length;for(this.__data__=new e;++i<l;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=n,Sg=a,Sg}var kg,Y5;function dE(){if(Y5)return kg;Y5=1;function e(t,n){for(var a=-1,s=t==null?0:t.length;++a<s;)if(n(t[a],a,t))return!0;return!1}return kg=e,kg}var Cg,X5;function uE(){if(X5)return Cg;X5=1;function e(t,n){return t.has(n)}return Cg=e,Cg}var Ag,J5;function hE(){if(J5)return Ag;J5=1;var e=cE(),t=dE(),n=uE(),a=1,s=2;function i(l,d,u,h,p,m){var g=u&a,j=l.length,v=d.length;if(j!=v&&!(g&&v>j))return!1;var w=m.get(l),x=m.get(d);if(w&&x)return w==d&&x==l;var S=-1,P=!0,O=u&s?new e:void 0;for(m.set(l,d),m.set(d,l);++S<j;){var N=l[S],A=d[S];if(h)var C=g?h(A,N,S,d,l,m):h(N,A,S,l,d,m);if(C!==void 0){if(C)continue;P=!1;break}if(O){if(!t(d,function(E,T){if(!n(O,T)&&(N===E||p(N,E,u,h,m)))return O.push(T)})){P=!1;break}}else if(!(N===A||p(N,A,u,h,m))){P=!1;break}}return m.delete(l),m.delete(d),P}return Ag=i,Ag}var Pg,Z5;function QF(){if(Z5)return Pg;Z5=1;var e=Mn(),t=e.Uint8Array;return Pg=t,Pg}var Og,ek;function YF(){if(ek)return Og;ek=1;function e(t){var n=-1,a=Array(t.size);return t.forEach(function(s,i){a[++n]=[i,s]}),a}return Og=e,Og}var Eg,tk;function Rj(){if(tk)return Eg;tk=1;function e(t){var n=-1,a=Array(t.size);return t.forEach(function(s){a[++n]=s}),a}return Eg=e,Eg}var _g,rk;function XF(){if(rk)return _g;rk=1;var e=ed(),t=QF(),n=jj(),a=hE(),s=YF(),i=Rj(),l=1,d=2,u="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",g="[object Number]",j="[object RegExp]",v="[object Set]",w="[object String]",x="[object Symbol]",S="[object ArrayBuffer]",P="[object DataView]",O=e?e.prototype:void 0,N=O?O.valueOf:void 0;function A(C,E,T,R,I,M,$){switch(T){case P:if(C.byteLength!=E.byteLength||C.byteOffset!=E.byteOffset)return!1;C=C.buffer,E=E.buffer;case S:return!(C.byteLength!=E.byteLength||!M(new t(C),new t(E)));case u:case h:case g:return n(+C,+E);case p:return C.name==E.name&&C.message==E.message;case j:case w:return C==E+"";case m:var G=s;case v:var V=R&l;if(G||(G=i),C.size!=E.size&&!V)return!1;var z=$.get(C);if(z)return z==E;R|=d,$.set(C,E);var U=a(G(C),G(E),R,I,M,$);return $.delete(C),U;case x:if(N)return N.call(C)==N.call(E)}return!1}return _g=A,_g}var Tg,nk;function fE(){if(nk)return Tg;nk=1;function e(t,n){for(var a=-1,s=n.length,i=t.length;++a<s;)t[i+a]=n[a];return t}return Tg=e,Tg}var Rg,ak;function JF(){if(ak)return Rg;ak=1;var e=fE(),t=Sr();function n(a,s,i){var l=s(a);return t(a)?l:e(l,i(a))}return Rg=n,Rg}var Mg,sk;function ZF(){if(sk)return Mg;sk=1;function e(t,n){for(var a=-1,s=t==null?0:t.length,i=0,l=[];++a<s;){var d=t[a];n(d,a,t)&&(l[i++]=d)}return l}return Mg=e,Mg}var Ig,ik;function eq(){if(ik)return Ig;ik=1;function e(){return[]}return Ig=e,Ig}var $g,ok;function tq(){if(ok)return $g;ok=1;var e=ZF(),t=eq(),n=Object.prototype,a=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(l){return l==null?[]:(l=Object(l),e(s(l),function(d){return a.call(l,d)}))}:t;return $g=i,$g}var Lg,lk;function rq(){if(lk)return Lg;lk=1;function e(t,n){for(var a=-1,s=Array(t);++a<t;)s[a]=n(a);return s}return Lg=e,Lg}var Dg,ck;function nq(){if(ck)return Dg;ck=1;var e=da(),t=ua(),n="[object Arguments]";function a(s){return t(s)&&e(s)==n}return Dg=a,Dg}var Fg,dk;function Mj(){if(dk)return Fg;dk=1;var e=nq(),t=ua(),n=Object.prototype,a=n.hasOwnProperty,s=n.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(l){return t(l)&&a.call(l,"callee")&&!s.call(l,"callee")};return Fg=i,Fg}var Kl={exports:{}},qg,uk;function aq(){if(uk)return qg;uk=1;function e(){return!1}return qg=e,qg}Kl.exports;var hk;function mE(){return hk||(hk=1,(function(e,t){var n=Mn(),a=aq(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===s,d=l?n.Buffer:void 0,u=d?d.isBuffer:void 0,h=u||a;e.exports=h})(Kl,Kl.exports)),Kl.exports}var zg,fk;function Ij(){if(fk)return zg;fk=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return zg=n,zg}var Bg,mk;function $j(){if(mk)return Bg;mk=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Bg=t,Bg}var Ug,pk;function sq(){if(pk)return Ug;pk=1;var e=da(),t=$j(),n=ua(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",l="[object Date]",d="[object Error]",u="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",g="[object RegExp]",j="[object Set]",v="[object String]",w="[object WeakMap]",x="[object ArrayBuffer]",S="[object DataView]",P="[object Float32Array]",O="[object Float64Array]",N="[object Int8Array]",A="[object Int16Array]",C="[object Int32Array]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",R="[object Uint16Array]",I="[object Uint32Array]",M={};M[P]=M[O]=M[N]=M[A]=M[C]=M[E]=M[T]=M[R]=M[I]=!0,M[a]=M[s]=M[x]=M[i]=M[S]=M[l]=M[d]=M[u]=M[h]=M[p]=M[m]=M[g]=M[j]=M[v]=M[w]=!1;function $(G){return n(G)&&t(G.length)&&!!M[e(G)]}return Ug=$,Ug}var Wg,xk;function pE(){if(xk)return Wg;xk=1;function e(t){return function(n){return t(n)}}return Wg=e,Wg}var Gl={exports:{}};Gl.exports;var gk;function iq(){return gk||(gk=1,(function(e,t){var n=IO(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,l=i&&n.process,d=(function(){try{var u=s&&s.require&&s.require("util").types;return u||l&&l.binding&&l.binding("util")}catch{}})();e.exports=d})(Gl,Gl.exports)),Gl.exports}var Hg,yk;function xE(){if(yk)return Hg;yk=1;var e=sq(),t=pE(),n=iq(),a=n&&n.isTypedArray,s=a?t(a):e;return Hg=s,Hg}var Kg,vk;function oq(){if(vk)return Kg;vk=1;var e=rq(),t=Mj(),n=Sr(),a=mE(),s=Ij(),i=xE(),l=Object.prototype,d=l.hasOwnProperty;function u(h,p){var m=n(h),g=!m&&t(h),j=!m&&!g&&a(h),v=!m&&!g&&!j&&i(h),w=m||g||j||v,x=w?e(h.length,String):[],S=x.length;for(var P in h)(p||d.call(h,P))&&!(w&&(P=="length"||j&&(P=="offset"||P=="parent")||v&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||s(P,S)))&&x.push(P);return x}return Kg=u,Kg}var Gg,bk;function lq(){if(bk)return Gg;bk=1;var e=Object.prototype;function t(n){var a=n&&n.constructor,s=typeof a=="function"&&a.prototype||e;return n===s}return Gg=t,Gg}var Vg,jk;function gE(){if(jk)return Vg;jk=1;function e(t,n){return function(a){return t(n(a))}}return Vg=e,Vg}var Qg,wk;function cq(){if(wk)return Qg;wk=1;var e=gE(),t=e(Object.keys,Object);return Qg=t,Qg}var Yg,Nk;function dq(){if(Nk)return Yg;Nk=1;var e=lq(),t=cq(),n=Object.prototype,a=n.hasOwnProperty;function s(i){if(!e(i))return t(i);var l=[];for(var d in Object(i))a.call(i,d)&&d!="constructor"&&l.push(d);return l}return Yg=s,Yg}var Xg,Sk;function rd(){if(Sk)return Xg;Sk=1;var e=bj(),t=$j();function n(a){return a!=null&&t(a.length)&&!e(a)}return Xg=n,Xg}var Jg,kk;function jf(){if(kk)return Jg;kk=1;var e=oq(),t=dq(),n=rd();function a(s){return n(s)?e(s):t(s)}return Jg=a,Jg}var Zg,Ck;function uq(){if(Ck)return Zg;Ck=1;var e=JF(),t=tq(),n=jf();function a(s){return e(s,n,t)}return Zg=a,Zg}var e0,Ak;function hq(){if(Ak)return e0;Ak=1;var e=uq(),t=1,n=Object.prototype,a=n.hasOwnProperty;function s(i,l,d,u,h,p){var m=d&t,g=e(i),j=g.length,v=e(l),w=v.length;if(j!=w&&!m)return!1;for(var x=j;x--;){var S=g[x];if(!(m?S in l:a.call(l,S)))return!1}var P=p.get(i),O=p.get(l);if(P&&O)return P==l&&O==i;var N=!0;p.set(i,l),p.set(l,i);for(var A=m;++x<j;){S=g[x];var C=i[S],E=l[S];if(u)var T=m?u(E,C,S,l,i,p):u(C,E,S,i,l,p);if(!(T===void 0?C===E||h(C,E,d,u,p):T)){N=!1;break}A||(A=S=="constructor")}if(N&&!A){var R=i.constructor,I=l.constructor;R!=I&&"constructor"in i&&"constructor"in l&&!(typeof R=="function"&&R instanceof R&&typeof I=="function"&&I instanceof I)&&(N=!1)}return p.delete(i),p.delete(l),N}return e0=s,e0}var t0,Pk;function fq(){if(Pk)return t0;Pk=1;var e=ei(),t=Mn(),n=e(t,"DataView");return t0=n,t0}var r0,Ok;function mq(){if(Ok)return r0;Ok=1;var e=ei(),t=Mn(),n=e(t,"Promise");return r0=n,r0}var n0,Ek;function yE(){if(Ek)return n0;Ek=1;var e=ei(),t=Mn(),n=e(t,"Set");return n0=n,n0}var a0,_k;function pq(){if(_k)return a0;_k=1;var e=ei(),t=Mn(),n=e(t,"WeakMap");return a0=n,a0}var s0,Tk;function xq(){if(Tk)return s0;Tk=1;var e=fq(),t=wj(),n=mq(),a=yE(),s=pq(),i=da(),l=$O(),d="[object Map]",u="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",g="[object DataView]",j=l(e),v=l(t),w=l(n),x=l(a),S=l(s),P=i;return(e&&P(new e(new ArrayBuffer(1)))!=g||t&&P(new t)!=d||n&&P(n.resolve())!=h||a&&P(new a)!=p||s&&P(new s)!=m)&&(P=function(O){var N=i(O),A=N==u?O.constructor:void 0,C=A?l(A):"";if(C)switch(C){case j:return g;case v:return d;case w:return h;case x:return p;case S:return m}return N}),s0=P,s0}var i0,Rk;function gq(){if(Rk)return i0;Rk=1;var e=lE(),t=hE(),n=XF(),a=hq(),s=xq(),i=Sr(),l=mE(),d=xE(),u=1,h="[object Arguments]",p="[object Array]",m="[object Object]",g=Object.prototype,j=g.hasOwnProperty;function v(w,x,S,P,O,N){var A=i(w),C=i(x),E=A?p:s(w),T=C?p:s(x);E=E==h?m:E,T=T==h?m:T;var R=E==m,I=T==m,M=E==T;if(M&&l(w)){if(!l(x))return!1;A=!0,R=!1}if(M&&!R)return N||(N=new e),A||d(w)?t(w,x,S,P,O,N):n(w,x,E,S,P,O,N);if(!(S&u)){var $=R&&j.call(w,"__wrapped__"),G=I&&j.call(x,"__wrapped__");if($||G){var V=$?w.value():w,z=G?x.value():x;return N||(N=new e),O(V,z,S,P,N)}}return M?(N||(N=new e),a(w,x,S,P,O,N)):!1}return i0=v,i0}var o0,Mk;function Lj(){if(Mk)return o0;Mk=1;var e=gq(),t=ua();function n(a,s,i,l,d){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,l,n,d)}return o0=n,o0}var l0,Ik;function yq(){if(Ik)return l0;Ik=1;var e=lE(),t=Lj(),n=1,a=2;function s(i,l,d,u){var h=d.length,p=h,m=!u;if(i==null)return!p;for(i=Object(i);h--;){var g=d[h];if(m&&g[2]?g[1]!==i[g[0]]:!(g[0]in i))return!1}for(;++h<p;){g=d[h];var j=g[0],v=i[j],w=g[1];if(m&&g[2]){if(v===void 0&&!(j in i))return!1}else{var x=new e;if(u)var S=u(v,w,j,i,l,x);if(!(S===void 0?t(w,v,n|a,u,x):S))return!1}}return!0}return l0=s,l0}var c0,$k;function vE(){if($k)return c0;$k=1;var e=ns();function t(n){return n===n&&!e(n)}return c0=t,c0}var d0,Lk;function vq(){if(Lk)return d0;Lk=1;var e=vE(),t=jf();function n(a){for(var s=t(a),i=s.length;i--;){var l=s[i],d=a[l];s[i]=[l,d,e(d)]}return s}return d0=n,d0}var u0,Dk;function bE(){if(Dk)return u0;Dk=1;function e(t,n){return function(a){return a==null?!1:a[t]===n&&(n!==void 0||t in Object(a))}}return u0=e,u0}var h0,Fk;function bq(){if(Fk)return h0;Fk=1;var e=yq(),t=vq(),n=bE();function a(s){var i=t(s);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(l){return l===s||e(l,s,i)}}return h0=a,h0}var f0,qk;function jq(){if(qk)return f0;qk=1;function e(t,n){return t!=null&&n in Object(t)}return f0=e,f0}var m0,zk;function wq(){if(zk)return m0;zk=1;var e=FO(),t=Mj(),n=Sr(),a=Ij(),s=$j(),i=xf();function l(d,u,h){u=e(u,d);for(var p=-1,m=u.length,g=!1;++p<m;){var j=i(u[p]);if(!(g=d!=null&&h(d,j)))break;d=d[j]}return g||++p!=m?g:(m=d==null?0:d.length,!!m&&s(m)&&a(j,m)&&(n(d)||t(d)))}return m0=l,m0}var p0,Bk;function Nq(){if(Bk)return p0;Bk=1;var e=jq(),t=wq();function n(a,s){return a!=null&&t(a,s,e)}return p0=n,p0}var x0,Uk;function Sq(){if(Uk)return x0;Uk=1;var e=Lj(),t=qO(),n=Nq(),a=vj(),s=vE(),i=bE(),l=xf(),d=1,u=2;function h(p,m){return a(p)&&s(m)?i(l(p),m):function(g){var j=t(g,p);return j===void 0&&j===m?n(g,p):e(m,j,d|u)}}return x0=h,x0}var g0,Wk;function Fo(){if(Wk)return g0;Wk=1;function e(t){return t}return g0=e,g0}var y0,Hk;function kq(){if(Hk)return y0;Hk=1;function e(t){return function(n){return n==null?void 0:n[t]}}return y0=e,y0}var v0,Kk;function Cq(){if(Kk)return v0;Kk=1;var e=kj();function t(n){return function(a){return e(a,n)}}return v0=t,v0}var b0,Gk;function Aq(){if(Gk)return b0;Gk=1;var e=kq(),t=Cq(),n=vj(),a=xf();function s(i){return n(i)?e(a(i)):t(i)}return b0=s,b0}var j0,Vk;function In(){if(Vk)return j0;Vk=1;var e=bq(),t=Sq(),n=Fo(),a=Sr(),s=Aq();function i(l){return typeof l=="function"?l:l==null?n:typeof l=="object"?a(l)?t(l[0],l[1]):e(l):s(l)}return j0=i,j0}var w0,Qk;function jE(){if(Qk)return w0;Qk=1;function e(t,n,a,s){for(var i=t.length,l=a+(s?1:-1);s?l--:++l<i;)if(n(t[l],l,t))return l;return-1}return w0=e,w0}var N0,Yk;function Pq(){if(Yk)return N0;Yk=1;function e(t){return t!==t}return N0=e,N0}var S0,Xk;function Oq(){if(Xk)return S0;Xk=1;function e(t,n,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===n)return s;return-1}return S0=e,S0}var k0,Jk;function Eq(){if(Jk)return k0;Jk=1;var e=jE(),t=Pq(),n=Oq();function a(s,i,l){return i===i?n(s,i,l):e(s,t,l)}return k0=a,k0}var C0,Zk;function _q(){if(Zk)return C0;Zk=1;var e=Eq();function t(n,a){var s=n==null?0:n.length;return!!s&&e(n,a,0)>-1}return C0=t,C0}var A0,e4;function Tq(){if(e4)return A0;e4=1;function e(t,n,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(n,t[s]))return!0;return!1}return A0=e,A0}var P0,t4;function Rq(){if(t4)return P0;t4=1;function e(){}return P0=e,P0}var O0,r4;function Mq(){if(r4)return O0;r4=1;var e=yE(),t=Rq(),n=Rj(),a=1/0,s=e&&1/n(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return O0=s,O0}var E0,n4;function Iq(){if(n4)return E0;n4=1;var e=cE(),t=_q(),n=Tq(),a=uE(),s=Mq(),i=Rj(),l=200;function d(u,h,p){var m=-1,g=t,j=u.length,v=!0,w=[],x=w;if(p)v=!1,g=n;else if(j>=l){var S=h?null:s(u);if(S)return i(S);v=!1,g=a,x=new e}else x=h?[]:w;e:for(;++m<j;){var P=u[m],O=h?h(P):P;if(P=p||P!==0?P:0,v&&O===O){for(var N=x.length;N--;)if(x[N]===O)continue e;h&&x.push(O),w.push(P)}else g(x,O,p)||(x!==w&&x.push(O),w.push(P))}return w}return E0=d,E0}var _0,a4;function $q(){if(a4)return _0;a4=1;var e=In(),t=Iq();function n(a,s){return a&&a.length?t(a,e(s,2)):[]}return _0=n,_0}var Lq=$q();const s4=Ze(Lq);function wE(e,t,n){return t===!0?s4(e,n):Fe(t)?s4(e,t):e}function io(e){"@babel/helpers - typeof";return io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},io(e)}var Dq=["ref"];function i4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i4(Object(n),!0).forEach(function(a){wf(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Fq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o4(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,SE(a.key),a)}}function qq(e,t,n){return t&&o4(e.prototype,t),n&&o4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zq(e,t,n){return t=oh(t),Bq(e,NE()?Reflect.construct(t,n||[],oh(e).constructor):t.apply(e,n))}function Bq(e,t){if(t&&(io(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uq(e)}function Uq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NE=function(){return!!e})()}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oh(e)}function Wq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kv(e,t)}function Kv(e,t){return Kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Kv(e,t)}function wf(e,t,n){return t=SE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SE(e){var t=Hq(e,"string");return io(t)=="symbol"?t:t+""}function Hq(e,t){if(io(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(io(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Kq(e,t){if(e==null)return{};var n=Gq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Gq(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Vq(e){return e.value}function Qq(e,t){if(X.isValidElement(e))return X.cloneElement(e,t);if(typeof e=="function")return X.createElement(e,t);t.ref;var n=Kq(t,Dq);return X.createElement(Tj,n)}var l4=1,Xa=(function(e){function t(){var n;Fq(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=zq(this,t,[].concat(s)),wf(n,"lastBoundingBox",{width:-1,height:-1}),n}return Wq(t,e),qq(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>l4||Math.abs(s.height-this.lastBoundingBox.height)>l4)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Wn({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,l=s.align,d=s.verticalAlign,u=s.margin,h=s.chartWidth,p=s.chartHeight,m,g;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(l==="center"&&i==="vertical"){var j=this.getBBoxSnapshot();m={left:((h||0)-j.width)/2}}else m=l==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(d==="middle"){var v=this.getBBoxSnapshot();g={top:((p||0)-v.height)/2}}else g=d==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return Wn(Wn({},m),g)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,l=s.width,d=s.height,u=s.wrapperStyle,h=s.payloadUniqBy,p=s.payload,m=Wn(Wn({position:"absolute",width:l||"auto",height:d||"auto"},this.getDefaultPosition(u)),u);return X.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(j){a.wrapperNode=j}},Qq(i,Wn(Wn({},this.props),{},{payload:wE(p,h,Vq)})))}}],[{key:"getWithHeight",value:function(a,s){var i=Wn(Wn({},this.defaultProps),a.props),l=i.layout;return l==="vertical"&&ge(a.props.height)?{height:a.props.height}:l==="horizontal"?{width:a.props.width||s}:null}}])})(b.PureComponent);wf(Xa,"displayName","Legend");wf(Xa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var T0,c4;function Yq(){if(c4)return T0;c4=1;var e=ed(),t=Mj(),n=Sr(),a=e?e.isConcatSpreadable:void 0;function s(i){return n(i)||t(i)||!!(a&&i&&i[a])}return T0=s,T0}var R0,d4;function kE(){if(d4)return R0;d4=1;var e=fE(),t=Yq();function n(a,s,i,l,d){var u=-1,h=a.length;for(i||(i=t),d||(d=[]);++u<h;){var p=a[u];s>0&&i(p)?s>1?n(p,s-1,i,l,d):e(d,p):l||(d[d.length]=p)}return d}return R0=n,R0}var M0,u4;function Xq(){if(u4)return M0;u4=1;function e(t){return function(n,a,s){for(var i=-1,l=Object(n),d=s(n),u=d.length;u--;){var h=d[t?u:++i];if(a(l[h],h,l)===!1)break}return n}}return M0=e,M0}var I0,h4;function Jq(){if(h4)return I0;h4=1;var e=Xq(),t=e();return I0=t,I0}var $0,f4;function CE(){if(f4)return $0;f4=1;var e=Jq(),t=jf();function n(a,s){return a&&e(a,s,t)}return $0=n,$0}var L0,m4;function Zq(){if(m4)return L0;m4=1;var e=rd();function t(n,a){return function(s,i){if(s==null)return s;if(!e(s))return n(s,i);for(var l=s.length,d=a?l:-1,u=Object(s);(a?d--:++d<l)&&i(u[d],d,u)!==!1;);return s}}return L0=t,L0}var D0,p4;function Dj(){if(p4)return D0;p4=1;var e=CE(),t=Zq(),n=t(e);return D0=n,D0}var F0,x4;function AE(){if(x4)return F0;x4=1;var e=Dj(),t=rd();function n(a,s){var i=-1,l=t(a)?Array(a.length):[];return e(a,function(d,u,h){l[++i]=s(d,u,h)}),l}return F0=n,F0}var q0,g4;function ez(){if(g4)return q0;g4=1;function e(t,n){var a=t.length;for(t.sort(n);a--;)t[a]=t[a].value;return t}return q0=e,q0}var z0,y4;function tz(){if(y4)return z0;y4=1;var e=$o();function t(n,a){if(n!==a){var s=n!==void 0,i=n===null,l=n===n,d=e(n),u=a!==void 0,h=a===null,p=a===a,m=e(a);if(!h&&!m&&!d&&n>a||d&&u&&p&&!h&&!m||i&&u&&p||!s&&p||!l)return 1;if(!i&&!d&&!m&&n<a||m&&s&&l&&!i&&!d||h&&s&&l||!u&&l||!p)return-1}return 0}return z0=t,z0}var B0,v4;function rz(){if(v4)return B0;v4=1;var e=tz();function t(n,a,s){for(var i=-1,l=n.criteria,d=a.criteria,u=l.length,h=s.length;++i<u;){var p=e(l[i],d[i]);if(p){if(i>=h)return p;var m=s[i];return p*(m=="desc"?-1:1)}}return n.index-a.index}return B0=t,B0}var U0,b4;function nz(){if(b4)return U0;b4=1;var e=Sj(),t=kj(),n=In(),a=AE(),s=ez(),i=pE(),l=rz(),d=Fo(),u=Sr();function h(p,m,g){m.length?m=e(m,function(w){return u(w)?function(x){return t(x,w.length===1?w[0]:w)}:w}):m=[d];var j=-1;m=e(m,i(n));var v=a(p,function(w,x,S){var P=e(m,function(O){return O(w)});return{criteria:P,index:++j,value:w}});return s(v,function(w,x){return l(w,x,g)})}return U0=h,U0}var W0,j4;function az(){if(j4)return W0;j4=1;function e(t,n,a){switch(a.length){case 0:return t.call(n);case 1:return t.call(n,a[0]);case 2:return t.call(n,a[0],a[1]);case 3:return t.call(n,a[0],a[1],a[2])}return t.apply(n,a)}return W0=e,W0}var H0,w4;function sz(){if(w4)return H0;w4=1;var e=az(),t=Math.max;function n(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var l=arguments,d=-1,u=t(l.length-s,0),h=Array(u);++d<u;)h[d]=l[s+d];d=-1;for(var p=Array(s+1);++d<s;)p[d]=l[d];return p[s]=i(h),e(a,this,p)}}return H0=n,H0}var K0,N4;function iz(){if(N4)return K0;N4=1;function e(t){return function(){return t}}return K0=e,K0}var G0,S4;function PE(){if(S4)return G0;S4=1;var e=ei(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return G0=t,G0}var V0,k4;function oz(){if(k4)return V0;k4=1;var e=iz(),t=PE(),n=Fo(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return V0=a,V0}var Q0,C4;function lz(){if(C4)return Q0;C4=1;var e=800,t=16,n=Date.now;function a(s){var i=0,l=0;return function(){var d=n(),u=t-(d-l);if(l=d,u>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return Q0=a,Q0}var Y0,A4;function cz(){if(A4)return Y0;A4=1;var e=oz(),t=lz(),n=t(e);return Y0=n,Y0}var X0,P4;function dz(){if(P4)return X0;P4=1;var e=Fo(),t=sz(),n=cz();function a(s,i){return n(t(s,i,e),s+"")}return X0=a,X0}var J0,O4;function Nf(){if(O4)return J0;O4=1;var e=jj(),t=rd(),n=Ij(),a=ns();function s(i,l,d){if(!a(d))return!1;var u=typeof l;return(u=="number"?t(d)&&n(l,d.length):u=="string"&&l in d)?e(d[l],i):!1}return J0=s,J0}var Z0,E4;function uz(){if(E4)return Z0;E4=1;var e=kE(),t=nz(),n=dz(),a=Nf(),s=n(function(i,l){if(i==null)return[];var d=l.length;return d>1&&a(i,l[0],l[1])?l=[]:d>2&&a(l[0],l[1],l[2])&&(l=[l[0]]),t(i,e(l,1),[])});return Z0=s,Z0}var hz=uz();const Fj=Ze(hz);function lc(e){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(e)}function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gv.apply(this,arguments)}function fz(e,t){return gz(e)||xz(e,t)||pz(e,t)||mz()}function mz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pz(e,t){if(e){if(typeof e=="string")return _4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _4(e,t)}}function _4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function xz(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function gz(e){if(Array.isArray(e))return e}function T4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ey(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T4(Object(n),!0).forEach(function(a){yz(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function yz(e,t,n){return t=vz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vz(e){var t=bz(e,"string");return lc(t)=="symbol"?t:t+""}function bz(e,t){if(lc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(lc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jz(e){return Array.isArray(e)&&Dt(e[0])&&Dt(e[1])?e.join(" ~ "):e}var wz=function(t){var n=t.separator,a=n===void 0?" : ":n,s=t.contentStyle,i=s===void 0?{}:s,l=t.itemStyle,d=l===void 0?{}:l,u=t.labelStyle,h=u===void 0?{}:u,p=t.payload,m=t.formatter,g=t.itemSorter,j=t.wrapperClassName,v=t.labelClassName,w=t.label,x=t.labelFormatter,S=t.accessibilityLayer,P=S===void 0?!1:S,O=function(){if(p&&p.length){var $={padding:0,margin:0},G=(g?Fj(p,g):p).map(function(V,z){if(V.type==="none")return null;var U=ey({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},d),H=V.formatter||m||jz,B=V.value,D=V.name,L=B,q=D;if(H&&L!=null&&q!=null){var K=H(B,D,V,z,p);if(Array.isArray(K)){var Y=fz(K,2);L=Y[0],q=Y[1]}else L=K}return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:U},Dt(q)?X.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Dt(q)?X.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,X.createElement("span",{className:"recharts-tooltip-item-value"},L),X.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:$},G)}return null},N=ey({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),A=ey({margin:0},h),C=!qe(w),E=C?w:"",T=ze("recharts-default-tooltip",j),R=ze("recharts-tooltip-label",v);C&&x&&p!==void 0&&p!==null&&(E=x(w,p));var I=P?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",Gv({className:T,style:N},I),X.createElement("p",{className:R,style:A},X.isValidElement(E)?E:"".concat(E)),O())};function cc(e){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(e)}function Au(e,t,n){return t=Nz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nz(e){var t=Sz(e,"string");return cc(t)=="symbol"?t:t+""}function Sz(e,t){if(cc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(cc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ml="recharts-tooltip-wrapper",kz={visibility:"hidden"};function Cz(e){var t=e.coordinate,n=e.translateX,a=e.translateY;return ze(Ml,Au(Au(Au(Au({},"".concat(Ml,"-right"),ge(n)&&t&&ge(t.x)&&n>=t.x),"".concat(Ml,"-left"),ge(n)&&t&&ge(t.x)&&n<t.x),"".concat(Ml,"-bottom"),ge(a)&&t&&ge(t.y)&&a>=t.y),"".concat(Ml,"-top"),ge(a)&&t&&ge(t.y)&&a<t.y))}function R4(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,l=e.reverseDirection,d=e.tooltipDimension,u=e.viewBox,h=e.viewBoxDimension;if(i&&ge(i[a]))return i[a];var p=n[a]-d-s,m=n[a]+s;if(t[a])return l[a]?p:m;if(l[a]){var g=p,j=u[a];return g<j?Math.max(m,u[a]):Math.max(p,u[a])}var v=m+d,w=u[a]+h;return v>w?Math.max(p,u[a]):Math.max(m,u[a])}function Az(e){var t=e.translateX,n=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Pz(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,l=e.tooltipBox,d=e.useTranslate3d,u=e.viewBox,h,p,m;return l.height>0&&l.width>0&&n?(p=R4({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),m=R4({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),h=Az({translateX:p,translateY:m,useTranslate3d:d})):h=kz,{cssProperties:h,cssClasses:Cz({translateX:p,translateY:m,coordinate:n})}}function oo(e){"@babel/helpers - typeof";return oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oo(e)}function M4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function I4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M4(Object(n),!0).forEach(function(a){Qv(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Oz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ez(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EE(a.key),a)}}function _z(e,t,n){return t&&Ez(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tz(e,t,n){return t=lh(t),Rz(e,OE()?Reflect.construct(t,n||[],lh(e).constructor):t.apply(e,n))}function Rz(e,t){if(t&&(oo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mz(e)}function Mz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OE=function(){return!!e})()}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lh(e)}function Iz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vv(e,t)}function Vv(e,t){return Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Vv(e,t)}function Qv(e,t,n){return t=EE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EE(e){var t=$z(e,"string");return oo(t)=="symbol"?t:t+""}function $z(e,t){if(oo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(oo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $4=1,Lz=(function(e){function t(){var n;Oz(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=Tz(this,t,[].concat(s)),Qv(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Qv(n,"handleKeyDown",function(l){if(l.key==="Escape"){var d,u,h,p;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&d!==void 0?d:0,y:(h=(p=n.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),n}return Iz(t,e),_z(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>$4||Math.abs(a.height-this.state.lastBoundingBox.height)>$4)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,l=s.allowEscapeViewBox,d=s.animationDuration,u=s.animationEasing,h=s.children,p=s.coordinate,m=s.hasPayload,g=s.isAnimationActive,j=s.offset,v=s.position,w=s.reverseDirection,x=s.useTranslate3d,S=s.viewBox,P=s.wrapperStyle,O=Pz({allowEscapeViewBox:l,coordinate:p,offsetTopLeft:j,position:v,reverseDirection:w,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:S}),N=O.cssClasses,A=O.cssProperties,C=I4(I4({transition:g&&i?"transform ".concat(d,"ms ").concat(u):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},P);return X.createElement("div",{tabIndex:-1,className:N,style:C,ref:function(T){a.wrapperNode=T}},h)}}])})(b.PureComponent),Dz=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ti={isSsr:Dz()};function lo(e){"@babel/helpers - typeof";return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lo(e)}function L4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function D4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L4(Object(n),!0).forEach(function(a){qj(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Fz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qz(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,TE(a.key),a)}}function zz(e,t,n){return t&&qz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bz(e,t,n){return t=ch(t),Uz(e,_E()?Reflect.construct(t,n||[],ch(e).constructor):t.apply(e,n))}function Uz(e,t){if(t&&(lo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wz(e)}function Wz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_E=function(){return!!e})()}function ch(e){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ch(e)}function Hz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yv(e,t)}function Yv(e,t){return Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Yv(e,t)}function qj(e,t,n){return t=TE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TE(e){var t=Kz(e,"string");return lo(t)=="symbol"?t:t+""}function Kz(e,t){if(lo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(lo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Gz(e){return e.dataKey}function Vz(e,t){return X.isValidElement(e)?X.cloneElement(e,t):typeof e=="function"?X.createElement(e,t):X.createElement(wz,t)}var Gr=(function(e){function t(){return Fz(this,t),Bz(this,t,arguments)}return Hz(t,e),zz(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,l=s.allowEscapeViewBox,d=s.animationDuration,u=s.animationEasing,h=s.content,p=s.coordinate,m=s.filterNull,g=s.isAnimationActive,j=s.offset,v=s.payload,w=s.payloadUniqBy,x=s.position,S=s.reverseDirection,P=s.useTranslate3d,O=s.viewBox,N=s.wrapperStyle,A=v??[];m&&A.length&&(A=wE(v.filter(function(E){return E.value!=null&&(E.hide!==!0||a.props.includeHidden)}),w,Gz));var C=A.length>0;return X.createElement(Lz,{allowEscapeViewBox:l,animationDuration:d,animationEasing:u,isAnimationActive:g,active:i,coordinate:p,hasPayload:C,offset:j,position:x,reverseDirection:S,useTranslate3d:P,viewBox:O,wrapperStyle:N},Vz(h,D4(D4({},this.props),{},{payload:A})))}}])})(b.PureComponent);qj(Gr,"displayName","Tooltip");qj(Gr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ti.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ty,F4;function Qz(){if(F4)return ty;F4=1;var e=Mn(),t=function(){return e.Date.now()};return ty=t,ty}var ry,q4;function Yz(){if(q4)return ry;q4=1;var e=/\s/;function t(n){for(var a=n.length;a--&&e.test(n.charAt(a)););return a}return ry=t,ry}var ny,z4;function Xz(){if(z4)return ny;z4=1;var e=Yz(),t=/^\s+/;function n(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return ny=n,ny}var ay,B4;function RE(){if(B4)return ay;B4=1;var e=Xz(),t=ns(),n=$o(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function u(h){if(typeof h=="number")return h;if(n(h))return a;if(t(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=t(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=e(h);var m=i.test(h);return m||l.test(h)?d(h.slice(2),m?2:8):s.test(h)?a:+h}return ay=u,ay}var sy,U4;function Jz(){if(U4)return sy;U4=1;var e=ns(),t=Qz(),n=RE(),a="Expected a function",s=Math.max,i=Math.min;function l(d,u,h){var p,m,g,j,v,w,x=0,S=!1,P=!1,O=!0;if(typeof d!="function")throw new TypeError(a);u=n(u)||0,e(h)&&(S=!!h.leading,P="maxWait"in h,g=P?s(n(h.maxWait)||0,u):g,O="trailing"in h?!!h.trailing:O);function N(G){var V=p,z=m;return p=m=void 0,x=G,j=d.apply(z,V),j}function A(G){return x=G,v=setTimeout(T,u),S?N(G):j}function C(G){var V=G-w,z=G-x,U=u-V;return P?i(U,g-z):U}function E(G){var V=G-w,z=G-x;return w===void 0||V>=u||V<0||P&&z>=g}function T(){var G=t();if(E(G))return R(G);v=setTimeout(T,C(G))}function R(G){return v=void 0,O&&p?N(G):(p=m=void 0,j)}function I(){v!==void 0&&clearTimeout(v),x=0,p=w=m=v=void 0}function M(){return v===void 0?j:R(t())}function $(){var G=t(),V=E(G);if(p=arguments,m=this,w=G,V){if(v===void 0)return A(w);if(P)return clearTimeout(v),v=setTimeout(T,u),N(w)}return v===void 0&&(v=setTimeout(T,u)),j}return $.cancel=I,$.flush=M,$}return sy=l,sy}var iy,W4;function Zz(){if(W4)return iy;W4=1;var e=Jz(),t=ns(),n="Expected a function";function a(s,i,l){var d=!0,u=!0;if(typeof s!="function")throw new TypeError(n);return t(l)&&(d="leading"in l?!!l.leading:d,u="trailing"in l?!!l.trailing:u),e(s,i,{leading:d,maxWait:i,trailing:u})}return iy=a,iy}var eB=Zz();const ME=Ze(eB);function dc(e){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(e)}function H4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Pu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H4(Object(n),!0).forEach(function(a){tB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tB(e,t,n){return t=rB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rB(e){var t=nB(e,"string");return dc(t)=="symbol"?t:t+""}function nB(e,t){if(dc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(dc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aB(e,t){return lB(e)||oB(e,t)||iB(e,t)||sB()}function sB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iB(e,t){if(e){if(typeof e=="string")return K4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K4(e,t)}}function K4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function oB(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function lB(e){if(Array.isArray(e))return e}var zj=b.forwardRef(function(e,t){var n=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,l=i===void 0?"100%":i,d=e.height,u=d===void 0?"100%":d,h=e.minWidth,p=h===void 0?0:h,m=e.minHeight,g=e.maxHeight,j=e.children,v=e.debounce,w=v===void 0?0:v,x=e.id,S=e.className,P=e.onResize,O=e.style,N=O===void 0?{}:O,A=b.useRef(null),C=b.useRef();C.current=P,b.useImperativeHandle(t,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var E=b.useState({containerWidth:s.width,containerHeight:s.height}),T=aB(E,2),R=T[0],I=T[1],M=b.useCallback(function(G,V){I(function(z){var U=Math.round(G),H=Math.round(V);return z.containerWidth===U&&z.containerHeight===H?z:{containerWidth:U,containerHeight:H}})},[]);b.useEffect(function(){var G=function(D){var L,q=D[0].contentRect,K=q.width,Y=q.height;M(K,Y),(L=C.current)===null||L===void 0||L.call(C,K,Y)};w>0&&(G=ME(G,w,{trailing:!0,leading:!1}));var V=new ResizeObserver(G),z=A.current.getBoundingClientRect(),U=z.width,H=z.height;return M(U,H),V.observe(A.current),function(){V.disconnect()}},[M,w]);var $=b.useMemo(function(){var G=R.containerWidth,V=R.containerHeight;if(G<0||V<0)return null;pn(Ps(l)||Ps(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,u),pn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var z=Ps(l)?G:l,U=Ps(u)?V:u;n&&n>0&&(z?U=z/n:U&&(z=U*n),g&&U>g&&(U=g)),pn(z>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,U,l,u,p,m,n);var H=!Array.isArray(j)&&ra(j.type).endsWith("Chart");return X.Children.map(j,function(B){return X.isValidElement(B)?b.cloneElement(B,Pu({width:z,height:U},H?{style:Pu({height:"100%",width:"100%",maxHeight:U,maxWidth:z},B.props.style)}:{})):B})},[n,j,u,g,m,p,R,l]);return X.createElement("div",{id:x?"".concat(x):void 0,className:ze("recharts-responsive-container",S),style:Pu(Pu({},N),{},{width:l,height:u,minWidth:p,minHeight:m,maxHeight:g}),ref:A},$)}),Sf=function(t){return null};Sf.displayName="Cell";function uc(e){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uc(e)}function G4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Xv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G4(Object(n),!0).forEach(function(a){cB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cB(e,t,n){return t=dB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dB(e){var t=uB(e,"string");return uc(t)=="symbol"?t:t+""}function uB(e,t){if(uc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(uc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ei={widthCache:{},cacheCount:0},hB=2e3,fB={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},V4="recharts_measurement_span";function mB(e){var t=Xv({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Yl=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ti.isSsr)return{width:0,height:0};var a=mB(n),s=JSON.stringify({text:t,copyStyle:a});if(Ei.widthCache[s])return Ei.widthCache[s];try{var i=document.getElementById(V4);i||(i=document.createElement("span"),i.setAttribute("id",V4),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=Xv(Xv({},fB),a);Object.assign(i.style,l),i.textContent="".concat(t);var d=i.getBoundingClientRect(),u={width:d.width,height:d.height};return Ei.widthCache[s]=u,++Ei.cacheCount>hB&&(Ei.cacheCount=0,Ei.widthCache={}),u}catch{return{width:0,height:0}}},pB=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function hc(e){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(e)}function dh(e,t){return vB(e)||yB(e,t)||gB(e,t)||xB()}function xB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gB(e,t){if(e){if(typeof e=="string")return Q4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q4(e,t)}}function Q4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function yB(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function vB(e){if(Array.isArray(e))return e}function bB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y4(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,wB(a.key),a)}}function jB(e,t,n){return t&&Y4(e.prototype,t),n&&Y4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wB(e){var t=NB(e,"string");return hc(t)=="symbol"?t:t+""}function NB(e,t){if(hc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(hc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var X4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,J4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SB=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,kB=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,IE={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},CB=Object.keys(IE),$i="NaN";function AB(e,t){return e*IE[t]}var Ou=(function(){function e(t,n){bB(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!SB.test(n)&&(this.num=NaN,this.unit=""),CB.includes(n)&&(this.num=AB(t,n),this.unit="px")}return jB(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,s=(a=kB.exec(n))!==null&&a!==void 0?a:[],i=dh(s,3),l=i[1],d=i[2];return new e(parseFloat(l),d??"")}}])})();function $E(e){if(e.includes($i))return $i;for(var t=e;t.includes("*")||t.includes("/");){var n,a=(n=X4.exec(t))!==null&&n!==void 0?n:[],s=dh(a,4),i=s[1],l=s[2],d=s[3],u=Ou.parse(i??""),h=Ou.parse(d??""),p=l==="*"?u.multiply(h):u.divide(h);if(p.isNaN())return $i;t=t.replace(X4,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,g=(m=J4.exec(t))!==null&&m!==void 0?m:[],j=dh(g,4),v=j[1],w=j[2],x=j[3],S=Ou.parse(v??""),P=Ou.parse(x??""),O=w==="+"?S.add(P):S.subtract(P);if(O.isNaN())return $i;t=t.replace(J4,O.toString())}return t}var Z4=/\(([^()]*)\)/;function PB(e){for(var t=e;t.includes("(");){var n=Z4.exec(t),a=dh(n,2),s=a[1];t=t.replace(Z4,$E(s))}return t}function OB(e){var t=e.replace(/\s+/g,"");return t=PB(t),t=$E(t),t}function EB(e){try{return OB(e)}catch{return $i}}function oy(e){var t=EB(e.slice(5,-1));return t===$i?"":t}var _B=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],TB=["dx","dy","angle","className","breakAll"];function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jv.apply(this,arguments)}function eC(e,t){if(e==null)return{};var n=RB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function RB(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function tC(e,t){return LB(e)||$B(e,t)||IB(e,t)||MB()}function MB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IB(e,t){if(e){if(typeof e=="string")return rC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rC(e,t)}}function rC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function $B(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function LB(e){if(Array.isArray(e))return e}var LE=/[ \f\n\r\t\v\u2028\u2029]+/,DE=function(t){var n=t.children,a=t.breakAll,s=t.style;try{var i=[];qe(n)||(a?i=n.toString().split(""):i=n.toString().split(LE));var l=i.map(function(u){return{word:u,width:Yl(u,s).width}}),d=a?0:Yl("",s).width;return{wordsWithComputedWidth:l,spaceWidth:d}}catch{return null}},DB=function(t,n,a,s,i){var l=t.maxLines,d=t.children,u=t.style,h=t.breakAll,p=ge(l),m=d,g=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(U,H){var B=H.word,D=H.width,L=U[U.length-1];if(L&&(s==null||i||L.width+D+a<Number(s)))L.words.push(B),L.width+=D+a;else{var q={words:[B],width:D};U.push(q)}return U},[])},j=g(n),v=function(z){return z.reduce(function(U,H){return U.width>H.width?U:H})};if(!p)return j;for(var w="",x=function(z){var U=m.slice(0,z),H=DE({breakAll:h,style:u,children:U+w}).wordsWithComputedWidth,B=g(H),D=B.length>l||v(B).width>Number(s);return[D,B]},S=0,P=m.length-1,O=0,N;S<=P&&O<=m.length-1;){var A=Math.floor((S+P)/2),C=A-1,E=x(C),T=tC(E,2),R=T[0],I=T[1],M=x(A),$=tC(M,1),G=$[0];if(!R&&!G&&(S=A+1),R&&G&&(P=A-1),!R&&G){N=I;break}O++}return N||j},nC=function(t){var n=qe(t)?[]:t.toString().split(LE);return[{words:n}]},FB=function(t){var n=t.width,a=t.scaleToFit,s=t.children,i=t.style,l=t.breakAll,d=t.maxLines;if((n||a)&&!ti.isSsr){var u,h,p=DE({breakAll:l,children:s,style:i});if(p){var m=p.wordsWithComputedWidth,g=p.spaceWidth;u=m,h=g}else return nC(s);return DB({breakAll:l,children:s,maxLines:d,style:i},u,h,n,a)}return nC(s)},aC="#808080",Qs=function(t){var n=t.x,a=n===void 0?0:n,s=t.y,i=s===void 0?0:s,l=t.lineHeight,d=l===void 0?"1em":l,u=t.capHeight,h=u===void 0?"0.71em":u,p=t.scaleToFit,m=p===void 0?!1:p,g=t.textAnchor,j=g===void 0?"start":g,v=t.verticalAnchor,w=v===void 0?"end":v,x=t.fill,S=x===void 0?aC:x,P=eC(t,_B),O=b.useMemo(function(){return FB({breakAll:P.breakAll,children:P.children,maxLines:P.maxLines,scaleToFit:m,style:P.style,width:P.width})},[P.breakAll,P.children,P.maxLines,m,P.style,P.width]),N=P.dx,A=P.dy,C=P.angle,E=P.className,T=P.breakAll,R=eC(P,TB);if(!Dt(a)||!Dt(i))return null;var I=a+(ge(N)?N:0),M=i+(ge(A)?A:0),$;switch(w){case"start":$=oy("calc(".concat(h,")"));break;case"middle":$=oy("calc(".concat((O.length-1)/2," * -").concat(d," + (").concat(h," / 2))"));break;default:$=oy("calc(".concat(O.length-1," * -").concat(d,")"));break}var G=[];if(m){var V=O[0].width,z=P.width;G.push("scale(".concat((ge(z)?z/V:1)/V,")"))}return C&&G.push("rotate(".concat(C,", ").concat(I,", ").concat(M,")")),G.length&&(R.transform=G.join(" ")),X.createElement("text",Jv({},Re(R,!0),{x:I,y:M,className:ze("recharts-text",E),textAnchor:j,fill:S.includes("url")?aC:S}),O.map(function(U,H){var B=U.words.join(T?"":" ");return X.createElement("tspan",{x:I,dy:H===0?$:d,key:"".concat(B,"-").concat(H)},B)}))};function Ja(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qB(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bj(e){let t,n,a;e.length!==2?(t=Ja,n=(d,u)=>Ja(e(d),u),a=(d,u)=>e(d)-u):(t=e===Ja||e===qB?e:zB,n=e,a=e);function s(d,u,h=0,p=d.length){if(h<p){if(t(u,u)!==0)return p;do{const m=h+p>>>1;n(d[m],u)<0?h=m+1:p=m}while(h<p)}return h}function i(d,u,h=0,p=d.length){if(h<p){if(t(u,u)!==0)return p;do{const m=h+p>>>1;n(d[m],u)<=0?h=m+1:p=m}while(h<p)}return h}function l(d,u,h=0,p=d.length){const m=s(d,u,h,p-1);return m>h&&a(d[m-1],u)>-a(d[m],u)?m-1:m}return{left:s,center:l,right:i}}function zB(){return 0}function FE(e){return e===null?NaN:+e}function*BB(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const UB=Bj(Ja),nd=UB.right;Bj(FE).center;class sC extends Map{constructor(t,n=KB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(iC(this,t))}has(t){return super.has(iC(this,t))}set(t,n){return super.set(WB(this,t),n)}delete(t){return super.delete(HB(this,t))}}function iC({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function WB({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function HB({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function KB(e){return e!==null&&typeof e=="object"?e.valueOf():e}function GB(e=Ja){if(e===Ja)return qE;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function qE(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const VB=Math.sqrt(50),QB=Math.sqrt(10),YB=Math.sqrt(2);function uh(e,t,n){const a=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),l=i>=VB?10:i>=QB?5:i>=YB?2:1;let d,u,h;return s<0?(h=Math.pow(10,-s)/l,d=Math.round(e*h),u=Math.round(t*h),d/h<e&&++d,u/h>t&&--u,h=-h):(h=Math.pow(10,s)*l,d=Math.round(e/h),u=Math.round(t/h),d*h<e&&++d,u*h>t&&--u),u<d&&.5<=n&&n<2?uh(e,t,n*2):[d,u,h]}function Zv(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[s,i,l]=a?uh(t,e,n):uh(e,t,n);if(!(i>=s))return[];const d=i-s+1,u=new Array(d);if(a)if(l<0)for(let h=0;h<d;++h)u[h]=(i-h)/-l;else for(let h=0;h<d;++h)u[h]=(i-h)*l;else if(l<0)for(let h=0;h<d;++h)u[h]=(s+h)/-l;else for(let h=0;h<d;++h)u[h]=(s+h)*l;return u}function eb(e,t,n){return t=+t,e=+e,n=+n,uh(e,t,n)[2]}function tb(e,t,n){t=+t,e=+e,n=+n;const a=t<e,s=a?eb(t,e,n):eb(e,t,n);return(a?-1:1)*(s<0?1/-s:s)}function oC(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function lC(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function zE(e,t,n=0,a=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(s=s===void 0?qE:GB(s);a>n;){if(a-n>600){const u=a-n+1,h=t-n+1,p=Math.log(u),m=.5*Math.exp(2*p/3),g=.5*Math.sqrt(p*m*(u-m)/u)*(h-u/2<0?-1:1),j=Math.max(n,Math.floor(t-h*m/u+g)),v=Math.min(a,Math.floor(t+(u-h)*m/u+g));zE(e,t,j,v,s)}const i=e[t];let l=n,d=a;for(Il(e,n,t),s(e[a],i)>0&&Il(e,n,a);l<d;){for(Il(e,l,d),++l,--d;s(e[l],i)<0;)++l;for(;s(e[d],i)>0;)--d}s(e[n],i)===0?Il(e,n,d):(++d,Il(e,d,a)),d<=t&&(n=d+1),t<=d&&(a=d-1)}return e}function Il(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function XB(e,t,n){if(e=Float64Array.from(BB(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return lC(e);if(t>=1)return oC(e);var a,s=(a-1)*t,i=Math.floor(s),l=oC(zE(e,i).subarray(0,i+1)),d=lC(e.subarray(i+1));return l+(d-l)*(s-i)}}function JB(e,t,n=FE){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),l=+n(e[i],i,e),d=+n(e[i+1],i+1,e);return l+(d-l)*(s-i)}}function ZB(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++a<s;)i[a]=e+a*n;return i}function Jr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ha(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rb=Symbol("implicit");function Uj(){var e=new sC,t=[],n=[],a=rb;function s(i){let l=e.get(i);if(l===void 0){if(a!==rb)return a;e.set(i,l=t.push(i)-1)}return n[l%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new sC;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return Uj(t,n).unknown(a)},Jr.apply(s,arguments),s}function fc(){var e=Uj().unknown(void 0),t=e.domain,n=e.range,a=0,s=1,i,l,d=!1,u=0,h=0,p=.5;delete e.unknown;function m(){var g=t().length,j=s<a,v=j?s:a,w=j?a:s;i=(w-v)/Math.max(1,g-u+h*2),d&&(i=Math.floor(i)),v+=(w-v-i*(g-u))*p,l=i*(1-u),d&&(v=Math.round(v),l=Math.round(l));var x=ZB(g).map(function(S){return v+i*S});return n(j?x.reverse():x)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([a,s]=g,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(g){return[a,s]=g,a=+a,s=+s,d=!0,m()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(g){return arguments.length?(d=!!g,m()):d},e.padding=function(g){return arguments.length?(u=Math.min(1,h=+g),m()):u},e.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),m()):u},e.paddingOuter=function(g){return arguments.length?(h=+g,m()):h},e.align=function(g){return arguments.length?(p=Math.max(0,Math.min(1,g)),m()):p},e.copy=function(){return fc(t(),[a,s]).round(d).paddingInner(u).paddingOuter(h).align(p)},Jr.apply(m(),arguments)}function BE(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return BE(t())},e}function Xl(){return BE(fc.apply(null,arguments).paddingInner(1))}function Wj(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function UE(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function ad(){}var mc=.7,hh=1/mc,Bi="\\s*([+-]?\\d+)\\s*",pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",En="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eU=/^#([0-9a-f]{3,8})$/,tU=new RegExp(`^rgb\\(${Bi},${Bi},${Bi}\\)$`),rU=new RegExp(`^rgb\\(${En},${En},${En}\\)$`),nU=new RegExp(`^rgba\\(${Bi},${Bi},${Bi},${pc}\\)$`),aU=new RegExp(`^rgba\\(${En},${En},${En},${pc}\\)$`),sU=new RegExp(`^hsl\\(${pc},${En},${En}\\)$`),iU=new RegExp(`^hsla\\(${pc},${En},${En},${pc}\\)$`),cC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wj(ad,xc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dC,formatHex:dC,formatHex8:oU,formatHsl:lU,formatRgb:uC,toString:uC});function dC(){return this.rgb().formatHex()}function oU(){return this.rgb().formatHex8()}function lU(){return WE(this).formatHsl()}function uC(){return this.rgb().formatRgb()}function xc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?hC(t):n===3?new jr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Eu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Eu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tU.exec(e))?new jr(t[1],t[2],t[3],1):(t=rU.exec(e))?new jr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nU.exec(e))?Eu(t[1],t[2],t[3],t[4]):(t=aU.exec(e))?Eu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sU.exec(e))?pC(t[1],t[2]/100,t[3]/100,1):(t=iU.exec(e))?pC(t[1],t[2]/100,t[3]/100,t[4]):cC.hasOwnProperty(e)?hC(cC[e]):e==="transparent"?new jr(NaN,NaN,NaN,0):null}function hC(e){return new jr(e>>16&255,e>>8&255,e&255,1)}function Eu(e,t,n,a){return a<=0&&(e=t=n=NaN),new jr(e,t,n,a)}function cU(e){return e instanceof ad||(e=xc(e)),e?(e=e.rgb(),new jr(e.r,e.g,e.b,e.opacity)):new jr}function nb(e,t,n,a){return arguments.length===1?cU(e):new jr(e,t,n,a??1)}function jr(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Wj(jr,nb,UE(ad,{brighter(e){return e=e==null?hh:Math.pow(hh,e),new jr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mc:Math.pow(mc,e),new jr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jr(Bs(this.r),Bs(this.g),Bs(this.b),fh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fC,formatHex:fC,formatHex8:dU,formatRgb:mC,toString:mC}));function fC(){return`#${Os(this.r)}${Os(this.g)}${Os(this.b)}`}function dU(){return`#${Os(this.r)}${Os(this.g)}${Os(this.b)}${Os((isNaN(this.opacity)?1:this.opacity)*255)}`}function mC(){const e=fh(this.opacity);return`${e===1?"rgb(":"rgba("}${Bs(this.r)}, ${Bs(this.g)}, ${Bs(this.b)}${e===1?")":`, ${e})`}`}function fh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Bs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Os(e){return e=Bs(e),(e<16?"0":"")+e.toString(16)}function pC(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mn(e,t,n,a)}function WE(e){if(e instanceof mn)return new mn(e.h,e.s,e.l,e.opacity);if(e instanceof ad||(e=xc(e)),!e)return new mn;if(e instanceof mn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,s=Math.min(t,n,a),i=Math.max(t,n,a),l=NaN,d=i-s,u=(i+s)/2;return d?(t===i?l=(n-a)/d+(n<a)*6:n===i?l=(a-t)/d+2:l=(t-n)/d+4,d/=u<.5?i+s:2-i-s,l*=60):d=u>0&&u<1?0:l,new mn(l,d,u,e.opacity)}function uU(e,t,n,a){return arguments.length===1?WE(e):new mn(e,t,n,a??1)}function mn(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Wj(mn,uU,UE(ad,{brighter(e){return e=e==null?hh:Math.pow(hh,e),new mn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mc:Math.pow(mc,e),new mn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,s=2*n-a;return new jr(ly(e>=240?e-240:e+120,s,a),ly(e,s,a),ly(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new mn(xC(this.h),_u(this.s),_u(this.l),fh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fh(this.opacity);return`${e===1?"hsl(":"hsla("}${xC(this.h)}, ${_u(this.s)*100}%, ${_u(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xC(e){return e=(e||0)%360,e<0?e+360:e}function _u(e){return Math.max(0,Math.min(1,e||0))}function ly(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Hj=e=>()=>e;function hU(e,t){return function(n){return e+n*t}}function fU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function mU(e){return(e=+e)==1?HE:function(t,n){return n-t?fU(t,n,e):Hj(isNaN(t)?n:t)}}function HE(e,t){var n=t-e;return n?hU(e,n):Hj(isNaN(e)?t:e)}const gC=(function e(t){var n=mU(t);function a(s,i){var l=n((s=nb(s)).r,(i=nb(i)).r),d=n(s.g,i.g),u=n(s.b,i.b),h=HE(s.opacity,i.opacity);return function(p){return s.r=l(p),s.g=d(p),s.b=u(p),s.opacity=h(p),s+""}}return a.gamma=e,a})(1);function pU(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<n;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function xU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gU(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n),l;for(l=0;l<a;++l)s[l]=qo(e[l],t[l]);for(;l<n;++l)i[l]=t[l];return function(d){for(l=0;l<a;++l)i[l]=s[l](d);return i}}function yU(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function mh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vU(e,t){var n={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=qo(e[s],t[s]):a[s]=t[s];return function(i){for(s in n)a[s]=n[s](i);return a}}var ab=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cy=new RegExp(ab.source,"g");function bU(e){return function(){return e}}function jU(e){return function(t){return e(t)+""}}function wU(e,t){var n=ab.lastIndex=cy.lastIndex=0,a,s,i,l=-1,d=[],u=[];for(e=e+"",t=t+"";(a=ab.exec(e))&&(s=cy.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),d[l]?d[l]+=i:d[++l]=i),(a=a[0])===(s=s[0])?d[l]?d[l]+=s:d[++l]=s:(d[++l]=null,u.push({i:l,x:mh(a,s)})),n=cy.lastIndex;return n<t.length&&(i=t.slice(n),d[l]?d[l]+=i:d[++l]=i),d.length<2?u[0]?jU(u[0].x):bU(t):(t=u.length,function(h){for(var p=0,m;p<t;++p)d[(m=u[p]).i]=m.x(h);return d.join("")})}function qo(e,t){var n=typeof t,a;return t==null||n==="boolean"?Hj(t):(n==="number"?mh:n==="string"?(a=xc(t))?(t=a,gC):wU:t instanceof xc?gC:t instanceof Date?yU:xU(t)?pU:Array.isArray(t)?gU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?vU:mh)(e,t)}function Kj(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function NU(e,t){t===void 0&&(t=e,e=qo);for(var n=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);n<a;)i[n]=e(s,s=t[++n]);return function(l){var d=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return i[d](l-d)}}function SU(e){return function(){return e}}function ph(e){return+e}var yC=[0,1];function ur(e){return e}function sb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:SU(isNaN(t)?NaN:.5)}function kU(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function CU(e,t,n){var a=e[0],s=e[1],i=t[0],l=t[1];return s<a?(a=sb(s,a),i=n(l,i)):(a=sb(a,s),i=n(i,l)),function(d){return i(a(d))}}function AU(e,t,n){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)s[l]=sb(e[l],e[l+1]),i[l]=n(t[l],t[l+1]);return function(d){var u=nd(e,d,1,a)-1;return i[u](s[u](d))}}function sd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function kf(){var e=yC,t=yC,n=qo,a,s,i,l=ur,d,u,h;function p(){var g=Math.min(e.length,t.length);return l!==ur&&(l=kU(e[0],e[g-1])),d=g>2?AU:CU,u=h=null,m}function m(g){return g==null||isNaN(g=+g)?i:(u||(u=d(e.map(a),t,n)))(a(l(g)))}return m.invert=function(g){return l(s((h||(h=d(t,e.map(a),mh)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,ph),p()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),p()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),n=Kj,p()},m.clamp=function(g){return arguments.length?(l=g?!0:ur,p()):l!==ur},m.interpolate=function(g){return arguments.length?(n=g,p()):n},m.unknown=function(g){return arguments.length?(i=g,m):i},function(g,j){return a=g,s=j,p()}}function Gj(){return kf()(ur,ur)}function PU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xh(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function co(e){return e=xh(Math.abs(e)),e?e[1]:NaN}function OU(e,t){return function(n,a){for(var s=n.length,i=[],l=0,d=e[0],u=0;s>0&&d>0&&(u+d+1>a&&(d=Math.max(1,a-u)),i.push(n.substring(s-=d,s+d)),!((u+=d+1)>a));)d=e[l=(l+1)%e.length];return i.reverse().join(t)}}function EU(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var _U=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gc(e){if(!(t=_U.exec(e)))throw new Error("invalid format: "+e);var t;return new Vj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gc.prototype=Vj.prototype;function Vj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Vj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TU(e){e:for(var t=e.length,n=1,a=-1,s;n<t;++n)switch(e[n]){case".":a=s=n;break;case"0":a===0&&(a=n),s=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var gh;function RU(e,t){var n=xh(e,t);if(!n)return gh=void 0,e.toPrecision(t);var a=n[0],s=n[1],i=s-(gh=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return i===l?a:i>l?a+new Array(i-l+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+xh(e,Math.max(0,t+i-1))[0]}function vC(e,t){var n=xh(e,t);if(!n)return e+"";var a=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const bC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:PU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vC(e*100,t),r:vC,s:RU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jC(e){return e}var wC=Array.prototype.map,NC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MU(e){var t=e.grouping===void 0||e.thousands===void 0?jC:OU(wC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?jC:EU(wC.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function h(m,g){m=gc(m);var j=m.fill,v=m.align,w=m.sign,x=m.symbol,S=m.zero,P=m.width,O=m.comma,N=m.precision,A=m.trim,C=m.type;C==="n"?(O=!0,C="g"):bC[C]||(N===void 0&&(N=12),A=!0,C="g"),(S||j==="0"&&v==="=")&&(S=!0,j="0",v="=");var E=(g&&g.prefix!==void 0?g.prefix:"")+(x==="$"?n:x==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():""),T=(x==="$"?a:/[%p]/.test(C)?l:"")+(g&&g.suffix!==void 0?g.suffix:""),R=bC[C],I=/[defgprs%]/.test(C);N=N===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function M($){var G=E,V=T,z,U,H;if(C==="c")V=R($)+V,$="";else{$=+$;var B=$<0||1/$<0;if($=isNaN($)?u:R(Math.abs($),N),A&&($=TU($)),B&&+$==0&&w!=="+"&&(B=!1),G=(B?w==="("?w:d:w==="-"||w==="("?"":w)+G,V=(C==="s"&&!isNaN($)&&gh!==void 0?NC[8+gh/3]:"")+V+(B&&w==="("?")":""),I){for(z=-1,U=$.length;++z<U;)if(H=$.charCodeAt(z),48>H||H>57){V=(H===46?s+$.slice(z+1):$.slice(z))+V,$=$.slice(0,z);break}}}O&&!S&&($=t($,1/0));var D=G.length+$.length+V.length,L=D<P?new Array(P-D+1).join(j):"";switch(O&&S&&($=t(L+$,L.length?P-V.length:1/0),L=""),v){case"<":$=G+$+V+L;break;case"=":$=G+L+$+V;break;case"^":$=L.slice(0,D=L.length>>1)+G+$+V+L.slice(D);break;default:$=L+G+$+V;break}return i($)}return M.toString=function(){return m+""},M}function p(m,g){var j=Math.max(-8,Math.min(8,Math.floor(co(g)/3)))*3,v=Math.pow(10,-j),w=h((m=gc(m),m.type="f",m),{suffix:NC[8+j/3]});return function(x){return w(v*x)}}return{format:h,formatPrefix:p}}var Tu,Qj,KE;IU({thousands:",",grouping:[3],currency:["$",""]});function IU(e){return Tu=MU(e),Qj=Tu.format,KE=Tu.formatPrefix,Tu}function $U(e){return Math.max(0,-co(Math.abs(e)))}function LU(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(co(t)/3)))*3-co(Math.abs(e)))}function DU(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,co(t)-co(e))+1}function GE(e,t,n,a){var s=tb(e,t,n),i;switch(a=gc(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=LU(s,l))&&(a.precision=i),KE(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=DU(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=$U(s))&&(a.precision=i-(a.type==="%")*2);break}}return Qj(a)}function as(e){var t=e.domain;return e.ticks=function(n){var a=t();return Zv(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var s=t();return GE(s[0],s[s.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),s=0,i=a.length-1,l=a[s],d=a[i],u,h,p=10;for(d<l&&(h=l,l=d,d=h,h=s,s=i,i=h);p-- >0;){if(h=eb(l,d,n),h===u)return a[s]=l,a[i]=d,t(a);if(h>0)l=Math.floor(l/h)*h,d=Math.ceil(d/h)*h;else if(h<0)l=Math.ceil(l*h)/h,d=Math.floor(d*h)/h;else break;u=h}return e},e}function yh(){var e=Gj();return e.copy=function(){return sd(e,yh())},Jr.apply(e,arguments),as(e)}function VE(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,ph),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return VE(e).unknown(t)},e=arguments.length?Array.from(e,ph):[0,1],as(n)}function QE(e,t){e=e.slice();var n=0,a=e.length-1,s=e[n],i=e[a],l;return i<s&&(l=n,n=a,a=l,l=s,s=i,i=l),e[n]=t.floor(s),e[a]=t.ceil(i),e}function SC(e){return Math.log(e)}function kC(e){return Math.exp(e)}function FU(e){return-Math.log(-e)}function qU(e){return-Math.exp(-e)}function zU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function BU(e){return e===10?zU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function UU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function CC(e){return(t,n)=>-e(-t,n)}function Yj(e){const t=e(SC,kC),n=t.domain;let a=10,s,i;function l(){return s=UU(a),i=BU(a),n()[0]<0?(s=CC(s),i=CC(i),e(FU,qU)):e(SC,kC),t}return t.base=function(d){return arguments.length?(a=+d,l()):a},t.domain=function(d){return arguments.length?(n(d),l()):n()},t.ticks=d=>{const u=n();let h=u[0],p=u[u.length-1];const m=p<h;m&&([h,p]=[p,h]);let g=s(h),j=s(p),v,w;const x=d==null?10:+d;let S=[];if(!(a%1)&&j-g<x){if(g=Math.floor(g),j=Math.ceil(j),h>0){for(;g<=j;++g)for(v=1;v<a;++v)if(w=g<0?v/i(-g):v*i(g),!(w<h)){if(w>p)break;S.push(w)}}else for(;g<=j;++g)for(v=a-1;v>=1;--v)if(w=g>0?v/i(-g):v*i(g),!(w<h)){if(w>p)break;S.push(w)}S.length*2<x&&(S=Zv(h,p,x))}else S=Zv(g,j,Math.min(j-g,x)).map(i);return m?S.reverse():S},t.tickFormat=(d,u)=>{if(d==null&&(d=10),u==null&&(u=a===10?"s":","),typeof u!="function"&&(!(a%1)&&(u=gc(u)).precision==null&&(u.trim=!0),u=Qj(u)),d===1/0)return u;const h=Math.max(1,a*d/t.ticks().length);return p=>{let m=p/i(Math.round(s(p)));return m*a<a-.5&&(m*=a),m<=h?u(p):""}},t.nice=()=>n(QE(n(),{floor:d=>i(Math.floor(s(d))),ceil:d=>i(Math.ceil(s(d)))})),t}function YE(){const e=Yj(kf()).domain([1,10]);return e.copy=()=>sd(e,YE()).base(e.base()),Jr.apply(e,arguments),e}function AC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Xj(e){var t=1,n=e(AC(t),PC(t));return n.constant=function(a){return arguments.length?e(AC(t=+a),PC(t)):t},as(n)}function XE(){var e=Xj(kf());return e.copy=function(){return sd(e,XE()).constant(e.constant())},Jr.apply(e,arguments)}function OC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function WU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function HU(e){return e<0?-e*e:e*e}function Jj(e){var t=e(ur,ur),n=1;function a(){return n===1?e(ur,ur):n===.5?e(WU,HU):e(OC(n),OC(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,a()):n},as(t)}function Zj(){var e=Jj(kf());return e.copy=function(){return sd(e,Zj()).exponent(e.exponent())},Jr.apply(e,arguments),e}function KU(){return Zj.apply(null,arguments).exponent(.5)}function EC(e){return Math.sign(e)*e*e}function GU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function JE(){var e=Gj(),t=[0,1],n=!1,a;function s(i){var l=GU(e(i));return isNaN(l)?a:n?Math.round(l):l}return s.invert=function(i){return e.invert(EC(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,ph)).map(EC)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return JE(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Jr.apply(s,arguments),as(s)}function ZE(){var e=[],t=[],n=[],a;function s(){var l=0,d=Math.max(1,t.length);for(n=new Array(d-1);++l<d;)n[l-1]=JB(e,l/d);return i}function i(l){return l==null||isNaN(l=+l)?a:t[nd(n,l)]}return i.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Ja),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(a=l,i):a},i.quantiles=function(){return n.slice()},i.copy=function(){return ZE().domain(e).range(t).unknown(a)},Jr.apply(i,arguments)}function e6(){var e=0,t=1,n=1,a=[.5],s=[0,1],i;function l(u){return u!=null&&u<=u?s[nd(a,u,0,n)]:i}function d(){var u=-1;for(a=new Array(n);++u<n;)a[u]=((u+1)*t-(u-n)*e)/(n+1);return l}return l.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,d()):[e,t]},l.range=function(u){return arguments.length?(n=(s=Array.from(u)).length-1,d()):s.slice()},l.invertExtent=function(u){var h=s.indexOf(u);return h<0?[NaN,NaN]:h<1?[e,a[0]]:h>=n?[a[n-1],t]:[a[h-1],a[h]]},l.unknown=function(u){return arguments.length&&(i=u),l},l.thresholds=function(){return a.slice()},l.copy=function(){return e6().domain([e,t]).range(s).unknown(i)},Jr.apply(as(l),arguments)}function t6(){var e=[.5],t=[0,1],n,a=1;function s(i){return i!=null&&i<=i?t[nd(e,i,0,a)]:n}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return t6().domain(e).range(t).unknown(n)},Jr.apply(s,arguments)}const dy=new Date,uy=new Date;function Ft(e,t,n,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),d=s.ceil(i);return i-l<d-i?l:d},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,d)=>{const u=[];if(i=s.ceil(i),d=d==null?1:Math.floor(d),!(i<l)||!(d>0))return u;let h;do u.push(h=new Date(+i)),t(i,d),e(i);while(h<i&&i<l);return u},s.filter=i=>Ft(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!i(l););else for(;--d>=0;)for(;t(l,1),!i(l););}),n&&(s.count=(i,l)=>(dy.setTime(+i),uy.setTime(+l),e(dy),e(uy),Math.floor(n(dy,uy))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?l=>a(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const vh=Ft(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ft(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):vh);vh.range;const Zn=1e3,Yr=Zn*60,ea=Yr*60,ia=ea*24,ew=ia*7,_C=ia*30,hy=ia*365,Es=Ft(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zn)},(e,t)=>(t-e)/Zn,e=>e.getUTCSeconds());Es.range;const tw=Ft(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zn)},(e,t)=>{e.setTime(+e+t*Yr)},(e,t)=>(t-e)/Yr,e=>e.getMinutes());tw.range;const rw=Ft(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Yr)},(e,t)=>(t-e)/Yr,e=>e.getUTCMinutes());rw.range;const nw=Ft(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zn-e.getMinutes()*Yr)},(e,t)=>{e.setTime(+e+t*ea)},(e,t)=>(t-e)/ea,e=>e.getHours());nw.range;const aw=Ft(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ea)},(e,t)=>(t-e)/ea,e=>e.getUTCHours());aw.range;const id=Ft(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yr)/ia,e=>e.getDate()-1);id.range;const Cf=Ft(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ia,e=>e.getUTCDate()-1);Cf.range;const r6=Ft(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ia,e=>Math.floor(e/ia));r6.range;function ri(e){return Ft(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Yr)/ew)}const Af=ri(0),bh=ri(1),VU=ri(2),QU=ri(3),uo=ri(4),YU=ri(5),XU=ri(6);Af.range;bh.range;VU.range;QU.range;uo.range;YU.range;XU.range;function ni(e){return Ft(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ew)}const Pf=ni(0),jh=ni(1),JU=ni(2),ZU=ni(3),ho=ni(4),eW=ni(5),tW=ni(6);Pf.range;jh.range;JU.range;ZU.range;ho.range;eW.range;tW.range;const sw=Ft(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());sw.range;const iw=Ft(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());iw.range;const oa=Ft(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());oa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ft(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});oa.range;const la=Ft(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());la.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ft(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});la.range;function n6(e,t,n,a,s,i){const l=[[Es,1,Zn],[Es,5,5*Zn],[Es,15,15*Zn],[Es,30,30*Zn],[i,1,Yr],[i,5,5*Yr],[i,15,15*Yr],[i,30,30*Yr],[s,1,ea],[s,3,3*ea],[s,6,6*ea],[s,12,12*ea],[a,1,ia],[a,2,2*ia],[n,1,ew],[t,1,_C],[t,3,3*_C],[e,1,hy]];function d(h,p,m){const g=p<h;g&&([h,p]=[p,h]);const j=m&&typeof m.range=="function"?m:u(h,p,m),v=j?j.range(h,+p+1):[];return g?v.reverse():v}function u(h,p,m){const g=Math.abs(p-h)/m,j=Bj(([,,x])=>x).right(l,g);if(j===l.length)return e.every(tb(h/hy,p/hy,m));if(j===0)return vh.every(Math.max(tb(h,p,m),1));const[v,w]=l[g/l[j-1][2]<l[j][2]/g?j-1:j];return v.every(w)}return[d,u]}const[rW,nW]=n6(la,iw,Pf,r6,aw,rw),[aW,sW]=n6(oa,sw,Af,id,nw,tw);function fy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function my(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $l(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function iW(e){var t=e.dateTime,n=e.date,a=e.time,s=e.periods,i=e.days,l=e.shortDays,d=e.months,u=e.shortMonths,h=Ll(s),p=Dl(s),m=Ll(i),g=Dl(i),j=Ll(l),v=Dl(l),w=Ll(d),x=Dl(d),S=Ll(u),P=Dl(u),O={a:H,A:B,b:D,B:L,c:null,d:LC,e:LC,f:OW,g:FW,G:zW,H:CW,I:AW,j:PW,L:a6,m:EW,M:_W,p:q,q:K,Q:qC,s:zC,S:TW,u:RW,U:MW,V:IW,w:$W,W:LW,x:null,X:null,y:DW,Y:qW,Z:BW,"%":FC},N={a:Y,A:W,b:ue,B:he,c:null,d:DC,e:DC,f:KW,g:rH,G:aH,H:UW,I:WW,j:HW,L:i6,m:GW,M:VW,p:oe,q:te,Q:qC,s:zC,S:QW,u:YW,U:XW,V:JW,w:ZW,W:eH,x:null,X:null,y:tH,Y:nH,Z:sH,"%":FC},A={a:I,A:M,b:$,B:G,c:V,d:IC,e:IC,f:wW,g:MC,G:RC,H:$C,I:$C,j:yW,L:jW,m:gW,M:vW,p:R,q:xW,Q:SW,s:kW,S:bW,u:uW,U:hW,V:fW,w:dW,W:mW,x:z,X:U,y:MC,Y:RC,Z:pW,"%":NW};O.x=C(n,O),O.X=C(a,O),O.c=C(t,O),N.x=C(n,N),N.X=C(a,N),N.c=C(t,N);function C(le,ke){return function($e){var re=[],be=-1,je=0,tt=le.length,yt,qt,Zr;for($e instanceof Date||($e=new Date(+$e));++be<tt;)le.charCodeAt(be)===37&&(re.push(le.slice(je,be)),(qt=TC[yt=le.charAt(++be)])!=null?yt=le.charAt(++be):qt=yt==="e"?" ":"0",(Zr=ke[yt])&&(yt=Zr($e,qt)),re.push(yt),je=be+1);return re.push(le.slice(je,be)),re.join("")}}function E(le,ke){return function($e){var re=$l(1900,void 0,1),be=T(re,le,$e+="",0),je,tt;if(be!=$e.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(ke&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(je=my($l(re.y,0,1)),tt=je.getUTCDay(),je=tt>4||tt===0?jh.ceil(je):jh(je),je=Cf.offset(je,(re.V-1)*7),re.y=je.getUTCFullYear(),re.m=je.getUTCMonth(),re.d=je.getUTCDate()+(re.w+6)%7):(je=fy($l(re.y,0,1)),tt=je.getDay(),je=tt>4||tt===0?bh.ceil(je):bh(je),je=id.offset(je,(re.V-1)*7),re.y=je.getFullYear(),re.m=je.getMonth(),re.d=je.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),tt="Z"in re?my($l(re.y,0,1)).getUTCDay():fy($l(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(tt+5)%7:re.w+re.U*7-(tt+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,my(re)):fy(re)}}function T(le,ke,$e,re){for(var be=0,je=ke.length,tt=$e.length,yt,qt;be<je;){if(re>=tt)return-1;if(yt=ke.charCodeAt(be++),yt===37){if(yt=ke.charAt(be++),qt=A[yt in TC?ke.charAt(be++):yt],!qt||(re=qt(le,$e,re))<0)return-1}else if(yt!=$e.charCodeAt(re++))return-1}return re}function R(le,ke,$e){var re=h.exec(ke.slice($e));return re?(le.p=p.get(re[0].toLowerCase()),$e+re[0].length):-1}function I(le,ke,$e){var re=j.exec(ke.slice($e));return re?(le.w=v.get(re[0].toLowerCase()),$e+re[0].length):-1}function M(le,ke,$e){var re=m.exec(ke.slice($e));return re?(le.w=g.get(re[0].toLowerCase()),$e+re[0].length):-1}function $(le,ke,$e){var re=S.exec(ke.slice($e));return re?(le.m=P.get(re[0].toLowerCase()),$e+re[0].length):-1}function G(le,ke,$e){var re=w.exec(ke.slice($e));return re?(le.m=x.get(re[0].toLowerCase()),$e+re[0].length):-1}function V(le,ke,$e){return T(le,t,ke,$e)}function z(le,ke,$e){return T(le,n,ke,$e)}function U(le,ke,$e){return T(le,a,ke,$e)}function H(le){return l[le.getDay()]}function B(le){return i[le.getDay()]}function D(le){return u[le.getMonth()]}function L(le){return d[le.getMonth()]}function q(le){return s[+(le.getHours()>=12)]}function K(le){return 1+~~(le.getMonth()/3)}function Y(le){return l[le.getUTCDay()]}function W(le){return i[le.getUTCDay()]}function ue(le){return u[le.getUTCMonth()]}function he(le){return d[le.getUTCMonth()]}function oe(le){return s[+(le.getUTCHours()>=12)]}function te(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var ke=C(le+="",O);return ke.toString=function(){return le},ke},parse:function(le){var ke=E(le+="",!1);return ke.toString=function(){return le},ke},utcFormat:function(le){var ke=C(le+="",N);return ke.toString=function(){return le},ke},utcParse:function(le){var ke=E(le+="",!0);return ke.toString=function(){return le},ke}}}var TC={"-":"",_:" ",0:"0"},Gt=/^\s*\d+/,oW=/^%/,lW=/[\\^$*+?|[\]().{}]/g;function Qe(e,t,n){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<n?new Array(n-i+1).join(t)+s:s)}function cW(e){return e.replace(lW,"\\$&")}function Ll(e){return new RegExp("^(?:"+e.map(cW).join("|")+")","i")}function Dl(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function dW(e,t,n){var a=Gt.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function uW(e,t,n){var a=Gt.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function hW(e,t,n){var a=Gt.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function fW(e,t,n){var a=Gt.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function mW(e,t,n){var a=Gt.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function RC(e,t,n){var a=Gt.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function MC(e,t,n){var a=Gt.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function pW(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function xW(e,t,n){var a=Gt.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function gW(e,t,n){var a=Gt.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function IC(e,t,n){var a=Gt.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function yW(e,t,n){var a=Gt.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function $C(e,t,n){var a=Gt.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function vW(e,t,n){var a=Gt.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function bW(e,t,n){var a=Gt.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function jW(e,t,n){var a=Gt.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function wW(e,t,n){var a=Gt.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function NW(e,t,n){var a=oW.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function SW(e,t,n){var a=Gt.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function kW(e,t,n){var a=Gt.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function LC(e,t){return Qe(e.getDate(),t,2)}function CW(e,t){return Qe(e.getHours(),t,2)}function AW(e,t){return Qe(e.getHours()%12||12,t,2)}function PW(e,t){return Qe(1+id.count(oa(e),e),t,3)}function a6(e,t){return Qe(e.getMilliseconds(),t,3)}function OW(e,t){return a6(e,t)+"000"}function EW(e,t){return Qe(e.getMonth()+1,t,2)}function _W(e,t){return Qe(e.getMinutes(),t,2)}function TW(e,t){return Qe(e.getSeconds(),t,2)}function RW(e){var t=e.getDay();return t===0?7:t}function MW(e,t){return Qe(Af.count(oa(e)-1,e),t,2)}function s6(e){var t=e.getDay();return t>=4||t===0?uo(e):uo.ceil(e)}function IW(e,t){return e=s6(e),Qe(uo.count(oa(e),e)+(oa(e).getDay()===4),t,2)}function $W(e){return e.getDay()}function LW(e,t){return Qe(bh.count(oa(e)-1,e),t,2)}function DW(e,t){return Qe(e.getFullYear()%100,t,2)}function FW(e,t){return e=s6(e),Qe(e.getFullYear()%100,t,2)}function qW(e,t){return Qe(e.getFullYear()%1e4,t,4)}function zW(e,t){var n=e.getDay();return e=n>=4||n===0?uo(e):uo.ceil(e),Qe(e.getFullYear()%1e4,t,4)}function BW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qe(t/60|0,"0",2)+Qe(t%60,"0",2)}function DC(e,t){return Qe(e.getUTCDate(),t,2)}function UW(e,t){return Qe(e.getUTCHours(),t,2)}function WW(e,t){return Qe(e.getUTCHours()%12||12,t,2)}function HW(e,t){return Qe(1+Cf.count(la(e),e),t,3)}function i6(e,t){return Qe(e.getUTCMilliseconds(),t,3)}function KW(e,t){return i6(e,t)+"000"}function GW(e,t){return Qe(e.getUTCMonth()+1,t,2)}function VW(e,t){return Qe(e.getUTCMinutes(),t,2)}function QW(e,t){return Qe(e.getUTCSeconds(),t,2)}function YW(e){var t=e.getUTCDay();return t===0?7:t}function XW(e,t){return Qe(Pf.count(la(e)-1,e),t,2)}function o6(e){var t=e.getUTCDay();return t>=4||t===0?ho(e):ho.ceil(e)}function JW(e,t){return e=o6(e),Qe(ho.count(la(e),e)+(la(e).getUTCDay()===4),t,2)}function ZW(e){return e.getUTCDay()}function eH(e,t){return Qe(jh.count(la(e)-1,e),t,2)}function tH(e,t){return Qe(e.getUTCFullYear()%100,t,2)}function rH(e,t){return e=o6(e),Qe(e.getUTCFullYear()%100,t,2)}function nH(e,t){return Qe(e.getUTCFullYear()%1e4,t,4)}function aH(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ho(e):ho.ceil(e),Qe(e.getUTCFullYear()%1e4,t,4)}function sH(){return"+0000"}function FC(){return"%"}function qC(e){return+e}function zC(e){return Math.floor(+e/1e3)}var _i,l6,c6;iH({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function iH(e){return _i=iW(e),l6=_i.format,_i.parse,c6=_i.utcFormat,_i.utcParse,_i}function oH(e){return new Date(e)}function lH(e){return e instanceof Date?+e:+new Date(+e)}function ow(e,t,n,a,s,i,l,d,u,h){var p=Gj(),m=p.invert,g=p.domain,j=h(".%L"),v=h(":%S"),w=h("%I:%M"),x=h("%I %p"),S=h("%a %d"),P=h("%b %d"),O=h("%B"),N=h("%Y");function A(C){return(u(C)<C?j:d(C)<C?v:l(C)<C?w:i(C)<C?x:a(C)<C?s(C)<C?S:P:n(C)<C?O:N)(C)}return p.invert=function(C){return new Date(m(C))},p.domain=function(C){return arguments.length?g(Array.from(C,lH)):g().map(oH)},p.ticks=function(C){var E=g();return e(E[0],E[E.length-1],C??10)},p.tickFormat=function(C,E){return E==null?A:h(E)},p.nice=function(C){var E=g();return(!C||typeof C.range!="function")&&(C=t(E[0],E[E.length-1],C??10)),C?g(QE(E,C)):p},p.copy=function(){return sd(p,ow(e,t,n,a,s,i,l,d,u,h))},p}function cH(){return Jr.apply(ow(aW,sW,oa,sw,Af,id,nw,tw,Es,l6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dH(){return Jr.apply(ow(rW,nW,la,iw,Pf,Cf,aw,rw,Es,c6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Of(){var e=0,t=1,n,a,s,i,l=ur,d=!1,u;function h(m){return m==null||isNaN(m=+m)?u:l(s===0?.5:(m=(i(m)-n)*s,d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t]=m,n=i(e=+e),a=i(t=+t),s=n===a?0:1/(a-n),h):[e,t]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var j,v;return arguments.length?([j,v]=g,l=m(j,v),h):[l(0),l(1)]}}return h.range=p(qo),h.rangeRound=p(Kj),h.unknown=function(m){return arguments.length?(u=m,h):u},function(m){return i=m,n=m(e),a=m(t),s=n===a?0:1/(a-n),h}}function ss(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function d6(){var e=as(Of()(ur));return e.copy=function(){return ss(e,d6())},ha.apply(e,arguments)}function u6(){var e=Yj(Of()).domain([1,10]);return e.copy=function(){return ss(e,u6()).base(e.base())},ha.apply(e,arguments)}function h6(){var e=Xj(Of());return e.copy=function(){return ss(e,h6()).constant(e.constant())},ha.apply(e,arguments)}function lw(){var e=Jj(Of());return e.copy=function(){return ss(e,lw()).exponent(e.exponent())},ha.apply(e,arguments)}function uH(){return lw.apply(null,arguments).exponent(.5)}function f6(){var e=[],t=ur;function n(a){if(a!=null&&!isNaN(a=+a))return t((nd(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ja),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(s,i)=>XB(e,i/a))},n.copy=function(){return f6(t).domain(e)},ha.apply(n,arguments)}function Ef(){var e=0,t=.5,n=1,a=1,s,i,l,d,u,h=ur,p,m=!1,g;function j(w){return isNaN(w=+w)?g:(w=.5+((w=+p(w))-i)*(a*w<a*i?d:u),h(m?Math.max(0,Math.min(1,w)):w))}j.domain=function(w){return arguments.length?([e,t,n]=w,s=p(e=+e),i=p(t=+t),l=p(n=+n),d=s===i?0:.5/(i-s),u=i===l?0:.5/(l-i),a=i<s?-1:1,j):[e,t,n]},j.clamp=function(w){return arguments.length?(m=!!w,j):m},j.interpolator=function(w){return arguments.length?(h=w,j):h};function v(w){return function(x){var S,P,O;return arguments.length?([S,P,O]=x,h=NU(w,[S,P,O]),j):[h(0),h(.5),h(1)]}}return j.range=v(qo),j.rangeRound=v(Kj),j.unknown=function(w){return arguments.length?(g=w,j):g},function(w){return p=w,s=w(e),i=w(t),l=w(n),d=s===i?0:.5/(i-s),u=i===l?0:.5/(l-i),a=i<s?-1:1,j}}function m6(){var e=as(Ef()(ur));return e.copy=function(){return ss(e,m6())},ha.apply(e,arguments)}function p6(){var e=Yj(Ef()).domain([.1,1,10]);return e.copy=function(){return ss(e,p6()).base(e.base())},ha.apply(e,arguments)}function x6(){var e=Xj(Ef());return e.copy=function(){return ss(e,x6()).constant(e.constant())},ha.apply(e,arguments)}function cw(){var e=Jj(Ef());return e.copy=function(){return ss(e,cw()).exponent(e.exponent())},ha.apply(e,arguments)}function hH(){return cw.apply(null,arguments).exponent(.5)}const BC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:fc,scaleDiverging:m6,scaleDivergingLog:p6,scaleDivergingPow:cw,scaleDivergingSqrt:hH,scaleDivergingSymlog:x6,scaleIdentity:VE,scaleImplicit:rb,scaleLinear:yh,scaleLog:YE,scaleOrdinal:Uj,scalePoint:Xl,scalePow:Zj,scaleQuantile:ZE,scaleQuantize:e6,scaleRadial:JE,scaleSequential:d6,scaleSequentialLog:u6,scaleSequentialPow:lw,scaleSequentialQuantile:f6,scaleSequentialSqrt:uH,scaleSequentialSymlog:h6,scaleSqrt:KU,scaleSymlog:XE,scaleThreshold:t6,scaleTime:cH,scaleUtc:dH,tickFormat:GE},Symbol.toStringTag,{value:"Module"}));var py,UC;function _f(){if(UC)return py;UC=1;var e=$o();function t(n,a,s){for(var i=-1,l=n.length;++i<l;){var d=n[i],u=a(d);if(u!=null&&(h===void 0?u===u&&!e(u):s(u,h)))var h=u,p=d}return p}return py=t,py}var xy,WC;function g6(){if(WC)return xy;WC=1;function e(t,n){return t>n}return xy=e,xy}var gy,HC;function fH(){if(HC)return gy;HC=1;var e=_f(),t=g6(),n=Fo();function a(s){return s&&s.length?e(s,n,t):void 0}return gy=a,gy}var mH=fH();const Tf=Ze(mH);var yy,KC;function y6(){if(KC)return yy;KC=1;function e(t,n){return t<n}return yy=e,yy}var vy,GC;function pH(){if(GC)return vy;GC=1;var e=_f(),t=y6(),n=Fo();function a(s){return s&&s.length?e(s,n,t):void 0}return vy=a,vy}var xH=pH();const Rf=Ze(xH);var by,VC;function gH(){if(VC)return by;VC=1;var e=Sj(),t=In(),n=AE(),a=Sr();function s(i,l){var d=a(i)?e:n;return d(i,t(l,3))}return by=s,by}var jy,QC;function yH(){if(QC)return jy;QC=1;var e=kE(),t=gH();function n(a,s){return e(t(a,s),1)}return jy=n,jy}var vH=yH();const bH=Ze(vH);var wy,YC;function jH(){if(YC)return wy;YC=1;var e=Lj();function t(n,a){return e(n,a)}return wy=t,wy}var wH=jH();const od=Ze(wH);var zo=1e9,NH={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},uw,mt=!0,Xr="[DecimalError] ",Us=Xr+"Invalid argument: ",dw=Xr+"Exponent out of range: ",Bo=Math.floor,Ss=Math.pow,SH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rr,Ht=1e7,ut=7,v6=9007199254740991,wh=Bo(v6/ut),Ne={};Ne.absoluteValue=Ne.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ne.comparedTo=Ne.cmp=function(e){var t,n,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,n=a<s?a:s;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Ne.decimalPlaces=Ne.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*ut;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ne.dividedBy=Ne.div=function(e){return na(this,new this.constructor(e))};Ne.dividedToIntegerBy=Ne.idiv=function(e){var t=this,n=t.constructor;return nt(na(t,new n(e),0,1),n.precision)};Ne.equals=Ne.eq=function(e){return!this.cmp(e)};Ne.exponent=function(){return Et(this)};Ne.greaterThan=Ne.gt=function(e){return this.cmp(e)>0};Ne.greaterThanOrEqualTo=Ne.gte=function(e){return this.cmp(e)>=0};Ne.isInteger=Ne.isint=function(){return this.e>this.d.length-2};Ne.isNegative=Ne.isneg=function(){return this.s<0};Ne.isPositive=Ne.ispos=function(){return this.s>0};Ne.isZero=function(){return this.s===0};Ne.lessThan=Ne.lt=function(e){return this.cmp(e)<0};Ne.lessThanOrEqualTo=Ne.lte=function(e){return this.cmp(e)<1};Ne.logarithm=Ne.log=function(e){var t,n=this,a=n.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Rr))throw Error(Xr+"NaN");if(n.s<1)throw Error(Xr+(n.s?"NaN":"-Infinity"));return n.eq(Rr)?new a(0):(mt=!1,t=na(yc(n,i),yc(e,i),i),mt=!0,nt(t,s))};Ne.minus=Ne.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?w6(t,e):b6(t,(e.s=-e.s,e))};Ne.modulo=Ne.mod=function(e){var t,n=this,a=n.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Xr+"NaN");return n.s?(mt=!1,t=na(n,e,0,1).times(e),mt=!0,n.minus(t)):nt(new a(n),s)};Ne.naturalExponential=Ne.exp=function(){return j6(this)};Ne.naturalLogarithm=Ne.ln=function(){return yc(this)};Ne.negated=Ne.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ne.plus=Ne.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?b6(t,e):w6(t,(e.s=-e.s,e))};Ne.precision=Ne.sd=function(e){var t,n,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Us+e);if(t=Et(s)+1,a=s.d.length-1,n=a*ut+1,a=s.d[a],a){for(;a%10==0;a/=10)n--;for(a=s.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};Ne.squareRoot=Ne.sqrt=function(){var e,t,n,a,s,i,l,d=this,u=d.constructor;if(d.s<1){if(!d.s)return new u(0);throw Error(Xr+"NaN")}for(e=Et(d),mt=!1,s=Math.sqrt(+d),s==0||s==1/0?(t=On(d.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Bo((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new u(t)):a=new u(s.toString()),n=u.precision,s=l=n+3;;)if(i=a,a=i.plus(na(d,i,l+2)).times(.5),On(i.d).slice(0,l)===(t=On(a.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(nt(i,n+1,0),i.times(i).eq(d)){a=i;break}}else if(t!="9999")break;l+=4}return mt=!0,nt(a,n)};Ne.times=Ne.mul=function(e){var t,n,a,s,i,l,d,u,h,p=this,m=p.constructor,g=p.d,j=(e=new m(e)).d;if(!p.s||!e.s)return new m(0);for(e.s*=p.s,n=p.e+e.e,u=g.length,h=j.length,u<h&&(i=g,g=j,j=i,l=u,u=h,h=l),i=[],l=u+h,a=l;a--;)i.push(0);for(a=h;--a>=0;){for(t=0,s=u+a;s>a;)d=i[s]+j[a]*g[s-a-1]+t,i[s--]=d%Ht|0,t=d/Ht|0;i[s]=(i[s]+t)%Ht|0}for(;!i[--l];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,mt?nt(e,m.precision):e};Ne.toDecimalPlaces=Ne.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Tn(e,0,zo),t===void 0?t=a.rounding:Tn(t,0,8),nt(n,e+Et(n)+1,t))};Ne.toExponential=function(e,t){var n,a=this,s=a.constructor;return e===void 0?n=Ys(a,!0):(Tn(e,0,zo),t===void 0?t=s.rounding:Tn(t,0,8),a=nt(new s(a),e+1,t),n=Ys(a,!0,e+1)),n};Ne.toFixed=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?Ys(s):(Tn(e,0,zo),t===void 0?t=i.rounding:Tn(t,0,8),a=nt(new i(s),e+Et(s)+1,t),n=Ys(a.abs(),!1,e+Et(a)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Ne.toInteger=Ne.toint=function(){var e=this,t=e.constructor;return nt(new t(e),Et(e)+1,t.rounding)};Ne.toNumber=function(){return+this};Ne.toPower=Ne.pow=function(e){var t,n,a,s,i,l,d=this,u=d.constructor,h=12,p=+(e=new u(e));if(!e.s)return new u(Rr);if(d=new u(d),!d.s){if(e.s<1)throw Error(Xr+"Infinity");return d}if(d.eq(Rr))return d;if(a=u.precision,e.eq(Rr))return nt(d,a);if(t=e.e,n=e.d.length-1,l=t>=n,i=d.s,l){if((n=p<0?-p:p)<=v6){for(s=new u(Rr),t=Math.ceil(a/ut+4),mt=!1;n%2&&(s=s.times(d),JC(s.d,t)),n=Bo(n/2),n!==0;)d=d.times(d),JC(d.d,t);return mt=!0,e.s<0?new u(Rr).div(s):nt(s,a)}}else if(i<0)throw Error(Xr+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,mt=!1,s=e.times(yc(d,a+h)),mt=!0,s=j6(s),s.s=i,s};Ne.toPrecision=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?(n=Et(s),a=Ys(s,n<=i.toExpNeg||n>=i.toExpPos)):(Tn(e,1,zo),t===void 0?t=i.rounding:Tn(t,0,8),s=nt(new i(s),e,t),n=Et(s),a=Ys(s,e<=n||n<=i.toExpNeg,e)),a};Ne.toSignificantDigits=Ne.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Tn(e,1,zo),t===void 0?t=a.rounding:Tn(t,0,8)),nt(new a(n),e,t)};Ne.toString=Ne.valueOf=Ne.val=Ne.toJSON=Ne[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Et(e),n=e.constructor;return Ys(e,t<=n.toExpNeg||t>=n.toExpPos)};function b6(e,t){var n,a,s,i,l,d,u,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),mt?nt(t,m):t;if(u=e.d,h=t.d,l=e.e,s=t.e,u=u.slice(),i=l-s,i){for(i<0?(a=u,i=-i,d=h.length):(a=h,s=l,d=u.length),l=Math.ceil(m/ut),d=l>d?l+1:d+1,i>d&&(i=d,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(d=u.length,i=h.length,d-i<0&&(i=d,a=h,h=u,u=a),n=0;i;)n=(u[--i]=u[i]+h[i]+n)/Ht|0,u[i]%=Ht;for(n&&(u.unshift(n),++s),d=u.length;u[--d]==0;)u.pop();return t.d=u,t.e=s,mt?nt(t,m):t}function Tn(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Us+e)}function On(e){var t,n,a,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)a=e[t]+"",n=ut-a.length,n&&(i+=Ma(n)),i+=a;l=e[t],a=l+"",n=ut-a.length,n&&(i+=Ma(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var na=(function(){function e(a,s){var i,l=0,d=a.length;for(a=a.slice();d--;)i=a[d]*s+l,a[d]=i%Ht|0,l=i/Ht|0;return l&&a.unshift(l),a}function t(a,s,i,l){var d,u;if(i!=l)u=i>l?1:-1;else for(d=u=0;d<i;d++)if(a[d]!=s[d]){u=a[d]>s[d]?1:-1;break}return u}function n(a,s,i){for(var l=0;i--;)a[i]-=l,l=a[i]<s[i]?1:0,a[i]=l*Ht+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,l){var d,u,h,p,m,g,j,v,w,x,S,P,O,N,A,C,E,T,R=a.constructor,I=a.s==s.s?1:-1,M=a.d,$=s.d;if(!a.s)return new R(a);if(!s.s)throw Error(Xr+"Division by zero");for(u=a.e-s.e,E=$.length,A=M.length,j=new R(I),v=j.d=[],h=0;$[h]==(M[h]||0);)++h;if($[h]>(M[h]||0)&&--u,i==null?P=i=R.precision:l?P=i+(Et(a)-Et(s))+1:P=i,P<0)return new R(0);if(P=P/ut+2|0,h=0,E==1)for(p=0,$=$[0],P++;(h<A||p)&&P--;h++)O=p*Ht+(M[h]||0),v[h]=O/$|0,p=O%$|0;else{for(p=Ht/($[0]+1)|0,p>1&&($=e($,p),M=e(M,p),E=$.length,A=M.length),N=E,w=M.slice(0,E),x=w.length;x<E;)w[x++]=0;T=$.slice(),T.unshift(0),C=$[0],$[1]>=Ht/2&&++C;do p=0,d=t($,w,E,x),d<0?(S=w[0],E!=x&&(S=S*Ht+(w[1]||0)),p=S/C|0,p>1?(p>=Ht&&(p=Ht-1),m=e($,p),g=m.length,x=w.length,d=t(m,w,g,x),d==1&&(p--,n(m,E<g?T:$,g))):(p==0&&(d=p=1),m=$.slice()),g=m.length,g<x&&m.unshift(0),n(w,m,x),d==-1&&(x=w.length,d=t($,w,E,x),d<1&&(p++,n(w,E<x?T:$,x))),x=w.length):d===0&&(p++,w=[0]),v[h++]=p,d&&w[0]?w[x++]=M[N]||0:(w=[M[N]],x=1);while((N++<A||w[0]!==void 0)&&P--)}return v[0]||v.shift(),j.e=u,nt(j,l?i+Et(j)+1:i)}})();function j6(e,t){var n,a,s,i,l,d,u=0,h=0,p=e.constructor,m=p.precision;if(Et(e)>16)throw Error(dw+Et(e));if(!e.s)return new p(Rr);for(mt=!1,d=m,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(a=Math.log(Ss(2,h))/Math.LN10*2+5|0,d+=a,n=s=i=new p(Rr),p.precision=d;;){if(s=nt(s.times(e),d),n=n.times(++u),l=i.plus(na(s,n,d)),On(l.d).slice(0,d)===On(i.d).slice(0,d)){for(;h--;)i=nt(i.times(i),d);return p.precision=m,t==null?(mt=!0,nt(i,m)):i}i=l}}function Et(e){for(var t=e.e*ut,n=e.d[0];n>=10;n/=10)t++;return t}function Ny(e,t,n){if(t>e.LN10.sd())throw mt=!0,n&&(e.precision=n),Error(Xr+"LN10 precision limit exceeded");return nt(new e(e.LN10),t)}function Ma(e){for(var t="";e--;)t+="0";return t}function yc(e,t){var n,a,s,i,l,d,u,h,p,m=1,g=10,j=e,v=j.d,w=j.constructor,x=w.precision;if(j.s<1)throw Error(Xr+(j.s?"NaN":"-Infinity"));if(j.eq(Rr))return new w(0);if(t==null?(mt=!1,h=x):h=t,j.eq(10))return t==null&&(mt=!0),Ny(w,h);if(h+=g,w.precision=h,n=On(v),a=n.charAt(0),i=Et(j),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)j=j.times(e),n=On(j.d),a=n.charAt(0),m++;i=Et(j),a>1?(j=new w("0."+n),i++):j=new w(a+"."+n.slice(1))}else return u=Ny(w,h+2,x).times(i+""),j=yc(new w(a+"."+n.slice(1)),h-g).plus(u),w.precision=x,t==null?(mt=!0,nt(j,x)):j;for(d=l=j=na(j.minus(Rr),j.plus(Rr),h),p=nt(j.times(j),h),s=3;;){if(l=nt(l.times(p),h),u=d.plus(na(l,new w(s),h)),On(u.d).slice(0,h)===On(d.d).slice(0,h))return d=d.times(2),i!==0&&(d=d.plus(Ny(w,h+2,x).times(i+""))),d=na(d,new w(m),h),w.precision=x,t==null?(mt=!0,nt(d,x)):d;d=u,s+=2}}function XC(e,t){var n,a,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,n=n-a-1,e.e=Bo(n/ut),e.d=[],a=(n+1)%ut,n<0&&(a+=ut),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=ut;a<s;)e.d.push(+t.slice(a,a+=ut));t=t.slice(a),a=ut-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),mt&&(e.e>wh||e.e<-wh))throw Error(dw+n)}else e.s=0,e.e=0,e.d=[0];return e}function nt(e,t,n){var a,s,i,l,d,u,h,p,m=e.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(a=t-l,a<0)a+=ut,s=t,h=m[p=0];else{if(p=Math.ceil((a+1)/ut),i=m.length,p>=i)return e;for(h=i=m[p],l=1;i>=10;i/=10)l++;a%=ut,s=a-ut+l}if(n!==void 0&&(i=Ss(10,l-s-1),d=h/i%10|0,u=t<0||m[p+1]!==void 0||h%i,u=n<4?(d||u)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||u||n==6&&(a>0?s>0?h/Ss(10,l-s):0:m[p-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return u?(i=Et(e),m.length=1,t=t-i-1,m[0]=Ss(10,(ut-t%ut)%ut),e.e=Bo(-t/ut)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=p,i=1,p--):(m.length=p+1,i=Ss(10,ut-a),m[p]=s>0?(h/Ss(10,l-s)%Ss(10,s)|0)*i:0),u)for(;;)if(p==0){(m[0]+=i)==Ht&&(m[0]=1,++e.e);break}else{if(m[p]+=i,m[p]!=Ht)break;m[p--]=0,i=1}for(a=m.length;m[--a]===0;)m.pop();if(mt&&(e.e>wh||e.e<-wh))throw Error(dw+Et(e));return e}function w6(e,t){var n,a,s,i,l,d,u,h,p,m,g=e.constructor,j=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),mt?nt(t,j):t;if(u=e.d,m=t.d,a=t.e,h=e.e,u=u.slice(),l=h-a,l){for(p=l<0,p?(n=u,l=-l,d=m.length):(n=m,a=h,d=u.length),s=Math.max(Math.ceil(j/ut),d)+2,l>s&&(l=s,n.length=1),n.reverse(),s=l;s--;)n.push(0);n.reverse()}else{for(s=u.length,d=m.length,p=s<d,p&&(d=s),s=0;s<d;s++)if(u[s]!=m[s]){p=u[s]<m[s];break}l=0}for(p&&(n=u,u=m,m=n,t.s=-t.s),d=u.length,s=m.length-d;s>0;--s)u[d++]=0;for(s=m.length;s>l;){if(u[--s]<m[s]){for(i=s;i&&u[--i]===0;)u[i]=Ht-1;--u[i],u[s]+=Ht}u[s]-=m[s]}for(;u[--d]===0;)u.pop();for(;u[0]===0;u.shift())--a;return u[0]?(t.d=u,t.e=a,mt?nt(t,j):t):new g(0)}function Ys(e,t,n){var a,s=Et(e),i=On(e.d),l=i.length;return t?(n&&(a=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+Ma(a):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Ma(-s-1)+i,n&&(a=n-l)>0&&(i+=Ma(a))):s>=l?(i+=Ma(s+1-l),n&&(a=n-s-1)>0&&(i=i+"."+Ma(a))):((a=s+1)<l&&(i=i.slice(0,a)+"."+i.slice(a)),n&&(a=n-l)>0&&(s+1===l&&(i+="."),i+=Ma(a))),e.s<0?"-"+i:i}function JC(e,t){if(e.length>t)return e.length=t,!0}function N6(e){var t,n,a;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Us+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return XC(l,i.toString())}else if(typeof i!="string")throw Error(Us+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,SH.test(i))XC(l,i);else throw Error(Us+i)}if(s.prototype=Ne,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=N6,s.config=s.set=kH,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return s.config(e),s}function kH(e){if(!e||typeof e!="object")throw Error(Xr+"Object expected");var t,n,a,s=["precision",1,zo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[n=s[t]])!==void 0)if(Bo(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(Us+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(Us+n+": "+a);return this}var uw=N6(NH);Rr=new uw(1);const rt=uw;function CH(e){return EH(e)||OH(e)||PH(e)||AH()}function AH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PH(e,t){if(e){if(typeof e=="string")return ib(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ib(e,t)}}function OH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function EH(e){if(Array.isArray(e))return ib(e)}function ib(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var _H=function(t){return t},S6={},k6=function(t){return t===S6},ZC=function(t){return function n(){return arguments.length===0||arguments.length===1&&k6(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},TH=function e(t,n){return t===1?n:ZC(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var l=s.filter(function(d){return d!==S6}).length;return l>=t?n.apply(void 0,s):e(t-l,ZC(function(){for(var d=arguments.length,u=new Array(d),h=0;h<d;h++)u[h]=arguments[h];var p=s.map(function(m){return k6(m)?u.shift():m});return n.apply(void 0,CH(p).concat(u))}))})},Mf=function(t){return TH(t.length,t)},ob=function(t,n){for(var a=[],s=t;s<n;++s)a[s-t]=s;return a},RH=Mf(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),MH=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return _H;var s=n.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce(function(d,u){return u(d)},i.apply(void 0,arguments))}},lb=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},C6=function(t){var n=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return n&&i.every(function(d,u){return d===n[u]})||(n=i,a=t.apply(void 0,i)),a}};function IH(e){var t;return e===0?t=1:t=Math.floor(new rt(e).abs().log(10).toNumber())+1,t}function $H(e,t,n){for(var a=new rt(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(n),s++;return i}var LH=Mf(function(e,t,n){var a=+e,s=+t;return a+n*(s-a)}),DH=Mf(function(e,t,n){var a=t-+e;return a=a||1/0,(n-e)/a}),FH=Mf(function(e,t,n){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});const If={rangeStep:$H,getDigitCount:IH,interpolateNumber:LH,uninterpolateNumber:DH,uninterpolateTruncation:FH};function cb(e){return BH(e)||zH(e)||A6(e)||qH()}function qH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function BH(e){if(Array.isArray(e))return db(e)}function vc(e,t){return HH(e)||WH(e,t)||A6(e,t)||UH()}function UH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A6(e,t){if(e){if(typeof e=="string")return db(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return db(e,t)}}function db(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function WH(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,s=!1,i=void 0;try{for(var l=e[Symbol.iterator](),d;!(a=(d=l.next()).done)&&(n.push(d.value),!(t&&n.length===t));a=!0);}catch(u){s=!0,i=u}finally{try{!a&&l.return!=null&&l.return()}finally{if(s)throw i}}return n}}function HH(e){if(Array.isArray(e))return e}function P6(e){var t=vc(e,2),n=t[0],a=t[1],s=n,i=a;return n>a&&(s=a,i=n),[s,i]}function O6(e,t,n){if(e.lte(0))return new rt(0);var a=If.getDigitCount(e.toNumber()),s=new rt(10).pow(a),i=e.div(s),l=a!==1?.05:.1,d=new rt(Math.ceil(i.div(l).toNumber())).add(n).mul(l),u=d.mul(s);return t?u:new rt(Math.ceil(u))}function KH(e,t,n){var a=1,s=new rt(e);if(!s.isint()&&n){var i=Math.abs(e);i<1?(a=new rt(10).pow(If.getDigitCount(e)-1),s=new rt(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new rt(Math.floor(e)))}else e===0?s=new rt(Math.floor((t-1)/2)):n||(s=new rt(Math.floor(e)));var l=Math.floor((t-1)/2),d=MH(RH(function(u){return s.add(new rt(u-l).mul(a)).toNumber()}),ob);return d(0,t)}function E6(e,t,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new rt(0),tickMin:new rt(0),tickMax:new rt(0)};var i=O6(new rt(t).sub(e).div(n-1),a,s),l;e<=0&&t>=0?l=new rt(0):(l=new rt(e).add(t).div(2),l=l.sub(new rt(l).mod(i)));var d=Math.ceil(l.sub(e).div(i).toNumber()),u=Math.ceil(new rt(t).sub(l).div(i).toNumber()),h=d+u+1;return h>n?E6(e,t,n,a,s+1):(h<n&&(u=t>0?u+(n-h):u,d=t>0?d:d+(n-h)),{step:i,tickMin:l.sub(new rt(d).mul(i)),tickMax:l.add(new rt(u).mul(i))})}function GH(e){var t=vc(e,2),n=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),d=P6([n,a]),u=vc(d,2),h=u[0],p=u[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(cb(ob(0,s-1).map(function(){return 1/0}))):[].concat(cb(ob(0,s-1).map(function(){return-1/0})),[p]);return n>a?lb(m):m}if(h===p)return KH(h,s,i);var g=E6(h,p,l,i),j=g.step,v=g.tickMin,w=g.tickMax,x=If.rangeStep(v,w.add(new rt(.1).mul(j)),j);return n>a?lb(x):x}function VH(e,t){var n=vc(e,2),a=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=P6([a,s]),d=vc(l,2),u=d[0],h=d[1];if(u===-1/0||h===1/0)return[a,s];if(u===h)return[u];var p=Math.max(t,2),m=O6(new rt(h).sub(u).div(p-1),i,0),g=[].concat(cb(If.rangeStep(new rt(u),new rt(h).sub(new rt(.99).mul(m)),m)),[h]);return a>s?lb(g):g}var QH=C6(GH),YH=C6(VH),XH="Invariant failed";function Xs(e,t){throw new Error(XH)}var JH=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fo(e){"@babel/helpers - typeof";return fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fo(e)}function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nh.apply(this,arguments)}function ZH(e,t){return nK(e)||rK(e,t)||tK(e,t)||eK()}function eK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tK(e,t){if(e){if(typeof e=="string")return eA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eA(e,t)}}function eA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function rK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function nK(e){if(Array.isArray(e))return e}function aK(e,t){if(e==null)return{};var n=sK(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function sK(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function iK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oK(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,R6(a.key),a)}}function lK(e,t,n){return t&&oK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cK(e,t,n){return t=Sh(t),dK(e,_6()?Reflect.construct(t,n||[],Sh(e).constructor):t.apply(e,n))}function dK(e,t){if(t&&(fo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uK(e)}function uK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_6=function(){return!!e})()}function Sh(e){return Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sh(e)}function hK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ub(e,t)}function ub(e,t){return ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ub(e,t)}function T6(e,t,n){return t=R6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R6(e){var t=fK(e,"string");return fo(t)=="symbol"?t:t+""}function fK(e,t){if(fo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(fo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ld=(function(e){function t(){return iK(this,t),cK(this,t,arguments)}return hK(t,e),lK(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,l=a.width,d=a.dataKey,u=a.data,h=a.dataPointFormatter,p=a.xAxis,m=a.yAxis,g=aK(a,JH),j=Re(g,!1);this.props.direction==="x"&&p.type!=="number"&&Xs();var v=u.map(function(w){var x=h(w,d),S=x.x,P=x.y,O=x.value,N=x.errorVal;if(!N)return null;var A=[],C,E;if(Array.isArray(N)){var T=ZH(N,2);C=T[0],E=T[1]}else C=E=N;if(i==="vertical"){var R=p.scale,I=P+s,M=I+l,$=I-l,G=R(O-C),V=R(O+E);A.push({x1:V,y1:M,x2:V,y2:$}),A.push({x1:G,y1:I,x2:V,y2:I}),A.push({x1:G,y1:M,x2:G,y2:$})}else if(i==="horizontal"){var z=m.scale,U=S+s,H=U-l,B=U+l,D=z(O-C),L=z(O+E);A.push({x1:H,y1:L,x2:B,y2:L}),A.push({x1:U,y1:D,x2:U,y2:L}),A.push({x1:H,y1:D,x2:B,y2:D})}return X.createElement(Ve,Nh({className:"recharts-errorBar",key:"bar-".concat(A.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},j),A.map(function(q){return X.createElement("line",Nh({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return X.createElement(Ve,{className:"recharts-errorBars"},v)}}])})(X.Component);T6(ld,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});T6(ld,"displayName","ErrorBar");function bc(e){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(e)}function tA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tA(Object(n),!0).forEach(function(a){mK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mK(e,t,n){return t=pK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pK(e){var t=xK(e,"string");return bc(t)=="symbol"?t:t+""}function xK(e,t){if(bc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(bc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M6=function(t){var n=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,l=_r(n,Xa);if(!l)return null;var d=Xa.defaultProps,u=d!==void 0?bs(bs({},d),l.props):{},h;return l.props&&l.props.payload?h=l.props&&l.props.payload:i==="children"?h=(a||[]).reduce(function(p,m){var g=m.item,j=m.props,v=j.sectors||j.data||[];return p.concat(v.map(function(w){return{type:l.props.iconType||g.props.legendType,value:w.name,color:w.fill,payload:w}}))},[]):h=(a||[]).map(function(p){var m=p.item,g=m.type.defaultProps,j=g!==void 0?bs(bs({},g),m.props):{},v=j.dataKey,w=j.name,x=j.legendType,S=j.hide;return{inactive:S,dataKey:v,type:u.iconType||x||"square",color:hw(m),value:w||v,payload:j}}),bs(bs(bs({},u),Xa.getWithHeight(l,s)),{},{payload:h,item:l})};function jc(e){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(e)}function rA(e){return bK(e)||vK(e)||yK(e)||gK()}function gK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yK(e,t){if(e){if(typeof e=="string")return hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hb(e,t)}}function vK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bK(e){if(Array.isArray(e))return hb(e)}function hb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function nA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nA(Object(n),!0).forEach(function(a){Ui(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ui(e,t,n){return t=jK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jK(e){var t=wK(e,"string");return jc(t)=="symbol"?t:t+""}function wK(e,t){if(jc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(jc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lt(e,t,n){return qe(e)||qe(t)?n:Dt(t)?Mr(e,t,n):Fe(t)?t(e):n}function Jl(e,t,n,a){var s=bH(e,function(d){return Lt(d,t)});if(n==="number"){var i=s.filter(function(d){return ge(d)||parseFloat(d)});return i.length?[Rf(i),Tf(i)]:[1/0,-1/0]}var l=a?s.filter(function(d){return!qe(d)}):s;return l.map(function(d){return Dt(d)||d instanceof Date?d:""})}var NK=function(t){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,d=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(d<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var u=i.range,h=0;h<d;h++){var p=h>0?s[h-1].coordinate:s[d-1].coordinate,m=s[h].coordinate,g=h>=d-1?s[0].coordinate:s[h+1].coordinate,j=void 0;if(cr(m-p)!==cr(g-m)){var v=[];if(cr(g-m)===cr(u[1]-u[0])){j=g;var w=m+u[1]-u[0];v[0]=Math.min(w,(w+p)/2),v[1]=Math.max(w,(w+p)/2)}else{j=p;var x=g+u[1]-u[0];v[0]=Math.min(m,(x+m)/2),v[1]=Math.max(m,(x+m)/2)}var S=[Math.min(m,(j+m)/2),Math.max(m,(j+m)/2)];if(t>S[0]&&t<=S[1]||t>=v[0]&&t<=v[1]){l=s[h].index;break}}else{var P=Math.min(p,g),O=Math.max(p,g);if(t>(P+m)/2&&t<=(O+m)/2){l=s[h].index;break}}}else for(var N=0;N<d;N++)if(N===0&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N>0&&N<d-1&&t>(a[N].coordinate+a[N-1].coordinate)/2&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N===d-1&&t>(a[N].coordinate+a[N-1].coordinate)/2){l=a[N].index;break}return l},hw=function(t){var n,a=t,s=a.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?jt(jt({},t.type.defaultProps),t.props):t.props,l=i.stroke,d=i.fill,u;switch(s){case"Line":u=l;break;case"Area":case"Radar":u=l&&l!=="none"?l:d;break;default:u=d;break}return u},SK=function(t){var n=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var l={},d=Object.keys(i),u=0,h=d.length;u<h;u++)for(var p=i[d[u]].stackGroups,m=Object.keys(p),g=0,j=m.length;g<j;g++){var v=p[m[g]],w=v.items,x=v.cateAxisId,S=w.filter(function(E){return ra(E.type).indexOf("Bar")>=0});if(S&&S.length){var P=S[0].type.defaultProps,O=P!==void 0?jt(jt({},P),S[0].props):S[0].props,N=O.barSize,A=O[x];l[A]||(l[A]=[]);var C=qe(N)?n:N;l[A].push({item:S[0],stackList:S.slice(1),barSize:qe(C)?void 0:dr(C,a,0)})}}return l},kK=function(t){var n=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,l=i===void 0?[]:i,d=t.maxBarSize,u=l.length;if(u<1)return null;var h=dr(n,s,0,!0),p,m=[];if(l[0].barSize===+l[0].barSize){var g=!1,j=s/u,v=l.reduce(function(N,A){return N+A.barSize||0},0);v+=(u-1)*h,v>=s&&(v-=(u-1)*h,h=0),v>=s&&j>0&&(g=!0,j*=.9,v=u*j);var w=(s-v)/2>>0,x={offset:w-h,size:0};p=l.reduce(function(N,A){var C={item:A.item,position:{offset:x.offset+x.size+h,size:g?j:A.barSize}},E=[].concat(rA(N),[C]);return x=E[E.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(T){E.push({item:T,position:x})}),E},m)}else{var S=dr(a,s,0,!0);s-2*S-(u-1)*h<=0&&(h=0);var P=(s-2*S-(u-1)*h)/u;P>1&&(P>>=0);var O=d===+d?Math.min(P,d):P;p=l.reduce(function(N,A,C){var E=[].concat(rA(N),[{item:A.item,position:{offset:S+(P+h)*C+(P-O)/2,size:O}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(T){E.push({item:T,position:E[E.length-1].position})}),E},m)}return p},CK=function(t,n,a,s){var i=a.children,l=a.width,d=a.margin,u=l-(d.left||0)-(d.right||0),h=M6({children:i,legendWidth:u});if(h){var p=s||{},m=p.width,g=p.height,j=h.align,v=h.verticalAlign,w=h.layout;if((w==="vertical"||w==="horizontal"&&v==="middle")&&j!=="center"&&ge(t[j]))return jt(jt({},t),{},Ui({},j,t[j]+(m||0)));if((w==="horizontal"||w==="vertical"&&j==="center")&&v!=="middle"&&ge(t[v]))return jt(jt({},t),{},Ui({},v,t[v]+(g||0)))}return t},AK=function(t,n,a){return qe(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},I6=function(t,n,a,s,i){var l=n.props.children,d=Ir(l,ld).filter(function(h){return AK(s,i,h.props.direction)});if(d&&d.length){var u=d.map(function(h){return h.props.dataKey});return t.reduce(function(h,p){var m=Lt(p,a);if(qe(m))return h;var g=Array.isArray(m)?[Rf(m),Tf(m)]:[m,m],j=u.reduce(function(v,w){var x=Lt(p,w,0),S=g[0]-Math.abs(Array.isArray(x)?x[0]:x),P=g[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(S,v[0]),Math.max(P,v[1])]},[1/0,-1/0]);return[Math.min(j[0],h[0]),Math.max(j[1],h[1])]},[1/0,-1/0])}return null},PK=function(t,n,a,s,i){var l=n.map(function(d){return I6(t,d,a,i,s)}).filter(function(d){return!qe(d)});return l&&l.length?l.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]):null},$6=function(t,n,a,s,i){var l=n.map(function(u){var h=u.props.dataKey;return a==="number"&&h&&I6(t,u,h,s)||Jl(t,h,a,i)});if(a==="number")return l.reduce(function(u,h){return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);var d={};return l.reduce(function(u,h){for(var p=0,m=h.length;p<m;p++)d[h[p]]||(d[h[p]]=!0,u.push(h[p]));return u},[])},L6=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},D6=function(t,n,a,s){if(s)return t.map(function(u){return u.coordinate});var i,l,d=t.map(function(u){return u.coordinate===n&&(i=!0),u.coordinate===a&&(l=!0),u.coordinate});return i||d.push(n),l||d.push(a),d},ta=function(t,n,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,l=t.type,d=t.range,u=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,h=(n||a)&&l==="category"&&s.bandwidth?s.bandwidth()/u:0;if(h=t.axisType==="angleAxis"&&(d==null?void 0:d.length)>=2?cr(d[0]-d[1])*2*h:h,n&&(t.ticks||t.niceTicks)){var p=(t.ticks||t.niceTicks).map(function(m){var g=i?i.indexOf(m):m;return{coordinate:s(g)+h,value:m,offset:h}});return p.filter(function(m){return!td(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,g){return{coordinate:s(m)+h,value:m,index:g,offset:h}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(m){return{coordinate:s(m)+h,value:m,offset:h}}):s.domain().map(function(m,g){return{coordinate:s(m)+h,value:i?i[m]:m,index:g,offset:h}})},Sy=new WeakMap,Ru=function(t,n){if(typeof n!="function")return t;Sy.has(t)||Sy.set(t,new WeakMap);var a=Sy.get(t);if(a.has(n))return a.get(n);var s=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,s),s},F6=function(t,n,a){var s=t.scale,i=t.type,l=t.layout,d=t.axisType;if(s==="auto")return l==="radial"&&d==="radiusAxis"?{scale:fc(),realScaleType:"band"}:l==="radial"&&d==="angleAxis"?{scale:yh(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:Xl(),realScaleType:"point"}:i==="category"?{scale:fc(),realScaleType:"band"}:{scale:yh(),realScaleType:"linear"};if(Gs(s)){var u="scale".concat(gf(s));return{scale:(BC[u]||Xl)(),realScaleType:BC[u]?u:"point"}}return Fe(s)?{scale:s}:{scale:Xl(),realScaleType:"point"}},aA=1e-4,q6=function(t){var n=t.domain();if(!(!n||n.length<=2)){var a=n.length,s=t.range(),i=Math.min(s[0],s[1])-aA,l=Math.max(s[0],s[1])+aA,d=t(n[0]),u=t(n[a-1]);(d<i||d>l||u<i||u>l)&&t.domain([n[0],n[a-1]])}},OK=function(t,n){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===n)return t[a].position;return null},EK=function(t,n){if(!n||n.length!==2||!ge(n[0])||!ge(n[1]))return t;var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!ge(t[0])||t[0]<a)&&(i[0]=a),(!ge(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},_K=function(t){var n=t.length;if(!(n<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,l=0,d=0;d<n;++d){var u=td(t[d][a][1])?t[d][a][0]:t[d][a][1];u>=0?(t[d][a][0]=i,t[d][a][1]=i+u,i=t[d][a][1]):(t[d][a][0]=l,t[d][a][1]=l+u,l=t[d][a][1])}},TK=function(t){var n=t.length;if(!(n<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,l=0;l<n;++l){var d=td(t[l][a][1])?t[l][a][0]:t[l][a][1];d>=0?(t[l][a][0]=i,t[l][a][1]=i+d,i=t[l][a][1]):(t[l][a][0]=0,t[l][a][1]=0)}},RK={sign:_K,expand:bF,none:ao,silhouette:jF,wiggle:wF,positive:TK},MK=function(t,n,a){var s=n.map(function(d){return d.props.dataKey}),i=RK[a],l=vF().keys(s).value(function(d,u){return+Lt(d,u,0)}).order(Bv).offset(i);return l(t)},IK=function(t,n,a,s,i,l){if(!t)return null;var d=l?n.reverse():n,u={},h=d.reduce(function(m,g){var j,v=(j=g.type)!==null&&j!==void 0&&j.defaultProps?jt(jt({},g.type.defaultProps),g.props):g.props,w=v.stackId,x=v.hide;if(x)return m;var S=v[a],P=m[S]||{hasStack:!1,stackGroups:{}};if(Dt(w)){var O=P.stackGroups[w]||{numericAxisId:a,cateAxisId:s,items:[]};O.items.push(g),P.hasStack=!0,P.stackGroups[w]=O}else P.stackGroups[Do("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[g]};return jt(jt({},m),{},Ui({},S,P))},u),p={};return Object.keys(h).reduce(function(m,g){var j=h[g];if(j.hasStack){var v={};j.stackGroups=Object.keys(j.stackGroups).reduce(function(w,x){var S=j.stackGroups[x];return jt(jt({},w),{},Ui({},x,{numericAxisId:a,cateAxisId:s,items:S.items,stackedData:MK(t,S.items,i)}))},v)}return jt(jt({},m),{},Ui({},g,j))},p)},z6=function(t,n){var a=n.realScaleType,s=n.type,i=n.tickCount,l=n.originalDomain,d=n.allowDecimals,u=a||n.scale;if(u!=="auto"&&u!=="linear")return null;if(i&&s==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var h=t.domain();if(!h.length)return null;var p=QH(h,i,d);return t.domain([Rf(p),Tf(p)]),{niceTicks:p}}if(i&&s==="number"){var m=t.domain(),g=YH(m,i,d);return{niceTicks:g}}return null};function sA(e){var t=e.axis,n=e.ticks,a=e.bandSize,s=e.entry,i=e.index,l=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!qe(s[t.dataKey])){var d=Zu(n,"value",s[t.dataKey]);if(d)return d.coordinate+a/2}return n[i]?n[i].coordinate+a/2:null}var u=Lt(s,qe(l)?t.dataKey:l);return qe(u)?null:t.scale(u)}var iA=function(t){var n=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,l=t.entry,d=t.index;if(n.type==="category")return a[d]?a[d].coordinate+s:null;var u=Lt(l,n.dataKey,n.domain[d]);return qe(u)?null:n.scale(u)-i/2+s},$K=function(t){var n=t.numericAxis,a=n.scale.domain();if(n.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},LK=function(t,n){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?jt(jt({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Dt(i)){var l=n[i];if(l){var d=l.items.indexOf(t);return d>=0?l.stackedData[d]:null}}return null},DK=function(t){return t.reduce(function(n,a){return[Rf(a.concat([n[0]]).filter(ge)),Tf(a.concat([n[1]]).filter(ge))]},[1/0,-1/0])},B6=function(t,n,a){return Object.keys(t).reduce(function(s,i){var l=t[i],d=l.stackedData,u=d.reduce(function(h,p){var m=DK(p.slice(n,a+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],s[0]),Math.max(u[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},oA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fb=function(t,n,a){if(Fe(t))return t(n,a);if(!Array.isArray(t))return n;var s=[];if(ge(t[0]))s[0]=a?t[0]:Math.min(t[0],n[0]);else if(oA.test(t[0])){var i=+oA.exec(t[0])[1];s[0]=n[0]-i}else Fe(t[0])?s[0]=t[0](n[0]):s[0]=n[0];if(ge(t[1]))s[1]=a?t[1]:Math.max(t[1],n[1]);else if(lA.test(t[1])){var l=+lA.exec(t[1])[1];s[1]=n[1]+l}else Fe(t[1])?s[1]=t[1](n[1]):s[1]=n[1];return s},kh=function(t,n,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&n&&n.length>=2){for(var i=Fj(n,function(m){return m.coordinate}),l=1/0,d=1,u=i.length;d<u;d++){var h=i[d],p=i[d-1];l=Math.min((h.coordinate||0)-(p.coordinate||0),l)}return l===1/0?0:l}return a?void 0:0},cA=function(t,n,a){return!t||!t.length||od(t,Mr(a,"type.defaultProps.domain"))?n:t},U6=function(t,n){var a=t.type.defaultProps?jt(jt({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,l=a.unit,d=a.formatter,u=a.tooltipType,h=a.chartType,p=a.hide;return jt(jt({},Re(t,!1)),{},{dataKey:s,unit:l,formatter:d,name:i||s,color:hw(t),value:Lt(n,s),type:u,payload:n,chartType:h,hide:p})};function wc(e){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(e)}function dA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(n),!0).forEach(function(a){W6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function W6(e,t,n){return t=FK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FK(e){var t=qK(e,"string");return wc(t)=="symbol"?t:t+""}function qK(e,t){if(wc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(wc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zK(e,t){return HK(e)||WK(e,t)||UK(e,t)||BK()}function BK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UK(e,t){if(e){if(typeof e=="string")return uA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uA(e,t)}}function uA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function WK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function HK(e){if(Array.isArray(e))return e}var Ch=Math.PI/180,KK=function(t){return t*180/Math.PI},ot=function(t,n,a,s){return{x:t+Math.cos(-Ch*s)*a,y:n+Math.sin(-Ch*s)*a}},H6=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},GK=function(t,n,a,s,i){var l=t.width,d=t.height,u=t.startAngle,h=t.endAngle,p=dr(t.cx,l,l/2),m=dr(t.cy,d,d/2),g=H6(l,d,a),j=dr(t.innerRadius,g,0),v=dr(t.outerRadius,g,g*.8),w=Object.keys(n);return w.reduce(function(x,S){var P=n[S],O=P.domain,N=P.reversed,A;if(qe(P.range))s==="angleAxis"?A=[u,h]:s==="radiusAxis"&&(A=[j,v]),N&&(A=[A[1],A[0]]);else{A=P.range;var C=A,E=zK(C,2);u=E[0],h=E[1]}var T=F6(P,i),R=T.realScaleType,I=T.scale;I.domain(O).range(A),q6(I);var M=z6(I,Gn(Gn({},P),{},{realScaleType:R})),$=Gn(Gn(Gn({},P),M),{},{range:A,radius:v,realScaleType:R,scale:I,cx:p,cy:m,innerRadius:j,outerRadius:v,startAngle:u,endAngle:h});return Gn(Gn({},x),{},W6({},S,$))},{})},VK=function(t,n){var a=t.x,s=t.y,i=n.x,l=n.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-l,2))},QK=function(t,n){var a=t.x,s=t.y,i=n.cx,l=n.cy,d=VK({x:a,y:s},{x:i,y:l});if(d<=0)return{radius:d};var u=(a-i)/d,h=Math.acos(u);return s>l&&(h=2*Math.PI-h),{radius:d,angle:KK(h),angleInRadian:h}},YK=function(t){var n=t.startAngle,a=t.endAngle,s=Math.floor(n/360),i=Math.floor(a/360),l=Math.min(s,i);return{startAngle:n-l*360,endAngle:a-l*360}},XK=function(t,n){var a=n.startAngle,s=n.endAngle,i=Math.floor(a/360),l=Math.floor(s/360),d=Math.min(i,l);return t+d*360},hA=function(t,n){var a=t.x,s=t.y,i=QK({x:a,y:s},n),l=i.radius,d=i.angle,u=n.innerRadius,h=n.outerRadius;if(l<u||l>h)return!1;if(l===0)return!0;var p=YK(n),m=p.startAngle,g=p.endAngle,j=d,v;if(m<=g){for(;j>g;)j-=360;for(;j<m;)j+=360;v=j>=m&&j<=g}else{for(;j>m;)j-=360;for(;j<g;)j+=360;v=j>=g&&j<=m}return v?Gn(Gn({},n),{},{radius:l,angle:XK(j,n)}):null},K6=function(t){return!b.isValidElement(t)&&!Fe(t)&&typeof t!="boolean"?t.className:""};function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}var JK=["offset"];function ZK(e){return nG(e)||rG(e)||tG(e)||eG()}function eG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tG(e,t){if(e){if(typeof e=="string")return mb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mb(e,t)}}function rG(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nG(e){if(Array.isArray(e))return mb(e)}function mb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function aG(e,t){if(e==null)return{};var n=sG(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function sG(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function fA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(n),!0).forEach(function(a){iG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function iG(e,t,n){return t=oG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oG(e){var t=lG(e,"string");return Nc(t)=="symbol"?t:t+""}function lG(e,t){if(Nc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Nc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sc(){return Sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sc.apply(this,arguments)}var cG=function(t){var n=t.value,a=t.formatter,s=qe(t.children)?n:t.children;return Fe(a)?a(s):s},dG=function(t,n){var a=cr(n-t),s=Math.min(Math.abs(n-t),360);return a*s},uG=function(t,n,a){var s=t.position,i=t.viewBox,l=t.offset,d=t.className,u=i,h=u.cx,p=u.cy,m=u.innerRadius,g=u.outerRadius,j=u.startAngle,v=u.endAngle,w=u.clockWise,x=(m+g)/2,S=dG(j,v),P=S>=0?1:-1,O,N;s==="insideStart"?(O=j+P*l,N=w):s==="insideEnd"?(O=v-P*l,N=!w):s==="end"&&(O=v+P*l,N=w),N=S<=0?N:!N;var A=ot(h,p,x,O),C=ot(h,p,x,O+(N?1:-1)*359),E="M".concat(A.x,",").concat(A.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(N?0:1,`,
    `).concat(C.x,",").concat(C.y),T=qe(t.id)?Do("recharts-radial-line-"):t.id;return X.createElement("text",Sc({},a,{dominantBaseline:"central",className:ze("recharts-radial-bar-label",d)}),X.createElement("defs",null,X.createElement("path",{id:T,d:E})),X.createElement("textPath",{xlinkHref:"#".concat(T)},n))},hG=function(t){var n=t.viewBox,a=t.offset,s=t.position,i=n,l=i.cx,d=i.cy,u=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,g=(p+m)/2;if(s==="outside"){var j=ot(l,d,h+a,g),v=j.x,w=j.y;return{x:v,y:w,textAnchor:v>=l?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"end"};var x=(u+h)/2,S=ot(l,d,x,g),P=S.x,O=S.y;return{x:P,y:O,textAnchor:"middle",verticalAnchor:"middle"}},fG=function(t){var n=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,l=n,d=l.x,u=l.y,h=l.width,p=l.height,m=p>=0?1:-1,g=m*s,j=m>0?"end":"start",v=m>0?"start":"end",w=h>=0?1:-1,x=w*s,S=w>0?"end":"start",P=w>0?"start":"end";if(i==="top"){var O={x:d+h/2,y:u-m*s,textAnchor:"middle",verticalAnchor:j};return Mt(Mt({},O),a?{height:Math.max(u-a.y,0),width:h}:{})}if(i==="bottom"){var N={x:d+h/2,y:u+p+g,textAnchor:"middle",verticalAnchor:v};return Mt(Mt({},N),a?{height:Math.max(a.y+a.height-(u+p),0),width:h}:{})}if(i==="left"){var A={x:d-x,y:u+p/2,textAnchor:S,verticalAnchor:"middle"};return Mt(Mt({},A),a?{width:Math.max(A.x-a.x,0),height:p}:{})}if(i==="right"){var C={x:d+h+x,y:u+p/2,textAnchor:P,verticalAnchor:"middle"};return Mt(Mt({},C),a?{width:Math.max(a.x+a.width-C.x,0),height:p}:{})}var E=a?{width:h,height:p}:{};return i==="insideLeft"?Mt({x:d+x,y:u+p/2,textAnchor:P,verticalAnchor:"middle"},E):i==="insideRight"?Mt({x:d+h-x,y:u+p/2,textAnchor:S,verticalAnchor:"middle"},E):i==="insideTop"?Mt({x:d+h/2,y:u+g,textAnchor:"middle",verticalAnchor:v},E):i==="insideBottom"?Mt({x:d+h/2,y:u+p-g,textAnchor:"middle",verticalAnchor:j},E):i==="insideTopLeft"?Mt({x:d+x,y:u+g,textAnchor:P,verticalAnchor:v},E):i==="insideTopRight"?Mt({x:d+h-x,y:u+g,textAnchor:S,verticalAnchor:v},E):i==="insideBottomLeft"?Mt({x:d+x,y:u+p-g,textAnchor:P,verticalAnchor:j},E):i==="insideBottomRight"?Mt({x:d+h-x,y:u+p-g,textAnchor:S,verticalAnchor:j},E):Lo(i)&&(ge(i.x)||Ps(i.x))&&(ge(i.y)||Ps(i.y))?Mt({x:d+dr(i.x,h),y:u+dr(i.y,p),textAnchor:"end",verticalAnchor:"end"},E):Mt({x:d+h/2,y:u+p/2,textAnchor:"middle",verticalAnchor:"middle"},E)},mG=function(t){return"cx"in t&&ge(t.cx)};function Kt(e){var t=e.offset,n=t===void 0?5:t,a=aG(e,JK),s=Mt({offset:n},a),i=s.viewBox,l=s.position,d=s.value,u=s.children,h=s.content,p=s.className,m=p===void 0?"":p,g=s.textBreakAll;if(!i||qe(d)&&qe(u)&&!b.isValidElement(h)&&!Fe(h))return null;if(b.isValidElement(h))return b.cloneElement(h,s);var j;if(Fe(h)){if(j=b.createElement(h,s),b.isValidElement(j))return j}else j=cG(s);var v=mG(i),w=Re(s,!0);if(v&&(l==="insideStart"||l==="insideEnd"||l==="end"))return uG(s,j,w);var x=v?hG(s):fG(s);return X.createElement(Qs,Sc({className:ze("recharts-label",m)},w,x,{breakAll:g}),j)}Kt.displayName="Label";var G6=function(t){var n=t.cx,a=t.cy,s=t.angle,i=t.startAngle,l=t.endAngle,d=t.r,u=t.radius,h=t.innerRadius,p=t.outerRadius,m=t.x,g=t.y,j=t.top,v=t.left,w=t.width,x=t.height,S=t.clockWise,P=t.labelViewBox;if(P)return P;if(ge(w)&&ge(x)){if(ge(m)&&ge(g))return{x:m,y:g,width:w,height:x};if(ge(j)&&ge(v))return{x:j,y:v,width:w,height:x}}return ge(m)&&ge(g)?{x:m,y:g,width:0,height:0}:ge(n)&&ge(a)?{cx:n,cy:a,startAngle:i||s||0,endAngle:l||s||0,innerRadius:h||0,outerRadius:p||u||d||0,clockWise:S}:t.viewBox?t.viewBox:{}},pG=function(t,n){return t?t===!0?X.createElement(Kt,{key:"label-implicit",viewBox:n}):Dt(t)?X.createElement(Kt,{key:"label-implicit",viewBox:n,value:t}):b.isValidElement(t)?t.type===Kt?b.cloneElement(t,{key:"label-implicit",viewBox:n}):X.createElement(Kt,{key:"label-implicit",content:t,viewBox:n}):Fe(t)?X.createElement(Kt,{key:"label-implicit",content:t,viewBox:n}):Lo(t)?X.createElement(Kt,Sc({viewBox:n},t,{key:"label-implicit"})):null:null},xG=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=G6(t),l=Ir(s,Kt).map(function(u,h){return b.cloneElement(u,{viewBox:n||i,key:"label-".concat(h)})});if(!a)return l;var d=pG(t.label,n||i);return[d].concat(ZK(l))};Kt.parseViewBox=G6;Kt.renderCallByParent=xG;var ky,mA;function gG(){if(mA)return ky;mA=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return ky=e,ky}var yG=gG();const vG=Ze(yG);function kc(e){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(e)}var bG=["valueAccessor"],jG=["data","dataKey","clockWise","id","textBreakAll"];function wG(e){return CG(e)||kG(e)||SG(e)||NG()}function NG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SG(e,t){if(e){if(typeof e=="string")return pb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pb(e,t)}}function kG(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CG(e){if(Array.isArray(e))return pb(e)}function pb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ah(){return Ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ah.apply(this,arguments)}function pA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function xA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pA(Object(n),!0).forEach(function(a){AG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function AG(e,t,n){return t=PG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PG(e){var t=OG(e,"string");return kc(t)=="symbol"?t:t+""}function OG(e,t){if(kc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(kc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gA(e,t){if(e==null)return{};var n=EG(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function EG(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var _G=function(t){return Array.isArray(t.value)?vG(t.value):t.value};function aa(e){var t=e.valueAccessor,n=t===void 0?_G:t,a=gA(e,bG),s=a.data,i=a.dataKey,l=a.clockWise,d=a.id,u=a.textBreakAll,h=gA(a,jG);return!s||!s.length?null:X.createElement(Ve,{className:"recharts-label-list"},s.map(function(p,m){var g=qe(i)?n(p,m):Lt(p&&p.payload,i),j=qe(d)?{}:{id:"".concat(d,"-").concat(m)};return X.createElement(Kt,Ah({},Re(p,!0),h,j,{parentViewBox:p.parentViewBox,value:g,textBreakAll:u,viewBox:Kt.parseViewBox(qe(l)?p:xA(xA({},p),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}aa.displayName="LabelList";function TG(e,t){return e?e===!0?X.createElement(aa,{key:"labelList-implicit",data:t}):X.isValidElement(e)||Fe(e)?X.createElement(aa,{key:"labelList-implicit",data:t,content:e}):Lo(e)?X.createElement(aa,Ah({data:t},e,{key:"labelList-implicit"})):null:null}function RG(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=Ir(a,aa).map(function(l,d){return b.cloneElement(l,{data:t,key:"labelList-".concat(d)})});if(!n)return s;var i=TG(e.label,t);return[i].concat(wG(s))}aa.renderCallByParent=RG;function Cc(e){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cc(e)}function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xb.apply(this,arguments)}function yA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function vA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yA(Object(n),!0).forEach(function(a){MG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function MG(e,t,n){return t=IG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IG(e){var t=$G(e,"string");return Cc(t)=="symbol"?t:t+""}function $G(e,t){if(Cc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Cc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LG=function(t,n){var a=cr(n-t),s=Math.min(Math.abs(n-t),359.999);return a*s},Mu=function(t){var n=t.cx,a=t.cy,s=t.radius,i=t.angle,l=t.sign,d=t.isExternal,u=t.cornerRadius,h=t.cornerIsExternal,p=u*(d?1:-1)+s,m=Math.asin(u/p)/Ch,g=h?i:i+l*m,j=ot(n,a,p,g),v=ot(n,a,s,g),w=h?i-l*m:i,x=ot(n,a,p*Math.cos(m*Ch),w);return{center:j,circleTangency:v,lineTangency:x,theta:m}},V6=function(t){var n=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,l=t.startAngle,d=t.endAngle,u=LG(l,d),h=l+u,p=ot(n,a,i,l),m=ot(n,a,i,h),g="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(l>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(s>0){var j=ot(n,a,s,l),v=ot(n,a,s,h);g+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(l<=h),`,
            `).concat(j.x,",").concat(j.y," Z")}else g+="L ".concat(n,",").concat(a," Z");return g},DG=function(t){var n=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,l=t.cornerRadius,d=t.forceCornerRadius,u=t.cornerIsExternal,h=t.startAngle,p=t.endAngle,m=cr(p-h),g=Mu({cx:n,cy:a,radius:i,angle:h,sign:m,cornerRadius:l,cornerIsExternal:u}),j=g.circleTangency,v=g.lineTangency,w=g.theta,x=Mu({cx:n,cy:a,radius:i,angle:p,sign:-m,cornerRadius:l,cornerIsExternal:u}),S=x.circleTangency,P=x.lineTangency,O=x.theta,N=u?Math.abs(h-p):Math.abs(h-p)-w-O;if(N<0)return d?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):V6({cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:h,endAngle:p});var A="M ".concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(m<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(P.x,",").concat(P.y,`
  `);if(s>0){var C=Mu({cx:n,cy:a,radius:s,angle:h,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),E=C.circleTangency,T=C.lineTangency,R=C.theta,I=Mu({cx:n,cy:a,radius:s,angle:p,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),M=I.circleTangency,$=I.lineTangency,G=I.theta,V=u?Math.abs(h-p):Math.abs(h-p)-R-G;if(V<0&&l===0)return"".concat(A,"L").concat(n,",").concat(a,"Z");A+="L".concat($.x,",").concat($.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(V>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(T.x,",").concat(T.y,"Z")}else A+="L".concat(n,",").concat(a,"Z");return A},FG={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Q6=function(t){var n=vA(vA({},FG),t),a=n.cx,s=n.cy,i=n.innerRadius,l=n.outerRadius,d=n.cornerRadius,u=n.forceCornerRadius,h=n.cornerIsExternal,p=n.startAngle,m=n.endAngle,g=n.className;if(l<i||p===m)return null;var j=ze("recharts-sector",g),v=l-i,w=dr(d,v,0,!0),x;return w>0&&Math.abs(p-m)<360?x=DG({cx:a,cy:s,innerRadius:i,outerRadius:l,cornerRadius:Math.min(w,v/2),forceCornerRadius:u,cornerIsExternal:h,startAngle:p,endAngle:m}):x=V6({cx:a,cy:s,innerRadius:i,outerRadius:l,startAngle:p,endAngle:m}),X.createElement("path",xb({},Re(n,!0),{className:j,d:x,role:"img"}))};function Ac(e){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}function gb(){return gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gb.apply(this,arguments)}function bA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function jA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(n),!0).forEach(function(a){qG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qG(e,t,n){return t=zG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zG(e){var t=BG(e,"string");return Ac(t)=="symbol"?t:t+""}function BG(e,t){if(Ac(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ac(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wA={curveBasisClosed:lF,curveBasisOpen:cF,curveBasis:oF,curveBumpX:G9,curveBumpY:V9,curveLinearClosed:dF,curveLinear:vf,curveMonotoneX:uF,curveMonotoneY:hF,curveNatural:fF,curveStep:mF,curveStepAfter:xF,curveStepBefore:pF},Iu=function(t){return t.x===+t.x&&t.y===+t.y},Fl=function(t){return t.x},ql=function(t){return t.y},UG=function(t,n){if(Fe(t))return t;var a="curve".concat(gf(t));return(a==="curveMonotone"||a==="curveBump")&&n?wA["".concat(a).concat(n==="vertical"?"Y":"X")]:wA[a]||vf},WG=function(t){var n=t.type,a=n===void 0?"linear":n,s=t.points,i=s===void 0?[]:s,l=t.baseLine,d=t.layout,u=t.connectNulls,h=u===void 0?!1:u,p=UG(a,d),m=h?i.filter(function(w){return Iu(w)}):i,g;if(Array.isArray(l)){var j=h?l.filter(function(w){return Iu(w)}):l,v=m.map(function(w,x){return jA(jA({},w),{},{base:j[x]})});return d==="vertical"?g=Cu().y(ql).x1(Fl).x0(function(w){return w.base.x}):g=Cu().x(Fl).y1(ql).y0(function(w){return w.base.y}),g.defined(Iu).curve(p),g(v)}return d==="vertical"&&ge(l)?g=Cu().y(ql).x1(Fl).x0(l):ge(l)?g=Cu().x(Fl).y1(ql).y0(l):g=VO().x(Fl).y(ql),g.defined(Iu).curve(p),g(m)},Ph=function(t){var n=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var l=a&&a.length?WG(t):s;return b.createElement("path",gb({},Re(t,!1),eh(t),{className:ze("recharts-curve",n),d:l,ref:i}))},Cy={exports:{}},Ay,NA;function HG(){if(NA)return Ay;NA=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ay=e,Ay}var Py,SA;function KG(){if(SA)return Py;SA=1;var e=HG();function t(){}function n(){}return n.resetWarningCache=t,Py=function(){function a(l,d,u,h,p,m){if(m!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},Py}var kA;function GG(){return kA||(kA=1,Cy.exports=KG()()),Cy.exports}var VG=GG();const Xe=Ze(VG),{getOwnPropertyNames:QG,getOwnPropertySymbols:YG}=Object,{hasOwnProperty:XG}=Object.prototype;function Oy(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function $u(e){return function(n,a,s){if(!n||!a||typeof n!="object"||typeof a!="object")return e(n,a,s);const{cache:i}=s,l=i.get(n),d=i.get(a);if(l&&d)return l===a&&d===n;i.set(n,a),i.set(a,n);const u=e(n,a,s);return i.delete(n),i.delete(a),u}}function JG(e){return e!=null?e[Symbol.toStringTag]:void 0}function CA(e){return QG(e).concat(YG(e))}const ZG=Object.hasOwn||((e,t)=>XG.call(e,t));function ai(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const eV="__v",tV="__o",rV="_owner",{getOwnPropertyDescriptor:AA,keys:PA}=Object;function nV(e,t){return e.byteLength===t.byteLength&&Oh(new Uint8Array(e),new Uint8Array(t))}function aV(e,t,n){let a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function sV(e,t){return e.byteLength===t.byteLength&&Oh(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function iV(e,t){return ai(e.getTime(),t.getTime())}function oV(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function lV(e,t){return e===t}function OA(e,t,n){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.entries();let l,d,u=0;for(;(l=i.next())&&!l.done;){const h=t.entries();let p=!1,m=0;for(;(d=h.next())&&!d.done;){if(s[m]){m++;continue}const g=l.value,j=d.value;if(n.equals(g[0],j[0],u,m,e,t,n)&&n.equals(g[1],j[1],g[0],j[0],e,t,n)){p=s[m]=!0;break}m++}if(!p)return!1;u++}return!0}const cV=ai;function dV(e,t,n){const a=PA(e);let s=a.length;if(PA(t).length!==s)return!1;for(;s-- >0;)if(!Y6(e,t,n,a[s]))return!1;return!0}function zl(e,t,n){const a=CA(e);let s=a.length;if(CA(t).length!==s)return!1;let i,l,d;for(;s-- >0;)if(i=a[s],!Y6(e,t,n,i)||(l=AA(e,i),d=AA(t,i),(l||d)&&(!l||!d||l.configurable!==d.configurable||l.enumerable!==d.enumerable||l.writable!==d.writable)))return!1;return!0}function uV(e,t){return ai(e.valueOf(),t.valueOf())}function hV(e,t){return e.source===t.source&&e.flags===t.flags}function EA(e,t,n){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.values();let l,d;for(;(l=i.next())&&!l.done;){const u=t.values();let h=!1,p=0;for(;(d=u.next())&&!d.done;){if(!s[p]&&n.equals(l.value,d.value,l.value,d.value,e,t,n)){h=s[p]=!0;break}p++}if(!h)return!1}return!0}function Oh(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function fV(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Y6(e,t,n,a){return(a===rV||a===tV||a===eV)&&(e.$$typeof||t.$$typeof)?!0:ZG(t,a)&&n.equals(e[a],t[a],a,a,e,t,n)}const mV="[object ArrayBuffer]",pV="[object Arguments]",xV="[object Boolean]",gV="[object DataView]",yV="[object Date]",vV="[object Error]",bV="[object Map]",jV="[object Number]",wV="[object Object]",NV="[object RegExp]",SV="[object Set]",kV="[object String]",CV={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},AV="[object URL]",PV=Object.prototype.toString;function OV({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:a,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:l,areNumbersEqual:d,areObjectsEqual:u,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:g,areUrlsEqual:j,unknownTagComparators:v}){return function(x,S,P){if(x===S)return!0;if(x==null||S==null)return!1;const O=typeof x;if(O!==typeof S)return!1;if(O!=="object")return O==="number"?d(x,S,P):O==="function"?i(x,S,P):!1;const N=x.constructor;if(N!==S.constructor)return!1;if(N===Object)return u(x,S,P);if(Array.isArray(x))return t(x,S,P);if(N===Date)return a(x,S,P);if(N===RegExp)return p(x,S,P);if(N===Map)return l(x,S,P);if(N===Set)return m(x,S,P);const A=PV.call(x);if(A===yV)return a(x,S,P);if(A===NV)return p(x,S,P);if(A===bV)return l(x,S,P);if(A===SV)return m(x,S,P);if(A===wV)return typeof x.then!="function"&&typeof S.then!="function"&&u(x,S,P);if(A===AV)return j(x,S,P);if(A===vV)return s(x,S,P);if(A===pV)return u(x,S,P);if(CV[A])return g(x,S,P);if(A===mV)return e(x,S,P);if(A===gV)return n(x,S,P);if(A===xV||A===jV||A===kV)return h(x,S,P);if(v){let C=v[A];if(!C){const E=JG(x);E&&(C=v[E])}if(C)return C(x,S,P)}return!1}}function EV({circular:e,createCustomConfig:t,strict:n}){let a={areArrayBuffersEqual:nV,areArraysEqual:n?zl:aV,areDataViewsEqual:sV,areDatesEqual:iV,areErrorsEqual:oV,areFunctionsEqual:lV,areMapsEqual:n?Oy(OA,zl):OA,areNumbersEqual:cV,areObjectsEqual:n?zl:dV,arePrimitiveWrappersEqual:uV,areRegExpsEqual:hV,areSetsEqual:n?Oy(EA,zl):EA,areTypedArraysEqual:n?Oy(Oh,zl):Oh,areUrlsEqual:fV,unknownTagComparators:void 0};if(t&&(a=Object.assign({},a,t(a))),e){const s=$u(a.areArraysEqual),i=$u(a.areMapsEqual),l=$u(a.areObjectsEqual),d=$u(a.areSetsEqual);a=Object.assign({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:l,areSetsEqual:d})}return a}function _V(e){return function(t,n,a,s,i,l,d){return e(t,n,d)}}function TV({circular:e,comparator:t,createState:n,equals:a,strict:s}){if(n)return function(d,u){const{cache:h=e?new WeakMap:void 0,meta:p}=n();return t(d,u,{cache:h,equals:a,meta:p,strict:s})};if(e)return function(d,u){return t(d,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};const i={cache:void 0,equals:a,meta:void 0,strict:s};return function(d,u){return t(d,u,i)}}const RV=is();is({strict:!0});is({circular:!0});is({circular:!0,strict:!0});is({createInternalComparator:()=>ai});is({strict:!0,createInternalComparator:()=>ai});is({circular:!0,createInternalComparator:()=>ai});is({circular:!0,createInternalComparator:()=>ai,strict:!0});function is(e={}){const{circular:t=!1,createInternalComparator:n,createState:a,strict:s=!1}=e,i=EV(e),l=OV(i),d=n?n(l):_V(l);return TV({circular:t,comparator:l,createState:a,equals:d,strict:s})}function MV(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function _A(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function s(i){n<0&&(n=i),i-n>t?(e(i),n=-1):MV(s)};requestAnimationFrame(a)}function yb(e){"@babel/helpers - typeof";return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yb(e)}function IV(e){return FV(e)||DV(e)||LV(e)||$V()}function $V(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LV(e,t){if(e){if(typeof e=="string")return TA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TA(e,t)}}function TA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function DV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FV(e){if(Array.isArray(e))return e}function qV(){var e={},t=function(){return null},n=!1,a=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,d=IV(l),u=d[0],h=d.slice(1);if(typeof u=="number"){_A(s.bind(null,h),u);return}s(u),_A(s.bind(null,h));return}yb(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Pc(e){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc(e)}function RA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function MA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RA(Object(n),!0).forEach(function(a){X6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function X6(e,t,n){return t=zV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zV(e){var t=BV(e,"string");return Pc(t)==="symbol"?t:String(t)}function BV(e,t){if(Pc(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Pc(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UV=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},WV=function(t){return t},HV=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Zl=function(t,n){return Object.keys(n).reduce(function(a,s){return MA(MA({},a),{},X6({},s,t(s,n[s])))},{})},IA=function(t,n,a){return t.map(function(s){return"".concat(HV(s)," ").concat(n,"ms ").concat(a)}).join(",")};function KV(e,t){return QV(e)||VV(e,t)||J6(e,t)||GV()}function GV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VV(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function QV(e){if(Array.isArray(e))return e}function YV(e){return ZV(e)||JV(e)||J6(e)||XV()}function XV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J6(e,t){if(e){if(typeof e=="string")return vb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vb(e,t)}}function JV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZV(e){if(Array.isArray(e))return vb(e)}function vb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Eh=1e-4,Z6=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},e_=function(t,n){return t.map(function(a,s){return a*Math.pow(n,s)}).reduce(function(a,s){return a+s})},$A=function(t,n){return function(a){var s=Z6(t,n);return e_(s,a)}},eQ=function(t,n){return function(a){var s=Z6(t,n),i=[].concat(YV(s.map(function(l,d){return l*d}).slice(1)),[0]);return e_(i,a)}},LA=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0],i=n[1],l=n[2],d=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,l=1,d=1;break;case"ease":s=.25,i=.1,l=.25,d=1;break;case"ease-in":s=.42,i=0,l=1,d=1;break;case"ease-out":s=.42,i=0,l=.58,d=1;break;case"ease-in-out":s=0,i=0,l=.58,d=1;break;default:{var u=n[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var h=u[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),p=KV(h,4);s=p[0],i=p[1],l=p[2],d=p[3]}}}var m=$A(s,l),g=$A(i,d),j=eQ(s,l),v=function(S){return S>1?1:S<0?0:S},w=function(S){for(var P=S>1?1:S,O=P,N=0;N<8;++N){var A=m(O)-P,C=j(O);if(Math.abs(A-P)<Eh||C<Eh)return g(O);O=v(O-A/C)}return g(O)};return w.isStepper=!1,w},tQ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,a=n===void 0?100:n,s=t.damping,i=s===void 0?8:s,l=t.dt,d=l===void 0?17:l,u=function(p,m,g){var j=-(p-m)*a,v=g*i,w=g+(j-v)*d/1e3,x=g*d/1e3+p;return Math.abs(x-m)<Eh&&Math.abs(w)<Eh?[m,0]:[x,w]};return u.isStepper=!0,u.dt=d,u},rQ=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return LA(s);case"spring":return tQ();default:if(s.split("(")[0]==="cubic-bezier")return LA(s)}return typeof s=="function"?s:null};function Oc(e){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(e)}function DA(e){return sQ(e)||aQ(e)||t_(e)||nQ()}function nQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sQ(e){if(Array.isArray(e))return jb(e)}function FA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(n),!0).forEach(function(a){bb(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bb(e,t,n){return t=iQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iQ(e){var t=oQ(e,"string");return Oc(t)==="symbol"?t:String(t)}function oQ(e,t){if(Oc(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Oc(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lQ(e,t){return uQ(e)||dQ(e,t)||t_(e,t)||cQ()}function cQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t_(e,t){if(e){if(typeof e=="string")return jb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jb(e,t)}}function jb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function dQ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function uQ(e){if(Array.isArray(e))return e}var _h=function(t,n,a){return t+(n-t)*a},wb=function(t){var n=t.from,a=t.to;return n!==a},hQ=function e(t,n,a){var s=Zl(function(i,l){if(wb(l)){var d=t(l.from,l.to,l.velocity),u=lQ(d,2),h=u[0],p=u[1];return Yt(Yt({},l),{},{from:h,velocity:p})}return l},n);return a<1?Zl(function(i,l){return wb(l)?Yt(Yt({},l),{},{velocity:_h(l.velocity,s[i].velocity,a),from:_h(l.from,s[i].from,a)}):l},n):e(t,s,a-1)};const fQ=(function(e,t,n,a,s){var i=UV(e,t),l=i.reduce(function(x,S){return Yt(Yt({},x),{},bb({},S,[e[S],t[S]]))},{}),d=i.reduce(function(x,S){return Yt(Yt({},x),{},bb({},S,{from:e[S],velocity:0,to:t[S]}))},{}),u=-1,h,p,m=function(){return null},g=function(){return Zl(function(S,P){return P.from},d)},j=function(){return!Object.values(d).filter(wb).length},v=function(S){h||(h=S);var P=S-h,O=P/n.dt;d=hQ(n,d,O),s(Yt(Yt(Yt({},e),t),g())),h=S,j()||(u=requestAnimationFrame(m))},w=function(S){p||(p=S);var P=(S-p)/a,O=Zl(function(A,C){return _h.apply(void 0,DA(C).concat([n(P)]))},l);if(s(Yt(Yt(Yt({},e),t),O)),P<1)u=requestAnimationFrame(m);else{var N=Zl(function(A,C){return _h.apply(void 0,DA(C).concat([n(1)]))},l);s(Yt(Yt(Yt({},e),t),N))}};return m=n.isStepper?v:w,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(u)}}});function mo(e){"@babel/helpers - typeof";return mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mo(e)}var mQ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function pQ(e,t){if(e==null)return{};var n=xQ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function xQ(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Ey(e){return bQ(e)||vQ(e)||yQ(e)||gQ()}function gQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yQ(e,t){if(e){if(typeof e=="string")return Nb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nb(e,t)}}function vQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bQ(e){if(Array.isArray(e))return Nb(e)}function Nb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function qA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(n),!0).forEach(function(a){Vl(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Vl(e,t,n){return t=r_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wQ(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r_(a.key),a)}}function NQ(e,t,n){return t&&wQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function r_(e){var t=SQ(e,"string");return mo(t)==="symbol"?t:String(t)}function SQ(e,t){if(mo(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(mo(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sb(e,t)}function Sb(e,t){return Sb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Sb(e,t)}function CQ(e){var t=AQ();return function(){var a=Th(e),s;if(t){var i=Th(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return kb(this,s)}}function kb(e,t){if(t&&(mo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cb(e)}function Cb(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AQ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Th(e){return Th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Th(e)}var Rn=(function(e){kQ(n,e);var t=CQ(n);function n(a,s){var i;jQ(this,n),i=t.call(this,a,s);var l=i.props,d=l.isActive,u=l.attributeName,h=l.from,p=l.to,m=l.steps,g=l.children,j=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Cb(i)),i.changeStyle=i.changeStyle.bind(Cb(i)),!d||j<=0)return i.state={style:{}},typeof g=="function"&&(i.state={style:p}),kb(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof g=="function")return i.state={style:h},kb(i);i.state={style:u?Vl({},u,h):h}}else i.state={style:{}};return i}return NQ(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,l=s.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,l=i.isActive,d=i.canBegin,u=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,g=this.state.style;if(d){if(!l){var j={style:u?Vl({},u,p):p};this.state&&g&&(u&&g[u]!==p||!u&&g!==p)&&this.setState(j);return}if(!(RV(s.to,p)&&s.canBegin&&s.isActive)){var v=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var w=v||h?m:s.to;if(this.state&&g){var x={style:u?Vl({},u,w):w};(u&&g[u]!==w||!u&&g!==w)&&this.setState(x)}this.runAnimation(cn(cn({},this.props),{},{from:w,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,l=s.from,d=s.to,u=s.duration,h=s.easing,p=s.begin,m=s.onAnimationEnd,g=s.onAnimationStart,j=fQ(l,d,rQ(h),u,this.changeStyle),v=function(){i.stopJSAnimation=j()};this.manager.start([g,p,v,u,m])}},{key:"runStepAnimation",value:function(s){var i=this,l=s.steps,d=s.begin,u=s.onAnimationStart,h=l[0],p=h.style,m=h.duration,g=m===void 0?0:m,j=function(w,x,S){if(S===0)return w;var P=x.duration,O=x.easing,N=O===void 0?"ease":O,A=x.style,C=x.properties,E=x.onAnimationEnd,T=S>0?l[S-1]:x,R=C||Object.keys(A);if(typeof N=="function"||N==="spring")return[].concat(Ey(w),[i.runJSAnimation.bind(i,{from:T.style,to:A,duration:P,easing:N}),P]);var I=IA(R,P,N),M=cn(cn(cn({},T.style),A),{},{transition:I});return[].concat(Ey(w),[M,P,E]).filter(WV)};return this.manager.start([u].concat(Ey(l.reduce(j,[p,Math.max(g,d)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=qV());var i=s.begin,l=s.duration,d=s.attributeName,u=s.to,h=s.easing,p=s.onAnimationStart,m=s.onAnimationEnd,g=s.steps,j=s.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof h=="function"||typeof j=="function"||h==="spring"){this.runJSAnimation(s);return}if(g.length>1){this.runStepAnimation(s);return}var w=d?Vl({},d,u):u,x=IA(Object.keys(w),l,h);v.start([p,i,cn(cn({},w),{},{transition:x}),l,m])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var l=s.duration;s.attributeName,s.easing;var d=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var u=pQ(s,mQ),h=b.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!d||h===0||l<=0)return i;var m=function(j){var v=j.props,w=v.style,x=w===void 0?{}:w,S=v.className,P=b.cloneElement(j,cn(cn({},u),{},{style:cn(cn({},x),p),className:S}));return P};return h===1?m(b.Children.only(i)):X.createElement("div",null,b.Children.map(i,function(g){return m(g)}))}}]),n})(b.PureComponent);Rn.displayName="Animate";Rn.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Rn.propTypes={from:Xe.oneOfType([Xe.object,Xe.string]),to:Xe.oneOfType([Xe.object,Xe.string]),attributeName:Xe.string,duration:Xe.number,begin:Xe.number,easing:Xe.oneOfType([Xe.string,Xe.func]),steps:Xe.arrayOf(Xe.shape({duration:Xe.number.isRequired,style:Xe.object.isRequired,easing:Xe.oneOfType([Xe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Xe.func]),properties:Xe.arrayOf("string"),onAnimationEnd:Xe.func})),children:Xe.oneOfType([Xe.node,Xe.func]),isActive:Xe.bool,canBegin:Xe.bool,onAnimationEnd:Xe.func,shouldReAnimate:Xe.bool,onAnimationStart:Xe.func,onAnimationReStart:Xe.func};function Ec(e){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ec(e)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rh.apply(this,arguments)}function PQ(e,t){return TQ(e)||_Q(e,t)||EQ(e,t)||OQ()}function OQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQ(e,t){if(e){if(typeof e=="string")return zA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zA(e,t)}}function zA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _Q(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function TQ(e){if(Array.isArray(e))return e}function BA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function UA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(n),!0).forEach(function(a){RQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RQ(e,t,n){return t=MQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MQ(e){var t=IQ(e,"string");return Ec(t)=="symbol"?t:t+""}function IQ(e,t){if(Ec(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ec(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WA=function(t,n,a,s,i){var l=Math.min(Math.abs(a)/2,Math.abs(s)/2),d=s>=0?1:-1,u=a>=0?1:-1,h=s>=0&&a>=0||s<0&&a<0?1:0,p;if(l>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,j=4;g<j;g++)m[g]=i[g]>l?l:i[g];p="M".concat(t,",").concat(n+d*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(t+u*m[0],",").concat(n)),p+="L ".concat(t+a-u*m[1],",").concat(n),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(t+a,",").concat(n+d*m[1])),p+="L ".concat(t+a,",").concat(n+s-d*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(t+a-u*m[2],",").concat(n+s)),p+="L ".concat(t+u*m[3],",").concat(n+s),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(t,",").concat(n+s-d*m[3])),p+="Z"}else if(l>0&&i===+i&&i>0){var v=Math.min(l,i);p="M ".concat(t,",").concat(n+d*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(h,",").concat(t+u*v,",").concat(n,`
            L `).concat(t+a-u*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(h,",").concat(t+a,",").concat(n+d*v,`
            L `).concat(t+a,",").concat(n+s-d*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(h,",").concat(t+a-u*v,",").concat(n+s,`
            L `).concat(t+u*v,",").concat(n+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(h,",").concat(t,",").concat(n+s-d*v," Z")}else p="M ".concat(t,",").concat(n," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return p},$Q=function(t,n){if(!t||!n)return!1;var a=t.x,s=t.y,i=n.x,l=n.y,d=n.width,u=n.height;if(Math.abs(d)>0&&Math.abs(u)>0){var h=Math.min(i,i+d),p=Math.max(i,i+d),m=Math.min(l,l+u),g=Math.max(l,l+u);return a>=h&&a<=p&&s>=m&&s<=g}return!1},LQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fw=function(t){var n=UA(UA({},LQ),t),a=b.useRef(),s=b.useState(-1),i=PQ(s,2),l=i[0],d=i[1];b.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var N=a.current.getTotalLength();N&&d(N)}catch{}},[]);var u=n.x,h=n.y,p=n.width,m=n.height,g=n.radius,j=n.className,v=n.animationEasing,w=n.animationDuration,x=n.animationBegin,S=n.isAnimationActive,P=n.isUpdateAnimationActive;if(u!==+u||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var O=ze("recharts-rectangle",j);return P?X.createElement(Rn,{canBegin:l>0,from:{width:p,height:m,x:u,y:h},to:{width:p,height:m,x:u,y:h},duration:w,animationEasing:v,isActive:P},function(N){var A=N.width,C=N.height,E=N.x,T=N.y;return X.createElement(Rn,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:w,isActive:S,easing:v},X.createElement("path",Rh({},Re(n,!0),{className:O,d:WA(E,T,A,C,g),ref:a})))}):X.createElement("path",Rh({},Re(n,!0),{className:O,d:WA(u,h,p,m,g)}))},DQ=["points","className","baseLinePoints","connectNulls"];function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Li.apply(this,arguments)}function FQ(e,t){if(e==null)return{};var n=qQ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function qQ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function HA(e){return WQ(e)||UQ(e)||BQ(e)||zQ()}function zQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BQ(e,t){if(e){if(typeof e=="string")return Ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ab(e,t)}}function UQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WQ(e){if(Array.isArray(e))return Ab(e)}function Ab(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var KA=function(t){return t&&t.x===+t.x&&t.y===+t.y},HQ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(a){KA(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),KA(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},ec=function(t,n){var a=HQ(t);n&&(a=[a.reduce(function(i,l){return[].concat(HA(i),HA(l))},[])]);var s=a.map(function(i){return i.reduce(function(l,d,u){return"".concat(l).concat(u===0?"M":"L").concat(d.x,",").concat(d.y)},"")}).join("");return a.length===1?"".concat(s,"Z"):s},KQ=function(t,n,a){var s=ec(t,a);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(ec(n.reverse(),a).slice(1))},GQ=function(t){var n=t.points,a=t.className,s=t.baseLinePoints,i=t.connectNulls,l=FQ(t,DQ);if(!n||!n.length)return null;var d=ze("recharts-polygon",a);if(s&&s.length){var u=l.stroke&&l.stroke!=="none",h=KQ(n,s,i);return X.createElement("g",{className:d},X.createElement("path",Li({},Re(l,!0),{fill:h.slice(-1)==="Z"?l.fill:"none",stroke:"none",d:h})),u?X.createElement("path",Li({},Re(l,!0),{fill:"none",d:ec(n,i)})):null,u?X.createElement("path",Li({},Re(l,!0),{fill:"none",d:ec(s,i)})):null)}var p=ec(n,i);return X.createElement("path",Li({},Re(l,!0),{fill:p.slice(-1)==="Z"?l.fill:"none",className:d,d:p}))};function Pb(){return Pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pb.apply(this,arguments)}var $f=function(t){var n=t.cx,a=t.cy,s=t.r,i=t.className,l=ze("recharts-dot",i);return n===+n&&a===+a&&s===+s?b.createElement("circle",Pb({},Re(t,!1),eh(t),{className:l,cx:n,cy:a,r:s})):null};function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}var VQ=["x","y","top","left","width","height","className"];function Ob(){return Ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ob.apply(this,arguments)}function GA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function QQ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GA(Object(n),!0).forEach(function(a){YQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function YQ(e,t,n){return t=XQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XQ(e){var t=JQ(e,"string");return _c(t)=="symbol"?t:t+""}function JQ(e,t){if(_c(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(_c(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZQ(e,t){if(e==null)return{};var n=eY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function eY(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var tY=function(t,n,a,s,i,l){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(l,",").concat(n,"h").concat(a)},rY=function(t){var n=t.x,a=n===void 0?0:n,s=t.y,i=s===void 0?0:s,l=t.top,d=l===void 0?0:l,u=t.left,h=u===void 0?0:u,p=t.width,m=p===void 0?0:p,g=t.height,j=g===void 0?0:g,v=t.className,w=ZQ(t,VQ),x=QQ({x:a,y:i,top:d,left:h,width:m,height:j},w);return!ge(a)||!ge(i)||!ge(m)||!ge(j)||!ge(d)||!ge(h)?null:X.createElement("path",Ob({},Re(x,!0),{className:ze("recharts-cross",v),d:tY(a,i,m,j,d,h)}))},_y,VA;function nY(){if(VA)return _y;VA=1;var e=_f(),t=g6(),n=In();function a(s,i){return s&&s.length?e(s,n(i,2),t):void 0}return _y=a,_y}var aY=nY();const sY=Ze(aY);var Ty,QA;function iY(){if(QA)return Ty;QA=1;var e=_f(),t=In(),n=y6();function a(s,i){return s&&s.length?e(s,t(i,2),n):void 0}return Ty=a,Ty}var oY=iY();const lY=Ze(oY);var cY=["cx","cy","angle","ticks","axisLine"],dY=["ticks","tick","angle","tickFormatter","stroke"];function po(e){"@babel/helpers - typeof";return po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},po(e)}function tc(){return tc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tc.apply(this,arguments)}function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(n),!0).forEach(function(a){Lf(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XA(e,t){if(e==null)return{};var n=uY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function uY(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function hY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JA(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a_(a.key),a)}}function fY(e,t,n){return t&&JA(e.prototype,t),n&&JA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mY(e,t,n){return t=Mh(t),pY(e,n_()?Reflect.construct(t,n||[],Mh(e).constructor):t.apply(e,n))}function pY(e,t){if(t&&(po(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xY(e)}function xY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n_=function(){return!!e})()}function Mh(e){return Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mh(e)}function gY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eb(e,t)}function Eb(e,t){return Eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Eb(e,t)}function Lf(e,t,n){return t=a_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a_(e){var t=yY(e,"string");return po(t)=="symbol"?t:t+""}function yY(e,t){if(po(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(po(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Df=(function(e){function t(){return hY(this,t),mY(this,t,arguments)}return gY(t,e),fY(t,[{key:"getTickValueCoord",value:function(a){var s=a.coordinate,i=this.props,l=i.angle,d=i.cx,u=i.cy;return ot(d,u,s,l)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,s;switch(a){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var a=this.props,s=a.cx,i=a.cy,l=a.angle,d=a.ticks,u=sY(d,function(p){return p.coordinate||0}),h=lY(d,function(p){return p.coordinate||0});return{cx:s,cy:i,startAngle:l,endAngle:l,innerRadius:h.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,l=a.angle,d=a.ticks,u=a.axisLine,h=XA(a,cY),p=d.reduce(function(v,w){return[Math.min(v[0],w.coordinate),Math.max(v[1],w.coordinate)]},[1/0,-1/0]),m=ot(s,i,p[0],l),g=ot(s,i,p[1],l),j=js(js(js({},Re(h,!1)),{},{fill:"none"},Re(u,!1)),{},{x1:m.x,y1:m.y,x2:g.x,y2:g.y});return X.createElement("line",tc({className:"recharts-polar-radius-axis-line"},j))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,l=s.tick,d=s.angle,u=s.tickFormatter,h=s.stroke,p=XA(s,dY),m=this.getTickTextAnchor(),g=Re(p,!1),j=Re(l,!1),v=i.map(function(w,x){var S=a.getTickValueCoord(w),P=js(js(js(js({textAnchor:m,transform:"rotate(".concat(90-d,", ").concat(S.x,", ").concat(S.y,")")},g),{},{stroke:"none",fill:h},j),{},{index:x},S),{},{payload:w});return X.createElement(Ve,tc({className:ze("recharts-polar-radius-axis-tick",K6(l)),key:"tick-".concat(w.coordinate)},Vs(a.props,w,x)),t.renderTickItem(l,P,u?u(w.value,x):w.value))});return X.createElement(Ve,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.axisLine,l=a.tick;return!s||!s.length?null:X.createElement(Ve,{className:ze("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),Kt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,s,i){var l;return X.isValidElement(a)?l=X.cloneElement(a,s):Fe(a)?l=a(s):l=X.createElement(Qs,tc({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])})(b.PureComponent);Lf(Df,"displayName","PolarRadiusAxis");Lf(Df,"axisType","radiusAxis");Lf(Df,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function xo(e){"@babel/helpers - typeof";return xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xo(e)}function ks(){return ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ks.apply(this,arguments)}function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ws(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(a){Ff(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e3(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i_(a.key),a)}}function bY(e,t,n){return t&&e3(e.prototype,t),n&&e3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jY(e,t,n){return t=Ih(t),wY(e,s_()?Reflect.construct(t,n||[],Ih(e).constructor):t.apply(e,n))}function wY(e,t){if(t&&(xo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NY(e)}function NY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s_=function(){return!!e})()}function Ih(e){return Ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ih(e)}function SY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_b(e,t)}function _b(e,t){return _b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},_b(e,t)}function Ff(e,t,n){return t=i_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i_(e){var t=kY(e,"string");return xo(t)=="symbol"?t:t+""}function kY(e,t){if(xo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(xo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CY=Math.PI/180,t3=1e-5,qf=(function(e){function t(){return vY(this,t),jY(this,t,arguments)}return SY(t,e),bY(t,[{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.cx,l=s.cy,d=s.radius,u=s.orientation,h=s.tickSize,p=h||8,m=ot(i,l,d,a.coordinate),g=ot(i,l,d+(u==="inner"?-1:1)*p,a.coordinate);return{x1:m.x,y1:m.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(a){var s=this.props.orientation,i=Math.cos(-a.coordinate*CY),l;return i>t3?l=s==="outer"?"start":"end":i<-t3?l=s==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,l=a.radius,d=a.axisLine,u=a.axisLineType,h=ws(ws({},Re(this.props,!1)),{},{fill:"none"},Re(d,!1));if(u==="circle")return X.createElement($f,ks({className:"recharts-polar-angle-axis-line"},h,{cx:s,cy:i,r:l}));var p=this.props.ticks,m=p.map(function(g){return ot(s,i,l,g.coordinate)});return X.createElement(GQ,ks({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,l=s.tick,d=s.tickLine,u=s.tickFormatter,h=s.stroke,p=Re(this.props,!1),m=Re(l,!1),g=ws(ws({},p),{},{fill:"none"},Re(d,!1)),j=i.map(function(v,w){var x=a.getTickLineCoord(v),S=a.getTickTextAnchor(v),P=ws(ws(ws({textAnchor:S},p),{},{stroke:"none",fill:h},m),{},{index:w,payload:v,x:x.x2,y:x.y2});return X.createElement(Ve,ks({className:ze("recharts-polar-angle-axis-tick",K6(l)),key:"tick-".concat(v.coordinate)},Vs(a.props,v,w)),d&&X.createElement("line",ks({className:"recharts-polar-angle-axis-tick-line"},g,x)),l&&t.renderTickItem(l,P,u?u(v.value,w):v.value))});return X.createElement(Ve,{className:"recharts-polar-angle-axis-ticks"},j)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.radius,l=a.axisLine;return i<=0||!s||!s.length?null:X.createElement(Ve,{className:ze("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,s,i){var l;return X.isValidElement(a)?l=X.cloneElement(a,s):Fe(a)?l=a(s):l=X.createElement(Qs,ks({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])})(b.PureComponent);Ff(qf,"displayName","PolarAngleAxis");Ff(qf,"axisType","angleAxis");Ff(qf,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Ry,r3;function AY(){if(r3)return Ry;r3=1;var e=gE(),t=e(Object.getPrototypeOf,Object);return Ry=t,Ry}var My,n3;function PY(){if(n3)return My;n3=1;var e=da(),t=AY(),n=ua(),a="[object Object]",s=Function.prototype,i=Object.prototype,l=s.toString,d=i.hasOwnProperty,u=l.call(Object);function h(p){if(!n(p)||e(p)!=a)return!1;var m=t(p);if(m===null)return!0;var g=d.call(m,"constructor")&&m.constructor;return typeof g=="function"&&g instanceof g&&l.call(g)==u}return My=h,My}var OY=PY();const EY=Ze(OY);var Iy,a3;function _Y(){if(a3)return Iy;a3=1;var e=da(),t=ua(),n="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==n}return Iy=a,Iy}var TY=_Y();const RY=Ze(TY);function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function $h(){return $h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$h.apply(this,arguments)}function MY(e,t){return DY(e)||LY(e,t)||$Y(e,t)||IY()}function IY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Y(e,t){if(e){if(typeof e=="string")return s3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s3(e,t)}}function s3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function LY(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function DY(e){if(Array.isArray(e))return e}function i3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function o3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i3(Object(n),!0).forEach(function(a){FY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function FY(e,t,n){return t=qY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qY(e){var t=zY(e,"string");return Tc(t)=="symbol"?t:t+""}function zY(e,t){if(Tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Tc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l3=function(t,n,a,s,i){var l=a-s,d;return d="M ".concat(t,",").concat(n),d+="L ".concat(t+a,",").concat(n),d+="L ".concat(t+a-l/2,",").concat(n+i),d+="L ".concat(t+a-l/2-s,",").concat(n+i),d+="L ".concat(t,",").concat(n," Z"),d},BY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UY=function(t){var n=o3(o3({},BY),t),a=b.useRef(),s=b.useState(-1),i=MY(s,2),l=i[0],d=i[1];b.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var O=a.current.getTotalLength();O&&d(O)}catch{}},[]);var u=n.x,h=n.y,p=n.upperWidth,m=n.lowerWidth,g=n.height,j=n.className,v=n.animationEasing,w=n.animationDuration,x=n.animationBegin,S=n.isUpdateAnimationActive;if(u!==+u||h!==+h||p!==+p||m!==+m||g!==+g||p===0&&m===0||g===0)return null;var P=ze("recharts-trapezoid",j);return S?X.createElement(Rn,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:g,x:u,y:h},to:{upperWidth:p,lowerWidth:m,height:g,x:u,y:h},duration:w,animationEasing:v,isActive:S},function(O){var N=O.upperWidth,A=O.lowerWidth,C=O.height,E=O.x,T=O.y;return X.createElement(Rn,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:w,easing:v},X.createElement("path",$h({},Re(n,!0),{className:P,d:l3(E,T,N,A,C),ref:a})))}):X.createElement("g",null,X.createElement("path",$h({},Re(n,!0),{className:P,d:l3(u,h,p,m,g)})))},WY=["option","shapeType","propTransformer","activeClassName","isActive"];function Rc(e){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rc(e)}function HY(e,t){if(e==null)return{};var n=KY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function KY(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function c3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Lh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(n),!0).forEach(function(a){GY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function GY(e,t,n){return t=VY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VY(e){var t=QY(e,"string");return Rc(t)=="symbol"?t:t+""}function QY(e,t){if(Rc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Rc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YY(e,t){return Lh(Lh({},t),e)}function XY(e,t){return e==="symbols"}function d3(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return X.createElement(fw,n);case"trapezoid":return X.createElement(UY,n);case"sector":return X.createElement(Q6,n);case"symbols":if(XY(t))return X.createElement(_j,n);break;default:return null}}function JY(e){return b.isValidElement(e)?e.props:e}function o_(e){var t=e.option,n=e.shapeType,a=e.propTransformer,s=a===void 0?YY:a,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,d=e.isActive,u=HY(e,WY),h;if(b.isValidElement(t))h=b.cloneElement(t,Lh(Lh({},u),JY(t)));else if(Fe(t))h=t(u);else if(EY(t)&&!RY(t)){var p=s(t,u);h=X.createElement(d3,{shapeType:n,elementProps:p})}else{var m=u;h=X.createElement(d3,{shapeType:n,elementProps:m})}return d?X.createElement(Ve,{className:l},h):h}function zf(e,t){return t!=null&&"trapezoids"in e.props}function Bf(e,t){return t!=null&&"sectors"in e.props}function Mc(e,t){return t!=null&&"points"in e.props}function ZY(e,t){var n,a,s=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function eX(e,t){var n=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return n&&a}function tX(e,t){var n=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return n&&a&&s}function rX(e,t){var n;return zf(e,t)?n=ZY:Bf(e,t)?n=eX:Mc(e,t)&&(n=tX),n}function nX(e,t){var n;return zf(e,t)?n="trapezoids":Bf(e,t)?n="sectors":Mc(e,t)&&(n="points"),n}function aX(e,t){if(zf(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Bf(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Mc(e,t)?t.payload:{}}function sX(e){var t=e.activeTooltipItem,n=e.graphicalItem,a=e.itemData,s=nX(n,t),i=aX(n,t),l=a.filter(function(u,h){var p=od(i,u),m=n.props[s].filter(function(v){var w=rX(n,t);return w(v,t)}),g=n.props[s].indexOf(m[m.length-1]),j=h===g;return p&&j}),d=a.indexOf(l[l.length-1]);return d}var Uu;function go(e){"@babel/helpers - typeof";return go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},go(e)}function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Di.apply(this,arguments)}function u3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u3(Object(n),!0).forEach(function(a){Vr(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function iX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h3(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c_(a.key),a)}}function oX(e,t,n){return t&&h3(e.prototype,t),n&&h3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lX(e,t,n){return t=Dh(t),cX(e,l_()?Reflect.construct(t,n||[],Dh(e).constructor):t.apply(e,n))}function cX(e,t){if(t&&(go(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dX(e)}function dX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l_=function(){return!!e})()}function Dh(e){return Dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dh(e)}function uX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tb(e,t)}function Tb(e,t){return Tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Tb(e,t)}function Vr(e,t,n){return t=c_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c_(e){var t=hX(e,"string");return go(t)=="symbol"?t:t+""}function hX(e,t){if(go(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(go(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fa=(function(e){function t(n){var a;return iX(this,t),a=lX(this,t,[n]),Vr(a,"pieRef",null),Vr(a,"sectorRefs",[]),Vr(a,"id",Do("recharts-pie-")),Vr(a,"handleAnimationEnd",function(){var s=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Fe(s)&&s()}),Vr(a,"handleAnimationStart",function(){var s=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Fe(s)&&s()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return uX(t,e),oX(t,[{key:"isActiveIndex",value:function(a){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(a)!==-1:a===s}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,d=i.labelLine,u=i.dataKey,h=i.valueKey,p=Re(this.props,!1),m=Re(l,!1),g=Re(d,!1),j=l&&l.offsetRadius||20,v=a.map(function(w,x){var S=(w.startAngle+w.endAngle)/2,P=ot(w.cx,w.cy,w.outerRadius+j,S),O=st(st(st(st({},p),w),{},{stroke:"none"},m),{},{index:x,textAnchor:t.getTextAnchor(P.x,w.cx)},P),N=st(st(st(st({},p),w),{},{fill:"none",stroke:w.fill},g),{},{index:x,points:[ot(w.cx,w.cy,w.outerRadius,S),P]}),A=u;return qe(u)&&qe(h)?A="value":qe(u)&&(A=h),X.createElement(Ve,{key:"label-".concat(w.startAngle,"-").concat(w.endAngle,"-").concat(w.midAngle,"-").concat(x)},d&&t.renderLabelLineItem(d,N,"line"),t.renderLabelItem(l,O,Lt(w,A)))});return X.createElement(Ve,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(a){var s=this,i=this.props,l=i.activeShape,d=i.blendStroke,u=i.inactiveShape;return a.map(function(h,p){if((h==null?void 0:h.startAngle)===0&&(h==null?void 0:h.endAngle)===0&&a.length!==1)return null;var m=s.isActiveIndex(p),g=u&&s.hasActiveIndex()?u:null,j=m?l:g,v=st(st({},h),{},{stroke:d?h.fill:h.stroke,tabIndex:-1});return X.createElement(Ve,Di({ref:function(x){x&&!s.sectorRefs.includes(x)&&s.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Vs(s.props,h,p),{key:"sector-".concat(h==null?void 0:h.startAngle,"-").concat(h==null?void 0:h.endAngle,"-").concat(h.midAngle,"-").concat(p)}),X.createElement(o_,Di({option:j,isActive:m,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,s=this.props,i=s.sectors,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,h=s.animationEasing,p=s.animationId,m=this.state,g=m.prevSectors,j=m.prevIsAnimationActive;return X.createElement(Rn,{begin:d,duration:u,isActive:l,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p,"-").concat(j),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var w=v.t,x=[],S=i&&i[0],P=S.startAngle;return i.forEach(function(O,N){var A=g&&g[N],C=N>0?Mr(O,"paddingAngle",0):0;if(A){var E=Tr(A.endAngle-A.startAngle,O.endAngle-O.startAngle),T=st(st({},O),{},{startAngle:P+C,endAngle:P+E(w)+C});x.push(T),P=T.endAngle}else{var R=O.endAngle,I=O.startAngle,M=Tr(0,R-I),$=M(w),G=st(st({},O),{},{startAngle:P+C,endAngle:P+$+C});x.push(G),P=G.endAngle}}),X.createElement(Ve,null,a.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(a){var s=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"ArrowRight":{var d=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[d].focus(),s.setState({sectorToFocus:d});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,s=a.sectors,i=a.isAnimationActive,l=this.state.prevSectors;return i&&s&&s.length&&(!l||!od(l,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,s=this.props,i=s.hide,l=s.sectors,d=s.className,u=s.label,h=s.cx,p=s.cy,m=s.innerRadius,g=s.outerRadius,j=s.isAnimationActive,v=this.state.isAnimationFinished;if(i||!l||!l.length||!ge(h)||!ge(p)||!ge(m)||!ge(g))return null;var w=ze("recharts-pie",d);return X.createElement(Ve,{tabIndex:this.props.rootTabIndex,className:w,ref:function(S){a.pieRef=S}},this.renderSectors(),u&&this.renderLabels(l),Kt.renderCallByParent(this.props,null,!1),(!j||v)&&aa.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return s.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:a.sectors!==s.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,s){return a>s?"start":a<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,s,i){if(X.isValidElement(a))return X.cloneElement(a,s);if(Fe(a))return a(s);var l=ze("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return X.createElement(Ph,Di({},s,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(a,s,i){if(X.isValidElement(a))return X.cloneElement(a,s);var l=i;if(Fe(a)&&(l=a(s),X.isValidElement(l)))return l;var d=ze("recharts-pie-label-text",typeof a!="boolean"&&!Fe(a)?a.className:"");return X.createElement(Qs,Di({},s,{alignmentBaseline:"middle",className:d}),l)}}])})(b.PureComponent);Uu=fa;Vr(fa,"displayName","Pie");Vr(fa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ti.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Vr(fa,"parseDeltaAngle",function(e,t){var n=cr(t-e),a=Math.min(Math.abs(t-e),360);return n*a});Vr(fa,"getRealPieData",function(e){var t=e.data,n=e.children,a=Re(e,!1),s=Ir(n,Sf);return t&&t.length?t.map(function(i,l){return st(st(st({payload:i},a),i),s&&s[l]&&s[l].props)}):s&&s.length?s.map(function(i){return st(st({},a),i.props)}):[]});Vr(fa,"parseCoordinateOfPie",function(e,t){var n=t.top,a=t.left,s=t.width,i=t.height,l=H6(s,i),d=a+dr(e.cx,s,s/2),u=n+dr(e.cy,i,i/2),h=dr(e.innerRadius,l,0),p=dr(e.outerRadius,l,l*.8),m=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:d,cy:u,innerRadius:h,outerRadius:p,maxRadius:m}});Vr(fa,"getComposedData",function(e){var t=e.item,n=e.offset,a=t.type.defaultProps!==void 0?st(st({},t.type.defaultProps),t.props):t.props,s=Uu.getRealPieData(a);if(!s||!s.length)return null;var i=a.cornerRadius,l=a.startAngle,d=a.endAngle,u=a.paddingAngle,h=a.dataKey,p=a.nameKey,m=a.valueKey,g=a.tooltipType,j=Math.abs(a.minAngle),v=Uu.parseCoordinateOfPie(a,n),w=Uu.parseDeltaAngle(l,d),x=Math.abs(w),S=h;qe(h)&&qe(m)?(pn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S="value"):qe(h)&&(pn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S=m);var P=s.filter(function(T){return Lt(T,S,0)!==0}).length,O=(x>=360?P:P-1)*u,N=x-P*j-O,A=s.reduce(function(T,R){var I=Lt(R,S,0);return T+(ge(I)?I:0)},0),C;if(A>0){var E;C=s.map(function(T,R){var I=Lt(T,S,0),M=Lt(T,p,R),$=(ge(I)?I:0)/A,G;R?G=E.endAngle+cr(w)*u*(I!==0?1:0):G=l;var V=G+cr(w)*((I!==0?j:0)+$*N),z=(G+V)/2,U=(v.innerRadius+v.outerRadius)/2,H=[{name:M,value:I,payload:T,dataKey:S,type:g}],B=ot(v.cx,v.cy,U,z);return E=st(st(st({percent:$,cornerRadius:i,name:M,tooltipPayload:H,midAngle:z,middleRadius:U,tooltipPosition:B},T),v),{},{value:Lt(T,S),startAngle:G,endAngle:V,payload:T,paddingAngle:cr(w)*u}),E})}return st(st({},v),{},{sectors:C,data:s})});var $y,f3;function fX(){if(f3)return $y;f3=1;var e=Math.ceil,t=Math.max;function n(a,s,i,l){for(var d=-1,u=t(e((s-a)/(i||1)),0),h=Array(u);u--;)h[l?u:++d]=a,a+=i;return h}return $y=n,$y}var Ly,m3;function d_(){if(m3)return Ly;m3=1;var e=RE(),t=1/0,n=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*n}return s===s?s:0}return Ly=a,Ly}var Dy,p3;function mX(){if(p3)return Dy;p3=1;var e=fX(),t=Nf(),n=d_();function a(s){return function(i,l,d){return d&&typeof d!="number"&&t(i,l,d)&&(l=d=void 0),i=n(i),l===void 0?(l=i,i=0):l=n(l),d=d===void 0?i<l?1:-1:n(d),e(i,l,d,s)}}return Dy=a,Dy}var Fy,x3;function pX(){if(x3)return Fy;x3=1;var e=mX(),t=e();return Fy=t,Fy}var xX=pX();const Fh=Ze(xX);function Ic(e){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(e)}function g3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function y3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g3(Object(n),!0).forEach(function(a){u_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function u_(e,t,n){return t=gX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gX(e){var t=yX(e,"string");return Ic(t)=="symbol"?t:t+""}function yX(e,t){if(Ic(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ic(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vX=["Webkit","Moz","O","ms"],bX=function(t,n){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=vX.reduce(function(i,l){return y3(y3({},i),{},u_({},l+a,n))},{});return s[t]=n,s};function yo(e){"@babel/helpers - typeof";return yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yo(e)}function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qh.apply(this,arguments)}function v3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function qy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(n),!0).forEach(function(a){Er(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function jX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b3(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,f_(a.key),a)}}function wX(e,t,n){return t&&b3(e.prototype,t),n&&b3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function NX(e,t,n){return t=zh(t),SX(e,h_()?Reflect.construct(t,n||[],zh(e).constructor):t.apply(e,n))}function SX(e,t){if(t&&(yo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kX(e)}function kX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h_=function(){return!!e})()}function zh(e){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zh(e)}function CX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rb(e,t)}function Rb(e,t){return Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Rb(e,t)}function Er(e,t,n){return t=f_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f_(e){var t=AX(e,"string");return yo(t)=="symbol"?t:t+""}function AX(e,t){if(yo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(yo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var PX=function(t){var n=t.data,a=t.startIndex,s=t.endIndex,i=t.x,l=t.width,d=t.travellerWidth;if(!n||!n.length)return{};var u=n.length,h=Xl().domain(Fh(0,u)).range([i,i+l-d]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(a),endX:h(s),scale:h,scaleValues:p}},j3=function(t){return t.changedTouches&&!!t.changedTouches.length},vo=(function(e){function t(n){var a;return jX(this,t),a=NX(this,t,[n]),Er(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),Er(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),Er(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,l=s.onDragEnd,d=s.startIndex;l==null||l({endIndex:i,startIndex:d})}),a.detachDragEndListener()}),Er(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Er(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Er(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Er(a,"handleSlideDragStart",function(s){var i=j3(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return CX(t,e),wX(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,l=this.state.scaleValues,d=this.props,u=d.gap,h=d.data,p=h.length-1,m=Math.min(s,i),g=Math.max(s,i),j=t.getIndexInRange(l,m),v=t.getIndexInRange(l,g);return{startIndex:j-j%u,endIndex:v===p?p:v-v%u}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,l=s.tickFormatter,d=s.dataKey,u=Lt(i[a],d,a);return Fe(l)?l(u,a):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,l=s.startX,d=s.endX,u=this.props,h=u.x,p=u.width,m=u.travellerWidth,g=u.startIndex,j=u.endIndex,v=u.onChange,w=a.pageX-i;w>0?w=Math.min(w,h+p-m-d,h+p-m-l):w<0&&(w=Math.max(w,h-l,h-d));var x=this.getIndex({startX:l+w,endX:d+w});(x.startIndex!==g||x.endIndex!==j)&&v&&v(x),this.setState({startX:l+w,endX:d+w,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=j3(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,l=s.movingTravellerId,d=s.endX,u=s.startX,h=this.state[l],p=this.props,m=p.x,g=p.width,j=p.travellerWidth,v=p.onChange,w=p.gap,x=p.data,S={startX:this.state.startX,endX:this.state.endX},P=a.pageX-i;P>0?P=Math.min(P,m+g-j-h):P<0&&(P=Math.max(P,m-h)),S[l]=h+P;var O=this.getIndex(S),N=O.startIndex,A=O.endIndex,C=function(){var T=x.length-1;return l==="startX"&&(d>u?N%w===0:A%w===0)||d<u&&A===T||l==="endX"&&(d>u?A%w===0:N%w===0)||d>u&&A===T};this.setState(Er(Er({},l,h+P),"brushMoveStartX",a.pageX),function(){v&&C()&&v(O)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,l=this.state,d=l.scaleValues,u=l.startX,h=l.endX,p=this.state[s],m=d.indexOf(p);if(m!==-1){var g=m+a;if(!(g===-1||g>=d.length)){var j=d[g];s==="startX"&&j>=h||s==="endX"&&j<=u||this.setState(Er({},s,j),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.fill,h=a.stroke;return X.createElement("rect",{stroke:h,fill:u,x:s,y:i,width:l,height:d})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.data,h=a.children,p=a.padding,m=b.Children.only(h);return m?X.cloneElement(m,{x:s,y:i,width:l,height:d,margin:p,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,l,d=this,u=this.props,h=u.y,p=u.travellerWidth,m=u.height,g=u.traveller,j=u.ariaLabel,v=u.data,w=u.startIndex,x=u.endIndex,S=Math.max(a,this.props.x),P=qy(qy({},Re(this.props,!1)),{},{x:S,y:h,width:p,height:m}),O=j||"Min value: ".concat((i=v[w])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=v[x])===null||l===void 0?void 0:l.name);return X.createElement(Ve,{tabIndex:0,role:"slider","aria-label":O,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),d.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,s))},onFocus:function(){d.setState({isTravellerFocused:!0})},onBlur:function(){d.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(g,P))}},{key:"renderSlide",value:function(a,s){var i=this.props,l=i.y,d=i.height,u=i.stroke,h=i.travellerWidth,p=Math.min(a,s)+h,m=Math.max(Math.abs(s-a)-h,0);return X.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:p,y:l,width:m,height:d})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,l=a.y,d=a.height,u=a.travellerWidth,h=a.stroke,p=this.state,m=p.startX,g=p.endX,j=5,v={pointerEvents:"none",fill:h};return X.createElement(Ve,{className:"recharts-brush-texts"},X.createElement(Qs,qh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,g)-j,y:l+d/2},v),this.getTextOfTick(s)),X.createElement(Qs,qh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,g)+u+j,y:l+d/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,l=a.children,d=a.x,u=a.y,h=a.width,p=a.height,m=a.alwaysShowText,g=this.state,j=g.startX,v=g.endX,w=g.isTextActive,x=g.isSlideMoving,S=g.isTravellerMoving,P=g.isTravellerFocused;if(!s||!s.length||!ge(d)||!ge(u)||!ge(h)||!ge(p)||h<=0||p<=0)return null;var O=ze("recharts-brush",i),N=X.Children.count(l)===1,A=bX("userSelect","none");return X.createElement(Ve,{className:O,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(j,v),this.renderTravellerLayer(j,"startX"),this.renderTravellerLayer(v,"endX"),(w||x||S||P||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,l=a.width,d=a.height,u=a.stroke,h=Math.floor(i+d/2)-1;return X.createElement(X.Fragment,null,X.createElement("rect",{x:s,y:i,width:l,height:d,fill:u,stroke:"none"}),X.createElement("line",{x1:s+1,y1:h,x2:s+l-1,y2:h,fill:"none",stroke:"#fff"}),X.createElement("line",{x1:s+1,y1:h+2,x2:s+l-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return X.isValidElement(a)?i=X.cloneElement(a,s):Fe(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,l=a.width,d=a.x,u=a.travellerWidth,h=a.updateId,p=a.startIndex,m=a.endIndex;if(i!==s.prevData||h!==s.prevUpdateId)return qy({prevData:i,prevTravellerWidth:u,prevUpdateId:h,prevX:d,prevWidth:l},i&&i.length?PX({data:i,width:l,x:d,travellerWidth:u,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(s.scale&&(l!==s.prevWidth||d!==s.prevX||u!==s.prevTravellerWidth)){s.scale.range([d,d+l-u]);var g=s.scale.domain().map(function(j){return s.scale(j)});return{prevData:i,prevTravellerWidth:u,prevUpdateId:h,prevX:d,prevWidth:l,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,l=0,d=i-1;d-l>1;){var u=Math.floor((l+d)/2);a[u]>s?d=u:l=u}return s>=a[d]?d:l}}])})(b.PureComponent);Er(vo,"displayName","Brush");Er(vo,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var zy,w3;function OX(){if(w3)return zy;w3=1;var e=Dj();function t(n,a){var s;return e(n,function(i,l,d){return s=a(i,l,d),!s}),!!s}return zy=t,zy}var By,N3;function EX(){if(N3)return By;N3=1;var e=dE(),t=In(),n=OX(),a=Sr(),s=Nf();function i(l,d,u){var h=a(l)?e:n;return u&&s(l,d,u)&&(d=void 0),h(l,t(d,3))}return By=i,By}var _X=EX();const TX=Ze(_X);var _n=function(t,n){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===n},Uy,S3;function RX(){if(S3)return Uy;S3=1;var e=PE();function t(n,a,s){a=="__proto__"&&e?e(n,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[a]=s}return Uy=t,Uy}var Wy,k3;function MX(){if(k3)return Wy;k3=1;var e=RX(),t=CE(),n=In();function a(s,i){var l={};return i=n(i,3),t(s,function(d,u,h){e(l,u,i(d,u,h))}),l}return Wy=a,Wy}var IX=MX();const $X=Ze(IX);var Hy,C3;function LX(){if(C3)return Hy;C3=1;function e(t,n){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!n(t[a],a,t))return!1;return!0}return Hy=e,Hy}var Ky,A3;function DX(){if(A3)return Ky;A3=1;var e=Dj();function t(n,a){var s=!0;return e(n,function(i,l,d){return s=!!a(i,l,d),s}),s}return Ky=t,Ky}var Gy,P3;function FX(){if(P3)return Gy;P3=1;var e=LX(),t=DX(),n=In(),a=Sr(),s=Nf();function i(l,d,u){var h=a(l)?e:t;return u&&s(l,d,u)&&(d=void 0),h(l,n(d,3))}return Gy=i,Gy}var qX=FX();const m_=Ze(qX);var zX=["x","y"];function $c(e){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$c(e)}function Mb(){return Mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mb.apply(this,arguments)}function O3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Bl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O3(Object(n),!0).forEach(function(a){BX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function BX(e,t,n){return t=UX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UX(e){var t=WX(e,"string");return $c(t)=="symbol"?t:t+""}function WX(e,t){if($c(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if($c(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HX(e,t){if(e==null)return{};var n=KX(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function KX(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function GX(e,t){var n=e.x,a=e.y,s=HX(e,zX),i="".concat(n),l=parseInt(i,10),d="".concat(a),u=parseInt(d,10),h="".concat(t.height||s.height),p=parseInt(h,10),m="".concat(t.width||s.width),g=parseInt(m,10);return Bl(Bl(Bl(Bl(Bl({},t),s),l?{x:l}:{}),u?{y:u}:{}),{},{height:p,width:g,name:t.name,radius:t.radius})}function E3(e){return X.createElement(o_,Mb({shapeType:"rectangle",propTransformer:GX,activeClassName:"recharts-active-bar"},e))}var VX=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=ge(a)||m9(a);return i?t(a,s):(i||Xs(),n)}},QX=["value","background"],p_;function bo(e){"@babel/helpers - typeof";return bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bo(e)}function YX(e,t){if(e==null)return{};var n=XX(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function XX(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bh.apply(this,arguments)}function _3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_3(Object(n),!0).forEach(function(a){Ga(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T3(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,g_(a.key),a)}}function ZX(e,t,n){return t&&T3(e.prototype,t),n&&T3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eJ(e,t,n){return t=Uh(t),tJ(e,x_()?Reflect.construct(t,n||[],Uh(e).constructor):t.apply(e,n))}function tJ(e,t){if(t&&(bo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rJ(e)}function rJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x_=function(){return!!e})()}function Uh(e){return Uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uh(e)}function nJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ib(e,t)}function Ib(e,t){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Ib(e,t)}function Ga(e,t,n){return t=g_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g_(e){var t=aJ(e,"string");return bo(t)=="symbol"?t:t+""}function aJ(e,t){if(bo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(bo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Za=(function(e){function t(){var n;JX(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=eJ(this,t,[].concat(s)),Ga(n,"state",{isAnimationFinished:!1}),Ga(n,"id",Do("recharts-bar-")),Ga(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),l&&l()}),Ga(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),l&&l()}),n}return nJ(t,e),ZX(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,l=i.shape,d=i.dataKey,u=i.activeIndex,h=i.activeBar,p=Re(this.props,!1);return a&&a.map(function(m,g){var j=g===u,v=j?h:l,w=Ot(Ot(Ot({},p),m),{},{isActive:j,option:v,index:g,dataKey:d,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return X.createElement(Ve,Bh({className:"recharts-bar-rectangle"},Vs(s.props,m,g),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(g)}),X.createElement(E3,w))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,l=s.layout,d=s.isAnimationActive,u=s.animationBegin,h=s.animationDuration,p=s.animationEasing,m=s.animationId,g=this.state.prevData;return X.createElement(Rn,{begin:u,duration:h,isActive:d,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var v=j.t,w=i.map(function(x,S){var P=g&&g[S];if(P){var O=Tr(P.x,x.x),N=Tr(P.y,x.y),A=Tr(P.width,x.width),C=Tr(P.height,x.height);return Ot(Ot({},x),{},{x:O(v),y:N(v),width:A(v),height:C(v)})}if(l==="horizontal"){var E=Tr(0,x.height),T=E(v);return Ot(Ot({},x),{},{y:x.y+x.height-T,height:T})}var R=Tr(0,x.width),I=R(v);return Ot(Ot({},x),{},{width:I})});return X.createElement(Ve,null,a.renderRectanglesStatically(w))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,l=this.state.prevData;return i&&s&&s.length&&(!l||!od(l,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,l=s.dataKey,d=s.activeIndex,u=Re(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,g=YX(h,QX);if(!m)return null;var j=Ot(Ot(Ot(Ot(Ot({},g),{},{fill:"#eee"},m),u),Vs(a.props,h,p)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:l,index:p,className:"recharts-bar-background-rectangle"});return X.createElement(E3,Bh({key:"background-bar-".concat(p),option:a.props.background,isActive:p===d},j))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,d=i.xAxis,u=i.yAxis,h=i.layout,p=i.children,m=Ir(p,ld);if(!m)return null;var g=h==="vertical"?l[0].height/2:l[0].width/2,j=function(x,S){var P=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:P,errorVal:Lt(x,S)}},v={clipPath:a?"url(#clipPath-".concat(s,")"):null};return X.createElement(Ve,v,m.map(function(w){return X.cloneElement(w,{key:"error-bar-".concat(s,"-").concat(w.props.dataKey),data:l,xAxis:d,yAxis:u,layout:h,offset:g,dataPointFormatter:j})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,l=a.className,d=a.xAxis,u=a.yAxis,h=a.left,p=a.top,m=a.width,g=a.height,j=a.isAnimationActive,v=a.background,w=a.id;if(s||!i||!i.length)return null;var x=this.state.isAnimationFinished,S=ze("recharts-bar",l),P=d&&d.allowDataOverflow,O=u&&u.allowDataOverflow,N=P||O,A=qe(w)?this.id:w;return X.createElement(Ve,{className:S},P||O?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(A)},X.createElement("rect",{x:P?h:h-m/2,y:O?p:p-g/2,width:P?m:m*2,height:O?g:g*2}))):null,X.createElement(Ve,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(A,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,A),(!j||x)&&aa.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(b.PureComponent);p_=Za;Ga(Za,"displayName","Bar");Ga(Za,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ti.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ga(Za,"getComposedData",function(e){var t=e.props,n=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,l=e.yAxis,d=e.xAxisTicks,u=e.yAxisTicks,h=e.stackedData,p=e.dataStartIndex,m=e.displayedData,g=e.offset,j=OK(a,n);if(!j)return null;var v=t.layout,w=n.type.defaultProps,x=w!==void 0?Ot(Ot({},w),n.props):n.props,S=x.dataKey,P=x.children,O=x.minPointSize,N=v==="horizontal"?l:i,A=h?N.scale.domain():null,C=$K({numericAxis:N}),E=Ir(P,Sf),T=m.map(function(R,I){var M,$,G,V,z,U;h?M=EK(h[p+I],A):(M=Lt(R,S),Array.isArray(M)||(M=[C,M]));var H=VX(O,p_.defaultProps.minPointSize)(M[1],I);if(v==="horizontal"){var B,D=[l.scale(M[0]),l.scale(M[1])],L=D[0],q=D[1];$=iA({axis:i,ticks:d,bandSize:s,offset:j.offset,entry:R,index:I}),G=(B=q??L)!==null&&B!==void 0?B:void 0,V=j.size;var K=L-q;if(z=Number.isNaN(K)?0:K,U={x:$,y:l.y,width:V,height:l.height},Math.abs(H)>0&&Math.abs(z)<Math.abs(H)){var Y=cr(z||H)*(Math.abs(H)-Math.abs(z));G-=Y,z+=Y}}else{var W=[i.scale(M[0]),i.scale(M[1])],ue=W[0],he=W[1];if($=ue,G=iA({axis:l,ticks:u,bandSize:s,offset:j.offset,entry:R,index:I}),V=he-ue,z=j.size,U={x:i.x,y:G,width:i.width,height:z},Math.abs(H)>0&&Math.abs(V)<Math.abs(H)){var oe=cr(V||H)*(Math.abs(H)-Math.abs(V));V+=oe}}return Ot(Ot(Ot({},R),{},{x:$,y:G,width:V,height:z,value:h?M:M[1],payload:R,background:U},E&&E[I]&&E[I].props),{},{tooltipPayload:[U6(n,R)],tooltipPosition:{x:$+V/2,y:G+z/2}})});return Ot({data:T,layout:v},g)});function Lc(e){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lc(e)}function sJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R3(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,y_(a.key),a)}}function iJ(e,t,n){return t&&R3(e.prototype,t),n&&R3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(n),!0).forEach(function(a){Uf(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Uf(e,t,n){return t=y_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y_(e){var t=oJ(e,"string");return Lc(t)=="symbol"?t:t+""}function oJ(e,t){if(Lc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Lc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v_=function(t,n,a,s,i){var l=t.width,d=t.height,u=t.layout,h=t.children,p=Object.keys(n),m={left:a.left,leftMirror:a.left,right:l-a.right,rightMirror:l-a.right,top:a.top,topMirror:a.top,bottom:d-a.bottom,bottomMirror:d-a.bottom},g=!!_r(h,Za);return p.reduce(function(j,v){var w=n[v],x=w.orientation,S=w.domain,P=w.padding,O=P===void 0?{}:P,N=w.mirror,A=w.reversed,C="".concat(x).concat(N?"Mirror":""),E,T,R,I,M;if(w.type==="number"&&(w.padding==="gap"||w.padding==="no-gap")){var $=S[1]-S[0],G=1/0,V=w.categoricalDomain.sort(g9);if(V.forEach(function(W,ue){ue>0&&(G=Math.min((W||0)-(V[ue-1]||0),G))}),Number.isFinite(G)){var z=G/$,U=w.layout==="vertical"?a.height:a.width;if(w.padding==="gap"&&(E=z*U/2),w.padding==="no-gap"){var H=dr(t.barCategoryGap,z*U),B=z*U/2;E=B-H-(B-H)/U*H}}}s==="xAxis"?T=[a.left+(O.left||0)+(E||0),a.left+a.width-(O.right||0)-(E||0)]:s==="yAxis"?T=u==="horizontal"?[a.top+a.height-(O.bottom||0),a.top+(O.top||0)]:[a.top+(O.top||0)+(E||0),a.top+a.height-(O.bottom||0)-(E||0)]:T=w.range,A&&(T=[T[1],T[0]]);var D=F6(w,i,g),L=D.scale,q=D.realScaleType;L.domain(S).range(T),q6(L);var K=z6(L,hn(hn({},w),{},{realScaleType:q}));s==="xAxis"?(M=x==="top"&&!N||x==="bottom"&&N,R=a.left,I=m[C]-M*w.height):s==="yAxis"&&(M=x==="left"&&!N||x==="right"&&N,R=m[C]-M*w.width,I=a.top);var Y=hn(hn(hn({},w),K),{},{realScaleType:q,x:R,y:I,scale:L,width:s==="xAxis"?a.width:w.width,height:s==="yAxis"?a.height:w.height});return Y.bandSize=kh(Y,K),!w.hide&&s==="xAxis"?m[C]+=(M?-1:1)*Y.height:w.hide||(m[C]+=(M?-1:1)*Y.width),hn(hn({},j),{},Uf({},v,Y))},{})},b_=function(t,n){var a=t.x,s=t.y,i=n.x,l=n.y;return{x:Math.min(a,i),y:Math.min(s,l),width:Math.abs(i-a),height:Math.abs(l-s)}},lJ=function(t){var n=t.x1,a=t.y1,s=t.x2,i=t.y2;return b_({x:n,y:a},{x:s,y:i})},j_=(function(){function e(t){sJ(this,e),this.scale=t}return iJ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}case"end":{var d=this.bandwidth?this.bandwidth():0;return this.scale(n)+d}default:return this.scale(n)}if(s){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+u}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new e(n)}}])})();Uf(j_,"EPS",1e-4);var mw=function(t){var n=Object.keys(t).reduce(function(a,s){return hn(hn({},a),{},Uf({},s,j_.create(t[s])))},{});return hn(hn({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,d=i.position;return $X(s,function(u,h){return n[h].apply(u,{bandAware:l,position:d})})},isInRange:function(s){return m_(s,function(i,l){return n[l].isInRange(i)})}})};function cJ(e){return(e%180+180)%180}var dJ=function(t){var n=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=cJ(s),l=i*Math.PI/180,d=Math.atan(a/n),u=l>d&&l<Math.PI-d?a/Math.sin(l):n/Math.cos(l);return Math.abs(u)},Vy,I3;function uJ(){if(I3)return Vy;I3=1;var e=In(),t=rd(),n=jf();function a(s){return function(i,l,d){var u=Object(i);if(!t(i)){var h=e(l,3);i=n(i),l=function(m){return h(u[m],m,u)}}var p=s(i,l,d);return p>-1?u[h?i[p]:p]:void 0}}return Vy=a,Vy}var Qy,$3;function hJ(){if($3)return Qy;$3=1;var e=d_();function t(n){var a=e(n),s=a%1;return a===a?s?a-s:a:0}return Qy=t,Qy}var Yy,L3;function fJ(){if(L3)return Yy;L3=1;var e=jE(),t=In(),n=hJ(),a=Math.max;function s(i,l,d){var u=i==null?0:i.length;if(!u)return-1;var h=d==null?0:n(d);return h<0&&(h=a(u+h,0)),e(i,t(l,3),h)}return Yy=s,Yy}var Xy,D3;function mJ(){if(D3)return Xy;D3=1;var e=uJ(),t=fJ(),n=e(t);return Xy=n,Xy}var pJ=mJ();const xJ=Ze(pJ);var gJ=LO();const yJ=Ze(gJ);var vJ=yJ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),pw=b.createContext(void 0),xw=b.createContext(void 0),w_=b.createContext(void 0),N_=b.createContext({}),S_=b.createContext(void 0),k_=b.createContext(0),C_=b.createContext(0),F3=function(t){var n=t.state,a=n.xAxisMap,s=n.yAxisMap,i=n.offset,l=t.clipPathId,d=t.children,u=t.width,h=t.height,p=vJ(i);return X.createElement(pw.Provider,{value:a},X.createElement(xw.Provider,{value:s},X.createElement(N_.Provider,{value:i},X.createElement(w_.Provider,{value:p},X.createElement(S_.Provider,{value:l},X.createElement(k_.Provider,{value:h},X.createElement(C_.Provider,{value:u},d)))))))},bJ=function(){return b.useContext(S_)},A_=function(t){var n=b.useContext(pw);n==null&&Xs();var a=n[t];return a==null&&Xs(),a},jJ=function(){var t=b.useContext(pw);return Ia(t)},wJ=function(){var t=b.useContext(xw),n=xJ(t,function(a){return m_(a.domain,Number.isFinite)});return n||Ia(t)},P_=function(t){var n=b.useContext(xw);n==null&&Xs();var a=n[t];return a==null&&Xs(),a},NJ=function(){var t=b.useContext(w_);return t},SJ=function(){return b.useContext(N_)},gw=function(){return b.useContext(C_)},yw=function(){return b.useContext(k_)};function jo(e){"@babel/helpers - typeof";return jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jo(e)}function kJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CJ(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,E_(a.key),a)}}function AJ(e,t,n){return t&&CJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PJ(e,t,n){return t=Wh(t),OJ(e,O_()?Reflect.construct(t,n||[],Wh(e).constructor):t.apply(e,n))}function OJ(e,t){if(t&&(jo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EJ(e)}function EJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O_=function(){return!!e})()}function Wh(e){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wh(e)}function _J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$b(e,t)}function $b(e,t){return $b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},$b(e,t)}function q3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function z3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q3(Object(n),!0).forEach(function(a){vw(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vw(e,t,n){return t=E_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E_(e){var t=TJ(e,"string");return jo(t)=="symbol"?t:t+""}function TJ(e,t){if(jo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(jo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function RJ(e,t){return LJ(e)||$J(e,t)||IJ(e,t)||MJ()}function MJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IJ(e,t){if(e){if(typeof e=="string")return B3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B3(e,t)}}function B3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function $J(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function LJ(e){if(Array.isArray(e))return e}function Lb(){return Lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lb.apply(this,arguments)}var DJ=function(t,n){var a;return X.isValidElement(t)?a=X.cloneElement(t,n):Fe(t)?a=t(n):a=X.createElement("line",Lb({},n,{className:"recharts-reference-line-line"})),a},FJ=function(t,n,a,s,i,l,d,u,h){var p=i.x,m=i.y,g=i.width,j=i.height;if(a){var v=h.y,w=t.y.apply(v,{position:l});if(_n(h,"discard")&&!t.y.isInRange(w))return null;var x=[{x:p+g,y:w},{x:p,y:w}];return u==="left"?x.reverse():x}if(n){var S=h.x,P=t.x.apply(S,{position:l});if(_n(h,"discard")&&!t.x.isInRange(P))return null;var O=[{x:P,y:m+j},{x:P,y:m}];return d==="top"?O.reverse():O}if(s){var N=h.segment,A=N.map(function(C){return t.apply(C,{position:l})});return _n(h,"discard")&&TX(A,function(C){return!t.isInRange(C)})?null:A}return null};function qJ(e){var t=e.x,n=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,l=e.shape,d=e.className,u=e.alwaysShow,h=bJ(),p=A_(s),m=P_(i),g=NJ();if(!h||!g)return null;pn(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var j=mw({x:p.scale,y:m.scale}),v=Dt(t),w=Dt(n),x=a&&a.length===2,S=FJ(j,v,w,x,g,e.position,p.orientation,m.orientation,e);if(!S)return null;var P=RJ(S,2),O=P[0],N=O.x,A=O.y,C=P[1],E=C.x,T=C.y,R=_n(e,"hidden")?"url(#".concat(h,")"):void 0,I=z3(z3({clipPath:R},Re(e,!0)),{},{x1:N,y1:A,x2:E,y2:T});return X.createElement(Ve,{className:ze("recharts-reference-line",d)},DJ(l,I),Kt.renderCallByParent(e,lJ({x1:N,y1:A,x2:E,y2:T})))}var bw=(function(e){function t(){return kJ(this,t),PJ(this,t,arguments)}return _J(t,e),AJ(t,[{key:"render",value:function(){return X.createElement(qJ,this.props)}}])})(X.Component);vw(bw,"displayName","ReferenceLine");vw(bw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Db(){return Db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Db.apply(this,arguments)}function wo(e){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wo(e)}function U3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function W3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(n),!0).forEach(function(a){Wf(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BJ(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,T_(a.key),a)}}function UJ(e,t,n){return t&&BJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WJ(e,t,n){return t=Hh(t),HJ(e,__()?Reflect.construct(t,n||[],Hh(e).constructor):t.apply(e,n))}function HJ(e,t){if(t&&(wo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KJ(e)}function KJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function __(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(__=function(){return!!e})()}function Hh(e){return Hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hh(e)}function GJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fb(e,t)}function Fb(e,t){return Fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Fb(e,t)}function Wf(e,t,n){return t=T_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T_(e){var t=VJ(e,"string");return wo(t)=="symbol"?t:t+""}function VJ(e,t){if(wo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(wo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var QJ=function(t){var n=t.x,a=t.y,s=t.xAxis,i=t.yAxis,l=mw({x:s.scale,y:i.scale}),d=l.apply({x:n,y:a},{bandAware:!0});return _n(t,"discard")&&!l.isInRange(d)?null:d},Hf=(function(e){function t(){return zJ(this,t),WJ(this,t,arguments)}return GJ(t,e),UJ(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,l=a.r,d=a.alwaysShow,u=a.clipPathId,h=Dt(s),p=Dt(i);if(pn(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=QJ(this.props);if(!m)return null;var g=m.x,j=m.y,v=this.props,w=v.shape,x=v.className,S=_n(this.props,"hidden")?"url(#".concat(u,")"):void 0,P=W3(W3({clipPath:S},Re(this.props,!0)),{},{cx:g,cy:j});return X.createElement(Ve,{className:ze("recharts-reference-dot",x)},t.renderDot(w,P),Kt.renderCallByParent(this.props,{x:g-l,y:j-l,width:2*l,height:2*l}))}}])})(X.Component);Wf(Hf,"displayName","ReferenceDot");Wf(Hf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Wf(Hf,"renderDot",function(e,t){var n;return X.isValidElement(e)?n=X.cloneElement(e,t):Fe(e)?n=e(t):n=X.createElement($f,Db({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function qb(){return qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qb.apply(this,arguments)}function No(e){"@babel/helpers - typeof";return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},No(e)}function H3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function K3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(n),!0).forEach(function(a){Kf(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function YJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XJ(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,M_(a.key),a)}}function JJ(e,t,n){return t&&XJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZJ(e,t,n){return t=Kh(t),eZ(e,R_()?Reflect.construct(t,n||[],Kh(e).constructor):t.apply(e,n))}function eZ(e,t){if(t&&(No(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tZ(e)}function tZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R_=function(){return!!e})()}function Kh(e){return Kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kh(e)}function rZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zb(e,t)}function zb(e,t){return zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},zb(e,t)}function Kf(e,t,n){return t=M_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M_(e){var t=nZ(e,"string");return No(t)=="symbol"?t:t+""}function nZ(e,t){if(No(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(No(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var aZ=function(t,n,a,s,i){var l=i.x1,d=i.x2,u=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var g=mw({x:p.scale,y:m.scale}),j={x:t?g.x.apply(l,{position:"start"}):g.x.rangeMin,y:a?g.y.apply(u,{position:"start"}):g.y.rangeMin},v={x:n?g.x.apply(d,{position:"end"}):g.x.rangeMax,y:s?g.y.apply(h,{position:"end"}):g.y.rangeMax};return _n(i,"discard")&&(!g.isInRange(j)||!g.isInRange(v))?null:b_(j,v)},Gf=(function(e){function t(){return YJ(this,t),ZJ(this,t,arguments)}return rZ(t,e),JJ(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,l=a.y1,d=a.y2,u=a.className,h=a.alwaysShow,p=a.clipPathId;pn(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Dt(s),g=Dt(i),j=Dt(l),v=Dt(d),w=this.props.shape;if(!m&&!g&&!j&&!v&&!w)return null;var x=aZ(m,g,j,v,this.props);if(!x&&!w)return null;var S=_n(this.props,"hidden")?"url(#".concat(p,")"):void 0;return X.createElement(Ve,{className:ze("recharts-reference-area",u)},t.renderRect(w,K3(K3({clipPath:S},Re(this.props,!0)),x)),Kt.renderCallByParent(this.props,x))}}])})(X.Component);Kf(Gf,"displayName","ReferenceArea");Kf(Gf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Kf(Gf,"renderRect",function(e,t){var n;return X.isValidElement(e)?n=X.cloneElement(e,t):Fe(e)?n=e(t):n=X.createElement(fw,qb({},t,{className:"recharts-reference-area-rect"})),n});function I_(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function sZ(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return dJ(a,n)}function iZ(e,t,n){var a=n==="width",s=e.x,i=e.y,l=e.width,d=e.height;return t===1?{start:a?s:i,end:a?s+l:i+d}:{start:a?s+l:i+d,end:a?s:i}}function Gh(e,t,n,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=n();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function oZ(e,t){return I_(e,t+1)}function lZ(e,t,n,a,s){for(var i=(a||[]).slice(),l=t.start,d=t.end,u=0,h=1,p=l,m=function(){var v=a==null?void 0:a[u];if(v===void 0)return{v:I_(a,h)};var w=u,x,S=function(){return x===void 0&&(x=n(v,w)),x},P=v.coordinate,O=u===0||Gh(e,P,S,p,d);O||(u=0,p=l,h+=1),O&&(p=P+e*(S()/2+s),u+=h)},g;h<=i.length;)if(g=m(),g)return g.v;return[]}function Dc(e){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(e)}function G3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(n),!0).forEach(function(a){cZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cZ(e,t,n){return t=dZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dZ(e){var t=uZ(e,"string");return Dc(t)=="symbol"?t:t+""}function uZ(e,t){if(Dc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Dc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hZ(e,t,n,a,s){for(var i=(a||[]).slice(),l=i.length,d=t.start,u=t.end,h=function(g){var j=i[g],v,w=function(){return v===void 0&&(v=n(j,g)),v};if(g===l-1){var x=e*(j.coordinate+e*w()/2-u);i[g]=j=rr(rr({},j),{},{tickCoord:x>0?j.coordinate-x*e:j.coordinate})}else i[g]=j=rr(rr({},j),{},{tickCoord:j.coordinate});var S=Gh(e,j.tickCoord,w,d,u);S&&(u=j.tickCoord-e*(w()/2+s),i[g]=rr(rr({},j),{},{isShow:!0}))},p=l-1;p>=0;p--)h(p);return i}function fZ(e,t,n,a,s,i){var l=(a||[]).slice(),d=l.length,u=t.start,h=t.end;if(i){var p=a[d-1],m=n(p,d-1),g=e*(p.coordinate+e*m/2-h);l[d-1]=p=rr(rr({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate});var j=Gh(e,p.tickCoord,function(){return m},u,h);j&&(h=p.tickCoord-e*(m/2+s),l[d-1]=rr(rr({},p),{},{isShow:!0}))}for(var v=i?d-1:d,w=function(P){var O=l[P],N,A=function(){return N===void 0&&(N=n(O,P)),N};if(P===0){var C=e*(O.coordinate-e*A()/2-u);l[P]=O=rr(rr({},O),{},{tickCoord:C<0?O.coordinate-C*e:O.coordinate})}else l[P]=O=rr(rr({},O),{},{tickCoord:O.coordinate});var E=Gh(e,O.tickCoord,A,u,h);E&&(u=O.tickCoord+e*(A()/2+s),l[P]=rr(rr({},O),{},{isShow:!0}))},x=0;x<v;x++)w(x);return l}function jw(e,t,n){var a=e.tick,s=e.ticks,i=e.viewBox,l=e.minTickGap,d=e.orientation,u=e.interval,h=e.tickFormatter,p=e.unit,m=e.angle;if(!s||!s.length||!a)return[];if(ge(u)||ti.isSsr)return oZ(s,typeof u=="number"&&ge(u)?u:0);var g=[],j=d==="top"||d==="bottom"?"width":"height",v=p&&j==="width"?Yl(p,{fontSize:t,letterSpacing:n}):{width:0,height:0},w=function(O,N){var A=Fe(h)?h(O.value,N):O.value;return j==="width"?sZ(Yl(A,{fontSize:t,letterSpacing:n}),v,m):Yl(A,{fontSize:t,letterSpacing:n})[j]},x=s.length>=2?cr(s[1].coordinate-s[0].coordinate):1,S=iZ(i,x,j);return u==="equidistantPreserveStart"?lZ(x,S,w,s,l):(u==="preserveStart"||u==="preserveStartEnd"?g=fZ(x,S,w,s,l,u==="preserveStartEnd"):g=hZ(x,S,w,s,l),g.filter(function(P){return P.isShow}))}var mZ=["viewBox"],pZ=["viewBox"],xZ=["ticks"];function So(e){"@babel/helpers - typeof";return So=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},So(e)}function Fi(){return Fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fi.apply(this,arguments)}function V3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(n),!0).forEach(function(a){ww(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Jy(e,t){if(e==null)return{};var n=gZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function gZ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function yZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q3(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,L_(a.key),a)}}function vZ(e,t,n){return t&&Q3(e.prototype,t),n&&Q3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bZ(e,t,n){return t=Vh(t),jZ(e,$_()?Reflect.construct(t,n||[],Vh(e).constructor):t.apply(e,n))}function jZ(e,t){if(t&&(So(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wZ(e)}function wZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($_=function(){return!!e})()}function Vh(e){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vh(e)}function NZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bb(e,t)}function Bb(e,t){return Bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Bb(e,t)}function ww(e,t,n){return t=L_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L_(e){var t=SZ(e,"string");return So(t)=="symbol"?t:t+""}function SZ(e,t){if(So(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(So(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Uo=(function(e){function t(n){var a;return yZ(this,t),a=bZ(this,t,[n]),a.state={fontSize:"",letterSpacing:""},a}return NZ(t,e),vZ(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,l=Jy(a,mZ),d=this.props,u=d.viewBox,h=Jy(d,pZ);return!zi(i,u)||!zi(l,h)||!zi(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,l=s.y,d=s.width,u=s.height,h=s.orientation,p=s.tickSize,m=s.mirror,g=s.tickMargin,j,v,w,x,S,P,O=m?-1:1,N=a.tickSize||p,A=ge(a.tickCoord)?a.tickCoord:a.coordinate;switch(h){case"top":j=v=a.coordinate,x=l+ +!m*u,w=x-O*N,P=w-O*g,S=A;break;case"left":w=x=a.coordinate,v=i+ +!m*d,j=v-O*N,S=j-O*g,P=A;break;case"right":w=x=a.coordinate,v=i+ +m*d,j=v+O*N,S=j+O*g,P=A;break;default:j=v=a.coordinate,x=l+ +m*u,w=x+O*N,P=w+O*g,S=A;break}return{line:{x1:j,y1:w,x2:v,y2:x},tick:{x:S,y:P}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,l;switch(s){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,l="end";switch(s){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.orientation,h=a.mirror,p=a.axisLine,m=Rt(Rt(Rt({},Re(this.props,!1)),Re(p,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var g=+(u==="top"&&!h||u==="bottom"&&h);m=Rt(Rt({},m),{},{x1:s,y1:i+g*d,x2:s+l,y2:i+g*d})}else{var j=+(u==="left"&&!h||u==="right"&&h);m=Rt(Rt({},m),{},{x1:s+j*l,y1:i,x2:s+j*l,y2:i+d})}return X.createElement("line",Fi({},m,{className:ze("recharts-cartesian-axis-line",Mr(p,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var l=this,d=this.props,u=d.tickLine,h=d.stroke,p=d.tick,m=d.tickFormatter,g=d.unit,j=jw(Rt(Rt({},this.props),{},{ticks:a}),s,i),v=this.getTickTextAnchor(),w=this.getTickVerticalAnchor(),x=Re(this.props,!1),S=Re(p,!1),P=Rt(Rt({},x),{},{fill:"none"},Re(u,!1)),O=j.map(function(N,A){var C=l.getTickLineCoord(N),E=C.line,T=C.tick,R=Rt(Rt(Rt(Rt({textAnchor:v,verticalAnchor:w},x),{},{stroke:"none",fill:h},S),T),{},{index:A,payload:N,visibleTicksCount:j.length,tickFormatter:m});return X.createElement(Ve,Fi({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Vs(l.props,N,A)),u&&X.createElement("line",Fi({},P,E,{className:ze("recharts-cartesian-axis-tick-line",Mr(u,"className"))})),p&&t.renderTickItem(p,R,"".concat(Fe(m)?m(N.value,A):N.value).concat(g||"")))});return X.createElement("g",{className:"recharts-cartesian-axis-ticks"},O)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,l=s.width,d=s.height,u=s.ticksGenerator,h=s.className,p=s.hide;if(p)return null;var m=this.props,g=m.ticks,j=Jy(m,xZ),v=g;return Fe(u)&&(v=g&&g.length>0?u(this.props):u(j)),l<=0||d<=0||!v||!v.length?null:X.createElement(Ve,{className:ze("recharts-cartesian-axis",h),ref:function(x){a.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Kt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var l,d=ze(s.className,"recharts-cartesian-axis-tick-value");return X.isValidElement(a)?l=X.cloneElement(a,Rt(Rt({},s),{},{className:d})):Fe(a)?l=a(Rt(Rt({},s),{},{className:d})):l=X.createElement(Qs,Fi({},s,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])})(b.Component);ww(Uo,"displayName","CartesianAxis");ww(Uo,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var kZ=["x1","y1","x2","y2","key"],CZ=["offset"];function Js(e){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Js(e)}function Y3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y3(Object(n),!0).forEach(function(a){AZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function AZ(e,t,n){return t=PZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PZ(e){var t=OZ(e,"string");return Js(t)=="symbol"?t:t+""}function OZ(e,t){if(Js(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Js(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _s(){return _s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_s.apply(this,arguments)}function X3(e,t){if(e==null)return{};var n=EZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function EZ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var _Z=function(t){var n=t.fill;if(!n||n==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,l=t.width,d=t.height,u=t.ry;return X.createElement("rect",{x:s,y:i,ry:u,width:l,height:d,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function D_(e,t){var n;if(X.isValidElement(e))n=X.cloneElement(e,t);else if(Fe(e))n=e(t);else{var a=t.x1,s=t.y1,i=t.x2,l=t.y2,d=t.key,u=X3(t,kZ),h=Re(u,!1);h.offset;var p=X3(h,CZ);n=X.createElement("line",_s({},p,{x1:a,y1:s,x2:i,y2:l,fill:"none",key:d}))}return n}function TZ(e){var t=e.x,n=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(d,u){var h=nr(nr({},e),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(u),index:u});return D_(s,h)});return X.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function RZ(e){var t=e.y,n=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(d,u){var h=nr(nr({},e),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(u),index:u});return D_(s,h)});return X.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function MZ(e){var t=e.horizontalFill,n=e.fillOpacity,a=e.x,s=e.y,i=e.width,l=e.height,d=e.horizontalPoints,u=e.horizontal,h=u===void 0?!0:u;if(!h||!t||!t.length)return null;var p=d.map(function(g){return Math.round(g+s-s)}).sort(function(g,j){return g-j});s!==p[0]&&p.unshift(0);var m=p.map(function(g,j){var v=!p[j+1],w=v?s+l-g:p[j+1]-g;if(w<=0)return null;var x=j%t.length;return X.createElement("rect",{key:"react-".concat(j),y:g,x:a,height:w,width:i,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function IZ(e){var t=e.vertical,n=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,l=e.y,d=e.width,u=e.height,h=e.verticalPoints;if(!n||!a||!a.length)return null;var p=h.map(function(g){return Math.round(g+i-i)}).sort(function(g,j){return g-j});i!==p[0]&&p.unshift(0);var m=p.map(function(g,j){var v=!p[j+1],w=v?i+d-g:p[j+1]-g;if(w<=0)return null;var x=j%a.length;return X.createElement("rect",{key:"react-".concat(j),x:g,y:l,width:w,height:u,stroke:"none",fill:a[x],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var $Z=function(t,n){var a=t.xAxis,s=t.width,i=t.height,l=t.offset;return D6(jw(nr(nr(nr({},Uo.defaultProps),a),{},{ticks:ta(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),l.left,l.left+l.width,n)},LZ=function(t,n){var a=t.yAxis,s=t.width,i=t.height,l=t.offset;return D6(jw(nr(nr(nr({},Uo.defaultProps),a),{},{ticks:ta(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),l.top,l.top+l.height,n)},Ti={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Nw(e){var t,n,a,s,i,l,d=gw(),u=yw(),h=SJ(),p=nr(nr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ti.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Ti.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:Ti.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Ti.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Ti.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:Ti.verticalFill,x:ge(e.x)?e.x:h.left,y:ge(e.y)?e.y:h.top,width:ge(e.width)?e.width:h.width,height:ge(e.height)?e.height:h.height}),m=p.x,g=p.y,j=p.width,v=p.height,w=p.syncWithTicks,x=p.horizontalValues,S=p.verticalValues,P=jJ(),O=wJ();if(!ge(j)||j<=0||!ge(v)||v<=0||!ge(m)||m!==+m||!ge(g)||g!==+g)return null;var N=p.verticalCoordinatesGenerator||$Z,A=p.horizontalCoordinatesGenerator||LZ,C=p.horizontalPoints,E=p.verticalPoints;if((!C||!C.length)&&Fe(A)){var T=x&&x.length,R=A({yAxis:O?nr(nr({},O),{},{ticks:T?x:O.ticks}):void 0,width:d,height:u,offset:h},T?!0:w);pn(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Js(R),"]")),Array.isArray(R)&&(C=R)}if((!E||!E.length)&&Fe(N)){var I=S&&S.length,M=N({xAxis:P?nr(nr({},P),{},{ticks:I?S:P.ticks}):void 0,width:d,height:u,offset:h},I?!0:w);pn(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Js(M),"]")),Array.isArray(M)&&(E=M)}return X.createElement("g",{className:"recharts-cartesian-grid"},X.createElement(_Z,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),X.createElement(TZ,_s({},p,{offset:h,horizontalPoints:C,xAxis:P,yAxis:O})),X.createElement(RZ,_s({},p,{offset:h,verticalPoints:E,xAxis:P,yAxis:O})),X.createElement(MZ,_s({},p,{horizontalPoints:C})),X.createElement(IZ,_s({},p,{verticalPoints:E})))}Nw.displayName="CartesianGrid";var DZ=["type","layout","connectNulls","ref"],FZ=["key"];function ko(e){"@babel/helpers - typeof";return ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ko(e)}function J3(e,t){if(e==null)return{};var n=qZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function qZ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rc.apply(this,arguments)}function Z3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z3(Object(n),!0).forEach(function(a){fn(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ri(e){return WZ(e)||UZ(e)||BZ(e)||zZ()}function zZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BZ(e,t){if(e){if(typeof e=="string")return Ub(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ub(e,t)}}function UZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WZ(e){if(Array.isArray(e))return Ub(e)}function Ub(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function HZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eP(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,q_(a.key),a)}}function KZ(e,t,n){return t&&eP(e.prototype,t),n&&eP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function GZ(e,t,n){return t=Qh(t),VZ(e,F_()?Reflect.construct(t,n||[],Qh(e).constructor):t.apply(e,n))}function VZ(e,t){if(t&&(ko(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QZ(e)}function QZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F_=function(){return!!e})()}function Qh(e){return Qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qh(e)}function YZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wb(e,t)}function Wb(e,t){return Wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Wb(e,t)}function fn(e,t,n){return t=q_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q_(e){var t=XZ(e,"string");return ko(t)=="symbol"?t:t+""}function XZ(e,t){if(ko(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ko(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Co=(function(e){function t(){var n;HZ(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=GZ(this,t,[].concat(s)),fn(n,"state",{isAnimationFinished:!0,totalLength:0}),fn(n,"generateSimpleStrokeDasharray",function(l,d){return"".concat(d,"px ").concat(l-d,"px")}),fn(n,"getStrokeDasharray",function(l,d,u){var h=u.reduce(function(S,P){return S+P});if(!h)return n.generateSimpleStrokeDasharray(d,l);for(var p=Math.floor(l/h),m=l%h,g=d-l,j=[],v=0,w=0;v<u.length;w+=u[v],++v)if(w+u[v]>m){j=[].concat(Ri(u.slice(0,v)),[m-w]);break}var x=j.length%2===0?[0,g]:[g];return[].concat(Ri(t.repeat(u,p)),Ri(j),x).map(function(S){return"".concat(S,"px")}).join(", ")}),fn(n,"id",Do("recharts-line-")),fn(n,"pathRef",function(l){n.mainCurve=l}),fn(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),fn(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return YZ(t,e),KZ(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,d=i.xAxis,u=i.yAxis,h=i.layout,p=i.children,m=Ir(p,ld);if(!m)return null;var g=function(w,x){return{x:w.x,y:w.y,value:w.value,errorVal:Lt(w.payload,x)}},j={clipPath:a?"url(#clipPath-".concat(s,")"):null};return X.createElement(Ve,j,m.map(function(v){return X.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:l,xAxis:d,yAxis:u,layout:h,dataPointFormatter:g})}))}},{key:"renderDots",value:function(a,s,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var d=this.props,u=d.dot,h=d.points,p=d.dataKey,m=Re(this.props,!1),g=Re(u,!0),j=h.map(function(w,x){var S=Or(Or(Or({key:"dot-".concat(x),r:3},m),g),{},{index:x,cx:w.x,cy:w.y,value:w.value,dataKey:p,payload:w.payload,points:h});return t.renderDotItem(u,S)}),v={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return X.createElement(Ve,rc({className:"recharts-line-dots",key:"dots"},v),j)}},{key:"renderCurveStatically",value:function(a,s,i,l){var d=this.props,u=d.type,h=d.layout,p=d.connectNulls;d.ref;var m=J3(d,DZ),g=Or(Or(Or({},Re(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},l),{},{type:u,layout:h,connectNulls:p});return X.createElement(Ph,rc({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,l=this.props,d=l.points,u=l.strokeDasharray,h=l.isAnimationActive,p=l.animationBegin,m=l.animationDuration,g=l.animationEasing,j=l.animationId,v=l.animateNewValues,w=l.width,x=l.height,S=this.state,P=S.prevPoints,O=S.totalLength;return X.createElement(Rn,{begin:p,duration:m,isActive:h,easing:g,from:{t:0},to:{t:1},key:"line-".concat(j),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var A=N.t;if(P){var C=P.length/d.length,E=d.map(function($,G){var V=Math.floor(G*C);if(P[V]){var z=P[V],U=Tr(z.x,$.x),H=Tr(z.y,$.y);return Or(Or({},$),{},{x:U(A),y:H(A)})}if(v){var B=Tr(w*2,$.x),D=Tr(x/2,$.y);return Or(Or({},$),{},{x:B(A),y:D(A)})}return Or(Or({},$),{},{x:$.x,y:$.y})});return i.renderCurveStatically(E,a,s)}var T=Tr(0,O),R=T(A),I;if(u){var M="".concat(u).split(/[,\s]+/gim).map(function($){return parseFloat($)});I=i.getStrokeDasharray(R,O,M)}else I=i.generateSimpleStrokeDasharray(O,R);return i.renderCurveStatically(d,a,s,{strokeDasharray:I})})}},{key:"renderCurve",value:function(a,s){var i=this.props,l=i.points,d=i.isAnimationActive,u=this.state,h=u.prevPoints,p=u.totalLength;return d&&l&&l.length&&(!h&&p>0||!od(h,l))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,l=s.dot,d=s.points,u=s.className,h=s.xAxis,p=s.yAxis,m=s.top,g=s.left,j=s.width,v=s.height,w=s.isAnimationActive,x=s.id;if(i||!d||!d.length)return null;var S=this.state.isAnimationFinished,P=d.length===1,O=ze("recharts-line",u),N=h&&h.allowDataOverflow,A=p&&p.allowDataOverflow,C=N||A,E=qe(x)?this.id:x,T=(a=Re(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},R=T.r,I=R===void 0?3:R,M=T.strokeWidth,$=M===void 0?2:M,G=C9(l)?l:{},V=G.clipDot,z=V===void 0?!0:V,U=I*2+$;return X.createElement(Ve,{className:O},N||A?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(E)},X.createElement("rect",{x:N?g:g-j/2,y:A?m:m-v/2,width:N?j:j*2,height:A?v:v*2})),!z&&X.createElement("clipPath",{id:"clipPath-dots-".concat(E)},X.createElement("rect",{x:g-U/2,y:m-U/2,width:j+U,height:v+U}))):null,!P&&this.renderCurve(C,E),this.renderErrorBar(C,E),(P||l)&&this.renderDots(C,z,E),(!w||S)&&aa.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(Ri(a),[0]):a,l=[],d=0;d<s;++d)l=[].concat(Ri(l),Ri(i));return l}},{key:"renderDotItem",value:function(a,s){var i;if(X.isValidElement(a))i=X.cloneElement(a,s);else if(Fe(a))i=a(s);else{var l=s.key,d=J3(s,FZ),u=ze("recharts-line-dot",typeof a!="boolean"?a.className:"");i=X.createElement($f,rc({key:l},d,{className:u}))}return i}}])})(b.PureComponent);fn(Co,"displayName","Line");fn(Co,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ti.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});fn(Co,"getComposedData",function(e){var t=e.props,n=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,l=e.dataKey,d=e.bandSize,u=e.displayedData,h=e.offset,p=t.layout,m=u.map(function(g,j){var v=Lt(g,l);return p==="horizontal"?{x:sA({axis:n,ticks:s,bandSize:d,entry:g,index:j}),y:qe(v)?null:a.scale(v),value:v,payload:g}:{x:qe(v)?null:n.scale(v),y:sA({axis:a,ticks:i,bandSize:d,entry:g,index:j}),value:v,payload:g}});return Or({points:m,layout:p},h)});function Ao(e){"@babel/helpers - typeof";return Ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ao(e)}function JZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZZ(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,U_(a.key),a)}}function eee(e,t,n){return t&&ZZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tee(e,t,n){return t=Yh(t),ree(e,z_()?Reflect.construct(t,n||[],Yh(e).constructor):t.apply(e,n))}function ree(e,t){if(t&&(Ao(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nee(e)}function nee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z_=function(){return!!e})()}function Yh(e){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yh(e)}function aee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hb(e,t)}function Hb(e,t){return Hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Hb(e,t)}function B_(e,t,n){return t=U_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U_(e){var t=see(e,"string");return Ao(t)=="symbol"?t:t+""}function see(e,t){if(Ao(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ao(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Kb(){return Kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kb.apply(this,arguments)}function iee(e){var t=e.xAxisId,n=gw(),a=yw(),s=A_(t);return s==null?null:b.createElement(Uo,Kb({},s,{className:ze("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return ta(l,!0)}}))}var Wo=(function(e){function t(){return JZ(this,t),tee(this,t,arguments)}return aee(t,e),eee(t,[{key:"render",value:function(){return b.createElement(iee,this.props)}}])})(b.Component);B_(Wo,"displayName","XAxis");B_(Wo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Po(e){"@babel/helpers - typeof";return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Po(e)}function oee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,K_(a.key),a)}}function cee(e,t,n){return t&&lee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dee(e,t,n){return t=Xh(t),uee(e,W_()?Reflect.construct(t,n||[],Xh(e).constructor):t.apply(e,n))}function uee(e,t){if(t&&(Po(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hee(e)}function hee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W_=function(){return!!e})()}function Xh(e){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xh(e)}function fee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gb(e,t)}function Gb(e,t){return Gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Gb(e,t)}function H_(e,t,n){return t=K_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K_(e){var t=mee(e,"string");return Po(t)=="symbol"?t:t+""}function mee(e,t){if(Po(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Po(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vb.apply(this,arguments)}var pee=function(t){var n=t.yAxisId,a=gw(),s=yw(),i=P_(n);return i==null?null:b.createElement(Uo,Vb({},i,{className:ze("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(d){return ta(d,!0)}}))},Ho=(function(e){function t(){return oee(this,t),dee(this,t,arguments)}return fee(t,e),cee(t,[{key:"render",value:function(){return b.createElement(pee,this.props)}}])})(b.Component);H_(Ho,"displayName","YAxis");H_(Ho,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function tP(e){return vee(e)||yee(e)||gee(e)||xee()}function xee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gee(e,t){if(e){if(typeof e=="string")return Qb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qb(e,t)}}function yee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vee(e){if(Array.isArray(e))return Qb(e)}function Qb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Yb=function(t,n,a,s,i){var l=Ir(t,bw),d=Ir(t,Hf),u=[].concat(tP(l),tP(d)),h=Ir(t,Gf),p="".concat(s,"Id"),m=s[0],g=n;if(u.length&&(g=u.reduce(function(w,x){if(x.props[p]===a&&_n(x.props,"extendDomain")&&ge(x.props[m])){var S=x.props[m];return[Math.min(w[0],S),Math.max(w[1],S)]}return w},g)),h.length){var j="".concat(m,"1"),v="".concat(m,"2");g=h.reduce(function(w,x){if(x.props[p]===a&&_n(x.props,"extendDomain")&&ge(x.props[j])&&ge(x.props[v])){var S=x.props[j],P=x.props[v];return[Math.min(w[0],S,P),Math.max(w[1],S,P)]}return w},g)}return i&&i.length&&(g=i.reduce(function(w,x){return ge(x)?[Math.min(w[0],x),Math.max(w[1],x)]:w},g)),g},Zy={exports:{}},rP;function bee(){return rP||(rP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(u,h,p){this.fn=u,this.context=h,this.once=p||!1}function i(u,h,p,m,g){if(typeof p!="function")throw new TypeError("The listener must be a function");var j=new s(p,m||u,g),v=n?n+h:h;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],j]:u._events[v].push(j):(u._events[v]=j,u._eventsCount++),u}function l(u,h){--u._eventsCount===0?u._events=new a:delete u._events[h]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)t.call(p,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},d.prototype.listeners=function(h){var p=n?n+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,j=m.length,v=new Array(j);g<j;g++)v[g]=m[g].fn;return v},d.prototype.listenerCount=function(h){var p=n?n+h:h,m=this._events[p];return m?m.fn?1:m.length:0},d.prototype.emit=function(h,p,m,g,j,v){var w=n?n+h:h;if(!this._events[w])return!1;var x=this._events[w],S=arguments.length,P,O;if(x.fn){switch(x.once&&this.removeListener(h,x.fn,void 0,!0),S){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,p),!0;case 3:return x.fn.call(x.context,p,m),!0;case 4:return x.fn.call(x.context,p,m,g),!0;case 5:return x.fn.call(x.context,p,m,g,j),!0;case 6:return x.fn.call(x.context,p,m,g,j,v),!0}for(O=1,P=new Array(S-1);O<S;O++)P[O-1]=arguments[O];x.fn.apply(x.context,P)}else{var N=x.length,A;for(O=0;O<N;O++)switch(x[O].once&&this.removeListener(h,x[O].fn,void 0,!0),S){case 1:x[O].fn.call(x[O].context);break;case 2:x[O].fn.call(x[O].context,p);break;case 3:x[O].fn.call(x[O].context,p,m);break;case 4:x[O].fn.call(x[O].context,p,m,g);break;default:if(!P)for(A=1,P=new Array(S-1);A<S;A++)P[A-1]=arguments[A];x[O].fn.apply(x[O].context,P)}}return!0},d.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},d.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},d.prototype.removeListener=function(h,p,m,g){var j=n?n+h:h;if(!this._events[j])return this;if(!p)return l(this,j),this;var v=this._events[j];if(v.fn)v.fn===p&&(!g||v.once)&&(!m||v.context===m)&&l(this,j);else{for(var w=0,x=[],S=v.length;w<S;w++)(v[w].fn!==p||g&&!v[w].once||m&&v[w].context!==m)&&x.push(v[w]);x.length?this._events[j]=x.length===1?x[0]:x:l(this,j)}return this},d.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&l(this,p)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(Zy)),Zy.exports}var jee=bee();const wee=Ze(jee);var ev=new wee,tv="recharts.syncMouseEvents";function Fc(e){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fc(e)}function Nee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function See(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,G_(a.key),a)}}function kee(e,t,n){return t&&See(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rv(e,t,n){return t=G_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G_(e){var t=Cee(e,"string");return Fc(t)=="symbol"?t:t+""}function Cee(e,t){if(Fc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Fc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Aee=(function(){function e(){Nee(this,e),rv(this,"activeIndex",0),rv(this,"coordinateList",[]),rv(this,"layout","horizontal")}return kee(e,[{key:"setDetails",value:function(n){var a,s=n.coordinateList,i=s===void 0?null:s,l=n.container,d=l===void 0?null:l,u=n.layout,h=u===void 0?null:u,p=n.offset,m=p===void 0?null:p,g=n.mouseHandlerCallback,j=g===void 0?null:g;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=d??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=j??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,l=s.y,d=s.height,u=this.coordinateList[this.activeIndex].coordinate,h=((n=window)===null||n===void 0?void 0:n.scrollX)||0,p=((a=window)===null||a===void 0?void 0:a.scrollY)||0,m=i+u+h,g=l+this.offset.top+d/2+p;this.mouseHandlerCallback({pageX:m,pageY:g})}}}])})();function Pee(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],s=e==null?void 0:e[1];if(a&&s&&ge(a)&&ge(s))return!0}return!1}function Oee(e,t,n,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function V_(e){var t=e.cx,n=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,l=ot(t,n,a,s),d=ot(t,n,a,i);return{points:[l,d],cx:t,cy:n,radius:a,startAngle:s,endAngle:i}}function Eee(e,t,n){var a,s,i,l;if(e==="horizontal")a=t.x,i=a,s=n.top,l=n.top+n.height;else if(e==="vertical")s=t.y,l=s,a=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var d=t.cx,u=t.cy,h=t.innerRadius,p=t.outerRadius,m=t.angle,g=ot(d,u,h,m),j=ot(d,u,p,m);a=g.x,s=g.y,i=j.x,l=j.y}else return V_(t);return[{x:a,y:s},{x:i,y:l}]}function qc(e){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qc(e)}function nP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(n),!0).forEach(function(a){_ee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _ee(e,t,n){return t=Tee(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tee(e){var t=Ree(e,"string");return qc(t)=="symbol"?t:t+""}function Ree(e,t){if(qc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(qc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mee(e){var t,n,a=e.element,s=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,d=e.activePayload,u=e.offset,h=e.activeTooltipIndex,p=e.tooltipAxisBandSize,m=e.layout,g=e.chartName,j=(t=a.props.cursor)!==null&&t!==void 0?t:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!j||!i||!l||g!=="ScatterChart"&&s!=="axis")return null;var v,w=Ph;if(g==="ScatterChart")v=l,w=rY;else if(g==="BarChart")v=Oee(m,l,u,p),w=fw;else if(m==="radial"){var x=V_(l),S=x.cx,P=x.cy,O=x.radius,N=x.startAngle,A=x.endAngle;v={cx:S,cy:P,startAngle:N,endAngle:A,innerRadius:O,outerRadius:O},w=Q6}else v={points:Eee(m,l,u)},w=Ph;var C=Lu(Lu(Lu(Lu({stroke:"#ccc",pointerEvents:"none"},u),v),Re(j,!1)),{},{payload:d,payloadIndex:h,className:ze("recharts-tooltip-cursor",j.className)});return b.isValidElement(j)?b.cloneElement(j,C):b.createElement(w,C)}var Iee=["item"],$ee=["children","className","width","height","style","compact","title","desc"];function Oo(e){"@babel/helpers - typeof";return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oo(e)}function qi(){return qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qi.apply(this,arguments)}function aP(e,t){return Fee(e)||Dee(e,t)||Y_(e,t)||Lee()}function Lee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dee(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function Fee(e){if(Array.isArray(e))return e}function sP(e,t){if(e==null)return{};var n=qee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function qee(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function zee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,X_(a.key),a)}}function Uee(e,t,n){return t&&Bee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wee(e,t,n){return t=Jh(t),Hee(e,Q_()?Reflect.construct(t,n||[],Jh(e).constructor):t.apply(e,n))}function Hee(e,t){if(t&&(Oo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kee(e)}function Kee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q_=function(){return!!e})()}function Jh(e){return Jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jh(e)}function Gee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xb(e,t)}function Xb(e,t){return Xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Xb(e,t)}function Eo(e){return Yee(e)||Qee(e)||Y_(e)||Vee()}function Vee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y_(e,t){if(e){if(typeof e=="string")return Jb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jb(e,t)}}function Qee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yee(e){if(Array.isArray(e))return Jb(e)}function Jb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function iP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(n),!0).forEach(function(a){Ie(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ie(e,t,n){return t=X_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X_(e){var t=Xee(e,"string");return Oo(t)=="symbol"?t:t+""}function Xee(e,t){if(Oo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Oo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jee={xAxis:["bottom","top"],yAxis:["left","right"]},Zee={width:"100%",height:"100%"},J_={x:0,y:0};function Du(e){return e}var ete=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},tte=function(t,n,a,s){var i=n.find(function(p){return p&&p.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var l=i.coordinate,d=s.radius;return de(de(de({},s),ot(s.cx,s.cy,d,l)),{},{angle:l,radius:d})}var u=i.coordinate,h=s.angle;return de(de(de({},s),ot(s.cx,s.cy,u,h)),{},{angle:h,radius:u})}return J_},Vf=function(t,n){var a=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,l=(a??[]).reduce(function(d,u){var h=u.props.data;return h&&h.length?[].concat(Eo(d),Eo(h)):d},[]);return l.length>0?l:t&&t.length&&ge(s)&&ge(i)?t.slice(s,i+1):[]};function Z_(e){return e==="number"?[0,"auto"]:void 0}var Zb=function(t,n,a,s){var i=t.graphicalItems,l=t.tooltipAxis,d=Vf(n,t);return a<0||!i||!i.length||a>=d.length?null:i.reduce(function(u,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:n;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var g;if(l.dataKey&&!l.allowDuplicatedCategory){var j=m===void 0?d:m;g=Zu(j,l.dataKey,s)}else g=m&&m[a]||d[a];return g?[].concat(Eo(u),[U6(h,g)]):u},[])},oP=function(t,n,a,s){var i=s||{x:t.chartX,y:t.chartY},l=ete(i,a),d=t.orderedTooltipTicks,u=t.tooltipAxis,h=t.tooltipTicks,p=NK(l,d,h,u);if(p>=0&&h){var m=h[p]&&h[p].value,g=Zb(t,n,p,m),j=tte(a,d,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:g,activeCoordinate:j}}return null},rte=function(t,n){var a=n.axes,s=n.graphicalItems,i=n.axisType,l=n.axisIdKey,d=n.stackGroups,u=n.dataStartIndex,h=n.dataEndIndex,p=t.layout,m=t.children,g=t.stackOffset,j=L6(p,i);return a.reduce(function(v,w){var x,S=w.type.defaultProps!==void 0?de(de({},w.type.defaultProps),w.props):w.props,P=S.type,O=S.dataKey,N=S.allowDataOverflow,A=S.allowDuplicatedCategory,C=S.scale,E=S.ticks,T=S.includeHidden,R=S[l];if(v[R])return v;var I=Vf(t.data,{graphicalItems:s.filter(function(K){var Y,W=l in K.props?K.props[l]:(Y=K.type.defaultProps)===null||Y===void 0?void 0:Y[l];return W===R}),dataStartIndex:u,dataEndIndex:h}),M=I.length,$,G,V;Pee(S.domain,N,P)&&($=fb(S.domain,null,N),j&&(P==="number"||C!=="auto")&&(V=Jl(I,O,"category")));var z=Z_(P);if(!$||$.length===0){var U,H=(U=S.domain)!==null&&U!==void 0?U:z;if(O){if($=Jl(I,O,P),P==="category"&&j){var B=x9($);A&&B?(G=$,$=Fh(0,M)):A||($=cA(H,$,w).reduce(function(K,Y){return K.indexOf(Y)>=0?K:[].concat(Eo(K),[Y])},[]))}else if(P==="category")A?$=$.filter(function(K){return K!==""&&!qe(K)}):$=cA(H,$,w).reduce(function(K,Y){return K.indexOf(Y)>=0||Y===""||qe(Y)?K:[].concat(Eo(K),[Y])},[]);else if(P==="number"){var D=PK(I,s.filter(function(K){var Y,W,ue=l in K.props?K.props[l]:(Y=K.type.defaultProps)===null||Y===void 0?void 0:Y[l],he="hide"in K.props?K.props.hide:(W=K.type.defaultProps)===null||W===void 0?void 0:W.hide;return ue===R&&(T||!he)}),O,i,p);D&&($=D)}j&&(P==="number"||C!=="auto")&&(V=Jl(I,O,"category"))}else j?$=Fh(0,M):d&&d[R]&&d[R].hasStack&&P==="number"?$=g==="expand"?[0,1]:B6(d[R].stackGroups,u,h):$=$6(I,s.filter(function(K){var Y=l in K.props?K.props[l]:K.type.defaultProps[l],W="hide"in K.props?K.props.hide:K.type.defaultProps.hide;return Y===R&&(T||!W)}),P,p,!0);if(P==="number")$=Yb(m,$,R,i,E),H&&($=fb(H,$,N));else if(P==="category"&&H){var L=H,q=$.every(function(K){return L.indexOf(K)>=0});q&&($=L)}}return de(de({},v),{},Ie({},R,de(de({},S),{},{axisType:i,domain:$,categoricalDomain:V,duplicateDomain:G,originalDomain:(x=S.domain)!==null&&x!==void 0?x:z,isCategorical:j,layout:p})))},{})},nte=function(t,n){var a=n.graphicalItems,s=n.Axis,i=n.axisType,l=n.axisIdKey,d=n.stackGroups,u=n.dataStartIndex,h=n.dataEndIndex,p=t.layout,m=t.children,g=Vf(t.data,{graphicalItems:a,dataStartIndex:u,dataEndIndex:h}),j=g.length,v=L6(p,i),w=-1;return a.reduce(function(x,S){var P=S.type.defaultProps!==void 0?de(de({},S.type.defaultProps),S.props):S.props,O=P[l],N=Z_("number");if(!x[O]){w++;var A;return v?A=Fh(0,j):d&&d[O]&&d[O].hasStack?(A=B6(d[O].stackGroups,u,h),A=Yb(m,A,O,i)):(A=fb(N,$6(g,a.filter(function(C){var E,T,R=l in C.props?C.props[l]:(E=C.type.defaultProps)===null||E===void 0?void 0:E[l],I="hide"in C.props?C.props.hide:(T=C.type.defaultProps)===null||T===void 0?void 0:T.hide;return R===O&&!I}),"number",p),s.defaultProps.allowDataOverflow),A=Yb(m,A,O,i)),de(de({},x),{},Ie({},O,de(de({axisType:i},s.defaultProps),{},{hide:!0,orientation:Mr(Jee,"".concat(i,".").concat(w%2),null),domain:A,originalDomain:N,isCategorical:v,layout:p})))}return x},{})},ate=function(t,n){var a=n.axisType,s=a===void 0?"xAxis":a,i=n.AxisComp,l=n.graphicalItems,d=n.stackGroups,u=n.dataStartIndex,h=n.dataEndIndex,p=t.children,m="".concat(s,"Id"),g=Ir(p,i),j={};return g&&g.length?j=rte(t,{axes:g,graphicalItems:l,axisType:s,axisIdKey:m,stackGroups:d,dataStartIndex:u,dataEndIndex:h}):l&&l.length&&(j=nte(t,{Axis:i,graphicalItems:l,axisType:s,axisIdKey:m,stackGroups:d,dataStartIndex:u,dataEndIndex:h})),j},ste=function(t){var n=Ia(t),a=ta(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:Fj(a,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:kh(n,a)}},lP=function(t){var n=t.children,a=t.defaultShowTooltip,s=_r(n,vo),i=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(l=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!a}},ite=function(t){return!t||!t.length?!1:t.some(function(n){var a=ra(n&&n.type);return a&&a.indexOf("Bar")>=0})},cP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},ote=function(t,n){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,l=i===void 0?{}:i,d=t.yAxisMap,u=d===void 0?{}:d,h=a.width,p=a.height,m=a.children,g=a.margin||{},j=_r(m,vo),v=_r(m,Xa),w=Object.keys(u).reduce(function(A,C){var E=u[C],T=E.orientation;return!E.mirror&&!E.hide?de(de({},A),{},Ie({},T,A[T]+E.width)):A},{left:g.left||0,right:g.right||0}),x=Object.keys(l).reduce(function(A,C){var E=l[C],T=E.orientation;return!E.mirror&&!E.hide?de(de({},A),{},Ie({},T,Mr(A,"".concat(T))+E.height)):A},{top:g.top||0,bottom:g.bottom||0}),S=de(de({},x),w),P=S.bottom;j&&(S.bottom+=j.props.height||vo.defaultProps.height),v&&n&&(S=CK(S,s,a,n));var O=h-S.left-S.right,N=p-S.top-S.bottom;return de(de({brushBottom:P},S),{},{width:Math.max(O,0),height:Math.max(N,0)})},lte=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},Sw=function(t){var n=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,l=t.validateTooltipEventTypes,d=l===void 0?["axis"]:l,u=t.axisComponents,h=t.legendContent,p=t.formatAxisMap,m=t.defaultProps,g=function(S,P){var O=P.graphicalItems,N=P.stackGroups,A=P.offset,C=P.updateId,E=P.dataStartIndex,T=P.dataEndIndex,R=S.barSize,I=S.layout,M=S.barGap,$=S.barCategoryGap,G=S.maxBarSize,V=cP(I),z=V.numericAxisName,U=V.cateAxisName,H=ite(O),B=[];return O.forEach(function(D,L){var q=Vf(S.data,{graphicalItems:[D],dataStartIndex:E,dataEndIndex:T}),K=D.type.defaultProps!==void 0?de(de({},D.type.defaultProps),D.props):D.props,Y=K.dataKey,W=K.maxBarSize,ue=K["".concat(z,"Id")],he=K["".concat(U,"Id")],oe={},te=u.reduce(function(hr,en){var si=P["".concat(en.axisType,"Map")],Ko=K["".concat(en.axisType,"Id")];si&&si[Ko]||en.axisType==="zAxis"||Xs();var Go=si[Ko];return de(de({},hr),{},Ie(Ie({},en.axisType,Go),"".concat(en.axisType,"Ticks"),ta(Go)))},oe),le=te[U],ke=te["".concat(U,"Ticks")],$e=N&&N[ue]&&N[ue].hasStack&&LK(D,N[ue].stackGroups),re=ra(D.type).indexOf("Bar")>=0,be=kh(le,ke),je=[],tt=H&&SK({barSize:R,stackGroups:N,totalSize:lte(te,U)});if(re){var yt,qt,Zr=qe(W)?G:W,yn=(yt=(qt=kh(le,ke,!0))!==null&&qt!==void 0?qt:Zr)!==null&&yt!==void 0?yt:0;je=kK({barGap:M,barCategoryGap:$,bandSize:yn!==be?yn:be,sizeList:tt[he],maxBarSize:Zr}),yn!==be&&(je=je.map(function(hr){return de(de({},hr),{},{position:de(de({},hr.position),{},{offset:hr.position.offset-yn/2})})}))}var vn=D&&D.type&&D.type.getComposedData;vn&&B.push({props:de(de({},vn(de(de({},te),{},{displayedData:q,props:S,dataKey:Y,item:D,bandSize:be,barPosition:je,offset:A,stackedData:$e,layout:I,dataStartIndex:E,dataEndIndex:T}))),{},Ie(Ie(Ie({key:D.key||"item-".concat(L)},z,te[z]),U,te[U]),"animationId",C)),childIndex:O9(D,S.children),item:D})}),B},j=function(S,P){var O=S.props,N=S.dataStartIndex,A=S.dataEndIndex,C=S.updateId;if(!N5({props:O}))return null;var E=O.children,T=O.layout,R=O.stackOffset,I=O.data,M=O.reverseStackOrder,$=cP(T),G=$.numericAxisName,V=$.cateAxisName,z=Ir(E,a),U=IK(I,z,"".concat(G,"Id"),"".concat(V,"Id"),R,M),H=u.reduce(function(K,Y){var W="".concat(Y.axisType,"Map");return de(de({},K),{},Ie({},W,ate(O,de(de({},Y),{},{graphicalItems:z,stackGroups:Y.axisType===G&&U,dataStartIndex:N,dataEndIndex:A}))))},{}),B=ote(de(de({},H),{},{props:O,graphicalItems:z}),P==null?void 0:P.legendBBox);Object.keys(H).forEach(function(K){H[K]=p(O,H[K],B,K.replace("Map",""),n)});var D=H["".concat(V,"Map")],L=ste(D),q=g(O,de(de({},H),{},{dataStartIndex:N,dataEndIndex:A,updateId:C,graphicalItems:z,stackGroups:U,offset:B}));return de(de({formattedGraphicalItems:q,graphicalItems:z,offset:B,stackGroups:U},L),H)},v=(function(x){function S(P){var O,N,A;return zee(this,S),A=Wee(this,S,[P]),Ie(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ie(A,"accessibilityManager",new Aee),Ie(A,"handleLegendBBoxUpdate",function(C){if(C){var E=A.state,T=E.dataStartIndex,R=E.dataEndIndex,I=E.updateId;A.setState(de({legendBBox:C},j({props:A.props,dataStartIndex:T,dataEndIndex:R,updateId:I},de(de({},A.state),{},{legendBBox:C}))))}}),Ie(A,"handleReceiveSyncEvent",function(C,E,T){if(A.props.syncId===C){if(T===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(E)}}),Ie(A,"handleBrushChange",function(C){var E=C.startIndex,T=C.endIndex;if(E!==A.state.dataStartIndex||T!==A.state.dataEndIndex){var R=A.state.updateId;A.setState(function(){return de({dataStartIndex:E,dataEndIndex:T},j({props:A.props,dataStartIndex:E,dataEndIndex:T,updateId:R},A.state))}),A.triggerSyncEvent({dataStartIndex:E,dataEndIndex:T})}}),Ie(A,"handleMouseEnter",function(C){var E=A.getMouseInfo(C);if(E){var T=de(de({},E),{},{isTooltipActive:!0});A.setState(T),A.triggerSyncEvent(T);var R=A.props.onMouseEnter;Fe(R)&&R(T,C)}}),Ie(A,"triggeredAfterMouseMove",function(C){var E=A.getMouseInfo(C),T=E?de(de({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(T),A.triggerSyncEvent(T);var R=A.props.onMouseMove;Fe(R)&&R(T,C)}),Ie(A,"handleItemMouseEnter",function(C){A.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),Ie(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),Ie(A,"handleMouseMove",function(C){C.persist(),A.throttleTriggeredAfterMouseMove(C)}),Ie(A,"handleMouseLeave",function(C){A.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};A.setState(E),A.triggerSyncEvent(E);var T=A.props.onMouseLeave;Fe(T)&&T(E,C)}),Ie(A,"handleOuterEvent",function(C){var E=P9(C),T=Mr(A.props,"".concat(E));if(E&&Fe(T)){var R,I;/.*touch.*/i.test(E)?I=A.getMouseInfo(C.changedTouches[0]):I=A.getMouseInfo(C),T((R=I)!==null&&R!==void 0?R:{},C)}}),Ie(A,"handleClick",function(C){var E=A.getMouseInfo(C);if(E){var T=de(de({},E),{},{isTooltipActive:!0});A.setState(T),A.triggerSyncEvent(T);var R=A.props.onClick;Fe(R)&&R(T,C)}}),Ie(A,"handleMouseDown",function(C){var E=A.props.onMouseDown;if(Fe(E)){var T=A.getMouseInfo(C);E(T,C)}}),Ie(A,"handleMouseUp",function(C){var E=A.props.onMouseUp;if(Fe(E)){var T=A.getMouseInfo(C);E(T,C)}}),Ie(A,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),Ie(A,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&A.handleMouseDown(C.changedTouches[0])}),Ie(A,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&A.handleMouseUp(C.changedTouches[0])}),Ie(A,"handleDoubleClick",function(C){var E=A.props.onDoubleClick;if(Fe(E)){var T=A.getMouseInfo(C);E(T,C)}}),Ie(A,"handleContextMenu",function(C){var E=A.props.onContextMenu;if(Fe(E)){var T=A.getMouseInfo(C);E(T,C)}}),Ie(A,"triggerSyncEvent",function(C){A.props.syncId!==void 0&&ev.emit(tv,A.props.syncId,C,A.eventEmitterSymbol)}),Ie(A,"applySyncEvent",function(C){var E=A.props,T=E.layout,R=E.syncMethod,I=A.state.updateId,M=C.dataStartIndex,$=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)A.setState(de({dataStartIndex:M,dataEndIndex:$},j({props:A.props,dataStartIndex:M,dataEndIndex:$,updateId:I},A.state)));else if(C.activeTooltipIndex!==void 0){var G=C.chartX,V=C.chartY,z=C.activeTooltipIndex,U=A.state,H=U.offset,B=U.tooltipTicks;if(!H)return;if(typeof R=="function")z=R(B,C);else if(R==="value"){z=-1;for(var D=0;D<B.length;D++)if(B[D].value===C.activeLabel){z=D;break}}var L=de(de({},H),{},{x:H.left,y:H.top}),q=Math.min(G,L.x+L.width),K=Math.min(V,L.y+L.height),Y=B[z]&&B[z].value,W=Zb(A.state,A.props.data,z),ue=B[z]?{x:T==="horizontal"?B[z].coordinate:q,y:T==="horizontal"?K:B[z].coordinate}:J_;A.setState(de(de({},C),{},{activeLabel:Y,activeCoordinate:ue,activePayload:W,activeTooltipIndex:z}))}else A.setState(C)}),Ie(A,"renderCursor",function(C){var E,T=A.state,R=T.isTooltipActive,I=T.activeCoordinate,M=T.activePayload,$=T.offset,G=T.activeTooltipIndex,V=T.tooltipAxisBandSize,z=A.getTooltipEventType(),U=(E=C.props.active)!==null&&E!==void 0?E:R,H=A.props.layout,B=C.key||"_recharts-cursor";return X.createElement(Mee,{key:B,activeCoordinate:I,activePayload:M,activeTooltipIndex:G,chartName:n,element:C,isActive:U,layout:H,offset:$,tooltipAxisBandSize:V,tooltipEventType:z})}),Ie(A,"renderPolarAxis",function(C,E,T){var R=Mr(C,"type.axisType"),I=Mr(A.state,"".concat(R,"Map")),M=C.type.defaultProps,$=M!==void 0?de(de({},M),C.props):C.props,G=I&&I[$["".concat(R,"Id")]];return b.cloneElement(C,de(de({},G),{},{className:ze(R,G.className),key:C.key||"".concat(E,"-").concat(T),ticks:ta(G,!0)}))}),Ie(A,"renderPolarGrid",function(C){var E=C.props,T=E.radialLines,R=E.polarAngles,I=E.polarRadius,M=A.state,$=M.radiusAxisMap,G=M.angleAxisMap,V=Ia($),z=Ia(G),U=z.cx,H=z.cy,B=z.innerRadius,D=z.outerRadius;return b.cloneElement(C,{polarAngles:Array.isArray(R)?R:ta(z,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(I)?I:ta(V,!0).map(function(L){return L.coordinate}),cx:U,cy:H,innerRadius:B,outerRadius:D,key:C.key||"polar-grid",radialLines:T})}),Ie(A,"renderLegend",function(){var C=A.state.formattedGraphicalItems,E=A.props,T=E.children,R=E.width,I=E.height,M=A.props.margin||{},$=R-(M.left||0)-(M.right||0),G=M6({children:T,formattedGraphicalItems:C,legendWidth:$,legendContent:h});if(!G)return null;var V=G.item,z=sP(G,Iee);return b.cloneElement(V,de(de({},z),{},{chartWidth:R,chartHeight:I,margin:M,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),Ie(A,"renderTooltip",function(){var C,E=A.props,T=E.children,R=E.accessibilityLayer,I=_r(T,Gr);if(!I)return null;var M=A.state,$=M.isTooltipActive,G=M.activeCoordinate,V=M.activePayload,z=M.activeLabel,U=M.offset,H=(C=I.props.active)!==null&&C!==void 0?C:$;return b.cloneElement(I,{viewBox:de(de({},U),{},{x:U.left,y:U.top}),active:H,label:z,payload:H?V:[],coordinate:G,accessibilityLayer:R})}),Ie(A,"renderBrush",function(C){var E=A.props,T=E.margin,R=E.data,I=A.state,M=I.offset,$=I.dataStartIndex,G=I.dataEndIndex,V=I.updateId;return b.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Ru(A.handleBrushChange,C.props.onChange),data:R,x:ge(C.props.x)?C.props.x:M.left,y:ge(C.props.y)?C.props.y:M.top+M.height+M.brushBottom-(T.bottom||0),width:ge(C.props.width)?C.props.width:M.width,startIndex:$,endIndex:G,updateId:"brush-".concat(V)})}),Ie(A,"renderReferenceElement",function(C,E,T){if(!C)return null;var R=A,I=R.clipPathId,M=A.state,$=M.xAxisMap,G=M.yAxisMap,V=M.offset,z=C.type.defaultProps||{},U=C.props,H=U.xAxisId,B=H===void 0?z.xAxisId:H,D=U.yAxisId,L=D===void 0?z.yAxisId:D;return b.cloneElement(C,{key:C.key||"".concat(E,"-").concat(T),xAxis:$[B],yAxis:G[L],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:I})}),Ie(A,"renderActivePoints",function(C){var E=C.item,T=C.activePoint,R=C.basePoint,I=C.childIndex,M=C.isRange,$=[],G=E.props.key,V=E.item.type.defaultProps!==void 0?de(de({},E.item.type.defaultProps),E.item.props):E.item.props,z=V.activeDot,U=V.dataKey,H=de(de({index:I,dataKey:U,cx:T.x,cy:T.y,r:4,fill:hw(E.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},Re(z,!1)),eh(z));return $.push(S.renderActiveDot(z,H,"".concat(G,"-activePoint-").concat(I))),R?$.push(S.renderActiveDot(z,de(de({},H),{},{cx:R.x,cy:R.y}),"".concat(G,"-basePoint-").concat(I))):M&&$.push(null),$}),Ie(A,"renderGraphicChild",function(C,E,T){var R=A.filterFormatItem(C,E,T);if(!R)return null;var I=A.getTooltipEventType(),M=A.state,$=M.isTooltipActive,G=M.tooltipAxis,V=M.activeTooltipIndex,z=M.activeLabel,U=A.props.children,H=_r(U,Gr),B=R.props,D=B.points,L=B.isRange,q=B.baseLine,K=R.item.type.defaultProps!==void 0?de(de({},R.item.type.defaultProps),R.item.props):R.item.props,Y=K.activeDot,W=K.hide,ue=K.activeBar,he=K.activeShape,oe=!!(!W&&$&&H&&(Y||ue||he)),te={};I!=="axis"&&H&&H.props.trigger==="click"?te={onClick:Ru(A.handleItemMouseEnter,C.props.onClick)}:I!=="axis"&&(te={onMouseLeave:Ru(A.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Ru(A.handleItemMouseEnter,C.props.onMouseEnter)});var le=b.cloneElement(C,de(de({},R.props),te));function ke(en){return typeof G.dataKey=="function"?G.dataKey(en.payload):null}if(oe)if(V>=0){var $e,re;if(G.dataKey&&!G.allowDuplicatedCategory){var be=typeof G.dataKey=="function"?ke:"payload.".concat(G.dataKey.toString());$e=Zu(D,be,z),re=L&&q&&Zu(q,be,z)}else $e=D==null?void 0:D[V],re=L&&q&&q[V];if(he||ue){var je=C.props.activeIndex!==void 0?C.props.activeIndex:V;return[b.cloneElement(C,de(de(de({},R.props),te),{},{activeIndex:je})),null,null]}if(!qe($e))return[le].concat(Eo(A.renderActivePoints({item:R,activePoint:$e,basePoint:re,childIndex:V,isRange:L})))}else{var tt,yt=(tt=A.getItemByXY(A.state.activeCoordinate))!==null&&tt!==void 0?tt:{graphicalItem:le},qt=yt.graphicalItem,Zr=qt.item,yn=Zr===void 0?C:Zr,vn=qt.childIndex,hr=de(de(de({},R.props),te),{},{activeIndex:vn});return[b.cloneElement(yn,hr),null,null]}return L?[le,null,null]:[le,null]}),Ie(A,"renderCustomized",function(C,E,T){return b.cloneElement(C,de(de({key:"recharts-customized-".concat(T)},A.props),A.state))}),Ie(A,"renderMap",{CartesianGrid:{handler:Du,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:Du},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:Du},YAxis:{handler:Du},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((O=P.id)!==null&&O!==void 0?O:Do("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=ME(A.triggeredAfterMouseMove,(N=P.throttleDelay)!==null&&N!==void 0?N:1e3/60),A.state={},A}return Gee(S,x),Uee(S,[{key:"componentDidMount",value:function(){var O,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var O=this.props,N=O.children,A=O.data,C=O.height,E=O.layout,T=_r(N,Gr);if(T){var R=T.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,M=Zb(this.state,A,R,I),$=this.state.tooltipTicks[R].coordinate,G=(this.state.offset.top+C)/2,V=E==="horizontal",z=V?{x:$,y:G}:{y:$,x:G},U=this.state.formattedGraphicalItems.find(function(B){var D=B.item;return D.type.name==="Scatter"});U&&(z=de(de({},z),U.props.points[R].tooltipPosition),M=U.props.points[R].tooltipPayload);var H={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:I,activePayload:M,activeCoordinate:z};this.setState(H),this.renderCursor(T),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(O,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==O.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==O.margin){var A,C;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(O){Iv([_r(O.children,Gr)],[_r(this.props.children,Gr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var O=_r(this.props.children,Gr);if(O&&typeof O.props.shared=="boolean"){var N=O.props.shared?"axis":"item";return d.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(O){if(!this.container)return null;var N=this.container,A=N.getBoundingClientRect(),C=pB(A),E={chartX:Math.round(O.pageX-C.left),chartY:Math.round(O.pageY-C.top)},T=A.width/N.offsetWidth||1,R=this.inRange(E.chartX,E.chartY,T);if(!R)return null;var I=this.state,M=I.xAxisMap,$=I.yAxisMap,G=this.getTooltipEventType(),V=oP(this.state,this.props.data,this.props.layout,R);if(G!=="axis"&&M&&$){var z=Ia(M).scale,U=Ia($).scale,H=z&&z.invert?z.invert(E.chartX):null,B=U&&U.invert?U.invert(E.chartY):null;return de(de({},E),{},{xValue:H,yValue:B},V)}return V?de(de({},E),V):null}},{key:"inRange",value:function(O,N){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,E=O/A,T=N/A;if(C==="horizontal"||C==="vertical"){var R=this.state.offset,I=E>=R.left&&E<=R.left+R.width&&T>=R.top&&T<=R.top+R.height;return I?{x:E,y:T}:null}var M=this.state,$=M.angleAxisMap,G=M.radiusAxisMap;if($&&G){var V=Ia($);return hA({x:E,y:T},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var O=this.props.children,N=this.getTooltipEventType(),A=_r(O,Gr),C={};A&&N==="axis"&&(A.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=eh(this.props,this.handleOuterEvent);return de(de({},E),C)}},{key:"addListener",value:function(){ev.on(tv,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){ev.removeListener(tv,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(O,N,A){for(var C=this.state.formattedGraphicalItems,E=0,T=C.length;E<T;E++){var R=C[E];if(R.item===O||R.props.key===O.key||N===ra(R.item.type)&&A===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var O=this.clipPathId,N=this.state.offset,A=N.left,C=N.top,E=N.height,T=N.width;return X.createElement("defs",null,X.createElement("clipPath",{id:O},X.createElement("rect",{x:A,y:C,height:E,width:T})))}},{key:"getXScales",value:function(){var O=this.state.xAxisMap;return O?Object.entries(O).reduce(function(N,A){var C=aP(A,2),E=C[0],T=C[1];return de(de({},N),{},Ie({},E,T.scale))},{}):null}},{key:"getYScales",value:function(){var O=this.state.yAxisMap;return O?Object.entries(O).reduce(function(N,A){var C=aP(A,2),E=C[0],T=C[1];return de(de({},N),{},Ie({},E,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(O){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[O])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(O){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[O])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(O){var N=this.state,A=N.formattedGraphicalItems,C=N.activeItem;if(A&&A.length)for(var E=0,T=A.length;E<T;E++){var R=A[E],I=R.props,M=R.item,$=M.type.defaultProps!==void 0?de(de({},M.type.defaultProps),M.props):M.props,G=ra(M.type);if(G==="Bar"){var V=(I.data||[]).find(function(B){return $Q(O,B)});if(V)return{graphicalItem:R,payload:V}}else if(G==="RadialBar"){var z=(I.data||[]).find(function(B){return hA(O,B)});if(z)return{graphicalItem:R,payload:z}}else if(zf(R,C)||Bf(R,C)||Mc(R,C)){var U=sX({graphicalItem:R,activeTooltipItem:C,itemData:$.data}),H=$.activeIndex===void 0?U:$.activeIndex;return{graphicalItem:de(de({},R),{},{childIndex:H}),payload:Mc(R,C)?$.data[U]:R.props.data[U]}}}return null}},{key:"render",value:function(){var O=this;if(!N5(this))return null;var N=this.props,A=N.children,C=N.className,E=N.width,T=N.height,R=N.style,I=N.compact,M=N.title,$=N.desc,G=sP(N,$ee),V=Re(G,!1);if(I)return X.createElement(F3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement(Lv,qi({},V,{width:E,height:T,title:M,desc:$}),this.renderClipPath(),k5(A,this.renderMap)));if(this.props.accessibilityLayer){var z,U;V.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,V.role=(U=this.props.role)!==null&&U!==void 0?U:"application",V.onKeyDown=function(B){O.accessibilityManager.keyboardEvent(B)},V.onFocus=function(){O.accessibilityManager.focus()}}var H=this.parseEventsOfWrapper();return X.createElement(F3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement("div",qi({className:ze("recharts-wrapper",C),style:de({position:"relative",cursor:"default",width:E,height:T},R)},H,{ref:function(D){O.container=D}}),X.createElement(Lv,qi({},V,{width:E,height:T,title:M,desc:$,style:Zee}),this.renderClipPath(),k5(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(b.Component);Ie(v,"displayName",n),Ie(v,"defaultProps",de({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Ie(v,"getDerivedStateFromProps",function(x,S){var P=x.dataKey,O=x.data,N=x.children,A=x.width,C=x.height,E=x.layout,T=x.stackOffset,R=x.margin,I=S.dataStartIndex,M=S.dataEndIndex;if(S.updateId===void 0){var $=lP(x);return de(de(de({},$),{},{updateId:0},j(de(de({props:x},$),{},{updateId:0}),S)),{},{prevDataKey:P,prevData:O,prevWidth:A,prevHeight:C,prevLayout:E,prevStackOffset:T,prevMargin:R,prevChildren:N})}if(P!==S.prevDataKey||O!==S.prevData||A!==S.prevWidth||C!==S.prevHeight||E!==S.prevLayout||T!==S.prevStackOffset||!zi(R,S.prevMargin)){var G=lP(x),V={chartX:S.chartX,chartY:S.chartY,isTooltipActive:S.isTooltipActive},z=de(de({},oP(S,O,E)),{},{updateId:S.updateId+1}),U=de(de(de({},G),V),z);return de(de(de({},U),j(de({props:x},U),S)),{},{prevDataKey:P,prevData:O,prevWidth:A,prevHeight:C,prevLayout:E,prevStackOffset:T,prevMargin:R,prevChildren:N})}if(!Iv(N,S.prevChildren)){var H,B,D,L,q=_r(N,vo),K=q&&(H=(B=q.props)===null||B===void 0?void 0:B.startIndex)!==null&&H!==void 0?H:I,Y=q&&(D=(L=q.props)===null||L===void 0?void 0:L.endIndex)!==null&&D!==void 0?D:M,W=K!==I||Y!==M,ue=!qe(O),he=ue&&!W?S.updateId:S.updateId+1;return de(de({updateId:he},j(de(de({props:x},S),{},{updateId:he,dataStartIndex:K,dataEndIndex:Y}),S)),{},{prevChildren:N,dataStartIndex:K,dataEndIndex:Y})}return null}),Ie(v,"renderActiveDot",function(x,S,P){var O;return b.isValidElement(x)?O=b.cloneElement(x,S):Fe(x)?O=x(S):O=X.createElement($f,S),X.createElement(Ve,{className:"recharts-active-dot",key:P},O)});var w=b.forwardRef(function(S,P){return X.createElement(v,qi({},S,{ref:P}))});return w.displayName=v.displayName,w},cte=Sw({chartName:"LineChart",GraphicalChild:Co,axisComponents:[{axisType:"xAxis",AxisComp:Wo},{axisType:"yAxis",AxisComp:Ho}],formatAxisMap:v_}),dte=Sw({chartName:"BarChart",GraphicalChild:Za,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Wo},{axisType:"yAxis",AxisComp:Ho}],formatAxisMap:v_}),ute=Sw({chartName:"PieChart",GraphicalChild:fa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:qf},{axisType:"radiusAxis",AxisComp:Df}],formatAxisMap:GK,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const dP=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],hte=[{value:"day",label:"Last 24 Hours"},{value:"week",label:"Last 7 Days"},{value:"month",label:"This Month"}];function fte({metrics:e,loading:t}){const n=[{title:"Total Executions",value:(e==null?void 0:e.totalExecutions)??0,format:a=>a.toLocaleString(),color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Success Rate",value:(e==null?void 0:e.overallSuccessRate)??0,format:a=>`${a}%`,color:((e==null?void 0:e.overallSuccessRate)??0)>=95?"text-green-600":((e==null?void 0:e.overallSuccessRate)??0)>=80?"text-yellow-600":"text-red-600",bgColor:((e==null?void 0:e.overallSuccessRate)??0)>=95?"bg-green-50":((e==null?void 0:e.overallSuccessRate)??0)>=80?"bg-yellow-50":"bg-red-50"},{title:"Avg Latency",value:(e==null?void 0:e.avgLatencyMs)??0,format:a=>`${a}ms`,color:"text-purple-600",bgColor:"bg-purple-50"},{title:"Total Cost",value:(e==null?void 0:e.totalCostCents)??0,format:a=>`$${(a/100).toFixed(2)}`,color:"text-amber-600",bgColor:"bg-amber-50"},{title:"Active Agents",value:(e==null?void 0:e.totalAgents)??0,format:a=>a.toString(),color:"text-teal-600",bgColor:"bg-teal-50"},{title:"Unique Users",value:(e==null?void 0:e.uniqueUsers)??0,format:a=>a.toString(),color:"text-indigo-600",bgColor:"bg-indigo-50"}];return r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:n.map(a=>r.jsxs("div",{className:`${a.bgColor} rounded-lg p-4 ${t?"animate-pulse":""}`,children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:a.title}),r.jsx("p",{className:`text-2xl font-bold ${a.color}`,children:t?"-":a.format(a.value)})]},a.title))})}function mte({data:e,loading:t}){return t?r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Executions Over Time"}),r.jsx("div",{className:"h-64 bg-gray-100 animate-pulse rounded"})]}):r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Executions Over Time"}),r.jsx(zj,{width:"100%",height:256,children:r.jsxs(cte,{data:e,children:[r.jsx(Nw,{strokeDasharray:"3 3"}),r.jsx(Wo,{dataKey:"date",tick:{fontSize:12},tickFormatter:n=>new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),r.jsx(Ho,{tick:{fontSize:12}}),r.jsx(Gr,{labelFormatter:n=>new Date(n).toLocaleDateString(),formatter:(n,a)=>[n.toLocaleString(),a]}),r.jsx(Xa,{}),r.jsx(Co,{type:"monotone",dataKey:"executions",stroke:"#3B82F6",strokeWidth:2,dot:!1,name:"Executions"}),r.jsx(Co,{type:"monotone",dataKey:"successCount",stroke:"#10B981",strokeWidth:2,dot:!1,name:"Successful"})]})})]})}function pte({agents:e,loading:t}){if(t||e.length===0)return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cost by Agent"}),r.jsx("div",{className:"h-64 bg-gray-100 animate-pulse rounded"})]});const n=e.filter(a=>a.totalCostCents>0).slice(0,8).map(a=>({name:a.agentName||a.agentId.slice(0,8),value:a.totalCostCents}));return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cost by Agent"}),r.jsx(zj,{width:"100%",height:256,children:r.jsxs(ute,{children:[r.jsx(fa,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:s})=>`${a} (${(s*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:n.map((a,s)=>r.jsx(Sf,{fill:dP[s%dP.length]},`cell-${s}`))}),r.jsx(Gr,{formatter:a=>[`$${(a/100).toFixed(2)}`,"Cost"]})]})})]})}function xte({agents:e,loading:t}){if(t||e.length===0)return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Latency Distribution"}),r.jsx("div",{className:"h-64 bg-gray-100 animate-pulse rounded"})]});const n=e.slice(0,10).map(a=>({name:a.agentName||a.agentId.slice(0,8),avgLatency:a.avgLatencyMs,p95Latency:a.p95LatencyMs}));return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Latency by Agent"}),r.jsx(zj,{width:"100%",height:256,children:r.jsxs(dte,{data:n,children:[r.jsx(Nw,{strokeDasharray:"3 3"}),r.jsx(Wo,{dataKey:"name",tick:{fontSize:10},angle:-45,textAnchor:"end",height:60}),r.jsx(Ho,{tick:{fontSize:12}}),r.jsx(Gr,{formatter:a=>[`${a}ms`,""]}),r.jsx(Xa,{}),r.jsx(Za,{dataKey:"avgLatency",fill:"#8B5CF6",name:"Avg Latency (ms)"}),r.jsx(Za,{dataKey:"p95Latency",fill:"#EC4899",name:"P95 Latency (ms)"})]})})]})}function gte({agents:e,loading:t}){return t?r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Agent Performance"}),r.jsx("div",{className:"space-y-2",children:[...Array(5)].map((n,a)=>r.jsx("div",{className:"h-12 bg-gray-100 animate-pulse rounded"},a))})]}):r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm overflow-x-auto",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Agent Performance"}),r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Agent"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Executions"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Success"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Latency"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Cost"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Rating"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(n=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsx("span",{className:"font-medium text-gray-900",children:n.agentName||n.agentId.slice(0,8)})}),r.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:n.totalExecutions.toLocaleString()}),r.jsx("td",{className:"px-4 py-3 text-right",children:r.jsxs("span",{className:`px-2 py-1 rounded text-sm ${n.successRate>=95?"bg-green-100 text-green-800":n.successRate>=80?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[n.successRate,"%"]})}),r.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:[n.avgLatencyMs,"ms"]}),r.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:["$",(n.totalCostCents/100).toFixed(2)]}),r.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:n.avgRating>0?n.avgRating.toFixed(1):"-"})]},n.agentId))})]})]})}function yte({trends:e,loading:t}){if(t||e.length===0)return null;const n=i=>{switch(i){case"up":return"^";case"down":return"v";default:return"-"}},a=i=>{const l=["successRate","totalExecutions","uniqueUsers","avgRating"].includes(i.metric),d=["avgLatencyMs","totalCostCents"].includes(i.metric);return i.direction==="stable"?"text-gray-600 bg-gray-100":i.direction==="up"&&l||i.direction==="down"&&d?"text-green-600 bg-green-100":"text-red-600 bg-red-100"},s=i=>i.replace(/([A-Z])/g," $1").replace(/^./,l=>l.toUpperCase()).replace("Ms"," (ms)").replace("Cents"," ($)");return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Trends vs Previous Period"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:e.map(i=>r.jsxs("div",{className:`rounded-lg p-3 ${a(i)}`,children:[r.jsx("p",{className:"text-xs font-medium mb-1",children:s(i.metric)}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-lg font-bold",children:n(i.direction)}),r.jsxs("span",{className:"text-sm",children:[i.changePercent>0?"+":"",i.changePercent.toFixed(1),"%"]})]})]},i.metric))})]})}function vte({entries:e,loading:t}){if(t)return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Agent Leaderboard"}),r.jsx("div",{className:"space-y-2",children:[...Array(5)].map((a,s)=>r.jsx("div",{className:"h-12 bg-gray-100 animate-pulse rounded"},s))})]});const n=a=>{switch(a){case"up":return r.jsx("span",{className:"text-green-500",children:"^"});case"down":return r.jsx("span",{className:"text-red-500",children:"v"});default:return r.jsx("span",{className:"text-gray-400",children:"-"})}};return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Agent Leaderboard"}),r.jsx("div",{className:"space-y-2",children:e.map(a=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`w-8 h-8 flex items-center justify-center rounded-full font-bold ${a.rank===1?"bg-yellow-400 text-yellow-900":a.rank===2?"bg-gray-300 text-gray-700":a.rank===3?"bg-orange-400 text-orange-900":"bg-gray-200 text-gray-600"}`,children:a.rank}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:a.agentName||a.agentId.slice(0,8)}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Score: ",a.score.toFixed(1)," ",n(a.trend)]})]})]}),r.jsxs("div",{className:"text-right text-sm",children:[r.jsxs("p",{className:"text-gray-600",children:[a.executions.toLocaleString()," executions"]}),r.jsxs("p",{className:"text-gray-500",children:[a.successRate,"% success"]})]})]},a.agentId))})]})}function bte({data:e,loading:t}){if(t)return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Execution Heatmap"}),r.jsx("div",{className:"h-64 bg-gray-100 animate-pulse rounded"})]});const n=Array.from({length:24},(d,u)=>u),a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=Array.from({length:7},()=>Array(24).fill(0));let i=1;e.forEach(d=>{const h=new Date(d.date).getDay();h>=0&&h<7&&d.hour>=0&&d.hour<24&&(s[h][d.hour]+=d.value,i=Math.max(i,s[h][d.hour]))});const l=d=>{if(d===0)return"bg-gray-100";const u=d/i;return u<.2?"bg-blue-100":u<.4?"bg-blue-200":u<.6?"bg-blue-300":u<.8?"bg-blue-400":"bg-blue-500"};return r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Execution Heatmap (by Day/Hour)"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("div",{className:"min-w-max",children:[r.jsx("div",{className:"flex gap-0.5 mb-1 ml-12",children:n.map(d=>r.jsx("div",{className:"w-6 text-xs text-gray-500 text-center",title:`${d}:00`,children:d%3===0?d:""},d))}),a.map((d,u)=>r.jsxs("div",{className:"flex gap-0.5 items-center",children:[r.jsx("span",{className:"w-10 text-xs text-gray-600 text-right pr-2",children:d}),n.map(h=>r.jsx("div",{className:`w-6 h-6 rounded-sm ${l(s[u][h])} cursor-pointer hover:ring-2 hover:ring-blue-400`,title:`${d} ${h}:00 - ${s[u][h]} executions`},h))]},d)),r.jsxs("div",{className:"flex items-center gap-2 mt-4 ml-12",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Less"}),r.jsx("div",{className:"w-4 h-4 bg-gray-100 rounded-sm"}),r.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded-sm"}),r.jsx("div",{className:"w-4 h-4 bg-blue-200 rounded-sm"}),r.jsx("div",{className:"w-4 h-4 bg-blue-300 rounded-sm"}),r.jsx("div",{className:"w-4 h-4 bg-blue-400 rounded-sm"}),r.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm"}),r.jsx("span",{className:"text-xs text-gray-500",children:"More"})]})]})})]})}function jte({anomalies:e,loading:t}){return t||e.length===0?null:r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"text-red-500",children:"!"})," Anomalies Detected"]}),r.jsx("div",{className:"space-y-2",children:e.slice(0,5).map((n,a)=>r.jsx("div",{className:`p-3 rounded-lg border-l-4 ${n.severity==="critical"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium capitalize",children:n.metric.replace(/([A-Z])/g," $1")}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Value: ",n.value.toLocaleString()," (expected: ~",n.expectedValue.toLocaleString(),")"]})]}),r.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${n.severity==="critical"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[n.deviationPercent>0?"+":"",n.deviationPercent.toFixed(0),"%"]})]})},a))})]})}function wte({onExport:e,loading:t}){const[n,a]=b.useState(!1);return r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>a(!n),disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"animate-spin",children:"..."}),"Exporting..."]}):r.jsx(r.Fragment,{children:"Export"})}),n&&!t&&r.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:[r.jsx("button",{onClick:()=>{e("csv"),a(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-100 rounded-t-lg",children:"Export as CSV"}),r.jsx("button",{onClick:()=>{e("pdf"),a(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-100 rounded-b-lg",children:"Export as PDF"})]})]})}function Nte(){const[e,t]=b.useState("week"),[n,a]=b.useState(!0),[s,i]=b.useState(!1),[l,d]=b.useState(null),[u,h]=b.useState(!1),[p,m]=b.useState(!0),[g,j]=b.useState(null),[v,w]=b.useState([]),[x,S]=b.useState([]),[P,O]=b.useState([]),[N,A]=b.useState([]),C=b.useCallback(async()=>{var T,R,I,M;a(!0),d(null);try{const[$,G,V,z]=await Promise.all([fetch(`/api/analytics/overview?period=${e}`,{credentials:"include"}),fetch(`/api/analytics/agents?period=${e}`,{credentials:"include"}),fetch(`/api/analytics/leaderboard?period=${e}&limit=10`,{credentials:"include"}),fetch(`/api/analytics/trends?period=${e}`,{credentials:"include"})]);if(Io($)){h(!0);return}if(!$.ok)throw new Error("Failed to fetch overview");if(!G.ok)throw new Error("Failed to fetch agent metrics");if(!V.ok)throw new Error("Failed to fetch leaderboard");if(!z.ok)throw new Error("Failed to fetch trends");const[U,H,B,D]=await Promise.all([$.json(),G.json(),V.json(),z.json()]);j(U.data),w(((T=H.data)==null?void 0:T.agents)||[]),S(((R=B.data)==null?void 0:R.leaderboard)||[]),O(((I=D.data)==null?void 0:I.trends)||[]),A(((M=D.data)==null?void 0:M.anomalies)||[])}catch($){d($ instanceof Error?$.message:"Failed to load analytics"),console.error("Analytics fetch error:",$)}finally{a(!1)}},[e]),E=async T=>{i(!0);try{const R=await fetch("/api/analytics/report",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:"Agent Performance Report",sections:["overview","agents","leaderboard","costs"],format:T,period:e})});if(!R.ok)throw new Error("Export failed");const I=await R.blob(),M=window.URL.createObjectURL(I),$=document.createElement("a");$.href=M,$.download=`analytics-report-${new Date().toISOString().split("T")[0]}.${T}`,document.body.appendChild($),$.click(),document.body.removeChild($),window.URL.revokeObjectURL(M)}catch(R){console.error("Export error:",R),d("Failed to export report")}finally{i(!1)}};return b.useEffect(()=>{C()},[C]),b.useEffect(()=>{if(!p)return;const T=setInterval(C,6e4);return()=>clearInterval(T)},[p,C]),u?r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Agent performance and execution metrics"})]}),r.jsx(Zc,{title:"Analytics Dashboard",description:"The analytics dashboard is currently being set up. This feature will display agent performance metrics, execution trends, and leaderboards once the backend service is activated.",onRetry:C})]}):r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Agent performance and execution metrics"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("select",{value:e,onChange:T=>t(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:hte.map(T=>r.jsx("option",{value:T.value,children:T.label},T.value))}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx("input",{type:"checkbox",checked:p,onChange:T=>m(T.target.checked),className:"rounded"}),"Auto-refresh"]}),r.jsx(wte,{onExport:E,loading:s})]})]}),l&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:[l,r.jsx("button",{onClick:C,className:"ml-4 underline hover:no-underline",children:"Retry"})]}),r.jsx("div",{className:"mb-6",children:r.jsx(jte,{anomalies:N,loading:n})}),r.jsx("div",{className:"mb-6",children:r.jsx(fte,{metrics:g,loading:n})}),r.jsx("div",{className:"mb-6",children:r.jsx(yte,{trends:P,loading:n})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r.jsx(mte,{data:(g==null?void 0:g.dailyTrend)||[],loading:n}),r.jsx(pte,{agents:v,loading:n})]}),r.jsx("div",{className:"mb-6",children:r.jsx(xte,{agents:v,loading:n})}),r.jsx("div",{className:"mb-6",children:r.jsx(bte,{data:((g==null?void 0:g.dailyTrend)||[]).flatMap(T=>Array.from({length:24},(R,I)=>({date:T.date,hour:I,value:Math.floor(T.executions*(I>=9&&I<=17?.08:.02))}))),loading:n})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(gte,{agents:v,loading:n}),r.jsx(vte,{entries:x,loading:n})]})]})}const Ste=()=>{const[e,t]=b.useState([]),[n,a]=b.useState(null),[s,i]=b.useState(null),[l,d]=b.useState(null),[u,h]=b.useState(null),[p,m]=b.useState([]),[g,j]=b.useState("monthly"),[v,w]=b.useState(!0),[x,S]=b.useState(null);b.useEffect(()=>{P()},[]);const P=async()=>{try{w(!0),S(null);const[R,I,M,$]=await Promise.all([fetch("/api/billing/plans"),fetch("/api/billing/subscription"),fetch("/api/billing/usage"),fetch("/api/billing/invoices")]);if(!R.ok||!I.ok||!M.ok)throw new Error("Failed to load billing data");const G=await R.json(),V=await I.json(),z=await M.json(),U=await $.json();t(G.plans),a(V.subscription),i(z.usage),d(z.limits),h(z.percentages),m(U.invoices)}catch(R){S(R instanceof Error?R.message:"An error occurred")}finally{w(!1)}},O=async R=>{try{const I=await fetch("/api/billing/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:R,billingInterval:g})});if(!I.ok){const $=await I.json();throw new Error($.error||"Failed to create checkout session")}const{url:M}=await I.json();M&&(window.location.href=M)}catch(I){S(I instanceof Error?I.message:"Failed to upgrade")}},N=async()=>{try{const R=await fetch("/api/billing/portal",{method:"POST",headers:{"Content-Type":"application/json"}});if(!R.ok){const M=await R.json();throw new Error(M.error||"Failed to open billing portal")}const{url:I}=await R.json();I&&(window.location.href=I)}catch(R){S(R instanceof Error?R.message:"Failed to open billing portal")}},A=async()=>{if(confirm("Are you sure you want to cancel your subscription?"))try{const R=await fetch("/api/billing/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({immediately:!1})});if(!R.ok){const I=await R.json();throw new Error(I.error||"Failed to cancel subscription")}await P()}catch(R){S(R instanceof Error?R.message:"Failed to cancel")}},C=async()=>{try{const R=await fetch("/api/billing/reactivate",{method:"POST",headers:{"Content-Type":"application/json"}});if(!R.ok){const I=await R.json();throw new Error(I.error||"Failed to reactivate subscription")}await P()}catch(R){S(R instanceof Error?R.message:"Failed to reactivate")}},E=R=>R===-1?"Unlimited":R.toLocaleString(),T=R=>`${(R/1073741824).toFixed(2)} GB`;return v?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Billing & Subscription"}),x&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[x,r.jsx("button",{onClick:()=>S(null),className:"ml-4 text-red-500 hover:text-red-700",children:"Dismiss"})]}),n&&r.jsxs("section",{className:"mb-8 p-6 bg-white rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Current Plan"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.plan.name}),r.jsxs("p",{className:"text-gray-500",children:[n.billingInterval==="yearly"?"Annual":"Monthly"," billing"]}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Current period ends:"," ",new Date(n.currentPeriodEnd).toLocaleDateString()]}),n.cancelAtPeriodEnd&&r.jsx("p",{className:"text-sm text-orange-600 mt-2",children:"Subscription will be canceled at period end"})]}),r.jsxs("div",{className:"flex gap-3",children:[n.hasStripeSubscription&&r.jsx("button",{onClick:N,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Manage Billing"}),n.cancelAtPeriodEnd?r.jsx("button",{onClick:C,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Reactivate"}):n.planId!=="free"?r.jsx("button",{onClick:A,className:"px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50",children:"Cancel Plan"}):null]})]})]}),s&&l&&u&&r.jsxs("section",{className:"mb-8 p-6 bg-white rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Usage"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(Ul,{label:"Executions",current:s.executions,limit:l.executionsPerMonth,percentage:u.executions}),r.jsx(Ul,{label:"API Requests (Daily)",current:s.api_requests,limit:l.apiRequestsPerDay,percentage:u.api_requests}),r.jsx(Ul,{label:"Agents",current:s.agents,limit:l.agents,percentage:u.agents}),r.jsx(Ul,{label:"Workflows",current:s.workflows,limit:l.workflows,percentage:u.workflows}),r.jsx(Ul,{label:"Team Members",current:s.team_members,limit:l.teamMembers,percentage:u.team_members}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"Storage"}),r.jsxs("span",{className:"text-sm text-gray-500",children:[T(s.storage_bytes)," / ",E(l.storageGb)," GB"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(u.storage_bytes,100)}%`}})})]})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Available Plans"}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>j("monthly"),className:`px-4 py-2 rounded-md transition ${g==="monthly"?"bg-white shadow text-blue-600":"text-gray-600"}`,children:"Monthly"}),r.jsxs("button",{onClick:()=>j("yearly"),className:`px-4 py-2 rounded-md transition ${g==="yearly"?"bg-white shadow text-blue-600":"text-gray-600"}`,children:["Yearly",r.jsx("span",{className:"ml-1 text-xs text-green-600",children:"Save 17%"})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map(R=>r.jsxs("div",{className:`p-6 bg-white rounded-lg shadow relative ${R.popular?"ring-2 ring-blue-500":""}`,children:[R.popular&&r.jsx("span",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-500 text-white text-xs px-3 py-1 rounded-full",children:"Most Popular"}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:R.name}),r.jsx("p",{className:"text-gray-500 text-sm mb-4",children:R.description}),r.jsxs("div",{className:"mb-6",children:[r.jsx("span",{className:"text-3xl font-bold",children:g==="yearly"?R.pricing.yearly:R.pricing.monthly}),R.pricing.monthlyRaw>0&&r.jsxs("span",{className:"text-gray-500",children:["/",g==="yearly"?"year":"month"]})]}),r.jsxs("ul",{className:"space-y-2 mb-6 text-sm",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Hn,{})," ",E(R.limits.agents)," Agents"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Hn,{})," ",E(R.limits.workflows)," Workflows"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Hn,{})," ",E(R.limits.executionsPerMonth)," Executions/month"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Hn,{})," ",E(R.limits.teamMembers)," Team members"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Hn,{})," ",R.limits.storageGb," GB Storage"]}),R.features.githubIntegration&&r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Hn,{})," GitHub Integration"]}),R.features.advancedAnalytics&&r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Hn,{})," Advanced Analytics"]}),R.features.prioritySupport&&r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Hn,{})," Priority Support"]}),R.features.sso&&r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(Hn,{})," SSO"]})]}),(n==null?void 0:n.planId)===R.id?r.jsx("button",{disabled:!0,className:"w-full py-2 bg-gray-100 text-gray-500 rounded-lg cursor-not-allowed",children:"Current Plan"}):R.id==="free"?r.jsx("button",{disabled:!0,className:"w-full py-2 bg-gray-100 text-gray-500 rounded-lg cursor-not-allowed",children:"Free"}):R.pricing.monthlyRaw===-1?r.jsx("a",{href:"mailto:sales@kyndof.com",className:"block w-full py-2 text-center border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50",children:"Contact Sales"}):r.jsxs("button",{onClick:()=>O(R.id),className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[n&&n.planId!=="free"?"Switch to":"Upgrade to"," ",R.name]})]},R.id))})]}),p.length>0&&r.jsxs("section",{className:"p-6 bg-white rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Invoice History"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left py-3 px-4",children:"Date"}),r.jsx("th",{className:"text-left py-3 px-4",children:"Period"}),r.jsx("th",{className:"text-left py-3 px-4",children:"Amount"}),r.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),r.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),r.jsx("tbody",{children:p.map(R=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"py-3 px-4",children:new Date(R.createdAt).toLocaleDateString()}),r.jsxs("td",{className:"py-3 px-4",children:[new Date(R.periodStart).toLocaleDateString()," -"," ",new Date(R.periodEnd).toLocaleDateString()]}),r.jsx("td",{className:"py-3 px-4",children:R.amountFormatted}),r.jsx("td",{className:"py-3 px-4",children:r.jsx(kte,{status:R.status})}),r.jsx("td",{className:"py-3 px-4",children:r.jsxs("div",{className:"flex gap-2",children:[R.hostedInvoiceUrl&&r.jsx("a",{href:R.hostedInvoiceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View"}),R.invoicePdfUrl&&r.jsx("a",{href:R.invoicePdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"PDF"})]})})]},R.id))})]})})]})]})},Ul=({label:e,current:t,limit:n,percentage:a})=>{const s=l=>l===-1?"Unlimited":l.toLocaleString(),i=l=>l>=90?"bg-red-500":l>=75?"bg-orange-500":"bg-blue-600";return r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-gray-600",children:e}),r.jsxs("span",{className:"text-sm text-gray-500",children:[t.toLocaleString()," / ",s(n)]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`${i(a)} h-2 rounded-full transition-all`,style:{width:`${Math.min(a,100)}%`}})})]})},Hn=()=>r.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),kte=({status:e})=>{const t={paid:"bg-green-100 text-green-800",open:"bg-yellow-100 text-yellow-800",draft:"bg-gray-100 text-gray-800",void:"bg-red-100 text-red-800",uncollectible:"bg-red-100 text-red-800"};return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t[e]||t.draft}`,children:e.charAt(0).toUpperCase()+e.slice(1)})};function Cte(){const[e,t]=b.useState(null),[n,a]=b.useState([]),[s,i]=b.useState(null),[l,d]=b.useState(!0),[u,h]=b.useState(null),[p,m]=b.useState(!1),[g,j]=b.useState("month"),[v,w]=b.useState(""),[x,S]=b.useState(!1),{user:P}=rs();b.useEffect(()=>{O()},[g]);const O=async()=>{try{d(!0),h(null);const[I,M,$]=await Promise.all([fetch(`/api/costs/summary?period=${g}`,{credentials:"include"}),fetch("/api/costs/daily?days=30",{credentials:"include"}),fetch("/api/costs/budget",{credentials:"include"})]);if(Io(I)){m(!0);return}if(!I.ok||!M.ok||!$.ok)throw new Error("Failed to fetch cost data");const[G,V,z]=await Promise.all([I.json(),M.json(),$.json()]);t(G.data),a(V.data.trend),i(z.data),z.data.budgetCents&&w((z.data.budgetCents/100).toString())}catch(I){h(I instanceof Error?I.message:"Unknown error")}finally{d(!1)}},N=async()=>{try{S(!0);const I=v?Math.round(parseFloat(v)*100):null,M=await fetch("/api/costs/budget",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({budgetCents:I})});if(!M.ok){const $=await M.json();throw new Error($.message||"Failed to update budget")}await O()}catch(I){h(I instanceof Error?I.message:"Failed to update budget")}finally{S(!1)}},A=I=>`$${(I/100).toFixed(2)}`,C=I=>I.toLocaleString(),E=I=>{switch(I){case"exceeded":return"bg-red-500";case"critical":return"bg-orange-500";case"warning":return"bg-yellow-500";default:return"bg-green-500"}},T=I=>{switch(I){case"exceeded":return"bg-red-100 text-red-800";case"critical":return"bg-orange-100 text-orange-800";case"warning":return"bg-yellow-100 text-yellow-800";default:return"bg-green-100 text-green-800"}},R=()=>Math.max(...n.map(I=>I.totalCostCents),1);return p?r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Cost Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Monitor and manage your AI agent spending."})]}),r.jsx(Zc,{title:"Cost Dashboard",description:"The cost dashboard is currently being set up. This feature will display spending analytics, budget tracking, and cost breakdowns by agent and model once the backend service is activated.",onRetry:O})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Cost Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Monitor and manage your AI agent spending."})]}),u&&r.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800",children:u})}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Monthly Budget"}),s&&r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T(s.status)}`,children:s.status==="exceeded"?"Budget Exceeded":s.status==="critical"?"Critical":s.status==="warning"?"Warning":"On Track"})]}),l?r.jsx("div",{className:"h-20 bg-gray-200 animate-pulse rounded"}):s?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[r.jsx("span",{className:"text-4xl font-bold text-gray-900",children:A(s.spentCents)}),s.budgetCents&&r.jsxs("span",{className:"text-xl text-gray-500",children:["/ ",A(s.budgetCents)]}),r.jsxs("span",{className:"text-lg text-gray-500",children:["(",s.usedPercent,"%)"]})]}),s.budgetCents&&r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:r.jsx("div",{className:`h-4 rounded-full transition-all ${E(s.status)}`,style:{width:`${Math.min(s.usedPercent,100)}%`}})}),r.jsx("p",{className:"text-gray-600",children:s.budgetCents?`${A(s.remainingCents)} remaining this month`:"No budget limit set"})]}):r.jsx("p",{className:"text-gray-500",children:"No budget data available"}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Set Monthly Budget (USD)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),r.jsx("input",{type:"number",value:v,onChange:I=>w(I.target.value),placeholder:"500.00",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsx("button",{onClick:N,disabled:x,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:x?"Saving...":"Save"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to remove budget limit. Alerts at 80%, 90%, and 100%."})]})]}),r.jsx("div",{className:"mb-6 flex gap-2",children:["day","week","month"].map(I=>r.jsx("button",{onClick:()=>j(I),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${g===I?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:I==="day"?"Today":I==="week"?"This Week":"This Month"},I))}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Total Cost"}),l?r.jsx("div",{className:"h-8 bg-gray-200 animate-pulse rounded"}):r.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:A((e==null?void 0:e.totalCostCents)??0)})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Total Requests"}),l?r.jsx("div",{className:"h-8 bg-gray-200 animate-pulse rounded"}):r.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:C((e==null?void 0:e.requestCount)??0)})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Input Tokens"}),l?r.jsx("div",{className:"h-8 bg-gray-200 animate-pulse rounded"}):r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C((e==null?void 0:e.totalInputTokens)??0)})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Output Tokens"}),l?r.jsx("div",{className:"h-8 bg-gray-200 animate-pulse rounded"}):r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C((e==null?void 0:e.totalOutputTokens)??0)})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Cost by Agent"}),l?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(I=>r.jsx("div",{className:"h-12 bg-gray-200 animate-pulse rounded"},I))}):e!=null&&e.byAgent&&e.byAgent.length>0?r.jsx("div",{className:"space-y-4",children:e.byAgent.map(I=>{const M=e.totalCostCents>0?Math.round(I.totalCostCents/e.totalCostCents*100):0;return r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm",children:""})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"font-medium text-gray-900",children:I.agentName||I.agentId.slice(0,8)}),r.jsxs("span",{className:"text-sm text-gray-600",children:[A(I.totalCostCents)," (",M,"%)"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"h-2 bg-indigo-600 rounded-full transition-all",style:{width:`${M}%`}})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[C(I.requestCount)," requests"]})]})]},I.agentId)})}):r.jsx("p",{className:"text-gray-500",children:"No agent cost data available"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Daily Cost Trend (Last 30 Days)"}),l?r.jsx("div",{className:"h-48 bg-gray-200 animate-pulse rounded"}):n.length>0?r.jsx("div",{className:"h-48 flex items-end gap-1",children:n.slice(-30).map(I=>{const M=I.totalCostCents>0?Math.max(I.totalCostCents/R()*100,4):2;return r.jsxs("div",{className:"flex-1 group relative",title:`${I.date}: ${A(I.totalCostCents)}`,children:[r.jsx("div",{className:"bg-indigo-500 hover:bg-indigo-600 rounded-t transition-all cursor-pointer",style:{height:`${M}%`}}),r.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:r.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[I.date,": ",A(I.totalCostCents)]})})]},I.date)})}):r.jsx("p",{className:"text-gray-500",children:"No trend data available"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Cost by Model"}),l?r.jsx("div",{className:"space-y-2",children:[1,2,3].map(I=>r.jsx("div",{className:"h-8 bg-gray-200 animate-pulse rounded"},I))}):e!=null&&e.byModel&&Object.keys(e.byModel).length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Model"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Cost"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Requests"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Avg/Request"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:Object.entries(e.byModel).sort(([,I],[,M])=>M.costCents-I.costCents).map(([I,M])=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:I}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:A(M.costCents)}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:C(M.requests)}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-600",children:A(M.requests>0?Math.round(M.costCents/M.requests):0)})]},I))})]})}):r.jsx("p",{className:"text-gray-500",children:"No model cost data available"})]})]})}const Ate=["agents:read","agents:execute","workflows:read","workflows:write","workflows:execute","executions:read","webhooks:manage","organization:read"],Pte=["agent.execution.started","agent.execution.completed","agent.execution.failed","workflow.started","workflow.completed","workflow.failed","approval.requested","approval.completed","approval.rejected","api_key.created","api_key.revoked"],Ote=()=>{const[e,t]=b.useState("keys"),[n,a]=b.useState([]),[s,i]=b.useState([]),[l,d]=b.useState(null),[u,h]=b.useState(!0),[p,m]=b.useState(null),[g,j]=b.useState(!1),[v,w]=b.useState(""),[x,S]=b.useState([]),[P,O]=b.useState("free"),[N,A]=b.useState(null),[C,E]=b.useState(!1),[T,R]=b.useState(""),[I,M]=b.useState([]),[$,G]=b.useState(null),V=b.useCallback(async()=>{h(!0),m(null);try{const[Y,W,ue]=await Promise.all([fetch("/api/organization/api-keys"),fetch("/api/organization/webhooks"),fetch("/api/organization/usage")]);if(Y.ok){const he=await Y.json();a(he.data||[])}if(W.ok){const he=await W.json();i(he.data||[])}if(ue.ok){const he=await ue.json();d(he.data||null)}}catch(Y){m("Failed to load data"),console.error("Error fetching developer portal data:",Y)}finally{h(!1)}},[]);b.useEffect(()=>{V()},[V]);const z=async()=>{try{const Y=await fetch("/api/organization/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:v,scopes:x,rateLimitTier:P})});if(Y.ok){const W=await Y.json();A(W.data.key),a(ue=>[...ue,W.data]),w(""),S([]),O("free")}else{const W=await Y.json();m(W.message||"Failed to create API key")}}catch{m("Failed to create API key")}},U=async Y=>{if(confirm("Are you sure you want to revoke this API key? This action cannot be undone."))try{(await fetch(`/api/organization/api-keys/${Y}`,{method:"DELETE"})).ok&&a(ue=>ue.map(he=>he.id===Y?{...he,status:"revoked"}:he))}catch{m("Failed to revoke API key")}},H=async()=>{try{const Y=await fetch("/api/organization/webhooks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:T,events:I})});if(Y.ok){const W=await Y.json();G(W.data.secret),i(ue=>[...ue,W.data]),R(""),M([])}else{const W=await Y.json();m(W.message||"Failed to create webhook")}}catch{m("Failed to create webhook")}},B=async Y=>{if(confirm("Are you sure you want to delete this webhook?"))try{(await fetch(`/api/organization/webhooks/${Y}`,{method:"DELETE"})).ok&&i(ue=>ue.filter(he=>he.id!==Y))}catch{m("Failed to delete webhook")}},D=async Y=>{try{const ue=await(await fetch(`/api/organization/webhooks/${Y}/test`,{method:"POST"})).json();ue.data.success?alert(`Webhook test successful! Response time: ${ue.data.latencyMs}ms`):alert(`Webhook test failed: ${ue.data.error||"Unknown error"}`)}catch{alert("Failed to test webhook")}},L=Y=>Y?new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",q=Y=>{switch(Y){case"enterprise":return"bg-purple-100 text-purple-800";case"pro":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},K=Y=>{switch(Y){case"active":return"bg-green-100 text-green-800";case"revoked":return"bg-red-100 text-red-800";case"expired":return"bg-yellow-100 text-yellow-800";case"disabled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return u?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Developer Portal"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage API keys, webhooks, and access API documentation"})]}),p&&r.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[p,r.jsx("button",{onClick:()=>m(null),className:"ml-2 text-red-500 hover:text-red-700",children:"Dismiss"})]}),l&&r.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Requests"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.totalRequests.toLocaleString()})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Rate Limit (per minute)"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[l.rateLimits.minute.remaining," / ",l.rateLimits.minute.limit]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Resets in ",l.rateLimits.minute.resetInSeconds,"s"]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Rate Limit (per day)"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[l.rateLimits.day.remaining.toLocaleString()," / ",l.rateLimits.day.limit.toLocaleString()]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Resets in ",Math.floor(l.rateLimits.day.resetInSeconds/3600),"h"]})]})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:["keys","webhooks","docs"].map(Y=>r.jsxs("button",{onClick:()=>t(Y),className:`py-2 px-1 border-b-2 font-medium text-sm ${e===Y?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[Y==="keys"&&"API Keys",Y==="webhooks"&&"Webhooks",Y==="docs"&&"Documentation"]},Y))})}),e==="keys"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"API Keys"}),r.jsx("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create API Key"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Key Prefix"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Used"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Requests"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.map(Y=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:Y.name}),r.jsxs("div",{className:"text-xs text-gray-500",children:[Y.scopes.slice(0,3).join(", "),Y.scopes.length>3&&` +${Y.scopes.length-3} more`]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:[Y.keyPrefix,"..."]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${q(Y.rateLimitTier)}`,children:Y.rateLimitTier})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${K(Y.status)}`,children:Y.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L(Y.lastUsedAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y.totalRequests.toLocaleString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:Y.status==="active"&&r.jsx("button",{onClick:()=>U(Y.id),className:"text-red-600 hover:text-red-900",children:"Revoke"})})]},Y.id)),n.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No API keys found. Create one to get started."})})]})]})})]}),e==="webhooks"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Webhooks"}),r.jsx("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Webhook"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"URL"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Events"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Delivery"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.map(Y=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",children:Y.url})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"text-sm text-gray-500",children:[Y.events.slice(0,2).join(", "),Y.events.length>2&&` +${Y.events.length-2} more`]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${K(Y.status)}`,children:Y.status}),Y.failureCount>0&&r.jsxs("span",{className:"ml-2 text-xs text-red-500",children:["(",Y.failureCount," failures)"]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Y.lastSuccess?r.jsx("span",{className:"text-green-600",children:L(Y.lastSuccess)}):Y.lastFailure?r.jsx("span",{className:"text-red-600",children:L(Y.lastFailure)}):"Never"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm space-x-2",children:[r.jsx("button",{onClick:()=>D(Y.id),className:"text-blue-600 hover:text-blue-900",children:"Test"}),r.jsx("button",{onClick:()=>B(Y.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},Y.id)),s.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No webhooks configured. Create one to receive event notifications."})})]})]})})]}),e==="docs"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"API Documentation"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"The Nubabel API allows you to programmatically manage agents, workflows, and executions."}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Base URL"}),r.jsxs("code",{className:"block mt-1 p-2 bg-gray-100 rounded text-sm",children:[window.location.origin,"/api/v1"]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Authentication"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Include your API key in the Authorization header:"}),r.jsx("code",{className:"block mt-1 p-2 bg-gray-100 rounded text-sm",children:"Authorization: Bearer YOUR_API_KEY"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"OpenAPI Specification"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Download the full OpenAPI 3.0 specification for API clients:"}),r.jsx("a",{href:"/api/v1/docs/openapi.yaml",className:"inline-block mt-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm",download:!0,children:"Download OpenAPI Spec"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Available Endpoints"}),r.jsx("div",{className:"space-y-3",children:[{method:"GET",path:"/agents",desc:"List available agents"},{method:"POST",path:"/agents/:id/execute",desc:"Execute an agent"},{method:"GET",path:"/workflows",desc:"List workflows"},{method:"POST",path:"/workflows",desc:"Create a workflow"},{method:"POST",path:"/workflows/:id/execute",desc:"Execute a workflow"},{method:"GET",path:"/executions",desc:"List executions"},{method:"GET",path:"/executions/:id",desc:"Get execution details"},{method:"GET",path:"/webhooks",desc:"List webhooks"},{method:"POST",path:"/webhooks",desc:"Create a webhook"},{method:"GET",path:"/organization",desc:"Get organization info"}].map(Y=>r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-mono mr-3 ${Y.method==="GET"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:Y.method}),r.jsx("code",{className:"text-gray-900",children:Y.path}),r.jsx("span",{className:"ml-3 text-gray-500",children:Y.desc})]},Y.path))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Rate Limits by Tier"}),r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-gray-500",children:[r.jsx("th",{className:"pb-2",children:"Tier"}),r.jsx("th",{className:"pb-2",children:"Per Minute"}),r.jsx("th",{className:"pb-2",children:"Per Day"})]})}),r.jsxs("tbody",{className:"text-gray-900",children:[r.jsxs("tr",{children:[r.jsx("td",{className:"py-1",children:"Free"}),r.jsx("td",{children:"60"}),r.jsx("td",{children:"1,000"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1",children:"Pro"}),r.jsx("td",{children:"300"}),r.jsx("td",{children:"10,000"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1",children:"Enterprise"}),r.jsx("td",{children:"1,000"}),r.jsx("td",{children:"100,000"})]})]})]})]})]}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:N?r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"API Key Created"}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4 mb-4",children:[r.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"Copy this key now. It won't be shown again!"}),r.jsx("code",{className:"block p-2 bg-white rounded border text-sm break-all",children:N})]}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(N),alert("Copied to clipboard!")},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mb-2",children:"Copy to Clipboard"}),r.jsx("button",{onClick:()=>{j(!1),A(null)},className:"w-full px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Done"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create API Key"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),r.jsx("input",{type:"text",value:v,onChange:Y=>w(Y.target.value),className:"w-full px-3 py-2 border rounded-lg",placeholder:"My API Key"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tier"}),r.jsxs("select",{value:P,onChange:Y=>O(Y.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[r.jsx("option",{value:"free",children:"Free (60/min, 1K/day)"}),r.jsx("option",{value:"pro",children:"Pro (300/min, 10K/day)"}),r.jsx("option",{value:"enterprise",children:"Enterprise (1K/min, 100K/day)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scopes"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:Ate.map(Y=>r.jsxs("label",{className:"flex items-center text-sm",children:[r.jsx("input",{type:"checkbox",checked:x.includes(Y),onChange:W=>{W.target.checked?S(ue=>[...ue,Y]):S(ue=>ue.filter(he=>he!==Y))},className:"mr-2"}),Y]},Y))})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[r.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:z,disabled:!v||x.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Create"})]})]})})}),C&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:$?r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Webhook Created"}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4 mb-4",children:[r.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"Copy this secret now. It won't be shown again!"}),r.jsx("code",{className:"block p-2 bg-white rounded border text-sm break-all",children:$})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Use this secret to verify webhook signatures. Include it in your webhook handler to validate that requests come from Nubabel."}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText($),alert("Copied to clipboard!")},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mb-2",children:"Copy to Clipboard"}),r.jsx("button",{onClick:()=>{E(!1),G(null)},className:"w-full px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Done"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create Webhook"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL"}),r.jsx("input",{type:"url",value:T,onChange:Y=>R(Y.target.value),className:"w-full px-3 py-2 border rounded-lg",placeholder:"https://example.com/webhook"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Events"}),r.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto",children:Pte.map(Y=>r.jsxs("label",{className:"flex items-center text-sm",children:[r.jsx("input",{type:"checkbox",checked:I.includes(Y),onChange:W=>{W.target.checked?M(ue=>[...ue,Y]):M(ue=>ue.filter(he=>he!==Y))},className:"mr-2"}),Y]},Y))})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[r.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:H,disabled:!T||I.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Create"})]})]})})})]})};function Ete(){const{slug:e}=ef(),[t,n]=b.useState(null),[a,s]=b.useState([]),[i,l]=b.useState(null),[d,u]=b.useState([]),[h,p]=b.useState([]),[m,g]=b.useState(!1),[j,v]=b.useState(!0),[w,x]=b.useState(!1),[S,P]=b.useState(null),[O,N]=b.useState("overview"),[A,C]=b.useState(null),E=b.useCallback(async()=>{if(e){v(!0);try{const H=await se({url:`/api/marketplace/${e}`,method:"GET"});n(H.data)}catch(H){H instanceof Ke&&H.status===404?P("Extension not found"):P("Failed to load extension")}finally{v(!1)}}},[e]),T=b.useCallback(async()=>{var H;if(e)try{const B=await se({url:`/api/marketplace/${e}/reviews`,method:"GET"});s(((H=B.reviews)==null?void 0:H.items)||[]),l(B.summary||null)}catch{}},[e]),R=b.useCallback(async()=>{if(e)try{const H=await se({url:`/api/marketplace/${e}/versions`,method:"GET"});u(H.versions||[])}catch{}},[e]),I=b.useCallback(async()=>{if(e)try{const H=await se({url:`/api/marketplace/${e}/similar`,method:"GET"});p(H.extensions||[])}catch{}},[e]),M=b.useCallback(async()=>{try{const B=(await se({url:"/api/marketplace/my-extensions",method:"GET"})).data||[];g(B.some(D=>{var L;return((L=D.extension)==null?void 0:L.slug)===e}))}catch{}},[e]);b.useEffect(()=>{E(),T(),R(),I(),M()},[E,T,R,I,M]);const $=async()=>{if(t){x(!0);try{await se({url:`/api/marketplace/${t.slug}/install`,method:"POST"}),g(!0)}catch(H){const B=H instanceof Ke?H.message:"Install failed";alert(B)}finally{x(!1)}}},G=async()=>{if(!(!t||!confirm("Are you sure you want to uninstall this extension?")))try{await se({url:`/api/marketplace/${t.slug}/uninstall`,method:"DELETE"}),g(!1)}catch(H){const B=H instanceof Ke?H.message:"Uninstall failed";alert(B)}},V=H=>H>=1e6?`${(H/1e6).toFixed(1)}M`:H>=1e3?`${(H/1e3).toFixed(1)}K`:String(H),z=H=>{if(H.pricing==="free")return"Free";if(!H.price)return"Paid";const B=(H.price.amount/100).toFixed(2),D=H.price.interval?`/${H.price.interval}`:"";return`$${B}${D}`},U=(H,B="sm")=>{const D=[],L=B==="lg"?"text-xl":"text-sm";for(let q=1;q<=5;q++)D.push(r.jsx("span",{className:`${q<=H?"text-yellow-400":"text-gray-300"} ${L}`,children:""},q));return D};return j?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})}):S||!t?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:S||"Extension not found"}),r.jsx(ft,{to:"/marketplace",className:"text-indigo-600 hover:text-indigo-800",children:" Back to Marketplace"})]}):r.jsxs("div",{children:[r.jsxs("nav",{className:"mb-4 text-sm",children:[r.jsx(ft,{to:"/marketplace",className:"text-indigo-600 hover:text-indigo-800",children:"Marketplace"}),r.jsx("span",{className:"mx-2 text-gray-400",children:"/"}),r.jsx("span",{className:"text-gray-600",children:t.name})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:r.jsxs("div",{className:"flex gap-6",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:t.icon?r.jsx("img",{src:t.icon,alt:"",className:"w-16 h-16 rounded-xl"}):r.jsx("span",{className:"text-4xl",children:""})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),r.jsxs("p",{className:"text-gray-500 flex items-center gap-2 mt-1",children:[r.jsx("span",{children:t.publisherName}),t.publisherVerified&&r.jsx("span",{className:"text-blue-500",title:"Verified Publisher",children:" Verified"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-3 py-1.5 rounded-lg text-sm font-medium ${t.pricing==="free"?"bg-green-100 text-green-700":t.pricing==="freemium"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:z(t)}),m?r.jsx("button",{onClick:G,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Uninstall"}):r.jsx("button",{onClick:$,disabled:w,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:w?"Installing...":"Install"})]})]}),r.jsx("p",{className:"text-gray-600 mt-3",children:t.description}),r.jsxs("div",{className:"flex items-center gap-6 mt-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[U(Math.round(t.stats.rating)),r.jsxs("span",{className:"text-gray-600 ml-1",children:[t.stats.rating.toFixed(1)," (",t.stats.reviewCount," reviews)"]})]}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsxs("span",{className:"text-gray-600",children:[V(t.stats.downloads)," downloads"]}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsxs("span",{className:"text-gray-600",children:[V(t.stats.activeInstalls)," active installs"]}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsxs("span",{className:"text-gray-600",children:["v",t.version]})]}),t.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:t.tags.map(H=>r.jsx(ft,{to:`/marketplace?q=${H}`,className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs hover:bg-gray-200",children:H},H))})]})]})}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsx("div",{className:"flex gap-6",children:["overview","reviews","versions"].map(H=>r.jsxs("button",{onClick:()=>N(H),className:`py-3 text-sm font-medium border-b-2 -mb-px ${O===H?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[H==="overview"&&"Overview",H==="reviews"&&`Reviews (${t.stats.reviewCount})`,H==="versions"&&"Version History"]},H))})}),r.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[r.jsxs("div",{className:"col-span-2",children:[O==="overview"&&r.jsxs("div",{children:[t.screenshots.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Screenshots"}),r.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:t.screenshots.map((H,B)=>r.jsx("img",{src:H,alt:`Screenshot ${B+1}`,onClick:()=>C(H),className:"h-48 rounded-lg border border-gray-200 cursor-pointer hover:opacity-90"},B))})]}),r.jsxs("div",{className:"prose max-w-none",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Description"}),r.jsx("div",{className:"text-gray-600 whitespace-pre-wrap",children:t.longDescription})]})]}),O==="reviews"&&r.jsxs("div",{children:[i&&r.jsx("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:r.jsxs("div",{className:"flex items-center gap-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl font-bold text-gray-900",children:i.average.toFixed(1)}),r.jsx("div",{className:"flex justify-center mt-1",children:U(Math.round(i.average),"lg")}),r.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[i.count," reviews"]})]}),r.jsx("div",{className:"flex-1",children:[5,4,3,2,1].map(H=>r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"text-sm text-gray-600 w-3",children:H}),r.jsx("span",{className:"text-yellow-400",children:""}),r.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-yellow-400",style:{width:`${i.count>0?i.distribution[H]/i.count*100:0}%`}})}),r.jsx("span",{className:"text-sm text-gray-500 w-8",children:i.distribution[H]||0})]},H))})]})}),a.length===0?r.jsx("div",{className:"text-center py-12 text-gray-500",children:"No reviews yet. Be the first to review!"}):r.jsx("div",{className:"space-y-4",children:a.map(H=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:H.title}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[U(H.rating),r.jsxs("span",{className:"text-sm text-gray-500",children:["by ",H.userName,"  ",new Date(H.createdAt).toLocaleDateString()]})]})]}),r.jsxs("span",{className:"text-sm text-gray-400",children:[H.helpfulCount," found helpful"]})]}),r.jsx("p",{className:"text-gray-600 mt-2",children:H.body}),H.publisherResponse&&r.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg border-l-4 border-indigo-400",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Publisher Response"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:H.publisherResponse.body})]})]},H.id))})]}),O==="versions"&&r.jsx("div",{className:"space-y-4",children:d.map(H=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"font-medium text-gray-900",children:["v",H.version]}),r.jsx("span",{className:"text-sm text-gray-500",children:H.publishedAt?new Date(H.publishedAt).toLocaleDateString():"Unpublished"})]}),H.changelog&&r.jsx("div",{className:"text-gray-600 text-sm mt-2 whitespace-pre-wrap",children:H.changelog})]},H.id))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Information"}),r.jsxs("dl",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-gray-500",children:"Version"}),r.jsx("dd",{className:"text-gray-900",children:t.version})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-gray-500",children:"Category"}),r.jsx("dd",{className:"text-gray-900",children:t.category})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-gray-500",children:"Min Nubabel"}),r.jsx("dd",{className:"text-gray-900",children:t.requirements.nubabelVersion})]}),t.publishedAt&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-gray-500",children:"Published"}),r.jsx("dd",{className:"text-gray-900",children:new Date(t.publishedAt).toLocaleDateString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-gray-500",children:"Updated"}),r.jsx("dd",{className:"text-gray-900",children:new Date(t.updatedAt).toLocaleDateString()})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Links"}),r.jsxs("div",{className:"space-y-2",children:[t.repositoryUrl&&r.jsxs("a",{href:t.repositoryUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-indigo-600 hover:text-indigo-800",children:[r.jsx("span",{children:""})," Source Code"]}),t.documentationUrl&&r.jsxs("a",{href:t.documentationUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-indigo-600 hover:text-indigo-800",children:[r.jsx("span",{children:""})," Documentation"]}),t.demoUrl&&r.jsxs("a",{href:t.demoUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-indigo-600 hover:text-indigo-800",children:[r.jsx("span",{children:""})," Live Demo"]})]})]}),t.requirements.permissions.length>0&&r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Permissions"}),r.jsx("ul",{className:"space-y-1 text-sm text-gray-600",children:t.requirements.permissions.map(H=>r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-amber-500",children:""})," ",H]},H))})]}),h.length>0&&r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Similar Extensions"}),r.jsx("div",{className:"space-y-3",children:h.slice(0,4).map(H=>r.jsxs(ft,{to:`/marketplace/${H.slug}`,className:"flex items-center gap-3 hover:bg-gray-50 p-2 -mx-2 rounded-lg",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:H.icon?r.jsx("img",{src:H.icon,alt:"",className:"w-6 h-6 rounded"}):r.jsx("span",{children:""})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:H.name}),r.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx("span",{className:"text-yellow-400",children:""})," ",H.stats.rating.toFixed(1)]})]})]},H.id))})]})]})]}),A&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:()=>C(null),children:r.jsx("img",{src:A,alt:"",className:"max-w-full max-h-full rounded-lg"})})]})}function _te(){var C;const[e,t]=b.useState(null),[n,a]=b.useState([]),[s,i]=b.useState(null),[l,d]=b.useState(!0),[u,h]=b.useState(null),[p,m]=b.useState(!1),[g,j]=b.useState(null),[v,w]=b.useState(30);b.useEffect(()=>{x()},[v]);const x=async()=>{d(!0),h(null);try{const[E,T]=await Promise.all([fetch(`/api/feedback/analysis?days=${v}`,{credentials:"include"}),fetch("/api/feedback/actions",{credentials:"include"})]);if(Io(E)){m(!0);return}if(!E.ok||!T.ok)throw new Error("Failed to fetch feedback data");const R=await E.json(),I=await T.json();t(R),a(I.actions),i(I.stats)}catch(E){h(E instanceof Error?E.message:"An error occurred")}finally{d(!1)}},S=async E=>{j(E);try{if(!(await fetch(`/api/feedback/actions/${E}/apply`,{method:"POST",credentials:"include"})).ok)throw new Error("Failed to apply action");await x()}catch(T){h(T instanceof Error?T.message:"Failed to apply action")}finally{j(null)}},P=async E=>{j(E);try{if(!(await fetch(`/api/feedback/actions/${E}/dismiss`,{method:"POST",credentials:"include"})).ok)throw new Error("Failed to dismiss action");await x()}catch(T){h(T instanceof Error?T.message:"Failed to dismiss action")}finally{j(null)}},O=async()=>{try{if(!(await fetch("/api/feedback/process",{method:"POST",credentials:"include"})).ok)throw new Error("Failed to process feedback");await x()}catch(E){h(E instanceof Error?E.message:"Failed to process feedback")}},N=E=>{switch(E){case"positive":return"text-green-600 bg-green-100";case"negative":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},A=E=>{switch(E){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}};return p?r.jsxs("div",{className:"p-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Feedback Insights"}),r.jsx(Zc,{title:"Feedback Analysis",description:"Feedback analysis is currently being set up. This feature will display feedback analytics, sentiment patterns, and improvement recommendations once the backend service is activated.",onRetry:x})]}):l?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4].map(E=>r.jsx("div",{className:"h-24 bg-gray-200 rounded"},E))})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Feedback Insights"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:v,onChange:E=>w(parseInt(E.target.value)),className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[r.jsx("option",{value:7,children:"Last 7 days"}),r.jsx("option",{value:30,children:"Last 30 days"}),r.jsx("option",{value:90,children:"Last 90 days"})]}),r.jsx("button",{onClick:O,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Process Pending"})]})]}),u&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 text-red-700",children:u}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Feedback"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(e==null?void 0:e.totalCount)||0})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Actions"}),r.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:(s==null?void 0:s.pending)||0})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Applied Actions"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:(s==null?void 0:s.applied)||0})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Success Rate"}),r.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:s?`${(s.successRate*100).toFixed(0)}%`:"N/A"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sentiment Distribution"}),r.jsxs("div",{className:"space-y-3",children:[(e==null?void 0:e.sentimentDistribution)&&Object.entries(e.sentimentDistribution).map(([E,T])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N(E)}`,children:E}),r.jsx("span",{className:"text-gray-700 font-medium",children:T})]},E)),(!(e!=null&&e.sentimentDistribution)||Object.keys(e.sentimentDistribution).length===0)&&r.jsx("p",{className:"text-gray-500 text-sm",children:"No sentiment data available"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Category Distribution"}),r.jsxs("div",{className:"space-y-3",children:[(e==null?void 0:e.categoryDistribution)&&Object.entries(e.categoryDistribution).sort((E,T)=>T[1]-E[1]).slice(0,5).map(([E,T])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-700",children:E.replace(/_/g," ")}),r.jsx("span",{className:"bg-gray-100 px-3 py-1 rounded-full text-sm font-medium text-gray-700",children:T})]},E)),(!(e!=null&&e.categoryDistribution)||Object.keys(e.categoryDistribution).length===0)&&r.jsx("p",{className:"text-gray-500 text-sm",children:"No category data available"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recommended Actions"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:n.length===0?r.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No pending actions"}):n.map(E=>r.jsx("div",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${A(E.priority)}`,children:E.priority}),r.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:E.type.replace(/_/g," ")}),E.autoApplicable&&r.jsx("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Auto-applicable"})]}),r.jsx("p",{className:"mt-2 text-gray-900",children:E.description}),r.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Est. impact: ",E.estimatedImpact.affectedRequests," requests, +",(E.estimatedImpact.expectedImprovement*100).toFixed(0),"% improvement"]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx("button",{onClick:()=>S(E.id),disabled:g===E.id,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50",children:g===E.id?"...":"Apply"}),r.jsx("button",{onClick:()=>P(E.id),disabled:g===E.id,className:"px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 disabled:opacity-50",children:"Dismiss"})]})]})},E.id))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Feedback"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sentiment"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Request"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[(C=e==null?void 0:e.recentFeedback)==null?void 0:C.slice(0,10).map(E=>{var T;return r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[E.type,E.rating&&r.jsxs("span",{className:"ml-1",children:["(",E.rating,"/5)"]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.sentiment&&r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N(E.sentiment)}`,children:E.sentiment})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((T=E.category)==null?void 0:T.replace(/_/g," "))||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:E.originalRequest}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(E.createdAt).toLocaleDateString()})]},E.id)}),(!(e!=null&&e.recentFeedback)||e.recentFeedback.length===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No feedback yet"})})]})]})})]})]})}const Mi={person:"#4CAF50",agent:"#2196F3",team:"#9C27B0",project:"#FF9800",task:"#FFEB3B",document:"#795548",goal:"#E91E63",workflow:"#00BCD4"},nv={person:"People",agent:"Agents",team:"Teams",project:"Projects",task:"Tasks",document:"Documents",goal:"Goals",workflow:"Workflows"};function Tte(){const[e,t]=b.useState(!1),[n,a]=b.useState(null),[s,i]=b.useState(!1),[l,d]=b.useState(null),[u,h]=b.useState(null),[p,m]=b.useState(null),[g,j]=b.useState([]),[v,w]=b.useState(""),[x,S]=b.useState([]),[P,O]=b.useState([]),[N,A]=b.useState(!1),C=b.useRef(null),E=b.useRef(null),T=b.useCallback(async()=>{try{const z=await fetch("/api/knowledge-graph/stats",{credentials:"include"});if(Io(z)){i(!0);return}if(!z.ok)throw new Error("Failed to fetch stats");const U=await z.json();d(U)}catch(z){console.error("Error fetching stats:",z)}},[]),R=b.useCallback(async z=>{t(!0),a(null);try{let U="/api/knowledge-graph/visualization";z&&z.length>0&&(U=`/api/knowledge-graph/visualization/filtered?nodeTypes=${z.join(",")}`);const H=await fetch(U,{credentials:"include"});if(!H.ok)throw new Error("Failed to fetch graph");const B=await H.json();h(B)}catch(U){a(U instanceof Error?U.message:"Unknown error")}finally{t(!1)}},[]),I=async()=>{A(!0),a(null);try{const z=await fetch("/api/knowledge-graph/build",{method:"POST",credentials:"include"});if(!z.ok)throw new Error("Failed to build graph");const U=await z.json();alert(`Graph built: ${U.nodeCount} nodes, ${U.edgeCount} edges`),await Promise.all([T(),R(P)])}catch(z){a(z instanceof Error?z.message:"Failed to build graph")}finally{A(!1)}},M=async()=>{if(!v.trim()){S([]);return}try{const z=await fetch(`/api/knowledge-graph/search?q=${encodeURIComponent(v)}&limit=10`,{credentials:"include"});if(!z.ok)throw new Error("Search failed");const U=await z.json();S(U.nodes||[])}catch(z){console.error("Search error:",z)}},$=async z=>{try{const U=await fetch(`/api/knowledge-graph/related/${z}?depth=2&limit=20`,{credentials:"include"});if(!U.ok)throw new Error("Failed to fetch related nodes");const H=await U.json();j(H.related||[])}catch(U){console.error("Error fetching related:",U)}},G=async z=>{m(z),await $(z.id)},V=z=>{O(U=>U.includes(z)?U.filter(B=>B!==z):[...U,z])};return b.useEffect(()=>{R(P)},[P,R]),b.useEffect(()=>{T(),R()},[T,R]),b.useEffect(()=>{if(!u||!C.current)return;const z=C.current,U=z.getContext("2d");if(!U)return;const H=z.parentElement;H&&(z.width=H.clientWidth,z.height=H.clientHeight),U.fillStyle="#1a1a2e",U.fillRect(0,0,z.width,z.height);const B=u.nodes.map(q=>({...q,x:Math.random()*z.width,y:Math.random()*z.height,vx:0,vy:0})),D=new Map(B.map(q=>[q.id,q]));for(let q=0;q<100;q++){for(let K=0;K<B.length;K++)for(let Y=K+1;Y<B.length;Y++){const W=B[Y].x-B[K].x,ue=B[Y].y-B[K].y,he=Math.sqrt(W*W+ue*ue)||1,oe=1e3/(he*he);B[K].vx-=W/he*oe,B[K].vy-=ue/he*oe,B[Y].vx+=W/he*oe,B[Y].vy+=ue/he*oe}for(const K of u.edges){const Y=D.get(K.from),W=D.get(K.to);if(Y&&W){const ue=W.x-Y.x,he=W.y-Y.y,oe=Math.sqrt(ue*ue+he*he)||1,te=oe*.01;Y.vx+=ue/oe*te,Y.vy+=he/oe*te,W.vx-=ue/oe*te,W.vy-=he/oe*te}}for(const K of B)K.vx+=(z.width/2-K.x)*.001,K.vy+=(z.height/2-K.y)*.001;for(const K of B)K.x+=K.vx*.1,K.y+=K.vy*.1,K.vx*=.9,K.vy*=.9,K.x=Math.max(50,Math.min(z.width-50,K.x)),K.y=Math.max(50,Math.min(z.height-50,K.y))}U.strokeStyle="#4a4a6a",U.lineWidth=1;for(const q of u.edges){const K=D.get(q.from),Y=D.get(q.to);K&&Y&&(U.beginPath(),U.moveTo(K.x,K.y),U.lineTo(Y.x,Y.y),U.stroke())}for(const q of B){const K=Mi[q.group]||"#9E9E9E",Y=q.size||15;U.beginPath(),U.arc(q.x,q.y,Y,0,Math.PI*2),U.fillStyle=K,U.fill(),U.strokeStyle=(p==null?void 0:p.id)===q.id?"#ffffff":"#000000",U.lineWidth=(p==null?void 0:p.id)===q.id?3:1,U.stroke(),U.fillStyle="#ffffff",U.font="11px sans-serif",U.textAlign="center",U.fillText(q.label.slice(0,15),q.x,q.y+Y+12)}E.current=B;const L=q=>{const K=z.getBoundingClientRect(),Y=q.clientX-K.left,W=q.clientY-K.top;for(const ue of B)if(Math.sqrt((Y-ue.x)**2+(W-ue.y)**2)<=(ue.size||15)){G(ue);return}m(null),j([])};return z.addEventListener("click",L),()=>z.removeEventListener("click",L)},[u,p]),s?r.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[r.jsxs("div",{className:"border-b border-gray-800 px-6 py-4",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Knowledge Graph"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Explore relationships between entities in your organization"})]}),r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-12 text-center max-w-lg",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto text-blue-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.42 15.17l-5.28-3.3a.5.5 0 010-.84l5.28-3.3a.5.5 0 01.76.42v6.6a.5.5 0 01-.76.42zM20 7l-8 5 8 5V7z"})}),r.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-2",children:"Knowledge Graph"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"The knowledge graph is currently being set up. This feature will visualize entity relationships once the backend service is activated."}),r.jsx("button",{onClick:()=>{i(!1),T(),R()},className:"mt-4 px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Retry"})]})})]}):r.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[r.jsx("div",{className:"border-b border-gray-800 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Knowledge Graph"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Explore relationships between entities in your organization"})]}),r.jsx("button",{onClick:I,disabled:N,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Building...":"Rebuild Graph"})]})}),r.jsxs("div",{className:"flex h-[calc(100vh-80px)]",children:[r.jsxs("div",{className:"w-80 border-r border-gray-800 p-4 overflow-y-auto",children:[l&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3",children:"Statistics"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{className:"bg-gray-800 p-3 rounded",children:[r.jsx("div",{className:"text-2xl font-bold",children:l.nodeCount}),r.jsx("div",{className:"text-gray-400",children:"Nodes"})]}),r.jsxs("div",{className:"bg-gray-800 p-3 rounded",children:[r.jsx("div",{className:"text-2xl font-bold",children:l.edgeCount}),r.jsx("div",{className:"text-gray-400",children:"Edges"})]}),r.jsxs("div",{className:"bg-gray-800 p-3 rounded",children:[r.jsx("div",{className:"text-2xl font-bold",children:l.density.toFixed(3)}),r.jsx("div",{className:"text-gray-400",children:"Density"})]}),r.jsxs("div",{className:"bg-gray-800 p-3 rounded",children:[r.jsx("div",{className:"text-2xl font-bold",children:l.averageDegree.toFixed(1)}),r.jsx("div",{className:"text-gray-400",children:"Avg Degree"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3",children:"Search"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:v,onChange:z=>w(z.target.value),onKeyDown:z=>z.key==="Enter"&&M(),placeholder:"Search nodes...",className:"flex-1 px-3 py-2 bg-gray-800 border border-gray-700 rounded text-sm focus:outline-none focus:border-blue-500"}),r.jsx("button",{onClick:M,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Search"})]}),x.length>0&&r.jsx("div",{className:"mt-2 bg-gray-800 rounded max-h-40 overflow-y-auto",children:x.map(z=>r.jsxs("button",{onClick:()=>G(z),className:"w-full px-3 py-2 text-left hover:bg-gray-700 text-sm flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Mi[z.group]||"#9E9E9E"}}),z.label]},z.id))})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3",children:"Filter by Type"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(nv).map(([z,U])=>r.jsx("button",{onClick:()=>V(z),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${P.includes(z)?"opacity-100":P.length>0?"opacity-40":"opacity-100"}`,style:{backgroundColor:P.includes(z)||P.length===0?Mi[z]:"#4a4a6a"},children:U},z))}),P.length>0&&r.jsx("button",{onClick:()=>O([]),className:"mt-2 text-xs text-blue-400 hover:text-blue-300",children:"Clear filters"})]}),p&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3",children:"Selected Node"}),r.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Mi[p.group]||"#9E9E9E"}}),r.jsx("span",{className:"font-semibold",children:p.label})]}),r.jsxs("div",{className:"text-xs text-gray-400 mb-3",children:["Type: ",nv[p.group]||p.group]}),g.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs font-semibold text-gray-400 mb-2",children:["Related (",g.length,")"]}),r.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:g.map(z=>r.jsxs("div",{className:"flex items-center gap-2 text-xs p-1 hover:bg-gray-700 rounded cursor-pointer",onClick:()=>G({id:z.node.id,label:z.node.label,group:z.node.type}),children:[r.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Mi[z.node.type]||"#9E9E9E"}}),r.jsx("span",{className:"flex-1 truncate",children:z.node.label}),r.jsx("span",{className:"text-gray-500",children:z.edge.type})]},z.node.id))})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3",children:"Legend"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(nv).map(([z,U])=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Mi[z]}}),U]},z))})]})]}),r.jsxs("div",{className:"flex-1 relative",children:[e&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/80 z-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"}),r.jsx("div",{className:"text-gray-400",children:"Loading graph..."})]})}),n&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-red-400",children:[r.jsx("div",{className:"text-lg mb-2",children:"Error loading graph"}),r.jsx("div",{className:"text-sm",children:n}),r.jsx("button",{onClick:()=>R(P),className:"mt-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Retry"})]})}),!e&&!n&&u&&u.nodes.length===0&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-400",children:[r.jsx("div",{className:"text-lg mb-2",children:"No graph data"}),r.jsx("div",{className:"text-sm mb-4",children:"Build the graph to visualize entity relationships"}),r.jsx("button",{onClick:I,disabled:N,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded disabled:opacity-50",children:N?"Building...":"Build Graph"})]})}),r.jsx("canvas",{ref:C,className:"w-full h-full cursor-pointer",style:{display:e||n?"none":"block"}})]})]})]})}function Rte(){var K,Y;const[e,t]=Gc(),[n,a]=b.useState([]),[s,i]=b.useState([]),[l,d]=b.useState([]),[u,h]=b.useState(null),[p,m]=b.useState(0),[g,j]=b.useState(!0),[v,w]=b.useState(e.get("q")||""),[x,S]=b.useState(e.get("category")||""),[P,O]=b.useState(e.get("pricing")||""),[N,A]=b.useState(e.get("sort")||"popular"),[C,E]=b.useState(1),[T,R]=b.useState([]),[I,M]=b.useState(null),$=b.useCallback(async()=>{j(!0);try{const W=new URLSearchParams;v&&W.set("q",v),x&&W.set("category",x),P&&W.set("pricing",P),W.set("sort",N),W.set("page",String(C)),W.set("limit","20");const he=await se({url:`${v?"/api/marketplace/search":"/api/marketplace/extensions"}?${W.toString()}`,method:"GET"});a(he.extensions||he.items||[]),m(he.total),he.facets&&h(he.facets)}catch(W){console.error("Failed to fetch extensions:",W)}finally{j(!1)}},[v,x,P,N,C]),G=b.useCallback(async()=>{try{const W=await se({url:"/api/marketplace/featured",method:"GET"});i(W.extensions)}catch(W){console.error("Failed to fetch featured:",W)}},[]),V=b.useCallback(async()=>{try{const W=await se({url:"/api/marketplace/categories",method:"GET"});d(W.categories)}catch(W){console.error("Failed to fetch categories:",W)}},[]),z=b.useCallback(async()=>{try{const W=await se({url:"/api/marketplace/suggestions",method:"GET"});R(W.data||[])}catch{}},[]);b.useEffect(()=>{V(),G(),z()},[V,G,z]),b.useEffect(()=>{$()},[$]),b.useEffect(()=>{const W=new URLSearchParams;v&&W.set("q",v),x&&W.set("category",x),P&&W.set("pricing",P),N!=="popular"&&W.set("sort",N),t(W)},[v,x,P,N,t]);const U=W=>{W.preventDefault(),E(1),$()},H=async W=>{M(W);try{await se({url:`/api/marketplace/suggestions/${W}/accept`,method:"POST"}),R(ue=>ue.filter(he=>he.patternId!==W))}catch(ue){console.error("Failed to accept suggestion:",ue)}finally{M(null)}},B=async W=>{try{await se({url:`/api/marketplace/suggestions/${W}/dismiss`,method:"POST"}),R(ue=>ue.filter(he=>he.patternId!==W))}catch(ue){console.error("Failed to dismiss suggestion:",ue)}},D=W=>W>=1e6?`${(W/1e6).toFixed(1)}M`:W>=1e3?`${(W/1e3).toFixed(1)}K`:String(W),L=W=>{if(W.pricing==="free")return"Free";if(!W.price)return"Paid";const ue=(W.price.amount/100).toFixed(2),he=W.price.interval?`/${W.price.interval}`:"";return`$${ue}${he}`},q=W=>{const ue=[];for(let he=1;he<=5;he++)ue.push(r.jsx("span",{className:he<=W?"text-yellow-400":"text-gray-300",children:""},he));return ue};return r.jsxs("div",{className:"min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-12 px-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Extension Marketplace"}),r.jsx("p",{className:"text-indigo-100 mb-6",children:"Discover and install extensions to supercharge your workspace"}),r.jsxs("form",{onSubmit:U,className:"flex gap-3 max-w-2xl",children:[r.jsx("input",{type:"text",value:v,onChange:W=>w(W.target.value),placeholder:"Search extensions...",className:"flex-1 px-4 py-3 rounded-lg text-gray-900 focus:ring-2 focus:ring-white"}),r.jsx("button",{type:"submit",className:"px-6 py-3 bg-white text-indigo-600 rounded-lg font-medium hover:bg-indigo-50",children:"Search"})]})]})}),r.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-6",children:[r.jsx("div",{className:"mb-8 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Looking for MCP Servers & External Tools?"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Connect to Smithery, Glama, ComfyUI, CivitAI, and more external ecosystems"})]})]}),r.jsx(ft,{to:"/marketplace-hub",className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 whitespace-nowrap",children:"Browse External Tools"})]})}),!v&&s.length>0&&r.jsxs("div",{className:"mb-10",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Featured Extensions"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.slice(0,3).map(W=>r.jsx(ft,{to:`/marketplace/${W.slug}`,className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-100 rounded-xl p-5 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-white rounded-xl flex items-center justify-center shadow-sm",children:W.icon?r.jsx("img",{src:W.icon,alt:"",className:"w-10 h-10 rounded-lg"}):r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:W.name}),r.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full",children:"Featured"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:W.description}),r.jsx("div",{className:"flex items-center gap-3 mt-2 text-sm",children:r.jsxs("span",{className:"flex items-center text-yellow-500",children:[q(Math.round(W.stats.rating)),r.jsxs("span",{className:"text-gray-500 ml-1",children:["(",W.stats.reviewCount,")"]})]})})]})]})},W.id))})]}),T.length>0&&r.jsxs("div",{className:"mb-10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"AI-Suggested Skills"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Skills automatically detected from your team's usage patterns"})]}),r.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:[T.length," suggestion",T.length!==1?"s":""]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(W=>r.jsxs("div",{className:"bg-white border border-purple-200 rounded-xl p-5 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-lg",children:W.patternType==="composite"?"":W.patternType==="sequence"?"":""})}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"h-2 w-16 bg-gray-200 rounded-full overflow-hidden",title:`${Math.round(W.confidence*100)}% confidence`,children:r.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${W.confidence*100}%`}})}),r.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(W.confidence*100),"%"]})]})]}),r.jsx("h3",{className:"font-semibold text-gray-900",children:W.suggestedName}),r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:W.suggestedDescription}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:W.suggestedTriggers.slice(0,3).map(ue=>r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:ue},ue))}),r.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Detected ",W.frequency,"x as ",W.patternType," pattern"]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{onClick:()=>H(W.patternId),disabled:I===W.patternId,className:"flex-1 px-3 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700 disabled:opacity-50",children:I===W.patternId?"Creating...":"Create Skill"}),r.jsx("button",{onClick:()=>B(W.patternId),className:"px-3 py-2 border border-gray-300 text-gray-600 rounded-lg text-sm hover:bg-gray-50",children:"Dismiss"})]})]},W.patternId))})]}),r.jsxs("div",{className:"flex gap-8",children:[r.jsxs("div",{className:"w-56 flex-shrink-0",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Categories"}),r.jsxs("ul",{className:"space-y-1",children:[r.jsx("li",{children:r.jsx("button",{onClick:()=>{S(""),E(1)},className:`w-full text-left px-3 py-2 rounded-lg text-sm ${x?"text-gray-600 hover:bg-gray-100":"bg-indigo-100 text-indigo-700"}`,children:"All Categories"})}),l.map(W=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>{S(W.slug),E(1)},className:`w-full text-left px-3 py-2 rounded-lg text-sm flex items-center justify-between ${x===W.slug?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx("span",{children:W.name}),W.extensionCount!==void 0&&r.jsx("span",{className:"text-xs text-gray-400",children:W.extensionCount})]})},W.id))]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Pricing"}),r.jsx("ul",{className:"space-y-1",children:["","free","paid","freemium"].map(W=>r.jsx("li",{children:r.jsx("button",{onClick:()=>{O(W),E(1)},className:`w-full text-left px-3 py-2 rounded-lg text-sm ${P===W?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:bg-gray-100"}`,children:W===""?"All":W.charAt(0).toUpperCase()+W.slice(1)})},W))})]}),(((K=u==null?void 0:u.tags)==null?void 0:K.length)??0)>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Popular Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(Y=u==null?void 0:u.tags)==null?void 0:Y.slice(0,10).map(W=>r.jsx("button",{onClick:()=>w(W.name),className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs hover:bg-gray-200",children:W.name},W.name))})]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[p," extension",p!==1?"s":""," found"]}),r.jsxs("select",{value:N,onChange:W=>{A(W.target.value),E(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[r.jsx("option",{value:"popular",children:"Most Popular"}),r.jsx("option",{value:"recent",children:"Recently Added"}),r.jsx("option",{value:"rating",children:"Highest Rated"}),r.jsx("option",{value:"trending",children:"Trending"})]})]}),g?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-600"})}):n.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No extensions found"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Try adjusting your search or filters"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(W=>r.jsx(ft,{to:`/marketplace/${W.slug}`,className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:W.icon?r.jsx("img",{src:W.icon,alt:"",className:"w-8 h-8 rounded-lg"}):r.jsx("span",{className:"text-xl",children:""})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-medium text-gray-900 truncate",children:W.name}),W.publisherVerified&&r.jsx("span",{className:"text-blue-500",title:"Verified Publisher",children:""})]}),r.jsx("p",{className:"text-sm text-gray-500 truncate",children:W.publisherName}),r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:W.description}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsxs("span",{className:"flex items-center text-yellow-500",children:[" ",W.stats.rating.toFixed(1)]}),r.jsxs("span",{className:"text-gray-400",children:[D(W.stats.downloads)," downloads"]})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${W.pricing==="free"?"bg-green-100 text-green-700":W.pricing==="freemium"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:L(W)})]})]})]})},W.id))}),p>20&&r.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8",children:[r.jsx("button",{onClick:()=>E(W=>Math.max(1,W-1)),disabled:C===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm disabled:opacity-50",children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",C," of ",Math.ceil(p/20)]}),r.jsx("button",{onClick:()=>E(W=>W+1),disabled:C>=Math.ceil(p/20),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm disabled:opacity-50",children:"Next"})]})]})]})]})]})}const Ii={smithery:"bg-purple-100 text-purple-800","mcp-registry":"bg-blue-100 text-blue-800",glama:"bg-green-100 text-green-800",comfyui:"bg-orange-100 text-orange-800",civitai:"bg-pink-100 text-pink-800","langchain-hub":"bg-yellow-100 text-yellow-800"},uP={mcp_server:"",workflow:"",prompt:"",skill:"",extension:""};function Mte(){const[e,t]=b.useState(""),[n,a]=b.useState([]),[s,i]=b.useState(""),[l,d]=b.useState([]),[u,h]=b.useState([]),[p,m]=b.useState([]),[g,j]=b.useState(!1),[v,w]=b.useState(null),[x,S]=b.useState(!1),[P,O]=b.useState(!1),[N,A]=b.useState(""),[C,E]=b.useState(!1),[T,R]=b.useState(null),[I,M]=b.useState({}),[$,G]=b.useState({smitheryApiKey:"",civitaiApiKey:"",langchainApiKey:""}),[V,z]=b.useState(!1),U=[{id:"smithery",name:"Smithery",types:["mcp_server"]},{id:"mcp-registry",name:"MCP Registry",types:["mcp_server"]},{id:"glama",name:"Glama",types:["mcp_server"]},{id:"comfyui",name:"ComfyUI",types:["workflow","extension"]},{id:"civitai",name:"CivitAI",types:["workflow"]},{id:"langchain-hub",name:"LangChain Hub",types:["prompt","skill"]}],H=[{id:"",name:"All Types"},{id:"mcp_server",name:"MCP Servers"},{id:"workflow",name:"Workflows"},{id:"prompt",name:"Prompts"},{id:"skill",name:"Skills"}],B=b.useCallback(async()=>{var te;try{const le=await se({url:"/api/marketplace-hub/installed",method:"GET"});h(((te=le.data)==null?void 0:te.items)||[])}catch(le){console.error("Failed to fetch installed:",le)}},[]),D=b.useCallback(async()=>{try{const te=await se({url:"/api/marketplace-hub/settings",method:"GET"});M(te.data||{})}catch(te){console.error("Failed to fetch settings:",te)}},[]);b.useEffect(()=>{B(),D()},[B,D]);const L=async()=>{var te;if(e.trim()){j(!0),R(null);try{const le=new URLSearchParams({q:e});n.length>0&&le.set("sources",n.join(",")),s&&le.set("type",s),le.set("limit","30");const ke=await se({url:`/api/marketplace-hub/search?${le.toString()}`,method:"GET"});d(((te=ke.data)==null?void 0:te.items)||[])}catch(le){R("Search failed. Please try again."),console.error("Search failed:",le)}finally{j(!1)}}},q=async te=>{w(te.id),R(null);try{await se({url:"/api/marketplace-hub/install",method:"POST",data:{source:te.source,itemId:te.id}}),await B(),alert(`Successfully installed: ${te.name}`)}catch(le){R(`Failed to install ${te.name}`),console.error("Install failed:",le)}finally{w(null)}},K=async te=>{try{await se({url:`/api/marketplace-hub/uninstall/${te}`,method:"DELETE"}),await B()}catch(le){R("Failed to uninstall"),console.error("Uninstall failed:",le)}},Y=async()=>{var te;if(N.trim()){E(!0),R(null);try{const le=await se({url:"/api/marketplace-hub/recommend",method:"POST",data:{request:N}});m(((te=le.data)==null?void 0:te.recommendations)||[])}catch(le){R("Recommendation failed. Please try again."),console.error("Recommend failed:",le)}finally{E(!1)}}},W=te=>{a(le=>le.includes(te)?le.filter(ke=>ke!==te):[...le,te])},ue=async()=>{z(!0),R(null);try{const te={};if($.smitheryApiKey&&(te.smitheryApiKey=$.smitheryApiKey),$.civitaiApiKey&&(te.civitaiApiKey=$.civitaiApiKey),$.langchainApiKey&&(te.langchainApiKey=$.langchainApiKey),Object.keys(te).length===0){R("Please enter at least one API key");return}await se({url:"/api/marketplace-hub/settings/api-keys",method:"PUT",data:te}),await D(),G({smitheryApiKey:"",civitaiApiKey:"",langchainApiKey:""}),alert("API keys saved successfully")}catch(te){R("Failed to save API keys"),console.error("Save API keys failed:",te)}finally{z(!1)}},he=async te=>{if(confirm(`Are you sure you want to delete ${te}?`))try{await se({url:`/api/marketplace-hub/settings/api-keys/${te}`,method:"DELETE"}),await D()}catch(le){R(`Failed to delete ${te}`),console.error("Delete API key failed:",le)}},oe=te=>u.some(le=>le.extensionId===te);return r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Marketplace Hub"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Connect external AI ecosystems - MCP servers, workflows, prompts, and more"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[r.jsxs("div",{className:"flex gap-4 mb-4",children:[r.jsx("input",{type:"text",placeholder:"Search across all marketplaces...",value:e,onChange:te=>t(te.target.value),onKeyDown:te=>te.key==="Enter"&&L(),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("button",{onClick:L,disabled:g,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Searching...":"Search"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[r.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"Sources:"}),U.map(te=>r.jsx("button",{onClick:()=>W(te.id),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${n.includes(te.id)||n.length===0?Ii[te.id]||"bg-gray-200 text-gray-800":"bg-gray-100 text-gray-400"}`,children:te.name},te.id))]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"Type:"}),H.map(te=>r.jsx("button",{onClick:()=>i(te.id),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${s===te.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:te.name},te.id))]})]}),T&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:T}),l.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Search Results (",l.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(te=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xl",children:uP[te.type]||""}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ii[te.source]||"bg-gray-100 text-gray-800"}`,children:te.source})]}),te.version&&r.jsxs("span",{className:"text-xs text-gray-500",children:["v",te.version]})]}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:te.name}),r.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:te.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex gap-3 text-xs text-gray-500",children:[te.downloads!==void 0&&r.jsxs("span",{children:[" ",te.downloads.toLocaleString()]}),te.stars!==void 0&&r.jsxs("span",{children:[" ",te.stars.toLocaleString()]}),te.rating!==void 0&&r.jsxs("span",{children:["Rating: ",te.rating.toFixed(1)]})]}),r.jsx("button",{onClick:()=>q(te),disabled:v===te.id||oe(te.id),className:`px-3 py-1 rounded text-sm font-medium ${oe(te.id)?"bg-green-100 text-green-700 cursor-default":v===te.id?"bg-gray-100 text-gray-500":"bg-blue-600 text-white hover:bg-blue-700"}`,children:oe(te.id)?"Installed":v===te.id?"Installing...":"Install"})]})]},`${te.source}-${te.id}`))})]}),r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"AI-Powered Recommendations"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Describe what you want to do, and we'll find the right tools"}),r.jsxs("div",{className:"flex gap-4 mb-4",children:[r.jsx("input",{type:"text",placeholder:"e.g., I need to send messages to Slack channels...",value:N,onChange:te=>A(te.target.value),onKeyDown:te=>te.key==="Enter"&&Y(),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),r.jsx("button",{onClick:Y,disabled:C,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:C?"Finding...":"Get Recommendations"})]}),p.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map((te,le)=>r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:uP[te.item.type]||""}),r.jsx("span",{className:"font-semibold",children:te.item.name})]}),r.jsxs("span",{className:"text-xs text-purple-600 font-medium",children:[Math.round(te.confidence*100),"% match"]})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:te.reason}),r.jsx("button",{onClick:()=>q(te.item),disabled:v===te.item.id||oe(te.item.id),className:"w-full py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50 text-sm",children:oe(te.item.id)?"Installed":"Install"})]},le))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("button",{onClick:()=>S(!x),className:"w-full px-6 py-4 flex items-center justify-between text-left",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Installed Extensions (",u.length,")"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"External tools installed in your workspace"})]}),r.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${x?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&u.length>0&&r.jsx("div",{className:"px-6 pb-6",children:r.jsx("div",{className:"divide-y divide-gray-100",children:u.map(te=>r.jsxs("div",{className:"py-3 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:te.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${Ii[te.source]||"bg-gray-100"}`,children:te.source})]}),r.jsxs("span",{className:"text-xs text-gray-500",children:["v",te.version,"  Installed ",new Date(te.installedAt).toLocaleDateString()]})]}),r.jsx("button",{onClick:()=>K(te.extensionId),className:"text-red-600 hover:text-red-700 text-sm",children:"Uninstall"})]},te.id))})}),x&&u.length===0&&r.jsx("div",{className:"px-6 pb-6 text-center text-gray-500",children:"No external extensions installed yet"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow mt-6",children:[r.jsxs("button",{onClick:()=>O(!P),className:"w-full px-6 py-4 flex items-center justify-between text-left",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"API Key Settings"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Optional: Configure API keys for premium features or higher rate limits"})]}),r.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${P?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),P&&r.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[r.jsxs("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg",children:["API keys are ",r.jsx("strong",{children:"optional"}),". External sources work without keys, but keys may unlock premium features or bypass rate limits."]}),r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ii.smithery}`,children:"Smithery"}),I.smitheryApiKeySet&&r.jsx("span",{className:"text-green-600 text-xs",children:"Configured"})]}),I.smitheryApiKeySet&&r.jsx("button",{onClick:()=>he("smitheryApiKey"),className:"text-red-600 hover:text-red-700 text-xs",children:"Remove"})]}),r.jsx("input",{type:"password",placeholder:I.smitheryApiKeySet?I.smitheryApiKey||"":"Enter Smithery API key",value:$.smitheryApiKey,onChange:te=>G(le=>({...le,smitheryApiKey:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For premium MCP servers access"})]}),r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ii.civitai}`,children:"CivitAI"}),I.civitaiApiKeySet&&r.jsx("span",{className:"text-green-600 text-xs",children:"Configured"})]}),I.civitaiApiKeySet&&r.jsx("button",{onClick:()=>he("civitaiApiKey"),className:"text-red-600 hover:text-red-700 text-xs",children:"Remove"})]}),r.jsx("input",{type:"password",placeholder:I.civitaiApiKeySet?I.civitaiApiKey||"":"Enter CivitAI API key",value:$.civitaiApiKey,onChange:te=>G(le=>({...le,civitaiApiKey:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-pink-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For higher rate limits and NSFW content access"})]}),r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ii["langchain-hub"]}`,children:"LangChain Hub"}),I.langchainApiKeySet&&r.jsx("span",{className:"text-green-600 text-xs",children:"Configured"})]}),I.langchainApiKeySet&&r.jsx("button",{onClick:()=>he("langchainApiKey"),className:"text-red-600 hover:text-red-700 text-xs",children:"Remove"})]}),r.jsx("input",{type:"password",placeholder:I.langchainApiKeySet?I.langchainApiKey||"":"Enter LangChain Hub API key",value:$.langchainApiKey,onChange:te=>G(le=>({...le,langchainApiKey:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-yellow-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For private prompts and chains access"})]}),r.jsx("button",{onClick:ue,disabled:V,className:"w-full py-2 bg-gray-900 text-white rounded-lg font-medium hover:bg-gray-800 disabled:opacity-50",children:V?"Saving...":"Save API Keys"})]})]})]})})}const hP={company_info:{title:"Company Information",titleKo:" ",description:"Tell us about your company",descriptionKo:"  "},google_workspace:{title:"Connect Google Workspace",titleKo:"Google Workspace ",description:"Import team members automatically",descriptionKo:"  "},select_template:{title:"Select Template",titleKo:" ",description:"Choose a template that fits your industry",descriptionKo:"   "},customize_agents:{title:"Customize Agents",titleKo:" ",description:"Configure your AI agents",descriptionKo:"AI  "},connect_slack:{title:"Connect Slack",titleKo:"Slack ",description:"Use agents in Slack",descriptionKo:"Slack  "},invite_team:{title:"Invite Team",titleKo:" ",description:"Invite colleagues to collaborate",descriptionKo:"   "},first_workflow:{title:"Your First Workflow",titleKo:" ",description:"Try running an automated workflow",descriptionKo:"  "},completed:{title:"All Done!",titleKo:"!",description:"You're ready to go",descriptionKo:" "}},av=["company_info","google_workspace","select_template","customize_agents","connect_slack","invite_team","first_workflow","completed"];function Ite(){var B;const e=Zs(),{user:t}=rs(),[n,a]=b.useState(null),[s,i]=b.useState([]),[l,d]=b.useState(!0),[u,h]=b.useState(!1),[p,m]=b.useState(null),[g,j]=b.useState(""),[v,w]=b.useState(""),[x,S]=b.useState(""),[P,O]=b.useState(null),[N,A]=b.useState([]),[C,E]=b.useState("");b.useEffect(()=>{T(),R()},[]);const T=async()=>{try{const L=await(await fetch("/api/onboarding/state",{credentials:"include"})).json();if(L.data)a(L.data),L.data.data&&(j(L.data.data.companyName||""),w(L.data.data.industry||""),S(L.data.data.teamSize||""),O(L.data.data.templateId||null),A(L.data.data.selectedAgents||[]));else{const K=await(await fetch("/api/onboarding/start",{method:"POST",credentials:"include"})).json();a(K.data)}}catch(D){m(D instanceof Error?D.message:"Failed to load")}finally{d(!1)}},R=async()=>{try{const L=await(await fetch("/api/onboarding/templates",{credentials:"include"})).json();i(L.data||[])}catch(D){console.error("Failed to fetch templates",D)}},I=async(D,L)=>{h(!0),m(null);try{const K=await(await fetch(`/api/onboarding/step/${D}/complete`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data:L})})).json();if(!K.success)throw new Error(K.error);a(K.data),K.data.isComplete&&e("/dashboard")}catch(q){m(q instanceof Error?q.message:"Failed to complete step")}finally{h(!1)}},M=async D=>{h(!0),m(null);try{const q=await(await fetch(`/api/onboarding/step/${D}/skip`,{method:"POST",credentials:"include"})).json();if(!q.success)throw new Error(q.error);a(q.data)}catch(L){m(L instanceof Error?L.message:"Failed to skip step")}finally{h(!1)}},$=()=>{if(!g.trim()){m("Company name is required");return}I("company_info",{companyName:g,industry:v,teamSize:x})},G=async()=>{if(!P){m("Please select a template");return}h(!0),m(null);try{const L=await(await fetch(`/api/onboarding/templates/${P}/apply`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({customizations:{enabledAgents:N}})})).json();if(!L.success)throw new Error(L.error);await T()}catch(D){m(D instanceof Error?D.message:"Failed to apply template")}finally{h(!1)}},V=()=>{const D=C.split(/[,\n]/).map(L=>L.trim()).filter(L=>L);if(D.length===0){M("invite_team");return}I("invite_team",{invitedEmails:D})},z=(n==null?void 0:n.currentStep)||"company_info",U=hP[z],H=av.indexOf(z);return l?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):n!=null&&n.isComplete?(e("/dashboard"),null):r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",H+1," of ",av.length-1]}),r.jsxs("span",{className:"text-sm font-medium text-indigo-600",children:[(n==null?void 0:n.progress)||0,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"h-2 bg-indigo-600 rounded-full transition-all",style:{width:`${(n==null?void 0:n.progress)||0}%`}})})]})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:U.titleKo}),r.jsx("p",{className:"text-gray-600",children:U.descriptionKo})]}),p&&r.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800",children:p})}),z==="company_info"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),r.jsx("input",{type:"text",value:g,onChange:D=>j(D.target.value),placeholder:"Acme Inc.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),r.jsxs("select",{value:v,onChange:D=>w(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"Select industry"}),r.jsx("option",{value:"technology",children:"Technology"}),r.jsx("option",{value:"agency",children:"Marketing/Design Agency"}),r.jsx("option",{value:"retail",children:"E-Commerce/Retail"}),r.jsx("option",{value:"manufacturing",children:"Manufacturing"}),r.jsx("option",{value:"consulting",children:"Consulting"}),r.jsx("option",{value:"healthcare",children:"Healthcare"}),r.jsx("option",{value:"finance",children:"Finance"}),r.jsx("option",{value:"education",children:"Education"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team Size"}),r.jsxs("select",{value:x,onChange:D=>S(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"Select team size"}),r.jsx("option",{value:"1-5",children:"1-5 people"}),r.jsx("option",{value:"6-20",children:"6-20 people"}),r.jsx("option",{value:"21-50",children:"21-50 people"}),r.jsx("option",{value:"51-200",children:"51-200 people"}),r.jsx("option",{value:"200+",children:"200+ people"})]})]}),r.jsx("button",{onClick:$,disabled:u,className:"w-full py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50",children:u?"Saving...":"Continue"})]}),z==="google_workspace"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12.545 10.239v3.821h5.445c-.712 2.315-2.647 3.972-5.445 3.972a6.033 6.033 0 110-12.064c1.498 0 2.866.549 3.921 1.453l2.814-2.814A9.969 9.969 0 0012.545 2C7.021 2 2.543 6.477 2.543 12s4.478 10 10.002 10c8.396 0 10.249-7.85 9.426-11.748l-9.426-.013z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Google Workspace"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Import your team members automatically from Google Workspace"}),r.jsxs("a",{href:"/api/google/oauth/install",className:"inline-flex items-center px-6 py-3 bg-white border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50",children:[r.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Connect with Google"]})]}),r.jsx("div",{className:"flex justify-between pt-4",children:r.jsx("button",{onClick:()=>M("google_workspace"),disabled:u,className:"px-6 py-2 text-gray-600 hover:text-gray-900",children:"Skip for now"})})]}),z==="select_template"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(D=>r.jsxs("button",{onClick:()=>O(D.id),className:`p-6 border-2 rounded-xl text-left transition ${P===D.id?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:"text-3xl mb-2",children:D.icon}),r.jsx("h3",{className:"font-semibold text-gray-900",children:D.nameKo}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D.descriptionKo}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[D.agents.filter(L=>L.enabled).length," agents,"," ",D.id==="custom"?"configure yourself":"pre-configured"]})]},D.id))}),r.jsx("button",{onClick:G,disabled:u||!P,className:"w-full py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50",children:u?"Applying template...":"Continue"})]}),z==="customize_agents"&&r.jsxs("div",{className:"space-y-6",children:[P&&r.jsx("div",{className:"space-y-4",children:(B=s.find(D=>D.id===P))==null?void 0:B.agents.map(D=>r.jsxs("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",checked:D.enabled||N.includes(D.id),onChange:L=>{L.target.checked?A([...N,D.id]):A(N.filter(q=>q!==D.id))},className:"h-4 w-4 text-indigo-600 rounded"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("div",{className:"font-medium text-gray-900",children:D.name}),r.jsx("div",{className:"text-sm text-gray-500",children:D.description})]})]},D.id))}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>M("customize_agents"),disabled:u,className:"flex-1 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50",children:"Use defaults"}),r.jsx("button",{onClick:()=>I("customize_agents",{selectedAgents:N}),disabled:u,className:"flex-1 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50",children:u?"Saving...":"Continue"})]})]}),z==="connect_slack"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-10 h-10 text-purple-600",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Slack"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Use your AI agents directly in Slack channels"}),r.jsxs("a",{href:"/api/slack/oauth/install",className:"inline-flex items-center px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313z"})}),"Add to Slack"]})]}),r.jsx("div",{className:"flex justify-between pt-4",children:r.jsx("button",{onClick:()=>M("connect_slack"),disabled:u,className:"px-6 py-2 text-gray-600 hover:text-gray-900",children:"Skip for now"})})]}),z==="invite_team"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team Member Emails"}),r.jsx("textarea",{value:C,onChange:D=>E(D.target.value),placeholder:"Enter email addresses (one per line or comma-separated)",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"You can also invite team members later from Settings"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>M("invite_team"),disabled:u,className:"flex-1 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50",children:"Skip for now"}),r.jsx("button",{onClick:V,disabled:u,className:"flex-1 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50",children:u?"Sending...":C.trim()?"Send Invites":"Continue"})]})]}),z==="first_workflow"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Try Your First Workflow"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"We've set up some sample workflows for you. Let's run one to see how it works!"}),r.jsx("button",{onClick:()=>{I("first_workflow",{firstWorkflowCompleted:!0})},className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Run Sample Workflow"})]}),r.jsx("div",{className:"flex justify-between pt-4",children:r.jsx("button",{onClick:()=>M("first_workflow"),disabled:u,className:"px-6 py-2 text-gray-600 hover:text-gray-900",children:"I'll try it later"})})]}),z==="completed"&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"You're all set!"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Your workspace is ready. Let's start automating your work."}),r.jsx("button",{onClick:()=>e("/dashboard"),className:"px-8 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700",children:"Go to Dashboard"})]})]}),z!=="completed"&&r.jsx("div",{className:"flex justify-center mt-8 space-x-2",children:av.slice(0,-1).map(D=>{const L=n==null?void 0:n.completedSteps.includes(D),q=n==null?void 0:n.skippedSteps.includes(D),K=D===z;return r.jsx("div",{className:`w-3 h-3 rounded-full ${L?"bg-green-500":q?"bg-gray-300":K?"bg-indigo-600":"bg-gray-200"}`,title:hP[D].title},D)})})]})]})}const $te=["Data & Analytics","Engineering","Marketing","Operations","Finance","HR","Sales","Customer Success","Product","Design"],Wl={new_agent:{emoji:"",title:"  ",titleEn:"Add New Agent",description:" AI   "},new_team:{emoji:"",title:"  ",titleEn:"Create New Team",description:"   Function "},process_modification:{emoji:"",title:" ",titleEn:"Modify Process",description:" SOP  "},role_change:{emoji:"",title:" ",titleEn:"Change Role",description:"   "}},fP={step:1,changeType:null,teamFunction:"",entityName:"",description:"",selectedSkills:[],selectedTools:[],customSkills:[],customTools:[],permissions:{read:[],write:[],deny:[]},analysis:null};function Lte(){var B,D;const e=Zs(),[t,n]=b.useState(fP),[a,s]=b.useState(!1),[i,l]=b.useState(!1),[d,u]=b.useState(null),[h,p]=b.useState(null),[m,g]=b.useState(""),[j,v]=b.useState(""),[w,x]=b.useState(""),[S,P]=b.useState(""),[O,N]=b.useState(""),A=b.useCallback(async()=>{if(!(!t.changeType||!t.teamFunction||!t.entityName||!t.description)){s(!0),u(null);try{const L=await se({url:"/api/org-changes/analyze",method:"POST",data:{changeType:t.changeType,teamFunction:t.teamFunction,entityName:t.entityName,description:t.description}});n(q=>({...q,analysis:L,selectedSkills:L.suggestedSkills,selectedTools:L.suggestedTools}))}catch(L){const q=L instanceof Ke?L.message:"   ";u(q)}finally{s(!1)}}},[t.changeType,t.teamFunction,t.entityName,t.description]);b.useEffect(()=>{t.step===3&&!t.analysis&&A()},[t.step,t.analysis,A]);const C=L=>{n(q=>({...q,changeType:L}))},E=()=>{if(u(null),t.step===1&&!t.changeType){u("  ");return}if(t.step===2){if(!t.teamFunction){u("/Function ");return}if(!t.entityName.trim()){u(" ");return}if(!t.description.trim()){u(" ");return}}n(L=>({...L,step:L.step+1}))},T=()=>{u(null),n(L=>({...L,step:L.step-1}))},R=async()=>{if(!t.analysis){u("  .   .");return}l(!0),u(null);try{const L=await se({url:"/api/org-changes/wizard",method:"POST",data:{changeType:t.changeType,teamFunction:t.teamFunction,entityName:t.entityName,description:t.description,selectedSkills:[...t.selectedSkills,...t.customSkills],selectedTools:[...t.selectedTools,...t.customTools],permissions:t.permissions,analysis:t.analysis}});p({prUrl:L.prUrl,changeId:L.changeId})}catch(L){const q=L instanceof Ke?L.message:"    ";u(q)}finally{l(!1)}},I=L=>{n(q=>({...q,selectedSkills:q.selectedSkills.includes(L)?q.selectedSkills.filter(K=>K!==L):[...q.selectedSkills,L]}))},M=L=>{n(q=>({...q,selectedTools:q.selectedTools.includes(L)?q.selectedTools.filter(K=>K!==L):[...q.selectedTools,L]}))},$=()=>{m.trim()&&!t.customSkills.includes(m.trim())&&(n(L=>({...L,customSkills:[...L.customSkills,m.trim()]})),g(""))},G=()=>{j.trim()&&!t.customTools.includes(j.trim())&&(n(L=>({...L,customTools:[...L.customTools,j.trim()]})),v(""))},V=(L,q,K)=>{q.trim()&&!t.permissions[L].includes(q.trim())&&(n(Y=>({...Y,permissions:{...Y.permissions,[L]:[...Y.permissions[L],q.trim()]}})),K(""))},z=(L,q)=>{n(K=>({...K,permissions:{...K.permissions,[L]:K.permissions[L].filter(Y=>Y!==q)}}))},U=L=>{switch(L){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-red-100 text-red-800"}},H=L=>{switch(L){case"low":return"";case"medium":return"";case"high":return""}};return h?r.jsx("div",{className:"max-w-3xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"  !"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"PR    ."}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Pull Request"}),r.jsx("a",{href:h.prUrl,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 font-medium",children:h.prUrl})]}),r.jsxs("div",{className:"flex gap-4 justify-center",children:[r.jsx("button",{onClick:()=>e("/org-changes"),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"  "}),r.jsx("button",{onClick:()=>{n(fP),p(null)},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"  "})]})]})}):r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"  "}),r.jsx("p",{className:"text-gray-600",children:" , ,     "})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(L=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-medium ${L===t.step?"bg-indigo-600 text-white":L<t.step?"bg-indigo-100 text-indigo-600":"bg-gray-200 text-gray-500"}`,children:L<t.step?"":L}),L<5&&r.jsx("div",{className:`w-16 h-1 mx-2 ${L<t.step?"bg-indigo-600":"bg-gray-200"}`})]},L))}),r.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[r.jsx("span",{className:t.step>=1?"text-indigo-600":"text-gray-500",children:" "}),r.jsx("span",{className:t.step>=2?"text-indigo-600":"text-gray-500",children:" "}),r.jsx("span",{className:t.step>=3?"text-indigo-600":"text-gray-500",children:" & "}),r.jsx("span",{className:t.step>=4?"text-indigo-600":"text-gray-500",children:" "}),r.jsx("span",{className:t.step>=5?"text-indigo-600":"text-gray-500",children:" & "})]})]}),d&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:d}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.step===1&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"  "}),r.jsx("p",{className:"text-gray-600 mb-6",children:"   ?"}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.keys(Wl).map(L=>{const q=Wl[L],K=t.changeType===L;return r.jsxs("button",{onClick:()=>C(L),className:`p-4 rounded-lg border-2 text-left transition-all ${K?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[r.jsx("div",{className:"text-3xl mb-2",children:q.emoji}),r.jsx("div",{className:"font-semibold text-gray-900",children:q.title}),r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:q.titleEn}),r.jsx("div",{className:"text-sm text-gray-600",children:q.description})]},L)})})]}),t.step===2&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:[t.changeType&&Wl[t.changeType].emoji," ",t.changeType&&Wl[t.changeType].title," (Step 2/5)"]}),r.jsx("p",{className:"text-gray-600 mb-6",children:"  "}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"/Function"}),r.jsxs("select",{value:t.teamFunction,onChange:L=>n(q=>({...q,teamFunction:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"",children:""}),$te.map(L=>r.jsx("option",{value:L,children:L},L))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t.changeType==="new_agent"?" ":t.changeType==="new_team"?" ":" "}),r.jsx("input",{type:"text",value:t.entityName,onChange:L=>n(q=>({...q,entityName:L.target.value})),placeholder:t.changeType==="new_agent"?": data-agent":": Data Analytics Team",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),r.jsx("textarea",{value:t.description,onChange:L=>n(q=>({...q,description:L.target.value})),placeholder:" /    ",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsx("div",{className:"mt-4 p-4 bg-indigo-50 rounded-lg",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-xl mr-2",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-indigo-900",children:"AI "}),r.jsxs("div",{className:"text-sm text-indigo-700",children:['  "',t.teamFunction||" ",'"       .']})]})]})})]})]}),t.step===3&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:" &   (Step 3/5)"}),a?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"AI     ..."})]}):r.jsxs("div",{className:"space-y-6",children:[t.analysis&&r.jsx("div",{className:"p-4 bg-indigo-50 rounded-lg",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-xl mr-2",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-indigo-900 mb-1",children:"AI "}),r.jsxs("div",{className:"text-sm text-indigo-700",children:['"',t.teamFunction,'"     ,    .       .']})]})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (Skills)"}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[(B=t.analysis)==null?void 0:B.suggestedSkills.map(L=>r.jsx("button",{onClick:()=>I(L),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${t.selectedSkills.includes(L)?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:L},L)),t.customSkills.map(L=>r.jsxs("button",{onClick:()=>n(q=>({...q,customSkills:q.customSkills.filter(K=>K!==L)})),className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700 hover:bg-green-200",children:[L," "]},L))]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:m,onChange:L=>g(L.target.value),onKeyPress:L=>L.key==="Enter"&&$(),placeholder:"  ",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),r.jsx("button",{onClick:$,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"/MCP  (Tools)"}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[(D=t.analysis)==null?void 0:D.suggestedTools.map(L=>r.jsx("button",{onClick:()=>M(L),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${t.selectedTools.includes(L)?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:L},L)),t.customTools.map(L=>r.jsxs("button",{onClick:()=>n(q=>({...q,customTools:q.customTools.filter(K=>K!==L)})),className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700 hover:bg-green-200",children:[L," "]},L))]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:j,onChange:L=>v(L.target.value),onKeyPress:L=>L.key==="Enter"&&G(),placeholder:"  ",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),r.jsx("button",{onClick:G,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:""})]})]})]})]}),t.step===4&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"  (Step 4/5)"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"     .     ."}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (Read)"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.permissions.read.map(L=>r.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm flex items-center gap-1",children:[L,r.jsx("button",{onClick:()=>z("read",L),className:"ml-1 hover:text-blue-900",children:""})]},L))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:w,onChange:L=>x(L.target.value),onKeyPress:L=>L.key==="Enter"&&V("read",w,x),placeholder:"/sops/brand/*, /docs/product/*",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),r.jsx("button",{onClick:()=>V("read",w,x),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 text-sm",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (Write)"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.permissions.write.map(L=>r.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm flex items-center gap-1",children:[L,r.jsx("button",{onClick:()=>z("write",L),className:"ml-1 hover:text-green-900",children:""})]},L))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:S,onChange:L=>P(L.target.value),onKeyPress:L=>L.key==="Enter"&&V("write",S,P),placeholder:"/sops/brand/* (PR only)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),r.jsx("button",{onClick:()=>V("write",S,P),className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 text-sm",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (Deny)"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.permissions.deny.map(L=>r.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm flex items-center gap-1",children:[L,r.jsx("button",{onClick:()=>z("deny",L),className:"ml-1 hover:text-red-900",children:""})]},L))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:O,onChange:L=>N(L.target.value),onKeyPress:L=>L.key==="Enter"&&V("deny",O,N),placeholder:"/org/hr/*, /docs/finance/confidential/*",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),r.jsx("button",{onClick:()=>V("deny",O,N),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-sm",children:""})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"font-medium text-gray-700 mb-2",children:"  "}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("li",{children:[r.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"/sops/brand/*"})," - brand   "]}),r.jsxs("li",{children:[r.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"/docs/**/*"})," - docs    ()"]}),r.jsxs("li",{children:[r.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"/config/agents/*.yaml"})," - agents  YAML "]})]})]})]})]}),t.step===5&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:" &  (Step 5/5)"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"   ."}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-2 font-medium text-gray-700",children:""}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"w-32 text-gray-500",children:" :"}),r.jsx("span",{className:"font-medium",children:t.changeType&&Wl[t.changeType].title})]}),r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"w-32 text-gray-500",children:"/Function:"}),r.jsx("span",{className:"font-medium",children:t.teamFunction})]}),r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"w-32 text-gray-500",children:":"}),r.jsx("span",{className:"font-medium",children:t.entityName})]}),r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"w-32 text-gray-500",children:":"}),r.jsx("span",{className:"text-gray-700",children:t.description})]}),r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"w-32 text-gray-500",children:":"}),r.jsx("span",{className:"flex flex-wrap gap-1",children:[...t.selectedSkills,...t.customSkills].map(L=>r.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded text-xs",children:L},L))})]}),r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"w-32 text-gray-500",children:":"}),r.jsx("span",{className:"flex flex-wrap gap-1",children:[...t.selectedTools,...t.customTools].map(L=>r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded text-xs",children:L},L))})]})]})]}),t.analysis&&r.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-2 font-medium text-gray-700 flex items-center gap-2",children:[r.jsx("span",{children:" "}),r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${U(t.analysis.riskLevel)}`,children:[": ",H(t.analysis.riskLevel)]})]}),r.jsxs("div",{className:"p-4 space-y-3",children:[t.analysis.impactedAgents.length>0&&r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-lg mr-2",children:""}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"  :"}),r.jsx("div",{className:"font-medium",children:t.analysis.impactedAgents.join(", ")})]})]}),t.analysis.impactedSOPs.length>0&&r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-lg mr-2",children:""}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"  SOP:"}),r.jsx("div",{className:"font-medium",children:t.analysis.impactedSOPs.join(", ")})]})]}),t.analysis.recommendations.length>0&&r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-lg mr-2",children:""}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 text-sm",children:" :"}),r.jsx("ul",{className:"mt-1 space-y-1",children:t.analysis.recommendations.slice(0,3).map((L,q)=>r.jsx("li",{className:"text-sm text-gray-700",children:L},q))})]})]})]})]}),t.analysis&&r.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-2 font-medium text-gray-700",children:" PR "}),r.jsxs("div",{className:"p-4 font-mono text-sm",children:[t.analysis.filesCreated.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"text-green-600",children:":"}),t.analysis.filesCreated.map(L=>r.jsxs("div",{className:"ml-4 text-gray-600",children:["+ ",L]},L))]}),t.analysis.filesModified.length>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-yellow-600",children:":"}),t.analysis.filesModified.map(L=>r.jsxs("div",{className:"ml-4 text-gray-600",children:["~ ",L]},L))]})]})]})]})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("button",{onClick:t.step===1?()=>e("/org-changes"):T,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:t.step===1?"":" "}),t.step<5?r.jsx("button",{onClick:E,disabled:a,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:" "}):r.jsx("button",{onClick:R,disabled:i,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?" ...":"  PR "})]})]})}function Dte(){const[e,t]=b.useState([]),[n,a]=b.useState(!0),[s,i]=b.useState(null),[l,d]=b.useState(!1),[u,h]=b.useState("all"),[p,m]=b.useState(!1);b.useEffect(()=>{g()},[u]);const g=async()=>{try{a(!0);const O=new URLSearchParams;u!=="all"&&O.set("type",u),O.set("status","active"),O.set("limit","50");const N=await fetch(`/api/patterns?${O}`,{credentials:"include"});if(Io(N)){d(!0);return}if(!N.ok)throw new Error("Failed to fetch patterns");const A=await N.json();t(A.patterns),i(null)}catch(O){i(O instanceof Error?O.message:"Unknown error")}finally{a(!1)}},j=async()=>{try{if(m(!0),!(await fetch("/api/patterns/analyze",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({lookbackDays:30,generateDrafts:!0})})).ok)throw new Error("Failed to run analysis");await g()}catch(O){i(O instanceof Error?O.message:"Analysis failed")}finally{m(!1)}},v=async O=>{try{if(!(await fetch(`/api/patterns/${O}/dismiss`,{method:"POST",credentials:"include"})).ok)throw new Error("Failed to dismiss pattern");t(e.filter(A=>A.id!==O))}catch(N){i(N instanceof Error?N.message:"Failed to dismiss")}},w=async O=>{try{const N=await fetch(`/api/patterns/${O}/generate-sop`,{method:"POST",credentials:"include"});if(!N.ok)throw new Error("Failed to generate SOP");const A=await N.json();window.location.href=`/sop-drafts/${A.draft.id}`}catch(N){i(N instanceof Error?N.message:"Failed to generate SOP")}},x=()=>{const O={sequence:0,cluster:0,time:0};let N=0;for(const A of e)O[A.type]++,N+=A.confidence;return{total:e.length,byType:O,avgConfidence:e.length>0?N/e.length:0}},S=O=>{var A;const N=O.data;switch(O.type){case"sequence":return r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Sequence:"})," ",((A=N.sequence)==null?void 0:A.join("  "))||"N/A"]});case"cluster":return r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Intent:"})," ",N.commonIntent||"Similar requests"]});case"time":return r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Schedule:"})," ",N.description||"Recurring pattern"]});default:return null}},P=x();return l?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pattern Insights"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Detected patterns that could be automated as SOPs"})]}),r.jsx(Zc,{title:"Pattern Detection",description:"Pattern detection is currently being set up. This feature will analyze user actions and suggest automation opportunities once the backend service is activated.",onRetry:g})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pattern Insights"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Detected patterns that could be automated as SOPs"})]}),r.jsx("button",{onClick:j,disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:p?"Analyzing...":"Run Analysis"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Total Patterns"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:P.total})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Sequence Patterns"}),r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P.byType.sequence})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Request Clusters"}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:P.byType.cluster})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Time Patterns"}),r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:P.byType.time})]})]}),r.jsx("div",{className:"flex gap-2 mb-6",children:["all","sequence","cluster","time"].map(O=>r.jsx("button",{onClick:()=>h(O),className:`px-4 py-2 rounded-lg ${u===O?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:O.charAt(0).toUpperCase()+O.slice(1)},O))}),s&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:r.jsx("p",{className:"text-red-700",children:s})}),n?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading patterns..."})]}):e.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[r.jsx("div",{className:"text-gray-400 text-5xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No patterns detected"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Run an analysis to detect automation opportunities from user actions."}),r.jsx("button",{onClick:j,disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Run Analysis Now"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(O=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${O.type==="sequence"?"bg-blue-100 text-blue-700":O.type==="cluster"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:O.type}),r.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(O.confidence*100),"% confidence"]})]}),r.jsx("div",{className:"mb-3",children:S(O)}),r.jsxs("div",{className:"flex gap-4 text-sm text-gray-500 mb-4",children:[r.jsxs("span",{children:["Frequency: ",O.frequency]}),r.jsx("span",{children:""}),r.jsx("span",{children:new Date(O.createdAt).toLocaleDateString()})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full mb-4",children:r.jsx("div",{className:`h-full rounded-full ${O.confidence>=.8?"bg-green-500":O.confidence>=.6?"bg-yellow-500":"bg-red-500"}`,style:{width:`${O.confidence*100}%`}})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>w(O.id),className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Generate SOP"}),r.jsx("button",{onClick:()=>v(O.id),className:"px-3 py-2 text-gray-600 text-sm border border-gray-300 rounded hover:bg-gray-50",children:"Dismiss"})]})]},O.id))})]})})}function Fte(){const[e,t]=b.useState(null),[n,a]=b.useState([]),[s,i]=b.useState(null),[l,d]=b.useState([]),[u,h]=b.useState(!0),[p,m]=b.useState(!1),[g,j]=b.useState(!1),[v,w]=b.useState("30d"),[x,S]=b.useState("overview"),[P,O]=b.useState({name:"",slug:"",email:"",website:"",description:""}),N=b.useCallback(async()=>{try{const M=await se({url:"/api/marketplace/publishers/me",method:"GET"});return t(M.publisher),!0}catch(M){return M instanceof Ke&&M.status===404&&j(!0),!1}},[]),A=b.useCallback(async()=>{try{const M=await se({url:"/api/marketplace/publishers/me/extensions",method:"GET"});a(M.extensions)}catch(M){console.error("Failed to fetch extensions:",M)}},[]),C=b.useCallback(async()=>{try{const M=await se({url:`/api/marketplace/publishers/me/analytics?period=${v}`,method:"GET"});i(M.analytics)}catch(M){console.error("Failed to fetch analytics:",M)}},[v]),E=b.useCallback(async()=>{try{const M=await se({url:"/api/marketplace/publishers/me/payouts",method:"GET"});d(M.payouts)}catch(M){console.error("Failed to fetch payouts:",M)}},[]);b.useEffect(()=>{(async()=>{h(!0),await N()&&await Promise.all([A(),C(),E()]),h(!1)})()},[N,A,C,E]),b.useEffect(()=>{e&&C()},[v,e,C]);const T=async M=>{M.preventDefault(),m(!0);try{const $=await se({url:"/api/marketplace/publishers/register",method:"POST",data:P});t($.publisher),j(!1)}catch($){const G=$ instanceof Ke?$.message:"Registration failed";alert(G)}finally{m(!1)}},R=M=>M>=1e6?`${(M/1e6).toFixed(1)}M`:M>=1e3?`${(M/1e3).toFixed(1)}K`:String(M),I=M=>`$${(M/100).toFixed(2)}`;return u?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})}):g?r.jsxs("div",{className:"max-w-xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Become a Publisher"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Create and share extensions with the Nubabel community"})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:r.jsxs("form",{onSubmit:T,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Publisher Name *"}),r.jsx("input",{type:"text",value:P.name,onChange:M=>O({...P,name:M.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Acme Inc."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Publisher Slug *"}),r.jsx("input",{type:"text",value:P.slug,onChange:M=>O({...P,slug:M.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")}),required:!0,pattern:"[a-z0-9-]+",className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"acme-inc"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL-friendly identifier (lowercase, hyphens only)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email *"}),r.jsx("input",{type:"email",value:P.email,onChange:M=>O({...P,email:M.target.value}),required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"publisher@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:P.website,onChange:M=>O({...P,website:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"https://example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:P.description,onChange:M=>O({...P,description:M.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:3,placeholder:"Tell us about your organization..."})]}),r.jsx("button",{type:"submit",disabled:p,className:"w-full py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 font-medium",children:p?"Registering...":"Register as Publisher"})]})})]}):e?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Publisher Dashboard"}),r.jsxs("p",{className:"text-gray-600",children:[e.name,e.verified&&r.jsx("span",{className:"ml-2 text-blue-500",children:" Verified"})]})]}),r.jsx(ft,{to:"/marketplace/submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Submit Extension"})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsx("div",{className:"flex gap-6",children:["overview","extensions","payouts"].map(M=>r.jsxs("button",{onClick:()=>S(M),className:`py-3 text-sm font-medium border-b-2 -mb-px ${x===M?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[M==="overview"&&"Overview",M==="extensions"&&`Extensions (${n.length})`,M==="payouts"&&"Payouts"]},M))})}),x==="overview"&&s&&r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-end mb-4",children:r.jsxs("select",{value:v,onChange:M=>w(M.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[r.jsx("option",{value:"7d",children:"Last 7 days"}),r.jsx("option",{value:"30d",children:"Last 30 days"}),r.jsx("option",{value:"90d",children:"Last 90 days"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Total Downloads"}),r.jsx("div",{className:"text-3xl font-bold text-gray-900 mt-1",children:R(s.totalDownloads)})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Active Installs"}),r.jsx("div",{className:"text-3xl font-bold text-gray-900 mt-1",children:R(s.totalInstalls)})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Total Revenue"}),r.jsx("div",{className:"text-3xl font-bold text-green-600 mt-1",children:I(s.totalRevenue)})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Extensions"}),r.jsx("div",{className:"text-3xl font-bold text-gray-900 mt-1",children:n.length})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Download Trend"}),r.jsx("div",{className:"h-48 flex items-end gap-1",children:s.downloadTrend.slice(-30).map((M,$)=>{const G=Math.max(...s.downloadTrend.map(z=>z.count))||1,V=M.count/G*100;return r.jsx("div",{className:"flex-1 bg-indigo-500 rounded-t hover:bg-indigo-600 transition-colors",style:{height:`${Math.max(V,2)}%`},title:`${M.date}: ${M.count} downloads`},$)})})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Extension Performance"}),r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-sm text-gray-500 border-b",children:[r.jsx("th",{className:"pb-3",children:"Extension"}),r.jsx("th",{className:"pb-3 text-right",children:"Downloads"}),r.jsx("th",{className:"pb-3 text-right",children:"Installs"}),r.jsx("th",{className:"pb-3 text-right",children:"Revenue"}),r.jsx("th",{className:"pb-3 text-right",children:"Rating"})]})}),r.jsx("tbody",{children:s.extensionStats.map(M=>r.jsxs("tr",{className:"border-b last:border-b-0",children:[r.jsx("td",{className:"py-3 font-medium text-gray-900",children:M.name}),r.jsx("td",{className:"py-3 text-right text-gray-600",children:R(M.downloads)}),r.jsx("td",{className:"py-3 text-right text-gray-600",children:R(M.installs)}),r.jsx("td",{className:"py-3 text-right text-green-600",children:I(M.revenue)}),r.jsxs("td",{className:"py-3 text-right",children:[r.jsx("span",{className:"text-yellow-500",children:""})," ",M.rating.toFixed(1)]})]},M.extensionId))})]})]})]}),x==="extensions"&&r.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:n.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No extensions yet"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Submit your first extension to get started"}),r.jsx(ft,{to:"/marketplace/submit",className:"inline-block mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Submit Extension"})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-sm text-gray-500 border-b",children:[r.jsx("th",{className:"p-4",children:"Extension"}),r.jsx("th",{className:"p-4",children:"Status"}),r.jsx("th",{className:"p-4 text-right",children:"Downloads"}),r.jsx("th",{className:"p-4 text-right",children:"Rating"}),r.jsx("th",{className:"p-4 text-right",children:"Pricing"})]})}),r.jsx("tbody",{children:n.map(M=>r.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-gray-50",children:[r.jsx("td",{className:"p-4",children:r.jsx(ft,{to:`/marketplace/${M.slug}`,className:"font-medium text-indigo-600 hover:text-indigo-800",children:M.name})}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${M.status==="published"?"bg-green-100 text-green-700":M.status==="review"?"bg-yellow-100 text-yellow-700":M.status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:M.status})}),r.jsx("td",{className:"p-4 text-right text-gray-600",children:R(M.stats.downloads)}),r.jsxs("td",{className:"p-4 text-right",children:[r.jsx("span",{className:"text-yellow-500",children:""})," ",M.stats.rating.toFixed(1),r.jsxs("span",{className:"text-gray-400 text-sm ml-1",children:["(",M.stats.reviewCount,")"]})]}),r.jsx("td",{className:"p-4 text-right",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${M.pricing==="free"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:M.pricing})})]},M.id))})]})}),x==="payouts"&&r.jsxs("div",{children:[!e.payoutEnabled&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-yellow-800",children:"Set up payouts"}),r.jsx("p",{className:"text-sm text-yellow-700",children:"Connect your Stripe account to receive payments from paid extensions."})]}),r.jsx("button",{className:"ml-auto px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 text-sm",children:"Connect Stripe"})]})}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:l.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No payouts yet"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Payouts are processed monthly for paid extension revenue"})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-sm text-gray-500 border-b",children:[r.jsx("th",{className:"p-4",children:"Period"}),r.jsx("th",{className:"p-4",children:"Amount"}),r.jsx("th",{className:"p-4",children:"Status"}),r.jsx("th",{className:"p-4",children:"Paid Date"})]})}),r.jsx("tbody",{children:l.map(M=>r.jsxs("tr",{className:"border-b last:border-b-0",children:[r.jsxs("td",{className:"p-4 text-gray-900",children:[new Date(M.periodStart).toLocaleDateString()," -"," ",new Date(M.periodEnd).toLocaleDateString()]}),r.jsx("td",{className:"p-4 font-medium text-green-600",children:I(M.amount)}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${M.status==="completed"?"bg-green-100 text-green-700":M.status==="processing"?"bg-blue-100 text-blue-700":M.status==="failed"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:M.status})}),r.jsx("td",{className:"p-4 text-gray-600",children:M.paidAt?new Date(M.paidAt).toLocaleDateString():"-"})]},M.id))})]})})]})]}):null}function qte(){const[e,t]=b.useState([]),[n,a]=b.useState(!0),[s,i]=b.useState(null),[l,d]=b.useState(null),[u,h]=b.useState("all"),[p,m]=b.useState(""),[g,j]=b.useState(!1);b.useEffect(()=>{v()},[u]);const v=async()=>{try{a(!0);const N=new URLSearchParams;u!=="all"&&N.set("status",u),N.set("limit","50");const A=await fetch(`/api/sop-drafts?${N}`,{credentials:"include"});if(!A.ok)throw new Error("Failed to fetch drafts");const C=await A.json();t(C.drafts),i(null)}catch(N){i(N instanceof Error?N.message:"Unknown error")}finally{a(!1)}},w=async N=>{try{if(!(await fetch(`/api/sop-drafts/${N}/approve`,{method:"POST",credentials:"include"})).ok)throw new Error("Failed to approve draft");t(e.map(C=>C.id===N?{...C,status:"approved",reviewedAt:new Date().toISOString()}:C)),d(null)}catch(A){i(A instanceof Error?A.message:"Failed to approve")}},x=async N=>{try{if(!(await fetch(`/api/sop-drafts/${N}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reason:p})})).ok)throw new Error("Failed to reject draft");t(e.map(C=>C.id===N?{...C,status:"rejected",reviewedAt:new Date().toISOString(),rejectionReason:p}:C)),j(!1),m(""),d(null)}catch(A){i(A instanceof Error?A.message:"Failed to reject")}},S=async N=>{try{const A=await fetch(`/api/sop-drafts/${N.id}/yaml`,{credentials:"include"});if(!A.ok)throw new Error("Failed to download YAML");const C=await A.blob(),E=window.URL.createObjectURL(C),T=document.createElement("a");T.href=E,T.download=`${N.name.replace(/\s+/g,"_")}.yaml`,document.body.appendChild(T),T.click(),document.body.removeChild(T),window.URL.revokeObjectURL(E)}catch(A){i(A instanceof Error?A.message:"Failed to download")}},P=N=>{switch(N){case"draft":return"bg-gray-100 text-gray-700";case"pending_review":return"bg-yellow-100 text-yellow-700";case"approved":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=N=>{switch(N){case"automated":return"";case"manual":return"";case"approval":return"";default:return""}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SOP Drafts"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Review and approve auto-generated SOPs"})]}),r.jsx("a",{href:"/patterns",className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"View Patterns"})]}),r.jsx("div",{className:"flex gap-2 mb-6",children:["all","draft","pending_review","approved","rejected"].map(N=>r.jsx("button",{onClick:()=>h(N),className:`px-4 py-2 rounded-lg ${u===N?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:N==="all"?"All":N.replace("_"," ").replace(/\b\w/g,A=>A.toUpperCase())},N))}),s&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:r.jsx("p",{className:"text-red-700",children:s})}),r.jsxs("div",{className:"flex gap-6",children:[r.jsx("div",{className:"w-1/3",children:n?r.jsx("div",{className:"text-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):e.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:r.jsx("p",{className:"text-gray-600",children:"No drafts found"})}):r.jsx("div",{className:"space-y-3",children:e.map(N=>r.jsxs("div",{onClick:()=>d(N),className:`bg-white rounded-lg shadow p-4 cursor-pointer hover:shadow-md transition-shadow ${(l==null?void 0:l.id)===N.id?"ring-2 ring-blue-500":""}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900 truncate",children:N.name}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${P(N.status)}`,children:N.status.replace("_"," ")})]}),r.jsx("p",{className:"text-sm text-gray-600 truncate",children:N.description}),r.jsxs("div",{className:"flex gap-2 mt-2 text-xs text-gray-500",children:[r.jsx("span",{children:N.function}),r.jsx("span",{children:""}),r.jsxs("span",{children:[N.steps.length," steps"]}),r.jsx("span",{children:""}),r.jsxs("span",{children:[Math.round(N.confidence*100),"%"]})]})]},N.id))})}),r.jsx("div",{className:"flex-1",children:l?r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-6 border-b",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:l.name}),r.jsx("p",{className:"text-gray-600 mt-1",children:l.description})]}),r.jsx("span",{className:`px-3 py-1 rounded-full ${P(l.status)}`,children:l.status.replace("_"," ")})]}),r.jsxs("div",{className:"flex gap-4 mt-4 text-sm text-gray-500",children:[r.jsxs("span",{children:["Function: ",l.function]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Source: ",l.sourceType]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Confidence: ",Math.round(l.confidence*100),"%"]})]})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Workflow Steps"}),r.jsx("div",{className:"space-y-3",children:l.steps.map((N,A)=>r.jsxs("div",{className:"flex gap-3 items-start",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-sm",children:A+1}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:O(N.type)}),r.jsx("span",{className:"font-medium",children:N.name}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600",children:N.type})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.description}),N.agentId&&r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Agent: ",N.agentId]}),N.toolName&&r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Tool: ",N.toolName]})]})]},N.id))})]}),l.status==="rejected"&&l.rejectionReason&&r.jsx("div",{className:"px-6 pb-6",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-red-700 mb-1",children:"Rejection Reason"}),r.jsx("p",{className:"text-red-600",children:l.rejectionReason})]})}),(l.status==="draft"||l.status==="pending_review")&&r.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>S(l),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-white",children:"Download YAML"}),r.jsx("button",{onClick:()=>{j(!0)},className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:"Reject"}),r.jsx("button",{onClick:()=>w(l.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Approve"})]}),l.status==="approved"&&r.jsx("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3",children:r.jsx("button",{onClick:()=>S(l),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Download YAML"})})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[r.jsx("div",{className:"text-gray-400 text-5xl mb-4",children:""}),r.jsx("p",{className:"text-gray-600",children:"Select a draft to view details"})]})})]})]}),g&&l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reject Draft"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Please provide a reason for rejecting this draft:"}),r.jsx("textarea",{value:p,onChange:N=>m(N.target.value),placeholder:"Enter rejection reason...",className:"w-full border border-gray-300 rounded-lg p-3 mb-4 h-32"}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>{j(!1),m("")},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:()=>x(l.id),disabled:!p.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"Reject"})]})]})})]})}const zte={automated:{icon:"",label:"Automated",bgColor:"bg-blue-50",borderColor:"border-blue-300",textColor:"text-blue-700",selectedBorder:"border-blue-500"},manual:{icon:"",label:"Manual",bgColor:"bg-amber-50",borderColor:"border-amber-300",textColor:"text-amber-700",selectedBorder:"border-amber-500"},approval_required:{icon:"",label:"Approval",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700",selectedBorder:"border-green-500"}};function Bte({step:e,index:t,isSelected:n,isDragging:a,onSelect:s,onDragStart:i,onDragEnd:l}){const d=b.useMemo(()=>zte[e.type],[e.type]);return r.jsxs("div",{draggable:!0,onDragStart:i,onDragEnd:l,onClick:s,className:`
        relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-200
        ${d.bgColor}
        ${n?d.selectedBorder+" ring-2 ring-offset-2 ring-indigo-300":d.borderColor}
        ${a?"opacity-50 scale-95":"opacity-100"}
        hover:shadow-md
        min-w-[180px] max-w-[220px]
      `,children:[r.jsx("div",{className:"absolute -top-2 -left-2 w-6 h-6 rounded-full bg-gray-700 text-white text-xs flex items-center justify-center font-bold",children:t+1}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-lg",children:d.icon}),r.jsx("span",{className:`text-xs font-medium ${d.textColor}`,children:d.label})]}),r.jsx("h3",{className:"font-medium text-gray-900 text-sm truncate mb-1",children:e.name}),r.jsxs("div",{className:"text-xs text-gray-500 space-y-0.5",children:[e.agent&&r.jsxs("p",{className:"truncate",children:[r.jsx("span",{className:"text-gray-400",children:"agent:"})," ",e.agent]}),e.tool&&r.jsxs("p",{className:"truncate",children:[r.jsx("span",{className:"text-gray-400",children:"tool:"})," ",e.tool]}),e.assignee&&r.jsxs("p",{className:"truncate",children:[r.jsx("span",{className:"text-gray-400",children:"assignee:"})," ",e.assignee]}),e.approver&&r.jsxs("p",{className:"truncate",children:[r.jsx("span",{className:"text-gray-400",children:"approver:"})," ",e.approver]}),e.timeout&&r.jsxs("p",{className:"truncate",children:[r.jsx("span",{className:"text-gray-400",children:"timeout:"})," ",e.timeout]})]}),e.conditional&&r.jsx("div",{className:"mt-2 px-2 py-1 bg-purple-100 rounded text-xs text-purple-700 truncate",children:" Conditional"}),r.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-4 h-4 rounded-full bg-gray-400 border-2 border-white"})]})}function Ute({steps:e,selectedStepIndex:t,onSelectStep:n,onReorderSteps:a,onAddStep:s}){const[i,l]=b.useState(null),[d,u]=b.useState(null),h=b.useRef(null),p=b.useCallback(w=>x=>{x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",String(w)),l(w)},[]),m=b.useCallback(()=>{l(null),u(null)},[]),g=b.useCallback(w=>x=>{x.preventDefault(),x.dataTransfer.dropEffect="move",i!==null&&w!==i&&u(w)},[i]),j=b.useCallback(w=>x=>{x.preventDefault();const S=parseInt(x.dataTransfer.getData("text/plain"),10);!isNaN(S)&&S!==w&&a(S,w),l(null),u(null)},[a]),v=w=>w>=e.length-1?null:r.jsxs("div",{className:"flex justify-center my-2",children:[r.jsx("div",{className:"w-0.5 h-8 bg-gray-300"}),r.jsx("svg",{className:"absolute",style:{marginTop:"20px"},width:"12",height:"12",viewBox:"0 0 12 12",children:r.jsx("polygon",{points:"6,12 0,0 12,0",fill:"#D1D5DB"})})]});return r.jsxs("div",{className:"flex-1 bg-gray-50 overflow-auto",ref:h,children:[r.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add Step:"}),r.jsxs("button",{onClick:()=>s("automated"),className:"flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm hover:bg-blue-100 transition-colors",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Automated"})]}),r.jsxs("button",{onClick:()=>s("manual"),className:"flex items-center gap-1 px-3 py-1.5 bg-amber-50 text-amber-700 rounded-lg text-sm hover:bg-amber-100 transition-colors",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Manual"})]}),r.jsxs("button",{onClick:()=>s("approval_required"),className:"flex items-center gap-1 px-3 py-1.5 bg-green-50 text-green-700 rounded-lg text-sm hover:bg-green-100 transition-colors",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"Approval"})]})]})}),r.jsx("div",{className:"p-8 min-h-[400px]",children:e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("p",{className:"text-lg font-medium",children:"No steps yet"}),r.jsx("p",{className:"text-sm",children:"Click the buttons above to add steps to your SOP"})]}):r.jsxs("div",{className:"flex flex-col items-center",children:[e.map((w,x)=>r.jsxs("div",{children:[d===x&&i!==null&&r.jsx("div",{className:"h-16 w-48 border-2 border-dashed border-indigo-400 bg-indigo-50 rounded-lg mb-4 flex items-center justify-center",children:r.jsx("span",{className:"text-sm text-indigo-600",children:"Drop here"})}),r.jsx("div",{onDragOver:g(x),onDrop:j(x),children:r.jsx(Bte,{step:w,index:x,isSelected:t===x,isDragging:i===x,onSelect:()=>n(x),onDragStart:p(x),onDragEnd:m})}),v(x)]},w.id+"-"+x)),d===e.length&&i!==null&&r.jsx("div",{className:"h-16 w-48 border-2 border-dashed border-indigo-400 bg-indigo-50 rounded-lg flex items-center justify-center",onDragOver:w=>{w.preventDefault(),u(e.length)},onDrop:j(e.length),children:r.jsx("span",{className:"text-sm text-indigo-600",children:"Drop here"})})]})}),t!==null&&r.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>n(null),style:{pointerEvents:"none"}})]})}function Wte({step:e,onUpdate:t,onDelete:n,onClose:a}){var g,j;const[s,i]=b.useState(e),[l,d]=b.useState("");if(b.useEffect(()=>{i(e)},[e]),!s)return r.jsx("div",{className:"w-80 border-l border-gray-200 bg-gray-50 p-4",children:r.jsx("p",{className:"text-gray-500 text-sm",children:"Select a step to configure"})});const u=(v,w)=>{const x={...s,[v]:w};i(x),t(x)},h=v=>{const w={...s,conditional:{when:v}};i(w),t(w)},p=()=>{if(!l.trim())return;const v=[...s.checklist||[],l.trim()];u("checklist",v),d("")},m=v=>{var x;const w=((x=s.checklist)==null?void 0:x.filter((S,P)=>P!==v))||[];u("checklist",w.length>0?w:void 0)};return r.jsxs("div",{className:"w-80 border-l border-gray-200 bg-white overflow-y-auto",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Step Configuration"}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 text-xl",children:""})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),r.jsxs("select",{value:s.type,onChange:v=>u("type",v.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"automated",children:" Automated"}),r.jsx("option",{value:"manual",children:" Manual"}),r.jsx("option",{value:"approval_required",children:" Approval Required"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID"}),r.jsx("input",{type:"text",value:s.id,onChange:v=>u("id",v.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"step-id"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),r.jsx("input",{type:"text",value:s.name,onChange:v=>u("name",v.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Step name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:s.description||"",onChange:v=>u("description",v.target.value||void 0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:2,placeholder:"Optional description"})]}),s.type==="automated"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agent"}),r.jsx("input",{type:"text",value:s.agent||"",onChange:v=>u("agent",v.target.value||void 0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., cs-agent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tool"}),r.jsx("input",{type:"text",value:s.tool||"",onChange:v=>u("tool",v.target.value||void 0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., send_email"})]})]}),s.type==="manual"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignee"}),r.jsx("input",{type:"text",value:s.assignee||"",onChange:v=>u("assignee",v.target.value||void 0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., cs-manager"})]}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:s.requires_approval||!1,onChange:v=>u("requires_approval",v.target.checked),className:"rounded border-gray-300"}),r.jsx("span",{className:"text-gray-700",children:"Requires Approval"})]})})]}),s.type==="approval_required"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approver"}),r.jsx("input",{type:"text",value:s.approver||"",onChange:v=>u("approver",v.target.value||void 0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., team-lead"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timeout"}),r.jsxs("select",{value:s.timeout||"",onChange:v=>u("timeout",v.target.value||void 0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"No timeout"}),r.jsx("option",{value:"5m",children:"5 minutes"}),r.jsx("option",{value:"15m",children:"15 minutes"}),r.jsx("option",{value:"30m",children:"30 minutes"}),r.jsx("option",{value:"1h",children:"1 hour"}),r.jsx("option",{value:"2h",children:"2 hours"}),r.jsx("option",{value:"4h",children:"4 hours"}),r.jsx("option",{value:"8h",children:"8 hours"}),r.jsx("option",{value:"24h",children:"24 hours"}),r.jsx("option",{value:"48h",children:"48 hours"}),r.jsx("option",{value:"72h",children:"72 hours"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conditional (when)"}),r.jsx("input",{type:"text",value:((g=s.conditional)==null?void 0:g.when)||"",onChange:v=>v.target.value?h(v.target.value):u("conditional",void 0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., {{risk_score}} >= 7"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use ","{{variable}}"," syntax for template variables"]})]}),(s.type==="manual"||s.type==="approval_required")&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Checklist"}),r.jsxs("div",{className:"space-y-2",children:[(j=s.checklist)==null?void 0:j.map((v,w)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"flex-1 text-sm text-gray-600 bg-gray-50 px-2 py-1 rounded",children:v}),r.jsx("button",{onClick:()=>m(w),className:"text-red-500 hover:text-red-700 text-sm",children:""})]},w)),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:l,onChange:v=>d(v.target.value),onKeyDown:v=>v.key==="Enter"&&p(),className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"Add checklist item"}),r.jsx("button",{onClick:p,className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded text-sm hover:bg-indigo-200",children:"Add"})]})]})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:n,className:"w-full px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 text-sm font-medium",children:"Delete Step"})})]})]})}function Hte({sopId:e,isOpen:t,onClose:n}){const[a,s]=b.useState("{}"),[i,l]=b.useState(null),[d,u]=b.useState(!1),[h,p]=b.useState(null),[m,g]=b.useState(0),j=async()=>{if(e){u(!0),p(null);try{const x=JSON.parse(a),S=await se({url:`/api/sops/${e}/simulate`,method:"POST",data:{input:x}});l(S.simulation),g(0)}catch(x){x instanceof SyntaxError?p("Invalid JSON in input data"):x instanceof Ke?p(x.message):p("Failed to simulate SOP")}finally{u(!1)}}},v=x=>{if(x<60)return`${x}m`;const S=Math.floor(x/60),P=x%60;if(S<24)return P>0?`${S}h ${P}m`:`${S}h`;const O=Math.floor(S/24),N=S%24;return N>0?`${O}d ${N}h`:`${O}d`},w=x=>{switch(x){case"automated":return{icon:"",color:"bg-blue-100 text-blue-700"};case"manual":return{icon:"",color:"bg-amber-100 text-amber-700"};case"approval_required":return{icon:"",color:"bg-green-100 text-green-700"};default:return{icon:"",color:"bg-gray-100 text-gray-700"}}};return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Preview Execution"}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Input Data (JSON)"}),r.jsx("textarea",{value:a,onChange:x=>s(x.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 font-mono text-sm h-32 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:'{"customer": {"email": "test@example.com", "company_name": "Acme Inc"}}'}),r.jsx("button",{onClick:j,disabled:d||!e,className:"mt-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 text-sm font-medium",children:d?"Simulating...":"Run Simulation"})]}),h&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:h}),i&&r.jsxs("div",{children:[r.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-indigo-900 mb-2",children:i.sopName}),r.jsxs("div",{className:"flex gap-6 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-indigo-600",children:"Total Steps:"})," ",r.jsx("span",{className:"font-medium",children:i.totalSteps})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-indigo-600",children:"Est. Duration:"})," ",r.jsx("span",{className:"font-medium",children:v(i.estimatedTotalDuration)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-indigo-600",children:"Will Execute:"})," ",r.jsxs("span",{className:"font-medium",children:[i.steps.filter(x=>x.willExecute).length," steps"]})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Execution Flow"}),r.jsx("div",{className:"space-y-3",children:i.steps.map((x,S)=>{const P=w(x.type),O=S===m;return r.jsx("div",{onClick:()=>g(S),className:`
                          p-4 rounded-lg border-2 cursor-pointer transition-all
                          ${O?"border-indigo-400 bg-indigo-50":"border-gray-200 hover:border-gray-300"}
                          ${x.willExecute?"":"opacity-50"}
                        `,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${x.willExecute?"bg-gray-700 text-white":"bg-gray-300 text-gray-600"}`,children:S+1}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs ${P.color}`,children:[P.icon," ",x.type.replace("_"," ")]}),!x.willExecute&&r.jsx("span",{className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded text-xs",children:"Will Skip"})]}),r.jsx("h5",{className:"font-medium text-gray-900",children:x.name}),x.description&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:x.description}),x.skipReason&&r.jsxs("p",{className:"text-sm text-amber-600 mt-1",children:["Reason: ",x.skipReason]}),O&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2 text-sm",children:[x.agent&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Agent:"})," ",r.jsx("span",{className:"font-mono",children:x.agent})]}),x.tool&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Tool:"})," ",r.jsx("span",{className:"font-mono",children:x.tool})]}),x.assignee&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Assignee:"})," ",r.jsx("span",{children:x.assignee})]}),x.approver&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Approver:"})," ",r.jsx("span",{children:x.approver})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Est. Duration:"})," ",r.jsx("span",{children:v(x.estimatedDuration)})]}),x.checklist&&x.checklist.length>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Checklist:"}),r.jsx("ul",{className:"mt-1 ml-4 list-disc",children:x.checklist.map((N,A)=>r.jsx("li",{className:"text-gray-600",children:N},A))})]}),x.resolvedInput&&Object.keys(x.resolvedInput).length>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Resolved Input:"}),r.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded text-xs overflow-auto",children:JSON.stringify(x.resolvedInput,null,2)})]})]})]}),r.jsx("div",{className:"text-xs text-gray-500",children:v(x.estimatedDuration)})]})},x.id)})})]}),i.exceptionHandlers.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Exception Handlers"}),r.jsx("div",{className:"space-y-2",children:i.exceptionHandlers.map((x,S)=>r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg text-sm flex items-center gap-3",children:[r.jsx("span",{className:"text-amber-500",children:""}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:x.condition}),r.jsx("span",{className:"text-gray-400 mx-2",children:""}),r.jsx("span",{className:"text-indigo-600",children:x.action}),x.target&&r.jsxs("span",{className:"text-gray-500",children:[" (target: ",x.target,")"]})]})]},S))})]})]})]})]})}):null}const Kte=[{value:"brand",label:"Brand"},{value:"finance",label:"Finance"},{value:"ops",label:"Operations"},{value:"cs",label:"Customer Success"},{value:"hr",label:"HR"},{value:"engineering",label:"Engineering"},{value:"product",label:"Product"},{value:"sales",label:"Sales"}];function Gte(){const{id:e}=ef(),t=Zs(),n=!!e,[a,s]=b.useState([]),[i,l]=b.useState(!0),[d,u]=b.useState({id:"",name:"",function:"ops",owner:"",version:"1.0.0"}),[h,p]=b.useState([{pattern:""}]),[m,g]=b.useState([]),[j,v]=b.useState([]),[w,x]=b.useState(null),[S,P]=b.useState(!1),[O,N]=b.useState(!1),[A,C]=b.useState(null),[E,T]=b.useState(null),[R,I]=b.useState(!1),[M,$]=b.useState(!1),[G,V]=b.useState(""),[z,U]=b.useState("editor"),H=b.useCallback(async()=>{try{const re=await se({url:"/api/sops",method:"GET"});s(re.sops)}catch(re){console.error("Failed to fetch SOP list:",re)}finally{l(!1)}},[]),B=b.useCallback(async re=>{P(!0),C(null);try{const je=(await se({url:`/api/sops/${re}`,method:"GET"})).sop;u(je.metadata),p(je.triggers),g(je.steps),v(je.exception_handling||[])}catch(be){be instanceof Ke?C(be.message):C("Failed to load SOP")}finally{P(!1)}},[]),D=b.useCallback(async()=>{if(e)try{const re=await fetch(`/api/sops/${e}/yaml`,{credentials:"include"});if(re.ok){const be=await re.text();V(be)}}catch(re){console.error("Failed to fetch YAML:",re)}},[e]);b.useEffect(()=>{H()},[H]),b.useEffect(()=>{e?B(e):(u({id:"",name:"",function:"ops",owner:"",version:"1.0.0"}),p([{pattern:""}]),g([]),v([]),x(null))},[e,B]),b.useEffect(()=>{M&&e&&D()},[M,e,D]);const L=re=>{const be={id:`step-${Date.now()}`,name:`New ${re==="automated"?"Automated":re==="manual"?"Manual":"Approval"} Step`,type:re};g([...m,be]),x(m.length)},q=re=>{if(w===null)return;const be=[...m];be[w]=re,g(be)},K=()=>{if(w===null)return;const re=m.filter((be,je)=>je!==w);g(re),x(null)},Y=(re,be)=>{const je=[...m],[tt]=je.splice(re,1);je.splice(be,0,tt),g(je),w===re&&x(be)},W=()=>{p([...h,{pattern:""}])},ue=(re,be)=>{const je=[...h];je[re]={pattern:be},p(je)},he=re=>{h.length<=1||p(h.filter((be,je)=>je!==re))},oe=()=>{v([...j,{condition:"",action:"notify_owner"}])},te=(re,be,je)=>{const tt=[...j];tt[re]={...tt[re],[be]:je},v(tt)},le=re=>{v(j.filter((be,je)=>je!==re))},ke=async()=>{if(!d.id.trim()){C("SOP ID is required");return}if(!d.name.trim()){C("SOP name is required");return}if(!d.owner.trim()){C("Owner is required");return}if(h.every(be=>!be.pattern.trim())){C("At least one trigger pattern is required");return}if(m.length===0){C("At least one step is required");return}N(!0),C(null),T(null);const re={metadata:d,triggers:h.filter(be=>be.pattern.trim()),steps:m,exception_handling:j.filter(be=>be.condition.trim())};try{n?(await se({url:`/api/sops/${e}`,method:"PUT",data:re}),T("SOP updated successfully")):(await se({url:"/api/sops",method:"POST",data:re}),T("SOP created successfully"),t(`/sops/${d.id}`)),H()}catch(be){be instanceof Ke?C(be.message):C("Failed to save SOP")}finally{N(!1)}},$e=async()=>{if(!(!e||!confirm("Are you sure you want to delete this SOP?")))try{await se({url:`/api/sops/${e}`,method:"DELETE"}),t("/sops"),H()}catch(re){re instanceof Ke?C(re.message):C("Failed to delete SOP")}};return S?r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading SOP..."})]})}):r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("nav",{className:"text-sm mb-1",children:[r.jsx(ft,{to:"/sops",className:"text-indigo-600 hover:text-indigo-800",children:"SOPs"}),r.jsx("span",{className:"mx-2 text-gray-400",children:"/"}),r.jsx("span",{className:"text-gray-600",children:n?d.name||e:"New SOP"})]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Edit SOP":"Create New SOP"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[n&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>$(!M),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 text-sm font-medium",children:M?"Hide YAML":"View YAML"}),r.jsx("button",{onClick:()=>I(!0),className:"px-4 py-2 text-indigo-700 bg-indigo-100 rounded-lg hover:bg-indigo-200 text-sm font-medium",children:"Preview"}),r.jsx("button",{onClick:$e,className:"px-4 py-2 text-red-700 bg-red-50 rounded-lg hover:bg-red-100 text-sm font-medium",children:"Delete"})]}),r.jsx("button",{onClick:ke,disabled:O,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 text-sm font-medium",children:O?"Saving...":n?"Update SOP":"Create SOP"})]})]}),A&&r.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:A}),E&&r.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:E})]}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsxs("div",{className:"w-56 border-r border-gray-200 bg-gray-50 overflow-y-auto",children:[r.jsx("div",{className:"p-4",children:r.jsxs(ft,{to:"/sops/new",className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium",children:[r.jsx("span",{children:"+"}),r.jsx("span",{children:"New SOP"})]})}),r.jsx("nav",{className:"px-2 pb-4",children:i?r.jsx("p",{className:"text-sm text-gray-500 px-2",children:"Loading..."}):a.length===0?r.jsx("p",{className:"text-sm text-gray-500 px-2",children:"No SOPs yet"}):a.map(re=>r.jsxs(ft,{to:`/sops/${re.id}`,className:`block px-3 py-2 rounded-lg text-sm mb-1 transition-colors ${e===re.id?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"}`,children:[r.jsx("div",{className:"font-medium truncate",children:re.name}),r.jsxs("div",{className:"text-xs text-gray-500",children:[re.function,"  ",re.stepCount," steps"]})]},re.id))})]}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 px-6",children:r.jsx("div",{className:"flex gap-6",children:["editor","triggers","exceptions"].map(re=>r.jsxs("button",{onClick:()=>U(re),className:`py-3 text-sm font-medium border-b-2 transition-colors ${z===re?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[re==="editor"&&"Step Editor",re==="triggers"&&"Triggers & Metadata",re==="exceptions"&&"Exception Handlers"]},re))})}),z==="editor"&&r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsx(Ute,{steps:m,selectedStepIndex:w,onSelectStep:x,onReorderSteps:Y,onAddStep:L}),r.jsx(Wte,{step:w!==null?m[w]:null,onUpdate:q,onDelete:K,onClose:()=>x(null)})]}),z==="triggers"&&r.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SOP Metadata"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SOP ID *"}),r.jsx("input",{type:"text",value:d.id,onChange:re=>u({...d,id:re.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")}),disabled:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm disabled:bg-gray-100",placeholder:"e.g., customer-onboarding"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:d.name,onChange:re=>u({...d,name:re.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"e.g., Customer Onboarding"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Function *"}),r.jsx("select",{value:d.function,onChange:re=>u({...d,function:re.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:Kte.map(re=>r.jsx("option",{value:re.value,children:re.label},re.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner *"}),r.jsx("input",{type:"text",value:d.owner,onChange:re=>u({...d,owner:re.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"e.g., cs-team-lead"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Version"}),r.jsx("input",{type:"text",value:d.version,onChange:re=>u({...d,version:re.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:"1.0.0"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Triggers"}),r.jsx("button",{onClick:W,className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded text-sm hover:bg-indigo-200",children:"+ Add Trigger"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Triggers determine when this SOP is automatically invoked. Add patterns that match user messages or events."}),r.jsx("div",{className:"space-y-3",children:h.map((re,be)=>r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:re.pattern,onChange:je=>ue(be,je.target.value),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm",placeholder:'e.g., "  " or "new customer onboarding"'}),h.length>1&&r.jsx("button",{onClick:()=>he(be),className:"px-3 py-2 text-red-500 hover:text-red-700",children:""})]},be))})]})]})}),z==="exceptions"&&r.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:r.jsx("div",{className:"max-w-3xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Exception Handlers"}),r.jsx("button",{onClick:oe,className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded text-sm hover:bg-indigo-200",children:"+ Add Handler"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Define how the SOP should respond to errors, timeouts, and other exceptional conditions."}),j.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"No exception handlers defined"}),r.jsx("p",{className:"text-sm",children:'Click "Add Handler" to create one'})]}):r.jsx("div",{className:"space-y-4",children:j.map((re,be)=>r.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Condition"}),r.jsxs("select",{value:re.condition,onChange:je=>te(be,"condition",je.target.value),className:"w-full border border-gray-300 rounded px-2 py-1.5 text-sm",children:[r.jsx("option",{value:"",children:"Select condition..."}),r.jsx("option",{value:"step.failed",children:"Step Failed"}),r.jsx("option",{value:"step.timeout",children:"Step Timeout"}),r.jsx("option",{value:"approval.rejected",children:"Approval Rejected"}),r.jsx("option",{value:"approval.timeout",children:"Approval Timeout"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Action"}),r.jsxs("select",{value:re.action,onChange:je=>te(be,"action",je.target.value),className:"w-full border border-gray-300 rounded px-2 py-1.5 text-sm",children:[r.jsx("option",{value:"notify_owner",children:"Notify Owner"}),r.jsx("option",{value:"escalate",children:"Escalate"}),r.jsx("option",{value:"retry_with_modification",children:"Retry with Modification"}),r.jsx("option",{value:"halt_and_escalate",children:"Halt and Escalate"}),r.jsx("option",{value:"return_to_step",children:"Return to Step"}),r.jsx("option",{value:"send_reminder",children:"Send Reminder"}),r.jsx("option",{value:"request_revision",children:"Request Revision"}),r.jsx("option",{value:"page_executive",children:"Page Executive"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Target"}),r.jsx("input",{type:"text",value:re.target||"",onChange:je=>te(be,"target",je.target.value),className:"w-full border border-gray-300 rounded px-2 py-1.5 text-sm",placeholder:"e.g., team-lead"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Message Template"}),r.jsx("input",{type:"text",value:re.message||"",onChange:je=>te(be,"message",je.target.value),className:"w-full border border-gray-300 rounded px-2 py-1.5 text-sm",placeholder:"e.g., SOP failed: {{step.name}}"})]})]}),r.jsx("button",{onClick:()=>le(be),className:"text-red-500 hover:text-red-700 text-lg",children:""})]})},be))})]})})})]})]}),M&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"YAML Configuration"}),r.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),r.jsx("div",{className:"flex-1 overflow-auto p-4",children:r.jsx("pre",{className:"bg-gray-50 p-4 rounded-lg text-sm font-mono whitespace-pre-wrap",children:G||"Loading..."})}),r.jsx("div",{className:"p-4 border-t border-gray-200 flex justify-end",children:r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(G)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"Copy to Clipboard"})})]})}),r.jsx(Hte,{sopId:e||null,isOpen:R,onClose:()=>I(!1)})]})}function Vte(e){return e>=80?"text-green-600":e>=60?"text-yellow-600":e>=40?"text-orange-600":"text-red-600"}function Qte(e){return e>=80?"bg-green-100":e>=60?"bg-yellow-100":e>=40?"bg-orange-100":"bg-red-100"}function eT(e){switch(e){case"healthy":return"bg-green-100 text-green-800";case"degraded":return"bg-yellow-100 text-yellow-800";case"unhealthy":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function Yte(e){switch(e){case"critical":return"text-red-600";case"high":return"text-orange-600";case"medium":return"text-yellow-600";default:return"text-blue-600"}}function kw(e){switch(e){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";default:return"bg-blue-100 text-blue-800"}}function mP(e){return new Date(e).toLocaleDateString()}function tT(e){return new Date(e).toLocaleString()}function pP(e){switch(e){case"up":return"";case"down":return"";default:return""}}function Xte({score:e,status:t}){return r.jsxs("div",{className:`rounded-lg p-6 ${Qte(e)} text-center`,children:[r.jsx("div",{className:`text-6xl font-bold ${Vte(e)}`,children:e}),r.jsx("div",{className:"text-lg font-medium text-gray-700 mt-2",children:"Health Score"}),r.jsx("div",{className:`inline-block mt-2 px-3 py-1 rounded-full text-sm font-medium ${eT(t)}`,children:t.charAt(0).toUpperCase()+t.slice(1)})]})}function sv({title:e,value:t,subtitle:n}){return r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:e}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t}),n&&r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:n})]})}function Jte({agent:e}){return r.jsxs("div",{className:`bg-white rounded-lg shadow p-4 border-l-4 ${e.status==="healthy"?"border-green-500":e.status==="degraded"?"border-yellow-500":"border-red-500"}`,children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500",children:e.agentId})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${eT(e.status)}`,children:e.status})]}),r.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Executions:"})," ",r.jsx("span",{className:"font-medium",children:e.metrics.totalExecutions}),r.jsx("span",{className:"ml-1 text-gray-400",children:pP(e.trends.executionsTrend)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Success:"})," ",r.jsxs("span",{className:`font-medium ${e.metrics.successRate>=90?"text-green-600":e.metrics.successRate>=70?"text-yellow-600":"text-red-600"}`,children:[e.metrics.successRate.toFixed(1),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Latency:"})," ",r.jsxs("span",{className:"font-medium",children:[e.metrics.avgLatencyMs,"ms"]}),r.jsx("span",{className:"ml-1 text-gray-400",children:pP(e.trends.latencyTrend)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Errors:"})," ",r.jsxs("span",{className:`font-medium ${e.metrics.errorRate<=5?"text-green-600":e.metrics.errorRate<=15?"text-yellow-600":"text-red-600"}`,children:[e.metrics.errorRate.toFixed(1),"%"]})]})]}),e.lastError&&r.jsx("div",{className:"mt-2 p-2 bg-red-50 rounded text-xs text-red-700 truncate",children:e.lastError.message})]})}function Zte({anomaly:e}){return r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-orange-500",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("div",{className:`text-sm font-medium ${Yte(e.severity)}`,children:e.type.replace(/_/g," ").toUpperCase()}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${kw(e.severity)}`,children:e.severity})]}),r.jsx("p",{className:"text-gray-700 text-sm mt-2",children:e.description}),r.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Detected: ",tT(e.detectedAt)]})]})}function ere({gap:e}){return r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${kw(e.severity)}`,children:e.severity})]}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:e.description}),r.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-sm text-blue-700",children:[r.jsx("span",{className:"font-medium",children:"Action:"})," ",e.suggestedAction]})]})}function tre({recommendation:e,onAccept:t,onReject:n}){return r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${kw(e.priority)}`,children:e.priority})]}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:e.description}),r.jsxs("div",{className:"mt-2 text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Impact:"})," ",r.jsx("span",{className:"text-gray-700",children:e.impact})]}),r.jsxs("div",{className:"mt-2 p-2 bg-green-50 rounded text-sm text-green-700",children:[r.jsx("span",{className:"font-medium",children:"Action:"})," ",e.suggestedAction]}),r.jsxs("div",{className:"mt-3 flex gap-2",children:[r.jsx("button",{onClick:()=>t(e.id),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Accept"}),r.jsx("button",{onClick:()=>n(e.id),className:"px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300",children:"Dismiss"})]})]})}function rre(){const[e,t]=b.useState(null),[n,a]=b.useState([]),[s,i]=b.useState([]),[l,d]=b.useState([]),[u,h]=b.useState(!0),[p,m]=b.useState(null),[g,j]=b.useState(!1),[v,w]=b.useState(!0),[x,S]=b.useState("agents"),P=b.useCallback(async()=>{try{const[E,T,R,I]=await Promise.all([fetch("/api/meta-agent/health",{credentials:"include"}),fetch("/api/meta-agent/knowledge/gaps",{credentials:"include"}),fetch("/api/meta-agent/recommendations",{credentials:"include"}),fetch("/api/meta-agent/reports?limit=5",{credentials:"include"})]);if(Io(E)){j(!0),h(!1);return}if(!E.ok)throw new Error("Failed to fetch health data");const M=await E.json();if(t(M.data),T.ok){const $=await T.json();a($.data||[])}if(R.ok){const $=await R.json();i($.data||[])}if(I.ok){const $=await I.json();d($.data||[])}m(null)}catch(E){m(E instanceof Error?E.message:"Unknown error")}finally{h(!1)}},[]);b.useEffect(()=>{P()},[P]),b.useEffect(()=>{if(!v)return;const E=setInterval(P,6e4);return()=>clearInterval(E)},[v,P]);const O=async E=>{try{(await fetch(`/api/meta-agent/recommendations/${E}/accept`,{method:"POST",credentials:"include"})).ok&&i(R=>R.filter(I=>I.id!==E))}catch(T){console.error("Failed to accept recommendation",T)}},N=async E=>{try{(await fetch(`/api/meta-agent/recommendations/${E}/reject`,{method:"POST",credentials:"include"})).ok&&i(R=>R.filter(I=>I.id!==E))}catch(T){console.error("Failed to reject recommendation",T)}},A=async()=>{try{(await fetch("/api/meta-agent/reports/generate",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"daily"})})).ok&&P()}catch(E){console.error("Failed to generate report",E)}},C=async()=>{try{h(!0),(await fetch("/api/meta-agent/system-check",{method:"POST",credentials:"include"})).ok&&P()}catch(E){console.error("Failed to run system check",E)}finally{h(!1)}};return u&&!e?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):g?r.jsx(Zc,{title:"System Health Monitoring",description:"System health monitoring is currently being set up. This feature will display agent status, health scores, and recommendations once the backend service is activated.",onRetry:P}):p&&!e?r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:[r.jsx("h3",{className:"font-medium",children:"Error loading system health"}),r.jsx("p",{children:p}),r.jsx("button",{onClick:P,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]}):r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Health"}),r.jsxs("p",{className:"text-gray-500",children:["Last updated: ",e?tT(e.timestamp):"N/A"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Run System Check"}),r.jsx("button",{onClick:A,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Generate Report"}),r.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded",children:[r.jsx("input",{type:"checkbox",checked:v,onChange:E=>w(E.target.checked),className:"rounded"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Auto-refresh"})]})]})]}),e&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(Xte,{score:e.overallScore,status:e.status}),r.jsx(sv,{title:"Total Agents",value:e.summary.totalAgents,subtitle:`${e.summary.healthyAgents} healthy, ${e.summary.degradedAgents} degraded, ${e.summary.unhealthyAgents} unhealthy`}),r.jsx(sv,{title:"Executions (24h)",value:e.summary.totalExecutionsLast24h.toLocaleString(),subtitle:`${e.summary.overallSuccessRate.toFixed(1)}% success rate`}),r.jsx(sv,{title:"Active Issues",value:e.anomalies.length,subtitle:`${e.anomalies.filter(E=>E.severity==="critical"||E.severity==="high").length} critical/high`})]}),e&&e.anomalies.filter(E=>E.severity==="critical").length>0&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-medium text-red-800",children:"Critical Issues Detected"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:e.anomalies.filter(E=>E.severity==="critical").map((E,T)=>r.jsx(Zte,{anomaly:E},T))})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsx("nav",{className:"flex gap-4",children:["agents","gaps","recommendations","reports"].map(E=>r.jsxs("button",{onClick:()=>S(E),className:`py-2 px-4 border-b-2 font-medium text-sm ${x===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[E==="agents"&&`Agents (${(e==null?void 0:e.agents.length)||0})`,E==="gaps"&&`Knowledge Gaps (${n.length})`,E==="recommendations"&&`Recommendations (${s.length})`,E==="reports"&&`Reports (${l.length})`]},E))})}),x==="agents"&&e&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.agents.map(E=>r.jsx(Jte,{agent:E},E.agentId))}),x==="gaps"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.length===0?r.jsx("p",{className:"text-gray-500 col-span-2",children:"No knowledge gaps detected."}):n.slice(0,10).map((E,T)=>r.jsx(ere,{gap:E},T))}),x==="recommendations"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.length===0?r.jsx("p",{className:"text-gray-500 col-span-2",children:"No pending recommendations."}):s.map(E=>r.jsx(tre,{recommendation:E,onAccept:O,onReject:N},E.id))}),x==="reports"&&r.jsx("div",{className:"space-y-4",children:l.length===0?r.jsx("p",{className:"text-gray-500",children:"No reports generated yet."}):l.map(E=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:[E.type.charAt(0).toUpperCase()+E.type.slice(1)," Report"]}),r.jsxs("p",{className:"text-sm text-gray-500",children:[mP(E.periodStart)," - ",mP(E.periodEnd)]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("a",{href:`/api/meta-agent/reports/${E.id}?format=html`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded hover:bg-blue-200",children:"View HTML"}),r.jsx("a",{href:`/api/meta-agent/reports/${E.id}?format=markdown`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200",children:"Markdown"})]})]},E.id))})]})}function nre(){const{currentOrganization:e}=rs(),[t,n]=b.useState("experiments"),[a,s]=b.useState([]),[i,l]=b.useState(null),[d,u]=b.useState([]),[h,p]=b.useState(!0),[m,g]=b.useState("");b.useEffect(()=>{j()},[e]);async function j(){p(!0);try{const[x,S,P]=await Promise.all([se({url:"/api/optimization/experiments"}),se({url:"/api/optimization/costs",params:{days:30}}),se({url:"/api/optimization/models"})]);s(x.experiments||[]),l(S.analysis||null),u(P.models||[])}catch(x){console.error("Failed to load optimization data:",x)}finally{p(!1)}}async function v(x){try{await se({method:"POST",url:`/api/optimization/experiments/${x}/start`}),await j()}catch(S){console.error("Failed to start experiment:",S)}}async function w(x){try{await se({method:"POST",url:`/api/optimization/experiments/${x}/stop`}),await j()}catch(S){console.error("Failed to stop experiment:",S)}}return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Agent Performance Optimization"}),r.jsx("div",{className:"flex border-b mb-6",children:["experiments","prompts","routing","models","costs"].map(x=>r.jsx("button",{onClick:()=>n(x),className:`px-4 py-2 capitalize ${t===x?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:x},x))}),t==="experiments"&&r.jsx(are,{experiments:a,onStart:v,onStop:w}),t==="prompts"&&r.jsx(ore,{selectedAgent:m,onAgentChange:g}),t==="routing"&&r.jsx(lre,{selectedAgent:m,onAgentChange:g}),t==="models"&&r.jsx(cre,{models:d}),t==="costs"&&i&&r.jsx(dre,{analysis:i})]})}function are({experiments:e,onStart:t,onStop:n}){const a=e.filter(i=>i.status==="running"),s=e.filter(i=>i.status==="completed");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Active Experiments"}),a.length===0?r.jsx("p",{className:"text-gray-500",children:"No active experiments"}):r.jsx("div",{className:"space-y-4",children:a.map(i=>r.jsx(sre,{experiment:i,onStart:t,onStop:n},i.id))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Completed Experiments"}),s.length===0?r.jsx("p",{className:"text-gray-500",children:"No completed experiments"}):r.jsx("div",{className:"space-y-4",children:s.map(i=>r.jsx(ire,{experiment:i},i.id))})]})]})}function sre({experiment:e,onStart:t,onStop:n}){const a={draft:"bg-gray-100 text-gray-800",running:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"};return r.jsx("div",{className:"border rounded-lg p-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:e.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Agent: ",e.agentId," | Type: ",e.type]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Traffic Split: ",(e.trafficSplit*100).toFixed(0),"% treatment"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs ${a[e.status]}`,children:e.status}),e.status==="draft"&&r.jsx("button",{onClick:()=>t(e.id),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Start"}),e.status==="running"&&r.jsx("button",{onClick:()=>n(e.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Stop"})]})]})})}function ire({experiment:e}){const t=e.results;return t?r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:e.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Agent: ",e.agentId]})]}),t.isSignificant&&r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:"Significant Result"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[r.jsx("p",{className:"text-sm font-medium",children:"Control"}),r.jsxs("p",{className:"text-lg",children:[(t.controlVariant.successRate*100).toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["n=",t.controlVariant.sampleSize]})]}),r.jsxs("div",{className:"bg-blue-50 rounded p-3",children:[r.jsx("p",{className:"text-sm font-medium",children:"Treatment"}),r.jsxs("p",{className:"text-lg",children:[(t.treatmentVariant.successRate*100).toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["n=",t.treatmentVariant.sampleSize]})]})]}),r.jsxs("div",{className:"mt-4 text-sm",children:[r.jsxs("p",{children:["Improvement: ",r.jsxs("strong",{children:[t.improvement.toFixed(1),"%"]})]}),r.jsxs("p",{children:["Confidence: ",r.jsxs("strong",{children:[(t.confidence*100).toFixed(1),"%"]})]}),t.winner&&r.jsxs("p",{className:"text-green-600 mt-2",children:["Winner: ",t.winner===t.treatmentVariant.variantId?"Treatment":"Control"]})]})]}):null}function ore({selectedAgent:e,onAgentChange:t}){const[n,a]=b.useState([]),[s,i]=b.useState(!1);async function l(d){if(d){i(!0);try{const u=await se({url:`/api/optimization/agents/${d}/prompts`});a(u.variants||[])}catch(u){console.error("Failed to load prompts:",u)}finally{i(!1)}}}return b.useEffect(()=>{e&&l(e)},[e]),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Prompt Performance"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Agent"}),r.jsx("input",{type:"text",value:e,onChange:d=>t(d.target.value),placeholder:"Enter agent ID...",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s?r.jsx("p",{className:"text-gray-500",children:"Loading..."}):n.length===0?r.jsx("p",{className:"text-gray-500",children:"No prompt variants found"}):r.jsx("div",{className:"space-y-4",children:n.map(d=>{var u;return r.jsxs("div",{className:`border rounded-lg p-4 ${d.isActive?"border-green-500 bg-green-50":""}`,children:[r.jsx("div",{className:"flex justify-between items-start",children:r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:["Version ",d.version,d.isActive&&r.jsx("span",{className:"ml-2 text-xs bg-green-600 text-white px-2 py-0.5 rounded",children:"Active"})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Success Rate: ",(d.successRate*100).toFixed(1),"% | Avg Latency: ",d.avgLatencyMs,"ms | Sample: ",d.sampleSize]})]})}),r.jsxs("div",{className:"mt-2 bg-gray-50 p-2 rounded text-sm font-mono max-h-32 overflow-auto",children:[(u=d.systemPrompt)==null?void 0:u.substring(0,200),"..."]})]},d.id)})})]})}function lre({selectedAgent:e,onAgentChange:t}){var h,p;const[n,a]=b.useState(null),[s,i]=b.useState(null),[l,d]=b.useState(!1);async function u(m){if(m){d(!0);try{const[g,j]=await Promise.all([se({url:`/api/optimization/agents/${m}/routing/analysis`}),se({method:"POST",url:`/api/optimization/agents/${m}/routing/suggestions`})]);a(g.analysis||null),i(j||null)}catch(g){console.error("Failed to load routing:",g)}finally{d(!1)}}}return b.useEffect(()=>{e&&u(e)},[e]),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Routing Analysis"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Agent"}),r.jsx("input",{type:"text",value:e,onChange:m=>t(m.target.value),placeholder:"Enter agent ID...",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l?r.jsx("p",{className:"text-gray-500",children:"Loading..."}):n?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold",children:n.totalMatches}),r.jsx("p",{className:"text-sm text-gray-500",children:"Total Matches"})]}),r.jsxs("div",{className:"bg-green-50 rounded p-4 text-center",children:[r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[(n.correctRate*100).toFixed(1),"%"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Correct Rate"})]}),r.jsxs("div",{className:"bg-red-50 rounded p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:n.totalMatches-n.correctMatches}),r.jsx("p",{className:"text-sm text-gray-500",children:"Misroutes"})]})]}),n.problematicKeywords.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Problematic Keywords"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.problematicKeywords.map(m=>r.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm",children:m},m))})]}),s&&r.jsxs(r.Fragment,{children:[((h=s.additions)==null?void 0:h.length)>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Suggested Additions"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.additions.slice(0,10).map(m=>r.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-sm",title:m.reason,children:["+ ",m.keyword]},m.keyword))})]}),((p=s.removals)==null?void 0:p.length)>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Suggested Removals"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.removals.map(m=>r.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded text-sm",children:["- ",m]},m))})]})]})]}):r.jsx("p",{className:"text-gray-500",children:"Enter an agent ID to see routing analysis"})]})}function cre({models:e}){return r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Available Models"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Model"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Provider"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Capabilities"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost ($/1K tokens)"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Accuracy"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(t=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap font-medium",children:t.name}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-gray-500",children:t.provider}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"flex flex-wrap gap-1",children:t.capabilities.map(n=>r.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-800 rounded text-xs",children:n},n))})}),r.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-500",children:["$",Number(t.inputCostPer1K).toFixed(4)," / $",Number(t.outputCostPer1K).toFixed(4)]}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.benchmarkAccuracy?`${(t.benchmarkAccuracy*100).toFixed(0)}%`:"-"})]},t.name))})]})})]})}function dre({analysis:e}){return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Cost Summary (30 days)"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded p-4 text-center",children:[r.jsxs("p",{className:"text-2xl font-bold",children:["$",(e.totalCostCents/100).toFixed(2)]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Total Cost"})]}),r.jsxs("div",{className:"bg-gray-50 rounded p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold",children:e.totalRequests.toLocaleString()}),r.jsx("p",{className:"text-sm text-gray-500",children:"Total Requests"})]}),r.jsxs("div",{className:"bg-gray-50 rounded p-4 text-center",children:[r.jsxs("p",{className:"text-2xl font-bold",children:["$",(e.avgCostPerRequest/100).toFixed(4)]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Avg Cost/Request"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Cost by Agent"}),r.jsx("div",{className:"space-y-2",children:e.byAgent.slice(0,10).map(t=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-32 truncate text-sm",children:t.agentId}),r.jsx("div",{className:"flex-1 mx-4",children:r.jsx("div",{className:"bg-gray-200 rounded-full h-4 overflow-hidden",children:r.jsx("div",{className:"bg-blue-600 h-full",style:{width:`${t.percentOfTotal}%`}})})}),r.jsxs("div",{className:"w-24 text-right text-sm",children:["$",(t.costCents/100).toFixed(2)]}),r.jsxs("div",{className:"w-16 text-right text-sm text-gray-500",children:[t.percentOfTotal.toFixed(1),"%"]})]},t.agentId))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Cost by Model"}),r.jsx("div",{className:"space-y-2",children:e.byModel.map(t=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-48 truncate text-sm",children:t.model}),r.jsx("div",{className:"flex-1 mx-4",children:r.jsx("div",{className:"bg-gray-200 rounded-full h-4 overflow-hidden",children:r.jsx("div",{className:"bg-green-600 h-full",style:{width:`${t.percentOfTotal}%`}})})}),r.jsxs("div",{className:"w-24 text-right text-sm",children:["$",(t.costCents/100).toFixed(2)]}),r.jsxs("div",{className:"w-16 text-right text-sm text-gray-500",children:[t.percentOfTotal.toFixed(1),"%"]})]},t.model))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Optimization Recommendations"}),e.recommendations.length===0?r.jsx("p",{className:"text-gray-500",children:"No recommendations at this time"}):r.jsx("div",{className:"space-y-4",children:e.recommendations.map((t,n)=>r.jsx("div",{className:"border rounded-lg p-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium capitalize",children:t.strategy.replace(/_/g," ")}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-green-600",children:["~",t.estimatedSavingsPercent,"% savings"]}),r.jsxs("div",{className:"flex gap-2 mt-1 justify-end",children:[r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs ${t.implementationEffort==="low"?"bg-green-100 text-green-800":t.implementationEffort==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[t.implementationEffort," effort"]}),r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs ${t.qualityImpact==="none"?"bg-green-100 text-green-800":t.qualityImpact==="minor"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[t.qualityImpact," quality impact"]})]})]})]})},n))})]})]})}function ure({status:e}){const t={active:{color:"bg-green-100 text-green-800",icon:r.jsx(Ql,{className:"w-3 h-3"}),label:"Active"},rate_limited:{color:"bg-yellow-100 text-yellow-800",icon:r.jsx(no,{className:"w-3 h-3"}),label:"Rate Limited"},exhausted:{color:"bg-red-100 text-red-800",icon:r.jsx(no,{className:"w-3 h-3"}),label:"Exhausted"},cooldown:{color:"bg-blue-100 text-blue-800",icon:r.jsx(uL,{className:"w-3 h-3"}),label:"Cooldown"}},{color:n,icon:a,label:s}=t[e]||{color:"bg-gray-100 text-gray-800",icon:null,label:e};return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${n}`,children:[a,s]})}function hre({percent:e}){const t=e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";return r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${t}`,style:{width:`${Math.min(100,e)}%`}})})}function fre({isOpen:e,onClose:t,onSubmit:n,initialData:a}){const[s,i]=b.useState({nickname:a.nickname,priority:a.priority}),[l,d]=b.useState(!1),[u,h]=b.useState(null);b.useEffect(()=>{i({nickname:a.nickname,priority:a.priority}),h(null)},[a,e]);const p=async m=>{m.preventDefault(),d(!0),h(null);try{await n(s),t()}catch(g){h(g instanceof Error?g.message:"Failed to save account")}finally{d(!1)}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Account"}),u&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700 text-sm",children:u}),r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),r.jsx("input",{type:"text",value:s.nickname,onChange:m=>i({...s,nickname:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., work, personal, backup-1",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:a.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-md bg-gray-50 text-gray-500"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email is set when connecting the account"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority (higher = preferred)"}),r.jsx("input",{type:"number",value:s.priority,onChange:m=>i({...s,priority:parseInt(m.target.value)||100}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",min:1,max:1e3})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${a.hasCredentials?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:a.hasCredentials?"Credentials saved":"No credentials"}),!a.hasCredentials&&r.jsx("span",{className:"text-gray-500",children:'Use "Connect Account" to add credentials'})]})}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:l?"Saving...":"Update"})]})]})]})}):null}function mre(){const[e,t]=b.useState([]),[n,a]=b.useState(null),[s,i]=b.useState(!0),[l,d]=b.useState(null),[u,h]=b.useState(!1),[p,m]=b.useState(null),g=b.useCallback(async()=>{try{const{data:S}=await It.get("/api/claude-max-accounts");t(S.accounts),a(S.summary),d(null)}catch(S){d(S instanceof Error?S.message:"Failed to load accounts")}finally{i(!1)}},[]);b.useEffect(()=>{g();const S=setInterval(g,3e4);return()=>clearInterval(S)},[g]),b.useEffect(()=>{const S=P=>{var O;((O=P.data)==null?void 0:O.type)==="claude-connect-success"&&g()};return window.addEventListener("message",S),()=>window.removeEventListener("message",S)},[g]);const j=()=>{const O=(window.screen.width-700)/2,N=(window.screen.height-800)/2;window.open("/claude-connect","claude-connect",`width=700,height=800,left=${O},top=${N},resizable=yes,scrollbars=yes`)},v=async S=>{p&&(await It.patch(`/api/claude-max-accounts/${p.id}`,{nickname:S.nickname,priority:S.priority}),await g())},w=async S=>{confirm("Are you sure you want to delete this account?")&&(await It.delete(`/api/claude-max-accounts/${S}`),await g())},x=async S=>{await It.post(`/api/claude-max-accounts/${S}/reset-status`),await g()};return s?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Jn,{className:"w-8 h-8 animate-spin text-indigo-600"})}):r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Claude Max Accounts"}),r.jsx("p",{className:"text-gray-600",children:"Manage your Claude Max subscription accounts for AI execution"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:g,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Jn,{className:"w-4 h-4"}),"Refresh"]}),r.jsxs("button",{onClick:j,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx(yj,{className:"w-4 h-4"}),"Connect Claude Account"]})]})]}),e.length===0&&r.jsx("div",{className:"mb-6 p-6 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg text-white",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:r.jsx(OO,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Get Started with Claude Max"}),r.jsx("p",{className:"text-indigo-100 mb-4",children:"Connect your Claude Max subscription to enable AI-powered workflows. The connection process takes less than a minute."}),r.jsx("button",{onClick:j,className:"px-4 py-2 bg-white text-indigo-600 rounded-md hover:bg-indigo-50 font-medium",children:"Connect Your First Account"})]})]})}),l&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md text-red-700",children:l}),n&&e.length>0&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Total Accounts"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.total})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[r.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[r.jsx(Ql,{className:"w-3 h-3 text-green-500"})," Active"]}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.active})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[r.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[r.jsx(no,{className:"w-3 h-3 text-yellow-500"})," Rate Limited"]}),r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.rateLimited})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[r.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[r.jsx(IL,{className:"w-3 h-3 text-red-500"})," Exhausted"]}),r.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.exhausted})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Avg Usage"}),r.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[n.averageUsage.toFixed(1),"%"]})]})]}),e.length>0&&r.jsx("div",{className:"bg-white rounded-lg shadow border overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Active"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(S=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"font-medium text-gray-900",children:S.nickname}),r.jsx("div",{className:"text-sm text-gray-500",children:S.email}),S.hasCredentials&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 mt-1",children:"Connected"})]}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx(ure,{status:S.status}),S.cooldownUntil&&new Date(S.cooldownUntil)>new Date&&r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Until ",new Date(S.cooldownUntil).toLocaleTimeString()]})]}),r.jsx("td",{className:"px-6 py-4 w-40",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hre,{percent:S.estimatedUsagePercent}),r.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[S.estimatedUsagePercent.toFixed(0),"%"]})]})}),r.jsx("td",{className:"px-6 py-4 text-gray-900",children:S.priority}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:S.lastActiveAt?new Date(S.lastActiveAt).toLocaleString():"Never"}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[S.status!=="active"&&r.jsx("button",{onClick:()=>x(S.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Reset Status",children:r.jsx(NL,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>{m(S),h(!0)},className:"p-2 text-gray-600 hover:bg-gray-100 rounded",title:"Edit",children:r.jsx(bL,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>w(S.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:r.jsx(OL,{className:"w-4 h-4"})})]})})]},S.id))})]})}),p&&r.jsx(fre,{isOpen:u,onClose:()=>{h(!1),m(null)},onSubmit:v,initialData:p})]})}function pre(){const[e,t]=b.useState("init"),[n,a]=b.useState("quick"),[s,i]=b.useState(null),[l,d]=b.useState(""),[u,h]=b.useState(""),[p,m]=b.useState(null),[g,j]=b.useState(""),[v,w]=b.useState(100),[x,S]=b.useState(null),[P,O]=b.useState(!1),[N,A]=b.useState(0),[C,E]=b.useState(""),[T,R]=b.useState({status:"idle",type:null,error:null});b.useEffect(()=>{n==="manual"&&!s&&I()},[n]);const I=async()=>{try{O(!0),S(null);const{data:B}=await It.post("/api/claude-connect/init");i(B);const{data:D}=await It.get(`/api/claude-connect/bookmarklet/${B.code}`);d(D.bookmarkletCode);const q=`(async()=>{const sk=document.cookie.match(/sessionKey=([^;]+)/);if(!sk){console.error('Not logged in');return;}const r=await fetch('${window.location.origin}/api/claude-connect/receive-token',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({token:sk[1],code:'${B.code}'})});const d=await r.json();console.log(d.success?'Success! Return to Nubabel.':'Error: '+d.error);})();`;h(q),t("instructions")}catch(B){S(B instanceof Error?B.message:"Failed to initialize connection"),t("error")}finally{O(!1)}},M=b.useCallback(async()=>{if(!s)return!1;try{const{data:B}=await It.get(`/api/claude-connect/poll/${s.code}`);return B.status==="received"?(t("naming"),!0):!1}catch{return!1}},[s]);b.useEffect(()=>{if(e!=="waiting"||!s)return;const B=setInterval(async()=>{A(q=>q+1),await M()&&clearInterval(B)},2e3),D=setTimeout(()=>{clearInterval(B),e==="waiting"&&(S("Connection timed out. Please try again."),t("error"))},3e5);return()=>{clearInterval(B),clearTimeout(D)}},[e,s,M]);const $=async B=>{const D=B==="bookmarklet"?l:u;await navigator.clipboard.writeText(D),m(B),setTimeout(()=>m(null),2e3)},G=()=>{A(0),t("waiting")},V=async()=>{var B,D;if(!(!s||!g.trim()))try{O(!0),S(null);const{data:L}=await It.post("/api/claude-connect/complete",{code:s.code,nickname:g.trim(),priority:v});t("success"),window.opener&&window.opener.postMessage({type:"claude-connect-success",accountId:L.id},"*")}catch(L){S(((D=(B=L.response)==null?void 0:B.data)==null?void 0:D.error)||L.message||"Failed to create account")}finally{O(!1)}},z=b.useCallback(async B=>{var q,K;if(!B.trim()){R({status:"idle",type:null,error:null});return}const D=B.startsWith("sk-ant-oat01-"),L=B.startsWith("sk-ant-sid");if(!D&&!L){R({status:"invalid",type:null,error:"This doesn't look like a Claude token. Run `claude get-token` to get a valid token."});return}R({status:"validating",type:null,error:null});try{const{data:Y}=await It.post("/api/claude-connect/validate-token",{token:B});Y.valid?R({status:"valid",type:Y.type,error:null}):R({status:"invalid",type:null,error:Y.error||"Invalid token"})}catch(Y){R({status:"invalid",type:null,error:((K=(q=Y.response)==null?void 0:q.data)==null?void 0:K.error)||"Validation failed. Please try again."})}},[]);b.useEffect(()=>{const B=setTimeout(()=>{C.length>20&&z(C)},500);return()=>clearTimeout(B)},[C,z]);const U=async()=>{var B,D;if(!(!C||T.status!=="valid"||!g.trim()))try{O(!0),S(null);let L=s==null?void 0:s.code;if(!L){const{data:K}=await It.post("/api/claude-connect/init");L=K.code,i(K)}await It.post("/api/claude-connect/receive-token",{token:C,code:L});const{data:q}=await It.post("/api/claude-connect/complete",{code:L,nickname:g.trim(),priority:v});t("success"),window.opener&&window.opener.postMessage({type:"claude-connect-success",accountId:q.id},"*")}catch(L){S(((D=(B=L.response)==null?void 0:B.data)==null?void 0:D.error)||L.message||"Connection failed. Please try again.")}finally{O(!1)}},H=()=>{window.opener?window.close():window.location.href="/admin/claude-max-accounts"};return P&&e==="init"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Jn,{className:"w-8 h-8 animate-spin text-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Initializing connection..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-indigo-50/30 to-gray-50 py-8 px-4",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 tracking-tight",children:"Connect Claude Account"}),r.jsx("p",{className:"text-gray-600",children:"Link your Claude subscription to Nubabel for AI-powered workflows"})]}),e!=="success"&&e!=="error"&&r.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[r.jsx("button",{onClick:()=>a("quick"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${n==="quick"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Quick Connect"}),r.jsx("button",{onClick:()=>a("manual"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${n==="manual"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Manual"})]}),e==="error"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx(no,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Connection Failed"}),r.jsx("p",{className:"text-gray-600 mb-6",children:x}),r.jsx("button",{onClick:I,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Try Again"})]})}),n==="quick"&&e!=="success"&&e!=="error"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-600 text-white flex items-center justify-center text-sm font-bold shadow-sm",children:"1"}),"Get Your Token"]}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Run this command in your terminal:"}),r.jsx("div",{className:"relative group",children:r.jsxs("div",{className:"flex items-center bg-gray-900 text-gray-100 rounded-lg px-4 py-3 font-mono text-sm shadow-inner",children:[r.jsx("span",{className:"text-gray-500 mr-2 select-none",children:"$"}),r.jsx("span",{className:"flex-1",children:"claude get-token"}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText("claude get-token"),m("command"),setTimeout(()=>m(null),2e3)},className:"p-1.5 hover:bg-gray-700 rounded transition-colors",title:"Copy command",children:p==="command"?r.jsx(Ka,{className:"w-4 h-4 text-green-400"}):r.jsx(Xp,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-300"})})]})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Don't have Claude Code?"," ",r.jsx("a",{href:"https://claude.ai/download",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline font-medium",children:"Install it first"}),", or use the Manual tab."]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-600 text-white flex items-center justify-center text-sm font-bold shadow-sm",children:"2"}),"Paste Your Token"]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"password",value:C,onChange:B=>E(B.target.value),placeholder:"sk-ant-oat01-...",className:`w-full px-4 py-3 pr-12 border rounded-lg font-mono text-sm focus:outline-none focus:ring-2 transition-all ${T.status==="valid"?"border-green-500 focus:ring-green-500 bg-green-50/50":T.status==="invalid"?"border-red-500 focus:ring-red-500 bg-red-50/50":"border-gray-300 focus:ring-indigo-500 bg-white"}`,autoComplete:"off"}),T.status==="validating"&&r.jsx(Jn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 animate-spin"}),T.status==="valid"&&r.jsx(Ql,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),T.status==="invalid"&&r.jsx(no,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]}),T.status==="valid"&&r.jsxs("p",{className:"text-sm text-green-600 mt-2 flex items-center gap-1 animate-in fade-in slide-in-from-top-1 duration-200",children:[r.jsx(Ka,{className:"w-4 h-4"}),"Valid ",T.type==="oauth"?"OAuth":"session"," token detected"]}),T.status==="invalid"&&T.error&&r.jsx("p",{className:"text-sm text-red-600 mt-2 animate-in fade-in slide-in-from-top-1 duration-200",children:T.error})]}),T.status==="valid"&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-in fade-in slide-in-from-top-2 duration-300",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-600 text-white flex items-center justify-center text-sm font-bold shadow-sm",children:"3"}),"Name Your Account"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),r.jsx("input",{type:"text",value:g,onChange:B=>j(B.target.value),placeholder:"e.g., work-account",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),r.jsx("input",{type:"number",value:v,onChange:B=>w(parseInt(B.target.value)||100),min:1,max:1e3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),r.jsx("button",{onClick:U,disabled:P||!g.trim()||T.status!=="valid",className:"w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-all shadow-sm hover:shadow-md",children:P?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Jn,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):"Connect Account"}),x&&r.jsx("p",{className:"text-sm text-red-600 mt-2 animate-in fade-in slide-in-from-top-1 duration-200",children:x})]})]}),n==="manual"&&e!=="success"&&e!=="error"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 text-sm text-indigo-700",children:[r.jsx("strong",{children:"Tip:"})," The Quick Connect tab is faster if you have Claude Code CLI installed."]}),e==="instructions"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-600 text-white flex items-center justify-center text-sm font-bold shadow-sm",children:"1"}),"Open Claude and Log In"]}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Open claude.ai in a new tab and make sure you're logged in to your Claude account."}),r.jsxs("a",{href:"https://claude.ai",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors shadow-sm",children:["Open claude.ai",r.jsx(OO,{className:"w-4 h-4"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-600 text-white flex items-center justify-center text-sm font-bold shadow-sm",children:"2"}),"Extract Your Session (Choose One Method)"]}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[r.jsx(iL,{className:"w-4 h-4"}),"Option A: Bookmarklet (Recommended)"]}),r.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-600 space-y-1 mb-3",children:[r.jsx("li",{children:"Copy the code below"}),r.jsx("li",{children:"Create a new bookmark in your browser"}),r.jsx("li",{children:"Paste the code as the URL"}),r.jsx("li",{children:"While on claude.ai, click the bookmark"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("textarea",{readOnly:!0,value:l,className:"w-full h-20 p-2 text-xs font-mono bg-white border border-gray-300 rounded resize-none"}),r.jsx("button",{onClick:()=>$("bookmarklet"),className:"absolute top-2 right-2 p-1.5 bg-white border border-gray-300 rounded hover:bg-gray-50 transition-colors",title:"Copy to clipboard",children:p==="bookmarklet"?r.jsx(Ka,{className:"w-4 h-4 text-green-500"}):r.jsx(Xp,{className:"w-4 h-4 text-gray-500"})})]})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[r.jsx(AL,{className:"w-4 h-4"}),"Option B: Browser Console"]}),r.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-600 space-y-1 mb-3",children:[r.jsx("li",{children:"On claude.ai, open DevTools (F12 or Cmd+Option+I)"}),r.jsx("li",{children:"Go to the Console tab"}),r.jsx("li",{children:"Paste the code below and press Enter"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("textarea",{readOnly:!0,value:u,className:"w-full h-16 p-2 text-xs font-mono bg-white border border-gray-300 rounded resize-none"}),r.jsx("button",{onClick:()=>$("script"),className:"absolute top-2 right-2 p-1.5 bg-white border border-gray-300 rounded hover:bg-gray-50 transition-colors",title:"Copy to clipboard",children:p==="script"?r.jsx(Ka,{className:"w-4 h-4 text-green-500"}):r.jsx(Xp,{className:"w-4 h-4 text-gray-500"})})]})]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("button",{onClick:G,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-lg hover:from-indigo-700 hover:to-indigo-800 font-medium shadow-sm hover:shadow-md transition-all",children:"I've Extracted My Session - Continue"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click after running the bookmarklet or console script"})]})]})]}),e==="waiting"&&n==="manual"&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Jn,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Waiting for Token..."}),r.jsxs("p",{className:"text-gray-600 mb-4",children:["Run the bookmarklet or console script on claude.ai.",r.jsx("br",{}),"This page will update automatically when we receive your session."]}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Checking... (",N," attempts)"]})]})}),e==="naming"&&n==="manual"&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-14 h-14 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4 animate-in zoom-in duration-300",children:r.jsx(Ql,{className:"w-8 h-8 text-green-500"})}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Token Received!"}),r.jsx("p",{className:"text-gray-600",children:"Now give your account a nickname to identify it."})]}),x&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700 text-sm animate-in fade-in slide-in-from-top-1 duration-200",children:x}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Nickname"}),r.jsx("input",{type:"text",value:g,onChange:B=>j(B.target.value),placeholder:"e.g., work-account, personal, team-shared",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority (higher = preferred)"}),r.jsx("input",{type:"number",value:v,onChange:B=>w(parseInt(B.target.value)||100),min:1,max:1e3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsx("button",{onClick:V,disabled:P||!g.trim(),className:"w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-sm hover:shadow-md transition-all",children:P?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Jn,{className:"w-4 h-4 animate-spin"}),"Creating Account..."]}):"Complete Connection"})]})]}),e==="success"&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-500 rounded-full flex items-center justify-center mx-auto mb-4 animate-in zoom-in duration-500 shadow-lg",children:r.jsx(Ql,{className:"w-12 h-12 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2 animate-in fade-in slide-in-from-bottom-2 duration-500",children:"Connected Successfully!"}),r.jsxs("p",{className:"text-gray-600 mb-6 animate-in fade-in slide-in-from-bottom-3 duration-500 delay-100",children:['Your Claude account "',g,'" is now linked to Nubabel.']}),r.jsx("button",{onClick:H,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-lg hover:from-indigo-700 hover:to-indigo-800 shadow-sm hover:shadow-md transition-all animate-in fade-in slide-in-from-bottom-4 duration-500 delay-200",children:window.opener?"Close Window":"Go to Accounts"})]})}),e!=="success"&&r.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"Security Note"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Your session token is encrypted and stored securely. Nubabel never sees your Claude password. The token is only used to make API calls on your behalf."})]})]})})}const xre=gj((e,t)=>({workflows:[],categories:[],selectedWorkflow:null,executions:[],isLoading:!1,isExecuting:!1,error:null,viewMode:"grid",filters:{category:"",search:"",isActive:null,isSkill:null},pagination:{total:0,limit:50,offset:0},fetchWorkflows:async()=>{const{filters:n,pagination:a}=t();e({isLoading:!0,error:null});try{const s=new URLSearchParams;n.category&&s.set("category",n.category),n.search&&s.set("search",n.search),n.isActive!==null&&s.set("isActive",String(n.isActive)),n.isSkill!==null&&s.set("isSkill",String(n.isSkill)),s.set("limit",String(a.limit)),s.set("offset",String(a.offset));const i=await se({url:`/api/n8n/workflows?${s.toString()}`,method:"GET"});e({workflows:i.data,pagination:i.pagination,isLoading:!1})}catch(s){const i=s instanceof Error?s.message:"Failed to fetch workflows";e({error:i,isLoading:!1})}},fetchCategories:async()=>{try{const n=await se({url:"/api/n8n/categories",method:"GET"});e({categories:n})}catch(n){console.error("Failed to fetch categories:",n)}},fetchWorkflowExecutions:async n=>{try{const a=await se({url:`/api/n8n/workflows/${n}/executions`,method:"GET"});e({executions:a})}catch(a){console.error("Failed to fetch executions:",a)}},createWorkflow:async n=>{e({isLoading:!0,error:null});try{const a=await se({url:"/api/n8n/workflows",method:"POST",data:n});return e(s=>({workflows:[a,...s.workflows],isLoading:!1})),a}catch(a){const s=a instanceof Error?a.message:"Failed to create workflow";throw e({error:s,isLoading:!1}),a}},updateWorkflow:async(n,a)=>{e({isLoading:!0,error:null});try{const s=await se({url:`/api/n8n/workflows/${n}`,method:"PUT",data:a});return e(i=>{var l;return{workflows:i.workflows.map(d=>d.id===n?s:d),selectedWorkflow:((l=i.selectedWorkflow)==null?void 0:l.id)===n?s:i.selectedWorkflow,isLoading:!1}}),s}catch(s){const i=s instanceof Error?s.message:"Failed to update workflow";throw e({error:i,isLoading:!1}),s}},deleteWorkflow:async n=>{e({isLoading:!0,error:null});try{await se({url:`/api/n8n/workflows/${n}`,method:"DELETE"}),e(a=>{var s;return{workflows:a.workflows.filter(i=>i.id!==n),selectedWorkflow:((s=a.selectedWorkflow)==null?void 0:s.id)===n?null:a.selectedWorkflow,isLoading:!1}})}catch(a){const s=a instanceof Error?a.message:"Failed to delete workflow";throw e({error:s,isLoading:!1}),a}},executeWorkflow:async(n,a)=>{e({isExecuting:!0,error:null});try{const s=await se({url:`/api/n8n/workflows/${n}/execute`,method:"POST",data:{inputData:a}});return e(i=>({executions:[s,...i.executions],isExecuting:!1})),s}catch(s){const i=s instanceof Error?s.message:"Failed to execute workflow";throw e({error:i,isExecuting:!1}),s}},activateWorkflow:async n=>{try{const a=await se({url:`/api/n8n/workflows/${n}/activate`,method:"POST"});e(s=>({workflows:s.workflows.map(i=>i.id===n?a:i)}))}catch(a){const s=a instanceof Error?a.message:"Failed to activate workflow";throw e({error:s}),a}},deactivateWorkflow:async n=>{try{const a=await se({url:`/api/n8n/workflows/${n}/deactivate`,method:"POST"});e(s=>({workflows:s.workflows.map(i=>i.id===n?a:i)}))}catch(a){const s=a instanceof Error?a.message:"Failed to deactivate workflow";throw e({error:s}),a}},setFilters:n=>{e(a=>({filters:{...a.filters,...n},pagination:{...a.pagination,offset:0}})),t().fetchWorkflows()},setViewMode:n=>{e({viewMode:n})},setSelectedWorkflow:n=>{e({selectedWorkflow:n,executions:[]}),n&&t().fetchWorkflowExecutions(n.id)},setPage:n=>{e(a=>({pagination:{...a.pagination,offset:n}})),t().fetchWorkflows()},clearError:()=>{e({error:null})}})),xP=JSON.stringify({name:"New Workflow",nodes:[],connections:{},settings:{}},null,2);function gP(e){try{const t=JSON.parse(e);return!t.name||typeof t.name!="string"?{valid:!1,error:"Workflow JSON must have a 'name' field"}:Array.isArray(t.nodes)?typeof t.connections!="object"?{valid:!1,error:"Workflow JSON must have a 'connections' object"}:{valid:!0}:{valid:!1,error:"Workflow JSON must have a 'nodes' array"}}catch{return{valid:!1,error:"Invalid JSON format"}}}function gre({workflow:e,onView:t,onEdit:n,onDelete:a,onExecute:s,onToggleActive:i}){var l;return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:e.description||"No description"})]}),r.jsx("div",{className:"ml-3 flex-shrink-0",children:r.jsx("button",{onClick:i,className:`px-2 py-1 text-xs font-medium rounded-full ${e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:e.isActive?"Active":"Inactive"})})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("span",{className:"px-2 py-1 text-xs bg-indigo-100 text-indigo-800 rounded",children:e.category}),e.isSkill&&r.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded",children:"Skill"})]}),e.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.tags.slice(0,3).map(d=>r.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:d},d)),e.tags.length>3&&r.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",e.tags.length-3]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[r.jsxs("div",{className:"text-xs text-gray-500",children:[((l=e._count)==null?void 0:l.executions)??0," executions"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-900 text-sm",children:"View"}),r.jsx("button",{onClick:n,className:"text-indigo-600 hover:text-indigo-800 text-sm",children:"Edit"}),r.jsx("button",{onClick:s,className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700",children:"Run"}),r.jsx("button",{onClick:a,className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]})]})}function yre({workflow:e,onView:t,onEdit:n,onDelete:a,onExecute:s,onToggleActive:i}){var l;return r.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 hover:bg-gray-50 flex items-center gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.name}),r.jsx("span",{className:"px-2 py-0.5 text-xs bg-indigo-100 text-indigo-800 rounded",children:e.category}),e.isSkill&&r.jsx("span",{className:"px-2 py-0.5 text-xs bg-purple-100 text-purple-800 rounded",children:"Skill"})]}),r.jsx("p",{className:"text-sm text-gray-500 truncate mt-0.5",children:e.description||"No description"})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[((l=e._count)==null?void 0:l.executions)??0," runs"]}),r.jsx("button",{onClick:i,className:`px-2 py-1 text-xs font-medium rounded-full ${e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:e.isActive?"Active":"Inactive"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-900 text-sm",children:"View"}),r.jsx("button",{onClick:n,className:"text-indigo-600 hover:text-indigo-800 text-sm",children:"Edit"}),r.jsx("button",{onClick:s,className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700",children:"Run"}),r.jsx("button",{onClick:a,className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]})}function yP({isOpen:e,onClose:t,onSubmit:n,initialData:a,title:s,isLoading:i}){const[l,d]=b.useState({name:"",description:"",category:"uncategorized",tags:"",workflowJson:xP,isActive:!1}),[u,h]=b.useState(null);b.useEffect(()=>{d(a?{name:a.name,description:a.description||"",category:a.category,tags:a.tags.join(", "),workflowJson:JSON.stringify(a.workflowJson,null,2),isActive:a.isActive}:{name:"",description:"",category:"uncategorized",tags:"",workflowJson:xP,isActive:!1}),h(null)},[a,e]);const p=g=>{d(v=>({...v,workflowJson:g}));const j=gP(g);h(j.valid?null:j.error??null)},m=()=>{const g=gP(l.workflowJson);if(!g.valid){h(g.error??"Invalid JSON");return}n(l)};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:g=>g.stopPropagation(),children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s})}),r.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:l.name,onChange:g=>d(j=>({...j,name:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"My Workflow"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:l.description,onChange:g=>d(j=>({...j,description:g.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe what this workflow does..."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsx("input",{type:"text",value:l.category,onChange:g=>d(j=>({...j,category:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"uncategorized"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),r.jsx("input",{type:"text",value:l.tags,onChange:g=>d(j=>({...j,tags:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"slack, notifications"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:l.isActive,onChange:g=>d(j=>({...j,isActive:g.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),r.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Active (workflow can be triggered)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workflow JSON *"}),r.jsx("textarea",{value:l.workflowJson,onChange:g=>p(g.target.value),rows:12,className:`w-full px-3 py-2 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${u?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter workflow JSON..."}),u&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:u})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{onClick:m,disabled:i||!l.name||!!u,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":a?"Update":"Create"})]})]})}):null}function vre({isOpen:e,onClose:t,onExecute:n,workflowName:a,isExecuting:s}){const[i,l]=b.useState("{}"),[d,u]=b.useState(null),h=m=>{l(m);try{JSON.parse(m),u(null)}catch{u("Invalid JSON")}},p=()=>{try{const m=JSON.parse(i);n(m)}catch{u("Invalid JSON")}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full",onClick:m=>m.stopPropagation(),children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Execute: ",a]})}),r.jsxs("div",{className:"p-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Input Data (JSON)"}),r.jsx("textarea",{value:i,onChange:m=>h(m.target.value),rows:6,className:`w-full px-3 py-2 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-indigo-500 ${d?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"{}"}),d&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{onClick:p,disabled:s||!!d,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Executing...":"Execute"})]})]})}):null}function bre({isOpen:e,onClose:t,onConfirm:n,workflowName:a,isLoading:s}){return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",onClick:i=>i.stopPropagation(),children:[r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Delete Workflow"}),r.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",r.jsx("strong",{children:a}),"? This action cannot be undone."]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{onClick:n,disabled:s,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:s?"Deleting...":"Delete"})]})]})}):null}function jre({workflow:e,executions:t,onClose:n}){const a=s=>{switch(s){case"success":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800";case"running":return"bg-blue-100 text-blue-800";case"waiting":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return r.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white shadow-xl z-40 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Execution History"}),r.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:"Close"})]}),r.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500",children:e.category})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:t.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500",children:"No executions yet"}):r.jsx("div",{className:"divide-y divide-gray-200",children:t.slice(0,10).map(s=>r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${a(s.status)}`,children:s.status}),r.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.startedAt).toLocaleString()})]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",s.id.slice(0,8),"..."]})]},s.id))})})]})}function wre(){const{workflows:e,categories:t,executions:n,isLoading:a,isExecuting:s,error:i,viewMode:l,filters:d,pagination:u,fetchWorkflows:h,fetchCategories:p,createWorkflow:m,updateWorkflow:g,deleteWorkflow:j,executeWorkflow:v,activateWorkflow:w,deactivateWorkflow:x,setFilters:S,setViewMode:P,setSelectedWorkflow:O,setPage:N,clearError:A}=xre(),[C,E]=b.useState(!1),[T,R]=b.useState(null),[I,M]=b.useState(null),[$,G]=b.useState(null),[V,z]=b.useState(null);b.useEffect(()=>{h(),p()},[h,p]);const U=b.useCallback(async W=>{const ue={name:W.name,description:W.description||void 0,category:W.category,tags:W.tags.split(",").map(he=>he.trim()).filter(Boolean),workflowJson:JSON.parse(W.workflowJson),isActive:W.isActive};await m(ue),E(!1)},[m]),H=b.useCallback(async W=>{if(!T)return;const ue={name:W.name,description:W.description||void 0,category:W.category,tags:W.tags.split(",").map(he=>he.trim()).filter(Boolean),workflowJson:JSON.parse(W.workflowJson),isActive:W.isActive};await g(T.id,ue),R(null)},[T,g]),B=b.useCallback(async()=>{$&&(await j($.id),G(null))},[$,j]),D=b.useCallback(async W=>{I&&(await v(I.id,W),M(null))},[I,v]),L=b.useCallback(async W=>{W.isActive?await x(W.id):await w(W.id)},[w,x]),q=b.useCallback(W=>{O(W),z(W)},[O]),K=Math.ceil(u.total/u.limit),Y=Math.floor(u.offset/u.limit)+1;return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"n8n Workflows"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your n8n automation workflows"})]}),r.jsxs("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:"+"}),"Create Workflow"]})]}),i&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-800 rounded-lg flex items-center justify-between",children:[r.jsx("span",{children:i}),r.jsx("button",{onClick:A,className:"text-red-600 hover:text-red-800",children:"Dismiss"})]}),r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[r.jsx("input",{type:"text",value:d.search,onChange:W=>S({search:W.target.value}),placeholder:"Search workflows...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),r.jsxs("select",{value:d.category,onChange:W=>S({category:W.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"All Categories"}),t.map(W=>r.jsxs("option",{value:W.name,children:[W.name," (",W.count,")"]},W.name))]}),r.jsxs("select",{value:d.isActive===null?"":String(d.isActive),onChange:W=>S({isActive:W.target.value===""?null:W.target.value==="true"}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]}),r.jsxs("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[r.jsx("button",{onClick:()=>P("grid"),className:`px-3 py-2 ${l==="grid"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Grid"}),r.jsx("button",{onClick:()=>P("list"),className:`px-3 py-2 ${l==="list"?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"List"})]})]}),a?r.jsx("div",{className:"flex items-center justify-center min-h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading workflows..."})]})}):e.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"No workflows found"}),r.jsx("p",{className:"text-gray-600 mb-4",children:d.search||d.category||d.isActive!==null?"Try adjusting your filters":"Create your first n8n workflow to get started"}),!d.search&&!d.category&&d.isActive===null&&r.jsx("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Create Workflow"})]})}):l==="grid"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(W=>r.jsx(gre,{workflow:W,onView:()=>q(W),onEdit:()=>R(W),onDelete:()=>G(W),onExecute:()=>M(W),onToggleActive:()=>L(W)},W.id))}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.map(W=>r.jsx(yre,{workflow:W,onView:()=>q(W),onEdit:()=>R(W),onDelete:()=>G(W),onExecute:()=>M(W),onToggleActive:()=>L(W)},W.id))}),K>1&&r.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",u.offset+1,"-",Math.min(u.offset+u.limit,u.total)," of ",u.total]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>N(Math.max(0,u.offset-u.limit)),disabled:u.offset===0,className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsxs("span",{className:"px-3 py-1 text-gray-700",children:["Page ",Y," of ",K]}),r.jsx("button",{onClick:()=>N(u.offset+u.limit),disabled:Y>=K,className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),r.jsx(yP,{isOpen:C,onClose:()=>E(!1),onSubmit:U,title:"Create Workflow",isLoading:a}),r.jsx(yP,{isOpen:!!T,onClose:()=>R(null),onSubmit:H,initialData:T??void 0,title:"Edit Workflow",isLoading:a}),r.jsx(vre,{isOpen:!!I,onClose:()=>M(null),onExecute:D,workflowName:(I==null?void 0:I.name)??"",isExecuting:s}),r.jsx(bre,{isOpen:!!$,onClose:()=>G(null),onConfirm:B,workflowName:($==null?void 0:$.name)??"",isLoading:a}),V&&r.jsx(jre,{workflow:V,executions:n,onClose:()=>{z(null),O(null)}})]})}function Nre(){const[e,t]=b.useState({active:0,queued:0,completedToday:0,failedToday:0}),[n,a]=b.useState([]),[s,i]=b.useState([]),[l,d]=b.useState([]),[u,h]=b.useState(null),[p,m]=b.useState(!1),[g,j]=b.useState(null),v=b.useCallback(async()=>{try{j(null);const[T,R,I,M]=await Promise.all([se({url:"/api/code-operations/stats",method:"GET"}),se({url:"/api/code-operations/active",method:"GET"}),se({url:"/api/code-operations/pending-approval",method:"GET"}),se({url:"/api/code-operations/history?limit=20",method:"GET"})]);t(T),a(R),i(I),d(M)}catch(T){console.error("Failed to fetch agent operations:",T),j("Failed to fetch data. Please try again.")}},[]);b.useEffect(()=>{v();const T=setInterval(v,5e3);return()=>clearInterval(T)},[v]);const w=async()=>{m(!0),await v(),setTimeout(()=>m(!1),500)},x=async T=>{try{await se({url:`/api/code-operations/${T}/approve`,method:"POST"}),i(R=>R.filter(I=>I.id!==T)),v()}catch(R){console.error("Failed to approve:",R)}},S=async T=>{try{await se({url:`/api/code-operations/${T}/reject`,method:"POST",data:{reason:"Rejected via UI"}}),i(R=>R.filter(I=>I.id!==T)),v()}catch(R){console.error("Failed to reject:",R)}},P=async T=>{try{await se({url:`/api/code-operations/${T}/cancel`,method:"POST"}),a(R=>R.filter(I=>I.id!==T)),v()}catch(R){console.error("Failed to cancel:",R)}},O=T=>{const R=Math.floor(T/1e3),I=Math.floor(R/60);return I>0?`${I}m ${R%60}s`:`${R}s`},N=T=>O(Date.now()-new Date(T).getTime()),A=T=>{const R={debug:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30",implement:"bg-purple-500/10 text-purple-400 border-purple-500/30",fix:"bg-orange-500/10 text-orange-400 border-orange-500/30",refactor:"bg-blue-500/10 text-blue-400 border-blue-500/30",test:"bg-green-500/10 text-green-400 border-green-500/30"};return R[T]||R.debug},C=T=>{const R={queued:r.jsx("span",{className:"px-2.5 py-1 rounded-md text-xs font-mono bg-slate-700 text-slate-300 border border-slate-600",children:"QUEUED"}),analyzing:r.jsx("span",{className:"px-2.5 py-1 rounded-md text-xs font-mono bg-blue-500/20 text-blue-300 border border-blue-500/50 animate-pulse",children:"ANALYZING"}),executing:r.jsx("span",{className:"px-2.5 py-1 rounded-md text-xs font-mono bg-blue-500/20 text-blue-300 border border-blue-500/50 animate-pulse",children:"EXECUTING"}),testing:r.jsx("span",{className:"px-2.5 py-1 rounded-md text-xs font-mono bg-yellow-500/20 text-yellow-300 border border-yellow-500/50 animate-pulse",children:"TESTING"}),committing:r.jsx("span",{className:"px-2.5 py-1 rounded-md text-xs font-mono bg-purple-500/20 text-purple-300 border border-purple-500/50 animate-pulse",children:"COMMITTING"}),completed:r.jsx("span",{className:"px-2.5 py-1 rounded-md text-xs font-mono bg-green-500/20 text-green-300 border border-green-500/50",children:"COMPLETE"}),failed:r.jsx("span",{className:"px-2.5 py-1 rounded-md text-xs font-mono bg-red-500/20 text-red-300 border border-red-500/50",children:"FAILED"}),cancelled:r.jsx("span",{className:"px-2.5 py-1 rounded-md text-xs font-mono bg-slate-500/20 text-slate-300 border border-slate-500/50",children:"CANCELLED"})};return R[T]||R.queued},E=T=>["analyzing","executing","testing","committing"].includes(T);return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:[r.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#1e293b_1px,transparent_1px),linear-gradient(to_bottom,#1e293b_1px,transparent_1px)] bg-[size:4rem_4rem] opacity-20"}),r.jsxs("div",{className:"relative max-w-[1800px] mx-auto px-8 py-10",children:[r.jsxs("div",{className:"mb-10",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[r.jsx("h1",{className:"text-4xl font-black text-white tracking-tight",children:"AGENT OPERATIONS"}),r.jsx("div",{className:"h-2 w-2 rounded-full bg-green-400 animate-pulse shadow-lg shadow-green-400/50"})]}),r.jsx("p",{className:"text-slate-400 text-lg font-mono",children:"Monitor and manage autonomous code changes in real-time"})]}),r.jsxs("button",{onClick:w,disabled:p,className:"px-5 py-2.5 bg-slate-800 hover:bg-slate-700 text-white rounded-lg border border-slate-700 transition-all disabled:opacity-50 font-mono text-sm flex items-center gap-2",children:[r.jsx("svg",{className:`w-4 h-4 ${p?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),p?"REFRESHING...":"REFRESH"]})]}),g&&r.jsx("div",{className:"mt-4 px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg text-red-300 text-sm font-mono",children:g})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-10",children:[r.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700 rounded-xl p-6 shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("span",{className:"text-slate-400 font-mono text-sm uppercase tracking-wider",children:"Active"}),r.jsx("div",{className:"h-8 w-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:r.jsx("div",{className:"h-3 w-3 rounded-full bg-blue-400 animate-pulse"})})]}),r.jsx("div",{className:"text-5xl font-black text-white mb-1",children:e.active}),r.jsx("div",{className:"text-xs text-slate-500 font-mono",children:"operations running"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700 rounded-xl p-6 shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("span",{className:"text-slate-400 font-mono text-sm uppercase tracking-wider",children:"Queued"}),r.jsx("div",{className:"h-8 w-8 rounded-lg bg-slate-700 flex items-center justify-center",children:r.jsxs("svg",{className:"w-5 h-5 text-slate-400",fill:"currentColor",viewBox:"0 0 20 20",children:[r.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),r.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]})})]}),r.jsx("div",{className:"text-5xl font-black text-white mb-1",children:e.queued}),r.jsx("div",{className:"text-xs text-slate-500 font-mono",children:"waiting to execute"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700 rounded-xl p-6 shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("span",{className:"text-slate-400 font-mono text-sm uppercase tracking-wider",children:"Completed"}),r.jsx("div",{className:"h-8 w-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),r.jsx("div",{className:"text-5xl font-black text-white mb-1",children:e.completedToday}),r.jsx("div",{className:"text-xs text-slate-500 font-mono",children:"today"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700 rounded-xl p-6 shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("span",{className:"text-slate-400 font-mono text-sm uppercase tracking-wider",children:"Failed"}),r.jsx("div",{className:"h-8 w-8 rounded-lg bg-red-500/20 flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),r.jsx("div",{className:"text-5xl font-black text-white mb-1",children:e.failedToday}),r.jsx("div",{className:"text-xs text-slate-500 font-mono",children:"today"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"xl:col-span-2",children:[r.jsxs("div",{className:"bg-slate-900/50 backdrop-blur border border-slate-700 rounded-xl shadow-2xl overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-slate-700 bg-slate-900/80",children:r.jsx("h2",{className:"text-xl font-bold text-white font-mono uppercase tracking-wide",children:"Active Operations"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-800 bg-slate-900/50",children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Operation ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Elapsed"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-800",children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:r.jsx("div",{className:"text-slate-500 font-mono text-sm",children:"No active operations"})})}):n.map(T=>r.jsxs("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"font-mono text-sm text-slate-300",children:T.id.slice(0,8)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2.5 py-1 rounded-md text-xs font-mono uppercase border ${A(T.operationType)}`,children:T.operationType})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-slate-200 max-w-md",children:T.description})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C(T.status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm font-mono text-slate-400",children:T.startedAt?N(T.startedAt):N(T.createdAt)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-3 py-1.5 text-xs font-mono bg-slate-800 hover:bg-slate-700 text-slate-300 rounded border border-slate-600 transition-colors",children:"View"}),E(T.status)&&r.jsx("button",{onClick:()=>P(T.id),className:"px-3 py-1.5 text-xs font-mono bg-red-900/30 hover:bg-red-900/50 text-red-300 rounded border border-red-700 transition-colors",children:"Cancel"})]})})]},T.id))})]})})]}),r.jsxs("div",{className:"mt-8 bg-slate-900/50 backdrop-blur border border-slate-700 rounded-xl shadow-2xl overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-slate-700 bg-slate-900/80",children:r.jsx("h2",{className:"text-xl font-bold text-white font-mono uppercase tracking-wide",children:"Recent History"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-800 bg-slate-900/50",children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Files"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"Result"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-mono font-semibold text-slate-400 uppercase tracking-wider",children:"PR"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-800",children:l.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:r.jsx("div",{className:"text-slate-500 font-mono text-sm",children:"No operations yet"})})}):l.map(T=>{var R;return r.jsxs("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"font-mono text-sm text-slate-300",children:T.id.slice(0,8)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2.5 py-1 rounded-md text-xs font-mono uppercase border ${A(T.operationType)}`,children:T.operationType})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm text-slate-200 max-w-md",children:T.description}),T.errorMessage&&r.jsx("div",{className:"text-xs text-red-400 mt-1 font-mono",children:T.errorMessage})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm font-mono text-slate-400",children:((R=T.filesModified)==null?void 0:R.length)||0})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C(T.status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.prUrl?r.jsx("a",{href:T.prUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm font-mono underline",children:"View PR"}):r.jsx("span",{className:"text-slate-600",children:"-"})})]},T.id)})})]})})]})]}),r.jsx("div",{className:"xl:col-span-1",children:r.jsxs("div",{className:"bg-slate-900/50 backdrop-blur border border-slate-700 rounded-xl shadow-2xl overflow-hidden sticky top-6",children:[r.jsx("div",{className:"px-6 py-4 border-b border-slate-700 bg-slate-900/80",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-white font-mono uppercase tracking-wide",children:"Approval Queue"}),r.jsxs("span",{className:"px-2.5 py-1 bg-amber-500/20 text-amber-300 border border-amber-500/50 rounded-md text-xs font-mono font-semibold",children:[s.length," PENDING"]})]})}),r.jsx("div",{className:"p-6 space-y-4 max-h-[800px] overflow-y-auto",children:s.length===0?r.jsx("div",{className:"text-center py-12 text-slate-500 font-mono text-sm",children:"No pending approvals"}):s.map(T=>{var R;return r.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-5 hover:border-slate-600 transition-colors",children:[r.jsx("div",{className:"mb-3",children:T.prUrl?r.jsxs("a",{href:T.prUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 font-mono text-sm font-semibold underline",children:["PR #",T.prUrl.split("/").pop()]}):r.jsxs("span",{className:"font-mono text-sm font-semibold text-slate-300",children:["Operation ",T.id.slice(0,8)]})}),r.jsx("div",{className:"text-sm text-slate-200 mb-4",children:T.description}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[r.jsxs("div",{className:"bg-slate-900/50 rounded px-3 py-2 border border-slate-700",children:[r.jsx("div",{className:"text-xs text-slate-400 font-mono mb-1",children:"Files"}),r.jsx("div",{className:"text-lg font-bold text-white",children:((R=T.filesModified)==null?void 0:R.length)||0})]}),r.jsxs("div",{className:"bg-slate-900/50 rounded px-3 py-2 border border-slate-700",children:[r.jsx("div",{className:"text-xs text-slate-400 font-mono mb-1",children:"Iterations"}),r.jsx("div",{className:"text-lg font-bold text-white",children:T.iterations||0})]})]}),T.filesModified&&T.filesModified.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("button",{onClick:()=>h(u===T.id?null:T.id),className:"text-xs text-slate-400 hover:text-slate-200 font-mono mb-2 flex items-center gap-1",children:[r.jsx("svg",{className:`w-3 h-3 transition-transform ${u===T.id?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),u===T.id?"Hide":"Show"," files (",T.filesModified.length,")"]}),u===T.id&&r.jsx("ul",{className:"bg-slate-950 border border-slate-700 rounded p-3 text-xs font-mono text-slate-300",children:T.filesModified.map((I,M)=>r.jsx("li",{className:"py-0.5",children:I},M))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>x(T.id),className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-500 text-white rounded-lg font-mono text-sm font-semibold transition-colors",children:"APPROVE"}),r.jsx("button",{onClick:()=>S(T.id),className:"px-4 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-300 border border-slate-600 rounded-lg font-mono text-sm transition-colors",children:"REJECT"})]})]},T.id)})})]})})]})]})]})}const Sre=gj((e,t)=>({instances:[],availableOrgs:[],isLoading:!1,error:null,fetchInstances:async()=>{e({isLoading:!0,error:null});try{const n=await se({url:"/api/admin/n8n-instances",method:"GET"});e({instances:n.data,isLoading:!1})}catch(n){e({error:n.message,isLoading:!1})}},fetchAvailableOrgs:async()=>{try{const n=await se({url:"/api/admin/n8n-instances/organizations/available",method:"GET"});e({availableOrgs:n.data})}catch(n){console.error("Failed to fetch available orgs:",n)}},provisionInstance:async n=>{try{return await se({url:"/api/admin/n8n-instances",method:"POST",data:{organizationId:n}}),await t().fetchInstances(),await t().fetchAvailableOrgs(),!0}catch(a){return e({error:a.message}),!1}},performHealthCheck:async n=>{try{const a=await se({url:`/api/admin/n8n-instances/${n}/health-check`,method:"POST"});return await t().fetchInstances(),a.healthy}catch(a){return e({error:a.message}),!1}},stopInstance:async n=>{try{return await se({url:`/api/admin/n8n-instances/${n}/stop`,method:"POST"}),await t().fetchInstances(),!0}catch(a){return e({error:a.message}),!1}},deleteInstance:async n=>{try{return await se({url:`/api/admin/n8n-instances/${n}`,method:"DELETE"}),await t().fetchInstances(),await t().fetchAvailableOrgs(),!0}catch(a){return e({error:a.message}),!1}}}));function kre(){const{instances:e,availableOrgs:t,isLoading:n,error:a,fetchInstances:s,fetchAvailableOrgs:i,provisionInstance:l,performHealthCheck:d,stopInstance:u,deleteInstance:h}=Sre(),[p,m]=b.useState(!1),[g,j]=b.useState(""),[v,w]=b.useState(!1);b.useEffect(()=>{s(),i()},[s,i]);const x=async()=>{if(!g)return;w(!0);const C=await l(g);w(!1),C&&(m(!1),j(""))},S=async(C,E)=>{const T=await d(C);alert(T?`Health check passed for ${E}`:`Health check failed for ${E}`)},P=async(C,E)=>{if(!confirm(`Are you sure you want to stop the n8n instance for ${E}?`))return;await u(C)&&alert(`Successfully stopped instance for ${E}`)},O=async(C,E)=>{if(!confirm(`Are you sure you want to DELETE the n8n instance for ${E}? This will remove all workflows and cannot be undone.`))return;await h(C)&&alert(`Successfully deleted instance for ${E}`)},N=C=>{switch(C.toLowerCase()){case"active":case"running":return"bg-green-100 text-green-800";case"stopped":return"bg-gray-100 text-gray-800";case"failed":case"error":return"bg-red-100 text-red-800";case"provisioning":return"bg-blue-100 text-blue-800";default:return"bg-yellow-100 text-yellow-800"}},A=C=>C?new Date(C).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return a?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"text-red-600 text-lg mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600",children:a}),r.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Retry"})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"N8n Instances"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage n8n workflow automation instances"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-sm text-gray-500",children:[e.length," instances"]}),r.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-medium",children:"Provision New Instance"})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Container URL"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Workflows"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Health Check"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})})})}):e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No n8n instances found. Provision a new instance to get started."})}):e.map(C=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:C.organization.name}),r.jsx("div",{className:"text-sm text-gray-500",children:C.organization.slug})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("a",{href:C.containerUrl,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-900 hover:underline text-sm break-all",children:C.containerUrl})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${N(C.status)}`,children:C.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C._count.workflows}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A(C.lastHealthCheck)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[r.jsx("button",{onClick:()=>S(C.id,C.organization.name),className:"text-blue-600 hover:text-blue-900 font-medium",children:"Health Check"}),r.jsx("button",{onClick:()=>P(C.id,C.organization.name),className:"text-yellow-600 hover:text-yellow-900 font-medium",children:"Stop"}),r.jsx("button",{onClick:()=>O(C.id,C.organization.name),className:"text-red-600 hover:text-red-900 font-medium",children:"Delete"})]})})]},C.id))})]})})}),p&&r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Provision New N8n Instance"}),t.length===0?r.jsx("div",{className:"text-gray-600 mb-6",children:"All organizations already have n8n instances provisioned."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"org-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Organization"}),r.jsxs("select",{id:"org-select",value:g,onChange:C=>j(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Choose an organization..."}),t.map(C=>r.jsxs("option",{value:C.id,children:[C.name," (",C.slug,")"]},C.id))]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[r.jsx("button",{onClick:()=>{m(!1),j("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:v,children:"Cancel"}),r.jsx("button",{onClick:x,disabled:!g||v,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Provisioning...":"Provision"})]})]}),t.length===0&&r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})]})}const Cre={blue:"bg-blue-50 border-blue-200 text-blue-600",green:"bg-green-50 border-green-200 text-green-600",yellow:"bg-yellow-50 border-yellow-200 text-yellow-600",red:"bg-red-50 border-red-200 text-red-600",purple:"bg-purple-50 border-purple-200 text-purple-600",gray:"bg-gray-50 border-gray-200 text-gray-600"},Are={blue:"text-blue-500",green:"text-green-500",yellow:"text-yellow-500",red:"text-red-500",purple:"text-purple-500",gray:"text-gray-500"};function Va({title:e,value:t,icon:n,description:a,trend:s="neutral",change:i,color:l="blue",onClick:d}){const[u,h]=b.useState(0);b.useEffect(()=>{if(typeof t!="number")return;const g=800,j=Date.now(),v=()=>{const w=Date.now()-j,x=Math.min(w/g,1),S=1-Math.pow(1-x,3);h(Math.round(S*t)),x<1&&requestAnimationFrame(v)};v()},[t]);const p={up:"text-green-600",down:"text-red-600",neutral:"text-gray-500"},m={up:"",down:"",neutral:""};return r.jsx("div",{className:`
        bg-white rounded-xl shadow-sm border p-5
        transition-all duration-200
        ${d?"cursor-pointer hover:shadow-md hover:scale-[1.02]":""}
      `,onClick:d,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:e}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:typeof t=="number"?u.toLocaleString():t}),a&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:a}),i!==void 0&&r.jsxs("p",{className:`text-sm mt-2 ${p[s]}`,children:[m[s]," ",i>0?"+":"",i,"% from last period"]})]}),r.jsx("div",{className:`p-3 rounded-lg ${Cre[l]}`,children:r.jsx("span",{className:Are[l],children:n})})]})})}function Pre(e){return e>=.9?{label:"Critical",color:"bg-red-500",bgColor:"bg-red-100"}:e>=.8?{label:"High",color:"bg-orange-500",bgColor:"bg-orange-100"}:e>=.6?{label:"Normal",color:"bg-green-500",bgColor:"bg-green-100"}:e>=.3?{label:"Low",color:"bg-blue-500",bgColor:"bg-blue-100"}:{label:"Idle",color:"bg-gray-400",bgColor:"bg-gray-100"}}const Ore={sm:"h-1.5",md:"h-2.5",lg:"h-4"};function zc({workload:e,size:t="md",showPercentage:n=!1,showStatus:a=!1}){const s=Pre(e),i=Math.round(e*100);return r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`flex-1 ${s.bgColor} rounded-full overflow-hidden ${Ore[t]}`,children:r.jsx("div",{className:`${s.color} h-full rounded-full transition-all duration-500`,style:{width:`${i}%`}})}),n&&r.jsxs("span",{className:"text-sm font-medium text-gray-600 w-12 text-right",children:[i,"%"]})]}),a&&r.jsx("span",{className:`text-xs mt-1 inline-block ${s.label==="Critical"?"text-red-600":s.label==="High"?"text-orange-600":s.label==="Normal"?"text-green-600":s.label==="Low"?"text-blue-600":"text-gray-500"}`,children:s.label})]})}const Ere={critical:{bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",iconColor:"text-red-500",icon:"",label:"Critical"},high:{bgColor:"bg-orange-50",borderColor:"border-orange-200",textColor:"text-orange-800",iconColor:"text-orange-500",icon:"",label:"High"},medium:{bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-500",icon:"",label:"Medium"},low:{bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",iconColor:"text-blue-500",icon:"",label:"Low"}};function _re({issue:e,onAction:t,compact:n=!1}){const a=Ere[e.severity];return n?r.jsxs("div",{className:`
          flex items-center gap-2 px-3 py-2 rounded-lg border
          ${a.bgColor} ${a.borderColor}
        `,children:[r.jsx("span",{children:a.icon}),r.jsx("span",{className:`text-sm font-medium ${a.textColor}`,children:e.title})]}):r.jsx("div",{className:`
        rounded-lg border p-4
        ${a.bgColor} ${a.borderColor}
      `,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-xl",children:a.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`text-xs font-semibold uppercase ${a.iconColor}`,children:a.label}),r.jsx("span",{className:"text-xs text-gray-400",children:new Date(e.detectedAt).toLocaleString()})]}),r.jsx("h4",{className:`font-semibold ${a.textColor}`,children:e.title}),r.jsx("p",{className:`text-sm mt-1 ${a.textColor} opacity-80`,children:e.description}),e.affectedAgents.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Affected: "}),r.jsx("span",{className:"text-xs font-medium",children:e.affectedAgents.join(", ")})]}),e.suggestedActions.length>0&&r.jsxs("div",{className:"mt-3 space-y-1",children:[r.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Suggested Actions:"}),r.jsx("ul",{className:"space-y-1",children:e.suggestedActions.map((s,i)=>r.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{className:t?"cursor-pointer hover:underline":"",onClick:()=>t==null?void 0:t(s),children:s})]},i))})]})]})]})})}const Tre={critical:{bgColor:"bg-red-50",borderColor:"border-red-200",badgeColor:"bg-red-100 text-red-700",icon:""},high:{bgColor:"bg-orange-50",borderColor:"border-orange-200",badgeColor:"bg-orange-100 text-orange-700",icon:""},medium:{bgColor:"bg-yellow-50",borderColor:"border-yellow-200",badgeColor:"bg-yellow-100 text-yellow-700",icon:""},low:{bgColor:"bg-blue-50",borderColor:"border-blue-200",badgeColor:"bg-blue-100 text-blue-700",icon:""}},Rre={template:"Template",team_composition:"Team",position:"Position",skill_development:"Skills",resource_allocation:"Resources",structure_optimization:"Structure"};function Mre({recommendation:e,onAction:t}){const n=Tre[e.priority];return r.jsx("div",{className:`
        rounded-lg border p-4
        ${n.bgColor} ${n.borderColor}
      `,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-xl",children:n.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded ${n.badgeColor}`,children:e.priority.toUpperCase()}),r.jsx("span",{className:"text-xs text-gray-500 px-2 py-0.5 bg-white rounded",children:Rre[e.type]||e.type})]}),r.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600",children:e.description}),e.estimatedImpact&&r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Expected Impact: ",e.estimatedImpact]}),e.actions.length>0&&r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.actions.map((a,s)=>r.jsx("button",{onClick:()=>t==null?void 0:t(a.action,a.params),className:`
                    px-3 py-1.5 text-sm font-medium rounded-md
                    bg-white border border-gray-200 text-gray-700
                    hover:bg-gray-50 hover:border-gray-300
                    transition-colors
                  `,children:a.label},s))})]})]})})}function Cw(e){return At({queryKey:["ar","departments",e],queryFn:async()=>{const t=new URLSearchParams;return e!=null&&e.status&&t.set("status",e.status),e!=null&&e.search&&t.set("search",e.search),e!=null&&e.page&&t.set("page",String(e.page)),e!=null&&e.pageSize&&t.set("pageSize",String(e.pageSize)),se({url:`/api/ar/departments?${t.toString()}`,method:"GET"})},staleTime:3e4,refetchOnWindowFocus:!0})}function Ire(){const e=lt();return pt({mutationFn:async t=>se({url:"/api/ar/departments",method:"POST",data:t}),onSuccess:()=>{e.invalidateQueries({queryKey:["ar","departments"]})}})}function $re(){const e=lt();return pt({mutationFn:async({id:t,...n})=>se({url:`/api/ar/departments/${t}`,method:"PATCH",data:n}),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["ar","departments"]}),e.invalidateQueries({queryKey:["ar","departments",n.id]})}})}function Lre(){const e=lt();return pt({mutationFn:async t=>se({url:`/api/ar/departments/${t}`,method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["ar","departments"]})}})}function Dre(){const e=lt();return pt({mutationFn:async({id:t,budgetCents:n})=>se({url:`/api/ar/departments/${t}/budget`,method:"PATCH",data:{budgetCents:n}}),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["ar","departments"]}),e.invalidateQueries({queryKey:["ar","departments",n.id]})}})}function Aw(e){return At({queryKey:["ar","positions",e],queryFn:async()=>{const t=new URLSearchParams;return e!=null&&e.status&&t.set("status",e.status),e!=null&&e.departmentId&&t.set("departmentId",e.departmentId),e!=null&&e.search&&t.set("search",e.search),e!=null&&e.page&&t.set("page",String(e.page)),e!=null&&e.pageSize&&t.set("pageSize",String(e.pageSize)),se({url:`/api/ar/positions?${t.toString()}`,method:"GET"})},staleTime:3e4,refetchOnWindowFocus:!0})}function Fre(){const e=lt();return pt({mutationFn:async t=>se({url:"/api/ar/positions",method:"POST",data:t}),onSuccess:()=>{e.invalidateQueries({queryKey:["ar","positions"]})}})}function qre(){const e=lt();return pt({mutationFn:async({id:t,...n})=>se({url:`/api/ar/positions/${t}`,method:"PATCH",data:n}),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["ar","positions"]}),e.invalidateQueries({queryKey:["ar","positions",n.id]})}})}function zre(){const e=lt();return pt({mutationFn:async t=>se({url:`/api/ar/positions/${t}`,method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["ar","positions"]})}})}function rT(e){return At({queryKey:["ar","assignments",e],queryFn:async()=>{const t=new URLSearchParams;return e!=null&&e.status&&t.set("status",e.status),e!=null&&e.departmentId&&t.set("departmentId",e.departmentId),e!=null&&e.positionId&&t.set("positionId",e.positionId),e!=null&&e.agentId&&t.set("agentId",e.agentId),e!=null&&e.page&&t.set("page",String(e.page)),e!=null&&e.pageSize&&t.set("pageSize",String(e.pageSize)),se({url:`/api/ar/assignments?${t.toString()}`,method:"GET"})},staleTime:3e4,refetchOnWindowFocus:!0})}function Bre(){const e=lt();return pt({mutationFn:async t=>se({url:"/api/ar/assignments",method:"POST",data:t}),onSuccess:()=>{e.invalidateQueries({queryKey:["ar","assignments"]}),e.invalidateQueries({queryKey:["ar","positions"]})}})}function Ure(){const e=lt();return pt({mutationFn:async({id:t,status:n})=>se({url:`/api/ar/assignments/${t}/status`,method:"PATCH",data:{status:n}}),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["ar","assignments"]}),e.invalidateQueries({queryKey:["ar","assignments",n.id]})}})}function Wre(){const e=lt();return pt({mutationFn:async({id:t,reason:n})=>se({url:`/api/ar/assignments/${t}/terminate`,method:"POST",data:{reason:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["ar","assignments"]}),e.invalidateQueries({queryKey:["ar","positions"]})}})}function Hre(e){return At({queryKey:["ar","approvals",e],queryFn:async()=>{const t=new URLSearchParams;return e!=null&&e.status&&t.set("status",e.status),e!=null&&e.requestType&&t.set("requestType",e.requestType),e!=null&&e.level&&t.set("level",String(e.level)),e!=null&&e.page&&t.set("page",String(e.page)),e!=null&&e.pageSize&&t.set("pageSize",String(e.pageSize)),se({url:`/api/ar/approvals?${t.toString()}`,method:"GET"})},staleTime:3e4,refetchOnWindowFocus:!0})}function Kre(){return At({queryKey:["ar","approvals","pending"],queryFn:async()=>se({url:"/api/ar/approvals?status=pending",method:"GET"}),staleTime:3e4,refetchOnWindowFocus:!0})}function Gre(){const e=lt();return pt({mutationFn:async({id:t,note:n})=>se({url:`/api/ar/approvals/${t}/approve`,method:"POST",data:{note:n}}),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["ar","approvals"]}),e.invalidateQueries({queryKey:["ar","approvals",n.id]})}})}function Vre(){const e=lt();return pt({mutationFn:async({id:t,note:n})=>se({url:`/api/ar/approvals/${t}/reject`,method:"POST",data:{note:n}}),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["ar","approvals"]}),e.invalidateQueries({queryKey:["ar","approvals",n.id]})}})}function Qre(){const e=lt();return pt({mutationFn:async({id:t,reason:n})=>se({url:`/api/ar/approvals/${t}/escalate`,method:"POST",data:{reason:n}}),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["ar","approvals"]}),e.invalidateQueries({queryKey:["ar","approvals",n.id]})}})}function nT(){return At({queryKey:["ar","workload"],queryFn:async()=>se({url:"/api/ar/coordination/workload",method:"GET"}),refetchInterval:3e4,staleTime:3e4,refetchOnWindowFocus:!0})}function Yre(){return At({queryKey:["ar","workload","proposals"],queryFn:async()=>se({url:"/api/ar/coordination/workload/proposals",method:"GET"}),staleTime:3e4,refetchOnWindowFocus:!0})}function Xre(){const e=lt();return pt({mutationFn:async(t="manual")=>se({url:"/api/ar/coordination/workload/rebalance",method:"POST",data:{trigger:t}}),onSuccess:()=>{e.invalidateQueries({queryKey:["ar","workload","proposals"]})}})}function Jre(){const e=lt();return pt({mutationFn:async({proposalId:t,partial:n,changeIds:a})=>se({url:"/api/ar/coordination/workload/apply",method:"POST",data:{proposalId:t,partial:n,changeIds:a}}),onSuccess:()=>{e.invalidateQueries({queryKey:["ar","workload"]}),e.invalidateQueries({queryKey:["ar","workload","proposals"]}),e.invalidateQueries({queryKey:["ar","assignments"]})}})}function Zre(e=30){return At({queryKey:["ar","analytics","report",e],queryFn:async()=>se({url:`/api/ar/analytics/report?periodDays=${e}`,method:"GET"}),staleTime:3e4,refetchOnWindowFocus:!0})}function ene(){return At({queryKey:["ar","analytics","health"],queryFn:async()=>se({url:"/api/ar/analytics/ops/health",method:"GET"}),refetchInterval:6e4,staleTime:3e4,refetchOnWindowFocus:!0})}function tne(){return At({queryKey:["ar","analytics","coaching"],queryFn:async()=>se({url:"/api/ar/analytics/coaching/needs",method:"GET"}),staleTime:3e4,refetchOnWindowFocus:!0})}function rne(){return At({queryKey:["ar","analytics","recommendations"],queryFn:async()=>se({url:"/api/ar/analytics/recommendations",method:"GET"}),staleTime:3e4,refetchOnWindowFocus:!0})}function nne(){return At({queryKey:["ar","issues"],queryFn:async()=>se({url:"/api/ar/coordination/issues",method:"GET"}),refetchInterval:3e4,staleTime:3e4,refetchOnWindowFocus:!0})}function ane(){var w,x,S,P,O,N,A,C,E,T;const{data:e,isLoading:t}=Cw({status:"active"}),{data:n,isLoading:a}=Aw({status:"active"}),{data:s,isLoading:i}=rT({status:"active"}),{data:l,isLoading:d}=Kre(),{data:u,isLoading:h}=nT(),{data:p,isLoading:m}=nne(),{data:g,isLoading:j}=rne(),v=t||a||i||d;return r.jsxs("div",{children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AR Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Agent Resource Management Overview"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:v?r.jsxs(r.Fragment,{children:[r.jsx(Qr,{}),r.jsx(Qr,{}),r.jsx(Qr,{}),r.jsx(Qr,{})]}):r.jsxs(r.Fragment,{children:[r.jsx(ft,{to:"/ar/departments",children:r.jsx(Va,{title:"Departments",value:((w=e==null?void 0:e.departments)==null?void 0:w.length)??0,icon:r.jsx(lI,{className:"h-6 w-6"}),color:"blue",description:"Active departments"})}),r.jsx(ft,{to:"/ar/positions",children:r.jsx(Va,{title:"Positions",value:((x=n==null?void 0:n.positions)==null?void 0:x.length)??0,icon:r.jsx(kv,{className:"h-6 w-6"}),color:"green",description:"Total positions"})}),r.jsx(ft,{to:"/ar/assignments",children:r.jsx(Va,{title:"Assignments",value:((S=s==null?void 0:s.assignments)==null?void 0:S.length)??0,icon:r.jsx(Yu,{className:"h-6 w-6"}),color:"purple",description:"Active assignments"})}),r.jsx(ft,{to:"/ar/approvals",children:r.jsx(Va,{title:"Pending Approvals",value:((P=l==null?void 0:l.requests)==null?void 0:P.length)??0,icon:r.jsx(Cv,{className:"h-6 w-6"}),color:(O=l==null?void 0:l.requests)!=null&&O.length?"yellow":"gray",description:"Awaiting action"})})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Workload Distribution"}),r.jsxs(ft,{to:"/ar/workload",className:"text-sm text-indigo-600 hover:text-indigo-800 flex items-center gap-1",children:["View All ",r.jsx(nI,{className:"h-4 w-4"})]})]}),h?r.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(R=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),r.jsx("div",{className:"h-2.5 bg-gray-100 rounded w-full"})]},R))}):(N=u==null?void 0:u.snapshots)!=null&&N.length?r.jsxs("div",{className:"space-y-4",children:[u.snapshots.slice(0,6).map(R=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:R.agentName}),r.jsx("span",{className:`text-xs font-medium ${R.status==="overloaded"?"text-red-600":R.status==="underutilized"?"text-yellow-600":"text-green-600"}`,children:R.status})]}),r.jsx(zc,{workload:R.currentWorkload,showPercentage:!0})]},R.agentId)),u.stats&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(u.stats.avgWorkload*100),"%"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Avg Workload"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.stats.overloaded}),r.jsx("p",{className:"text-xs text-gray-500",children:"Overloaded"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:u.stats.underutilized}),r.jsx("p",{className:"text-xs text-gray-500",children:"Underutilized"})]})]})})]}):r.jsx("p",{className:"text-gray-500 text-sm",children:"No workload data available"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Issues"}),(((A=p==null?void 0:p.summary)==null?void 0:A.total)??0)>0&&r.jsx("span",{className:"bg-red-100 text-red-700 text-xs font-medium px-2 py-0.5 rounded-full",children:(C=p==null?void 0:p.summary)==null?void 0:C.total})]})}),m?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(R=>r.jsxs("div",{className:"animate-pulse bg-gray-100 rounded-lg p-4",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]},R))}):(E=p==null?void 0:p.issues)!=null&&E.length?r.jsx("div",{className:"space-y-3",children:p.issues.slice(0,4).map(R=>r.jsx(_re,{issue:R,compact:!0},R.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(wI,{className:"h-12 w-12 text-green-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No issues detected"}),r.jsx("p",{className:"text-xs text-gray-400",children:"All systems operating normally"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recommendations"})}),j?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2].map(R=>r.jsxs("div",{className:"animate-pulse bg-gray-100 rounded-lg p-4",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-1"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},R))}):(T=g==null?void 0:g.recommendations)!=null&&T.length?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.recommendations.slice(0,4).map(R=>r.jsx(Mre,{recommendation:R,onAction:(I,M)=>{console.log("Action triggered:",I,M)}},R.id))}):r.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No recommendations at this time"})]})]})}function sne({departments:e,onClose:t,onSuccess:n}){const[a,s]=b.useState(""),[i,l]=b.useState(""),[d,u]=b.useState(""),[h,p]=b.useState("active"),[m,g]=b.useState(0),[j,v]=b.useState(null),w=Ire(),x=async S=>{if(S.preventDefault(),v(null),!a.trim()){v("Department name is required");return}try{await w.mutateAsync({name:a.trim(),description:i.trim()||void 0,parentId:d||void 0,budgetCents:m,status:h}),n()}catch(P){v(P instanceof Error?P.message:"Failed to create department")}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create Department"}),r.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-lg",children:r.jsx(rf,{className:"h-5 w-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:x,className:"p-4 space-y-4",children:[j&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded-lg text-sm",children:j}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:a,onChange:S=>s(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Engineering",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:i,onChange:S=>l(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Product development department",rows:3})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Department"}),r.jsxs("select",{value:d,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"None (Top Level)"}),e.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:h,onChange:S=>p(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"archived",children:"Archived"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),r.jsx("input",{type:"number",value:m/100,onChange:S=>g(Math.round(parseFloat(S.target.value||"0")*100)),className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0.00",min:"0",step:"0.01"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:w.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:w.isPending?"Creating...":"Create Department"})]})]})]})})}function ine({department:e,departments:t,onClose:n,onSuccess:a}){const[s,i]=b.useState(e.name),[l,d]=b.useState(e.description||""),[u,h]=b.useState(e.parentId||""),[p,m]=b.useState(e.status),[g,j]=b.useState(e.budgetCents),[v,w]=b.useState(null),x=$re(),S=Dre(),P=async C=>{if(C.preventDefault(),w(null),!s.trim()){w("Department name is required");return}try{await x.mutateAsync({id:e.id,name:s.trim(),description:l.trim()||null,parentId:u||null,status:p}),g!==e.budgetCents&&await S.mutateAsync({id:e.id,budgetCents:g}),a()}catch(E){w(E instanceof Error?E.message:"Failed to update department")}},O=C=>{const E=t.filter(T=>T.parentId===C);return[C,...E.flatMap(T=>O(T.id))]},N=new Set(O(e.id)),A=t.filter(C=>!N.has(C.id));return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Edit Department"}),r.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded-lg",children:r.jsx(rf,{className:"h-5 w-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:P,className:"p-4 space-y-4",children:[v&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded-lg text-sm",children:v}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:s,onChange:C=>i(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:l,onChange:C=>d(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Department"}),r.jsxs("select",{value:u,onChange:C=>h(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"",children:"None (Top Level)"}),A.map(C=>r.jsx("option",{value:C.id,children:C.name},C.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:p,onChange:C=>m(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"archived",children:"Archived"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),r.jsx("input",{type:"number",value:g/100,onChange:C=>j(Math.round(parseFloat(C.target.value||"0")*100)),className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",min:"0",step:"0.01"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:x.isPending||S.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:x.isPending||S.isPending?"Saving...":"Save Changes"})]})]})]})})}function aT({department:e,allDepartments:t,level:n,selectedId:a,onSelect:s,onEdit:i,onDelete:l}){const[d,u]=b.useState(!0),h=t.filter(g=>g.parentId===e.id),p=h.length>0,m=a===e.id;return r.jsxs("div",{children:[r.jsxs("div",{className:`
          flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer
          transition-colors group
          ${m?"bg-indigo-50 border border-indigo-200":"hover:bg-gray-50"}
        `,style:{paddingLeft:`${n*20+12}px`},onClick:()=>s(e.id),children:[p?r.jsx("button",{onClick:g=>{g.stopPropagation(),u(!d)},className:"p-0.5 hover:bg-gray-200 rounded",children:d?r.jsx(mI,{className:"h-4 w-4 text-gray-500"}):r.jsx(xI,{className:"h-4 w-4 text-gray-500"})}):r.jsx("span",{className:"w-5"}),d?r.jsx(SI,{className:"h-5 w-5 text-indigo-500"}):r.jsx(Av,{className:"h-5 w-5 text-gray-400"}),r.jsx("span",{className:`flex-1 font-medium ${m?"text-indigo-700":"text-gray-700"}`,children:e.name}),r.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e.status==="active"?"bg-green-100 text-green-700":e.status==="inactive"?"bg-gray-100 text-gray-600":"bg-yellow-100 text-yellow-700"}`,children:e.status}),r.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex items-center gap-1",children:[r.jsx("button",{onClick:g=>{g.stopPropagation(),i(e)},className:"p-1 hover:bg-gray-200 rounded",title:"Edit",children:r.jsx(Vu,{className:"h-4 w-4 text-gray-500"})}),r.jsx("button",{onClick:g=>{g.stopPropagation(),confirm(`Delete ${e.name}?`)&&l(e.id)},className:"p-1 hover:bg-red-100 rounded",title:"Delete",children:r.jsx(Qu,{className:"h-4 w-4 text-red-500"})})]})]}),d&&p&&r.jsx("div",{children:h.map(g=>r.jsx(aT,{department:g,allDepartments:t,level:n+1,selectedId:a,onSelect:s,onEdit:i,onDelete:l},g.id))})]})}function one(){const[e,t]=b.useState(""),[n,a]=b.useState("all"),[s,i]=b.useState(null),[l,d]=b.useState(!1),[u,h]=b.useState(null),{data:p,isLoading:m,refetch:g}=Cw({status:n==="all"?void 0:n,search:e||void 0}),j=Lre(),v=(p==null?void 0:p.departments)??[],w=v.filter(O=>!O.parentId),x=v.find(O=>O.id===s),S=async O=>{try{await j.mutateAsync(O),s===O&&i(null)}catch(N){console.error("Failed to delete department:",N)}},P=O=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(O/100);return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Departments"}),r.jsx("p",{className:"text-gray-600",children:"Manage your organization's department structure"})]}),r.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[r.jsx(tf,{className:"h-5 w-5"}),"Add Department"]})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(hj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search departments...",value:e,onChange:O=>t(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("select",{value:n,onChange:O=>a(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"archived",children:"Archived"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border p-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Department Tree"}),m?r.jsx("div",{className:"space-y-2",children:[1,2,3,4,5].map(O=>r.jsxs("div",{className:"animate-pulse flex items-center gap-2 p-2",children:[r.jsx("div",{className:"h-5 w-5 bg-gray-200 rounded"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},O))}):w.length>0?r.jsx("div",{className:"space-y-1",children:w.map(O=>r.jsx(aT,{department:O,allDepartments:v,level:0,selectedId:s,onSelect:i,onEdit:h,onDelete:S},O.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Av,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No departments found"}),r.jsx("button",{onClick:()=>d(!0),className:"mt-2 text-indigo-600 hover:text-indigo-800 text-sm",children:"Create your first department"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Details"}),x?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("p",{className:"text-gray-900 font-medium",children:x.name})]}),x.description&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("p",{className:"text-gray-700 text-sm",children:x.description})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("p",{className:`inline-block px-2 py-0.5 rounded text-sm font-medium ${x.status==="active"?"bg-green-100 text-green-700":x.status==="inactive"?"bg-gray-100 text-gray-600":"bg-yellow-100 text-yellow-700"}`,children:x.status})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),r.jsx("p",{className:"text-gray-900 font-medium",children:P(x.budgetCents)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sub-departments"}),r.jsx("p",{className:"text-gray-700",children:v.filter(O=>O.parentId===x.id).length})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("p",{className:"text-gray-700 text-sm",children:new Date(x.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"pt-4 flex gap-2",children:[r.jsxs("button",{onClick:()=>h(x),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[r.jsx(Vu,{className:"h-4 w-4"}),"Edit"]}),r.jsx("button",{onClick:()=>{confirm(`Delete ${x.name}?`)&&S(x.id)},className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:r.jsx(Qu,{className:"h-4 w-4"})})]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Av,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Select a department to view details"})]})]})]}),l&&r.jsx(sne,{departments:v,onClose:()=>d(!1),onSuccess:()=>{d(!1),g()}}),u&&r.jsx(ine,{department:u,departments:v.filter(O=>O.id!==u.id),onClose:()=>h(null),onSuccess:()=>{h(null),g()}})]})}const vP={beginner:"bg-gray-100 text-gray-700",intermediate:"bg-blue-100 text-blue-700",advanced:"bg-purple-100 text-purple-700",expert:"bg-orange-100 text-orange-700"},lne={1:"Entry Level",2:"Junior",3:"Mid-Level",4:"Senior",5:"Director/Head"};function cne(){const[e,t]=b.useState(""),[n,a]=b.useState("all"),[s,i]=b.useState("all"),[l,d]=b.useState(null),[u,h]=b.useState(!1),[p,m]=b.useState(null),[g,j]=b.useState({title:"",departmentId:"",level:3,description:"",requiredSkills:[],minExperience:0,maxCapacity:1,status:"active"}),[v,w]=b.useState({name:"",level:"intermediate",weight:50}),[x,S]=b.useState(null),{data:P}=Cw({status:"active"}),O=Fre(),N=qre(),{data:A,isLoading:C}=Aw({status:n==="all"?void 0:n,departmentId:s==="all"?void 0:s,search:e||void 0}),E=zre(),T=(A==null?void 0:A.positions)??[],R=(P==null?void 0:P.departments)??[],I=T.find(D=>D.id===l),M=D=>{var L;return((L=R.find(q=>q.id===D))==null?void 0:L.name)??"Unknown"},$=async D=>{try{await E.mutateAsync(D),l===D&&d(null)}catch(L){console.error("Failed to delete position:",L)}},G=()=>{j({title:"",departmentId:"",level:3,description:"",requiredSkills:[],minExperience:0,maxCapacity:1,status:"active"}),w({name:"",level:"intermediate",weight:50}),S(null)},V=()=>{G(),h(!0)},z=D=>{j({title:D.title,departmentId:D.departmentId,level:D.level||3,description:D.description||"",requiredSkills:D.requiredSkills,minExperience:D.minExperience,maxCapacity:D.maxCapacity,status:D.status,reportsTo:D.reportsTo||void 0}),m(D)},U=()=>{v.name.trim()&&(j(D=>({...D,requiredSkills:[...D.requiredSkills||[],v]})),w({name:"",level:"intermediate",weight:50}))},H=D=>{j(L=>({...L,requiredSkills:(L.requiredSkills||[]).filter((q,K)=>K!==D)}))},B=async D=>{if(D.preventDefault(),S(null),!g.title.trim()){S("Title is required");return}if(!g.departmentId){S("Department is required");return}try{p?(await N.mutateAsync({id:p.id,...g}),m(null)):(await O.mutateAsync(g),h(!1)),G()}catch(L){S(L instanceof Error?L.message:"Failed to save position")}};return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Positions"}),r.jsx("p",{className:"text-gray-600",children:"Define roles and skill requirements for agents"})]}),r.jsxs("button",{onClick:V,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[r.jsx(tf,{className:"h-5 w-5"}),"Add Position"]})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(hj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search positions...",value:e,onChange:D=>t(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("select",{value:s,onChange:D=>i(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Departments"}),R.map(D=>r.jsx("option",{value:D.id,children:D.name},D.id))]}),r.jsxs("select",{value:n,onChange:D=>a(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"archived",children:"Archived"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C?Array.from({length:5}).map((D,L)=>r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-4",children:r.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-full"})})},L)):T.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[r.jsx(kv,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No positions found"}),r.jsx("button",{onClick:V,className:"mt-2 text-indigo-600 hover:text-indigo-800 text-sm",children:"Create your first position"})]})}):T.map(D=>r.jsxs("tr",{onClick:()=>d(D.id),className:`cursor-pointer hover:bg-gray-50 ${l===D.id?"bg-indigo-50":""}`,children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"font-medium text-gray-900",children:D.title}),r.jsxs("div",{className:"text-sm text-gray-500",children:[D.requiredSkills.length," skills required"]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M(D.departmentId)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`text-sm font-medium ${D.currentCount>=D.maxCapacity?"text-green-600":"text-gray-600"}`,children:[D.currentCount,"/",D.maxCapacity]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${D.status==="active"?"bg-green-100 text-green-700":D.status==="inactive"?"bg-gray-100 text-gray-600":"bg-yellow-100 text-yellow-700"}`,children:D.status})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:L=>{L.stopPropagation(),z(D)},className:"text-indigo-600 hover:text-indigo-900 mr-3",children:r.jsx(Vu,{className:"h-4 w-4"})}),r.jsx("button",{onClick:L=>{L.stopPropagation(),confirm(`Delete ${D.title}?`)&&$(D.id)},className:"text-red-600 hover:text-red-900",children:r.jsx(Qu,{className:"h-4 w-4"})})]})]},D.id))})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Details"}),I?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),r.jsx("p",{className:"text-gray-900 font-medium",children:I.title})]}),I.description&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("p",{className:"text-gray-700 text-sm",children:I.description})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),r.jsx("p",{className:"text-gray-700",children:M(I.departmentId)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Min Experience"}),r.jsxs("p",{className:"text-gray-700",children:[I.minExperience," years"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Skills"}),r.jsx("div",{className:"mt-1 space-y-2",children:I.requiredSkills.length===0?r.jsx("p",{className:"text-gray-500 text-sm",children:"No skills defined"}):I.requiredSkills.map((D,L)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[r.jsx("span",{className:"text-sm font-medium",children:D.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${vP[D.level]}`,children:D.level}),r.jsxs("span",{className:"text-xs text-gray-400",children:["(",D.weight,"%)"]})]})]},L))})]}),r.jsxs("div",{className:"pt-4 flex gap-2",children:[r.jsxs("button",{onClick:()=>z(I),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[r.jsx(Vu,{className:"h-4 w-4"}),"Edit"]}),r.jsx("button",{onClick:()=>{confirm(`Delete ${I.title}?`)&&$(I.id)},className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:r.jsx(Qu,{className:"h-4 w-4"})})]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(kv,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Select a position to view details"})]})]})]}),(u||p)&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4 p-6 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:p?`Edit Position: ${p.title}`:"Create Position"}),r.jsx("button",{onClick:()=>{h(!1),m(null),G()},className:"text-gray-400 hover:text-gray-600",children:""})]}),x&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:x}),r.jsxs("form",{onSubmit:B,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:g.title,onChange:D=>j(L=>({...L,title:D.target.value})),placeholder:"e.g., Senior Developer",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Department ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:g.departmentId,onChange:D=>j(L=>({...L,departmentId:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[r.jsx("option",{value:"",children:"Select department..."}),R.map(D=>r.jsx("option",{value:D.id,children:D.name},D.id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Position Level ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{value:g.level,onChange:D=>j(L=>({...L,level:parseInt(D.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[1,2,3,4,5].map(D=>r.jsx("option",{value:D,children:lne[D]},D))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:g.description||"",onChange:D=>j(L=>({...L,description:D.target.value})),placeholder:"Position responsibilities...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Experience (years)"}),r.jsx("input",{type:"number",min:"0",value:g.minExperience||0,onChange:D=>j(L=>({...L,minExperience:parseInt(D.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Capacity"}),r.jsx("input",{type:"number",min:"1",value:g.maxCapacity||1,onChange:D=>j(L=>({...L,maxCapacity:parseInt(D.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:g.status||"active",onChange:D=>j(L=>({...L,status:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"archived",children:"Archived"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Skills"}),g.requiredSkills&&g.requiredSkills.length>0&&r.jsx("div",{className:"space-y-2 mb-3",children:g.requiredSkills.map((D,L)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[r.jsx("span",{className:"text-sm font-medium",children:D.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${vP[D.level]}`,children:D.level}),r.jsxs("span",{className:"text-xs text-gray-400",children:["(",D.weight,"%)"]}),r.jsx("button",{type:"button",onClick:()=>H(L),className:"text-red-500 hover:text-red-700",children:""})]})]},L))}),r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsx("input",{type:"text",value:v.name,onChange:D=>w(L=>({...L,name:D.target.value})),placeholder:"Skill name",className:"col-span-2 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-indigo-500"}),r.jsxs("select",{value:v.level,onChange:D=>w(L=>({...L,level:D.target.value})),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-indigo-500",children:[r.jsx("option",{value:"beginner",children:"Beginner"}),r.jsx("option",{value:"intermediate",children:"Intermediate"}),r.jsx("option",{value:"advanced",children:"Advanced"}),r.jsx("option",{value:"expert",children:"Expert"})]}),r.jsx("button",{type:"button",onClick:U,className:"px-2 py-1 text-sm bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200",children:"Add"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{h(!1),m(null),G()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:O.isPending||N.isPending,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:O.isPending||N.isPending?"Saving...":p?"Update Position":"Create Position"})]})]})]})})]})}const dne={healthy:{color:"bg-green-500",bgColor:"bg-green-100",textColor:"text-green-700",label:"Healthy",icon:""},warning:{color:"bg-yellow-500",bgColor:"bg-yellow-100",textColor:"text-yellow-700",label:"Warning",icon:""},critical:{color:"bg-red-500",bgColor:"bg-red-100",textColor:"text-red-700",label:"Critical",icon:""}};function Pw({status:e,size:t="md"}){const n=dne[e],a={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"};return r.jsxs("span",{className:`
        inline-flex items-center gap-1 rounded-full font-medium
        ${n.bgColor} ${n.textColor} ${a[t]}
      `,children:[r.jsx("span",{className:`${n.color} h-1.5 w-1.5 rounded-full`}),n.label]})}function une(){return At({queryKey:["agents"],queryFn:async()=>se({url:"/api/v1/agents",method:"GET"})})}const hne={active:"bg-green-100 text-green-700",on_leave:"bg-yellow-100 text-yellow-700",suspended:"bg-orange-100 text-orange-700",terminated:"bg-red-100 text-red-700"},bP={permanent:"Permanent",temporary:"Temporary",acting:"Acting"};function fne(){var B;const[e,t]=b.useState(""),[n,a]=b.useState("all"),[s,i]=b.useState("all"),[l,d]=b.useState(null),[u,h]=b.useState(!1),{data:p}=Aw(),{data:m}=une(),{data:g,isLoading:j,refetch:v}=rT({status:n==="all"?void 0:n,search:e||void 0}),w=Ure(),x=Wre(),S=Bre(),[P,O]=b.useState({agentId:"",positionId:"",humanSupervisor:"",assignmentType:"permanent",workload:0,status:"active"}),[N,A]=b.useState(null),C=(g==null?void 0:g.assignments)??[],E=(p==null?void 0:p.positions)??[],T=(m==null?void 0:m.agents)??[],R=C.find(D=>D.id===l),I=()=>{O({agentId:"",positionId:"",humanSupervisor:"",assignmentType:"permanent",workload:0,status:"active"}),A(null)},M=()=>{I(),h(!0)},$=async D=>{if(D.preventDefault(),A(null),!P.agentId){A("Please select an agent");return}if(!P.positionId){A("Please select a position");return}try{await S.mutateAsync(P),h(!1),I(),v()}catch(L){A(L instanceof Error?L.message:"Failed to create assignment")}},G=D=>{var L;return((L=E.find(q=>q.id===D))==null?void 0:L.title)??"Unknown Position"},V=async(D,L)=>{try{await w.mutateAsync({id:D,status:L}),v()}catch(q){console.error("Failed to update status:",q)}},z=async D=>{const L=prompt("Reason for termination (optional):");try{await x.mutateAsync({id:D,reason:L||void 0}),l===D&&d(null),v()}catch(q){console.error("Failed to terminate:",q)}},U=D=>D>=.9?"critical":D>=.8?"warning":"healthy",H=s==="all"?C:C.filter(D=>D.assignmentType===s);return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Assignments"}),r.jsx("p",{className:"text-gray-600",children:"Manage agent-position relationships"})]}),r.jsxs("button",{onClick:M,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[r.jsx(tf,{className:"h-5 w-5"}),"Add Assignment"]})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(hj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search agents...",value:e,onChange:D=>t(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("select",{value:n,onChange:D=>a(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"on_leave",children:"On Leave"}),r.jsx("option",{value:"suspended",children:"Suspended"}),r.jsx("option",{value:"terminated",children:"Terminated"})]}),r.jsxs("select",{value:s,onChange:D=>i(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"permanent",children:"Permanent"}),r.jsx("option",{value:"temporary",children:"Temporary"}),r.jsx("option",{value:"acting",children:"Acting"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Workload"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j?Array.from({length:5}).map((D,L)=>r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-4",children:r.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-full"})})},L)):H.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[r.jsx(Yu,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No assignments found"})]})}):H.map(D=>{var L,q,K;return r.jsxs("tr",{onClick:()=>d(D.id),className:`cursor-pointer hover:bg-gray-50 ${l===D.id?"bg-indigo-50":""}`,children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-600 text-sm font-medium",children:((q=(L=D.agent)==null?void 0:L.name)==null?void 0:q[0])??"A"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:((K=D.agent)==null?void 0:K.name)??D.agentId}),r.jsx("div",{className:"text-xs text-gray-500",children:bP[D.assignmentType]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(D.positionId)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"w-24",children:r.jsx(zc,{workload:D.workload,size:"sm",showPercentage:!0})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${hne[D.status]}`,children:D.status.replace("_"," ")})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:Y=>{Y.stopPropagation(),alert("Reassign modal coming soon")},className:"text-indigo-600 hover:text-indigo-900 mr-3",title:"Reassign",children:r.jsx(Sv,{className:"h-4 w-4"})}),r.jsx("button",{onClick:Y=>{Y.stopPropagation(),confirm("Terminate this assignment?")&&z(D.id)},className:"text-red-600 hover:text-red-900",title:"Terminate",children:r.jsx(Xu,{className:"h-4 w-4"})})]})]},D.id)})})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Details"}),R?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),r.jsx("p",{className:"text-gray-900 font-medium",children:((B=R.agent)==null?void 0:B.name)??R.agentId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),r.jsx("p",{className:"text-gray-700",children:G(R.positionId)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("p",{className:"text-gray-700",children:bP[R.assignmentType]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Workload"}),r.jsx("div",{className:"mt-1",children:r.jsx(zc,{workload:R.workload,showPercentage:!0,showStatus:!0})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Health"}),r.jsx("div",{className:"mt-1",children:r.jsx(Pw,{status:U(R.workload)})})]}),R.performanceScore!==null&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),r.jsxs("p",{className:"text-gray-900 font-medium",children:[R.performanceScore,"/100"]})]}),R.humanSupervisor&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supervisor"}),r.jsx("p",{className:"text-gray-700",children:R.humanSupervisor})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),r.jsx("p",{className:"text-gray-700 text-sm",children:R.startDate?new Date(R.startDate).toLocaleDateString():"Not set"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("div",{className:"mt-1",children:r.jsxs("select",{value:R.status,onChange:D=>V(R.id,D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"on_leave",children:"On Leave"}),r.jsx("option",{value:"suspended",children:"Suspended"})]})})]}),r.jsx("div",{className:"pt-4",children:r.jsxs("button",{onClick:()=>{confirm("Terminate this assignment?")&&z(R.id)},className:"w-full flex items-center justify-center gap-2 px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:[r.jsx(Xu,{className:"h-4 w-4"}),"Terminate Assignment"]})})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Yu,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Select an assignment to view details"})]})]})]}),u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Create Assignment"}),r.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(rf,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:$,className:"p-4 space-y-4",children:[N&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:N}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Agent ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:P.agentId,onChange:D=>O({...P,agentId:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[r.jsx("option",{value:"",children:"Select an agent..."}),T.map(D=>r.jsxs("option",{value:D.id,children:[D.displayName||D.name," (",D.type,")"]},D.id))]}),T.length===0&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No agents available. Create agents first."})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Position ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:P.positionId,onChange:D=>O({...P,positionId:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[r.jsx("option",{value:"",children:"Select a position..."}),E.map(D=>r.jsx("option",{value:D.id,children:D.title},D.id))]}),E.length===0&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No positions available. Create positions first."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignment Type"}),r.jsxs("select",{value:P.assignmentType,onChange:D=>O({...P,assignmentType:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"permanent",children:"Permanent"}),r.jsx("option",{value:"temporary",children:"Temporary"}),r.jsx("option",{value:"acting",children:"Acting"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Human Supervisor (optional)"}),r.jsx("input",{type:"text",value:P.humanSupervisor||"",onChange:D=>O({...P,humanSupervisor:D.target.value}),placeholder:"Enter supervisor name or ID",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Initial Workload: ",Math.round((P.workload||0)*100),"%"]}),r.jsx("input",{type:"range",min:"0",max:"100",value:(P.workload||0)*100,onChange:D=>O({...P,workload:parseInt(D.target.value)/100}),className:"w-full"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[r.jsx("span",{children:"0%"}),r.jsx("span",{children:"50%"}),r.jsx("span",{children:"100%"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date (optional)"}),r.jsx("input",{type:"date",value:P.startDate||"",onChange:D=>O({...P,startDate:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),P.assignmentType!=="permanent"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),r.jsx("input",{type:"date",value:P.endDate||"",onChange:D=>O({...P,endDate:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Status"}),r.jsxs("select",{value:P.status,onChange:D=>O({...P,status:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"on_leave",children:"On Leave"}),r.jsx("option",{value:"suspended",children:"Suspended"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:S.isPending,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S.isPending?"Creating...":"Create Assignment"})]})]})]})})]})}const mne={pending:"bg-yellow-100 text-yellow-700",approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",expired:"bg-gray-100 text-gray-600",escalated:"bg-purple-100 text-purple-700"},pne={pending:"",approved:"",rejected:"",expired:"",escalated:""},jP={1:"Task",2:"Process",3:"Project",4:"Function",5:"Objective"};function xne(){const[e,t]=b.useState("pending"),[n,a]=b.useState("all"),[s,i]=b.useState("all"),[l,d]=b.useState(null),{data:u,isLoading:h,refetch:p}=Hre({status:e==="all"?void 0:e,requestType:n==="all"?void 0:n,level:s==="all"?void 0:parseInt(s)}),m=Gre(),g=Vre(),j=Qre(),v=(u==null?void 0:u.requests)??[],w=v.find(N=>N.id===l),x=async N=>{const A=prompt("Add a note (optional):");try{await m.mutateAsync({id:N,note:A||void 0}),p()}catch(C){console.error("Failed to approve:",C)}},S=async N=>{const A=prompt("Reason for rejection:");if(!A){alert("Rejection reason is required");return}try{await g.mutateAsync({id:N,note:A}),p()}catch(C){console.error("Failed to reject:",C)}},P=async N=>{const A=prompt("Reason for escalation:");try{await j.mutateAsync({id:N,reason:A||void 0}),p()}catch(C){console.error("Failed to escalate:",C)}},O=N=>new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return r.jsxs("div",{children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"AR Approvals"}),r.jsx("p",{className:"text-gray-600",children:"Manage approval requests for agent resources"})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs("select",{value:e,onChange:N=>t(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"escalated",children:"Escalated"}),r.jsx("option",{value:"expired",children:"Expired"})]}),r.jsxs("select",{value:n,onChange:N=>a(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"task",children:"Task"}),r.jsx("option",{value:"budget",children:"Budget"}),r.jsx("option",{value:"assignment",children:"Assignment"}),r.jsx("option",{value:"schedule",children:"Schedule"}),r.jsx("option",{value:"leave",children:"Leave"}),r.jsx("option",{value:"policy",children:"Policy"})]}),r.jsxs("select",{value:s,onChange:N=>i(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"all",children:"All Levels"}),r.jsx("option",{value:"1",children:"Level 1 (Task)"}),r.jsx("option",{value:"2",children:"Level 2 (Process)"}),r.jsx("option",{value:"3",children:"Level 3 (Project)"}),r.jsx("option",{value:"4",children:"Level 4 (Function)"}),r.jsx("option",{value:"5",children:"Level 5 (Objective)"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type / Level"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h?Array.from({length:5}).map((N,A)=>r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-4",children:r.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-full"})})},A)):v.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[r.jsx(Cv,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No approval requests found"})]})}):v.map(N=>r.jsxs("tr",{onClick:()=>d(N.id),className:`cursor-pointer hover:bg-gray-50 ${l===N.id?"bg-indigo-50":""}`,children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"font-medium text-gray-900",children:N.title}),r.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:N.description})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm",children:r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 rounded text-gray-700 text-xs",children:N.requestType})}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Level ",N.level," (",jP[N.level],")"]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full font-medium ${mne[N.status]}`,children:[pne[N.status]," ",N.status]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O(N.expiresAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:N.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:A=>{A.stopPropagation(),x(N.id)},className:"text-green-600 hover:text-green-900 mr-2",title:"Approve",children:r.jsx(Gu,{className:"h-5 w-5"})}),r.jsx("button",{onClick:A=>{A.stopPropagation(),S(N.id)},className:"text-red-600 hover:text-red-900 mr-2",title:"Reject",children:r.jsx(Xu,{className:"h-5 w-5"})}),r.jsx("button",{onClick:A=>{A.stopPropagation(),P(N.id)},className:"text-purple-600 hover:text-purple-900",title:"Escalate",children:r.jsx(sI,{className:"h-5 w-5"})})]})})]},N.id))})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Details"}),w?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),r.jsx("p",{className:"text-gray-900 font-medium",children:w.title})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("p",{className:"text-gray-700 text-sm",children:w.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("p",{className:"text-gray-700 capitalize",children:w.requestType})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),r.jsxs("p",{className:"text-gray-700",children:[w.level," (",jP[w.level],")"]})]})]}),w.impactScope&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Impact Scope"}),r.jsx("p",{className:"text-gray-700 capitalize",children:w.impactScope})]}),w.estimatedValue&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estimated Value"}),r.jsxs("p",{className:"text-gray-700",children:["$",w.estimatedValue.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2 block",children:"Approval Chain"}),r.jsx("div",{className:"space-y-2",children:w.approverChain.map((N,A)=>{const C=w.responses.find(T=>T.level===N.level),E=N.level===w.currentLevel&&w.status==="pending";return r.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${E?"bg-yellow-50 border border-yellow-200":"bg-gray-50"}`,children:[r.jsx("span",{className:"text-lg",children:(C==null?void 0:C.decision)==="approved"?"":(C==null?void 0:C.decision)==="rejected"?"":E?"":""}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-sm font-medium",children:["Level ",N.level]}),r.jsx("p",{className:"text-xs text-gray-500",children:N.roleTitle||N.approverId})]}),C&&r.jsx("span",{className:"text-xs text-gray-400",children:O(C.timestamp)})]},A)})})]}),w.status==="pending"&&r.jsxs("div",{className:"pt-4 flex gap-2",children:[r.jsxs("button",{onClick:()=>x(w.id),disabled:m.isPending,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[r.jsx(Gu,{className:"h-4 w-4"}),"Approve"]}),r.jsxs("button",{onClick:()=>S(w.id),disabled:g.isPending,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:[r.jsx(Xu,{className:"h-4 w-4"}),"Reject"]})]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Cv,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Select a request to view details"})]})]})]})]})}function gne(){var u,h,p,m,g,j,v,w,x,S,P,O;const[e,t]=b.useState(30),{data:n,isLoading:a}=Zre(e),{data:s,isLoading:i}=ene(),{data:l,isLoading:d}=tne();return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"AR Analytics"}),r.jsx("p",{className:"text-gray-600",children:"Performance metrics and insights"})]}),r.jsxs("select",{value:e,onChange:N=>t(parseInt(N.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"7",children:"Last 7 days"}),r.jsx("option",{value:"30",children:"Last 30 days"}),r.jsx("option",{value:"90",children:"Last 90 days"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:a?r.jsxs(r.Fragment,{children:[r.jsx(Qr,{}),r.jsx(Qr,{}),r.jsx(Qr,{}),r.jsx(Qr,{})]}):r.jsxs(r.Fragment,{children:[r.jsx(Va,{title:"Tasks Completed",value:((u=n==null?void 0:n.metrics)==null?void 0:u.completedTasks)??0,icon:r.jsx(Gu,{className:"h-6 w-6"}),color:"green",trend:(h=n==null?void 0:n.trends)!=null&&h.completion&&n.trends.completion>0?"up":"down",change:((p=n==null?void 0:n.trends)==null?void 0:p.completion)??0}),r.jsx(Va,{title:"Avg Performance",value:`${Math.round(((m=n==null?void 0:n.metrics)==null?void 0:m.avgPerformance)??0)}%`,icon:r.jsx(tO,{className:"h-6 w-6"}),color:"blue",trend:(g=n==null?void 0:n.trends)!=null&&g.performance&&n.trends.performance>0?"up":"down",change:((j=n==null?void 0:n.trends)==null?void 0:j.performance)??0}),r.jsx(Va,{title:"Total Cost",value:`$${(((v=n==null?void 0:n.metrics)==null?void 0:v.totalCost)??0).toLocaleString()}`,icon:r.jsx(rO,{className:"h-6 w-6"}),color:"purple",trend:(w=n==null?void 0:n.trends)!=null&&w.cost&&n.trends.cost<0?"up":"down",change:((x=n==null?void 0:n.trends)==null?void 0:x.cost)??0}),r.jsx(Va,{title:"Cost/Task",value:`$${(((S=n==null?void 0:n.metrics)==null?void 0:S.costPerTask)??0).toFixed(2)}`,icon:r.jsx(Yu,{className:"h-6 w-6"}),color:"gray"})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Agent Health Status"}),i?r.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(N=>r.jsxs("div",{className:"animate-pulse flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),r.jsx("div",{className:"h-2 bg-gray-100 rounded w-full"})]})]},N))}):(P=s==null?void 0:s.agents)!=null&&P.length?r.jsx("div",{className:"space-y-4",children:s.agents.map(N=>r.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-600 font-medium",children:N.agentName[0]})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"font-medium text-gray-900",children:N.agentName}),r.jsx(Pw,{status:N.status,size:"sm"})]}),r.jsx(zc,{workload:N.workload,size:"sm",showPercentage:!0})]})]},N.agentId))}):r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No health data available"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Coaching Needs"}),d?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(N=>r.jsxs("div",{className:"animate-pulse bg-gray-100 rounded-lg p-4",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]},N))}):(O=l==null?void 0:l.agents)!=null&&O.length?r.jsx("div",{className:"space-y-3",children:l.agents.map(N=>r.jsxs("div",{className:`p-4 rounded-lg border ${N.priority==="high"?"bg-red-50 border-red-200":N.priority==="medium"?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-gray-900",children:N.agentName}),r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${N.priority==="high"?"bg-red-100 text-red-700":N.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:N.priority})]}),r.jsx("ul",{className:"space-y-1",children:N.needs.map((A,C)=>r.jsxs("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400",children:""}),A]},C))})]},N.agentId))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Gu,{className:"h-12 w-12 text-green-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"All agents performing well"}),r.jsx("p",{className:"text-xs text-gray-400",children:"No coaching needs identified"})]})]})]})]})}function yne(){var v,w;const[e,t]=b.useState(null),{data:n,isLoading:a}=nT(),{data:s,isLoading:i,refetch:l}=Yre(),d=Xre(),u=Jre(),h=async()=>{try{const x=await d.mutateAsync("manual");t(x.proposal.id),l()}catch(x){console.error("Failed to create proposal:",x)}},p=async x=>{try{await u.mutateAsync({proposalId:x}),t(null),l()}catch(S){console.error("Failed to apply proposal:",S)}},m=x=>x>=.9?"critical":x>=.8?"warning":"healthy",g=((v=s==null?void 0:s.proposals)==null?void 0:v.filter(x=>x.status==="pending"))??[],j=g.find(x=>x.id===e);return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Workload Distribution"}),r.jsx("p",{className:"text-gray-600",children:"Monitor and optimize agent workloads"})]}),r.jsxs("button",{onClick:h,disabled:d.isPending,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[r.jsx(Sv,{className:`h-5 w-5 ${d.isPending?"animate-spin":""}`}),"Generate Rebalancing"]})]}),(n==null?void 0:n.stats)&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6 mb-6",children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Math.round(n.stats.avgWorkload*100),"%"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Average Workload"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Math.round(n.stats.stdDeviation*100),"%"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Std Deviation"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-green-600",children:n.stats.balanced}),r.jsx("p",{className:"text-sm text-gray-500",children:"Balanced"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-red-600",children:n.stats.overloaded}),r.jsx("p",{className:"text-sm text-gray-500",children:"Overloaded"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:n.stats.underutilized}),r.jsx("p",{className:"text-sm text-gray-500",children:"Underutilized"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Agent Workloads"}),a?r.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(x=>r.jsxs("div",{className:"animate-pulse flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded w-full"})]})]},x))}):(w=n==null?void 0:n.snapshots)!=null&&w.length?r.jsx("div",{className:"space-y-4",children:n.snapshots.map(x=>r.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${x.status==="overloaded"?"bg-red-50 border-red-200":x.status==="underutilized"?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-600 font-bold",children:x.agentName[0]})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-gray-900",children:x.agentName}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm text-gray-500",children:[x.taskCount," tasks"]}),r.jsx(Pw,{status:m(x.currentWorkload),size:"sm"})]})]}),r.jsx(zc,{workload:x.currentWorkload,showPercentage:!0,showStatus:!0})]})]},x.agentId))}):r.jsx("p",{className:"text-gray-500 text-center py-8",children:"No workload data available"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rebalancing Proposals"}),i?r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-20 bg-gray-100 rounded"}),r.jsx("div",{className:"h-20 bg-gray-100 rounded"})]}):g.length>0?r.jsx("div",{className:"space-y-4",children:g.map(x=>r.jsxs("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${e===x.id?"bg-indigo-50 border-indigo-200":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,onClick:()=>t(x.id),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Proposal #",x.id.slice(0,8)]}),r.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.createdAt).toLocaleDateString()})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[x.proposedChanges.length," changes, ~",Math.round(x.estimatedImprovement),"% improvement"]})]},x.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Sv,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"No pending proposals"}),r.jsx("button",{onClick:h,className:"mt-2 text-indigo-600 hover:text-indigo-800 text-sm",children:"Generate one"})]}),j&&r.jsxs("div",{className:"mt-6 pt-6 border-t",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Proposed Changes"}),r.jsx("div",{className:"space-y-3",children:j.proposedChanges.map(x=>r.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"font-medium",children:x.fromAgentId}),r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{className:"font-medium",children:x.toAgentId})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x.taskIds.length," task(s)"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"From: "}),r.jsxs("span",{className:"text-red-600",children:[Math.round(x.estimatedImpact.fromWorkload.before*100),"%"]}),r.jsx("span",{className:"text-gray-400",children:"  "}),r.jsxs("span",{className:"text-green-600",children:[Math.round(x.estimatedImpact.fromWorkload.after*100),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"To: "}),r.jsxs("span",{children:[Math.round(x.estimatedImpact.toWorkload.before*100),"%"]}),r.jsx("span",{className:"text-gray-400",children:"  "}),r.jsxs("span",{children:[Math.round(x.estimatedImpact.toWorkload.after*100),"%"]})]})]})]},x.id))}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs("button",{onClick:()=>p(j.id),disabled:u.isPending,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[r.jsx(hI,{className:"h-4 w-4"}),"Apply"]}),r.jsx("button",{onClick:()=>t(null),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:r.jsx(rf,{className:"h-4 w-4"})})]})]})]})]})]})}function vne(){const[e,t]=b.useState(!1),{currentOrganization:n,organizations:a,switchOrganization:s}=rs();if(!n||a.length<=1)return null;const i=async l=>{t(!1),await s(l)};return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>t(!e),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.name}),r.jsx("svg",{className:`w-4 h-4 text-gray-600 transition-transform ${e?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>t(!1)}),r.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:r.jsxs("div",{className:"p-2",children:[r.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Switch Organization"}),a.map(l=>r.jsxs("button",{onClick:()=>i(l.id),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${l.id===n.id?"bg-indigo-50 text-indigo-700":"hover:bg-gray-100 text-gray-700"}`,children:[r.jsx("div",{className:"font-medium",children:l.name}),r.jsx("div",{className:"text-xs text-gray-500",children:l.domain})]},l.id))]})})]})]})}function bne({user:e,onLogout:t}){return r.jsx("header",{className:"h-16 bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-50",children:r.jsxs("div",{className:"h-full px-6 flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("h1",{className:"text-2xl font-bold text-indigo-600",children:"Nubabel"})}),r.jsx(vne,{}),e&&r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[e.picture?r.jsx("img",{src:e.picture,alt:e.name,className:"w-8 h-8 rounded-full"}):r.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:(e.name||e.email||"?").charAt(0).toUpperCase()})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name}),r.jsx("span",{className:"text-xs text-gray-500",children:e.email})]})]}),r.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:"Logout"})]})]})})}const jne=[{name:"Dashboard",path:"/dashboard",icon:""},{name:"OKRs",path:"/okr",icon:""},{name:"Workflows",path:"/workflows",icon:""},{name:"Executions",path:"/executions",icon:""},{name:"Activity",path:"/activity",icon:""},{name:"Search",path:"/search",icon:""},{name:"Conversations",path:"/conversations",icon:""},{name:"Settings",path:"/settings",icon:""}],wne=[{name:"Members",path:"/settings/members",icon:""},{name:"Approvals",path:"/approvals",icon:""},{name:"Changes",path:"/org-changes",icon:""}],Nne=[{name:"AR Dashboard",path:"/ar",icon:""},{name:"Departments",path:"/ar/departments",icon:""},{name:"Positions",path:"/ar/positions",icon:""},{name:"Assignments",path:"/ar/assignments",icon:""},{name:"AR Approvals",path:"/ar/approvals",icon:""},{name:"AR Analytics",path:"/ar/analytics",icon:""},{name:"Workload",path:"/ar/workload",icon:""}],Sne=[{name:"Notion Settings",path:"/settings/notion",icon:""},{name:"Slack Settings",path:"/settings/slack",icon:""}],kne=[{name:"Analytics",path:"/analytics",icon:""},{name:"Costs",path:"/costs",icon:""},{name:"Patterns",path:"/patterns",icon:""},{name:"Feedback",path:"/feedback",icon:""},{name:"System Health",path:"/system-health",icon:""}],Cne=[{name:"Knowledge Graph",path:"/knowledge-graph",icon:""},{name:"SOP Drafts",path:"/sops/drafts",icon:""},{name:"SOP Editor",path:"/sops/editor",icon:""}],Ane=[{name:"Marketplace",path:"/marketplace",icon:""},{name:"External Tools",path:"/marketplace-hub",icon:""},{name:"Developer Portal",path:"/developer",icon:""}],Pne=[{name:"Admin Dashboard",path:"/admin",icon:""},{name:"Agents",path:"/admin/agents",icon:""},{name:"Agent Monitor",path:"/admin/agent-monitor",icon:""},{name:"Skills",path:"/admin/skills",icon:""},{name:"Claude Max",path:"/admin/claude-max-accounts",icon:""},{name:"N8n Instances",path:"/admin/n8n-instances",icon:""},{name:"Optimization",path:"/admin/optimization",icon:""},{name:"Organizations",path:"/admin/organizations",icon:""},{name:"Billing",path:"/billing",icon:""}];function One(){const e=ts(),t=n=>n.map(a=>{const i=e.pathname===a.path?"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-indigo-600 text-white":"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-700 hover:bg-gray-200";return r.jsx("li",{children:r.jsxs(ft,{to:a.path,className:i,children:[r.jsx("span",{className:"text-xl",children:a.icon}),r.jsx("span",{className:"font-medium",children:a.name})]})},a.path)});return r.jsx("aside",{className:"w-64 bg-gray-50 fixed left-0 top-16 bottom-0 border-r border-gray-200 overflow-y-auto",children:r.jsx("nav",{className:"p-4",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{children:r.jsx("ul",{className:"space-y-2",children:t(jne)})}),r.jsxs("div",{children:[r.jsx("h3",{className:"px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Organization"}),r.jsx("ul",{className:"space-y-2",children:t(wne)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Agent Resources"}),r.jsx("ul",{className:"space-y-2",children:t(Nne)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Integrations"}),r.jsx("ul",{className:"space-y-2",children:t(Sne)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Analytics"}),r.jsx("ul",{className:"space-y-2",children:t(kne)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Knowledge"}),r.jsx("ul",{className:"space-y-2",children:t(Cne)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Marketplace"}),r.jsx("ul",{className:"space-y-2",children:t(Ane)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Admin"}),r.jsx("ul",{className:"space-y-2",children:t(Pne)})]})]})})})}function Me({children:e}){const{user:t,logout:n}=rs();return r.jsxs("div",{className:"min-h-screen bg-gray-100",children:[r.jsx(bne,{user:t||void 0,onLogout:n}),r.jsx(One,{}),r.jsx("main",{className:"ml-64 mt-16 p-8",children:e})]})}function Te({children:e}){const{user:t,isLoading:n,fetchUser:a}=rs(),s=ts();if(b.useEffect(()=>{a()},[a]),n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!t){const i=encodeURIComponent(s.pathname+s.search);return r.jsx(eO,{to:`/login?returnUrl=${i}`,replace:!0})}return r.jsx(r.Fragment,{children:e})}function Ene(){return r.jsx(QM,{children:r.jsxs(zM,{children:[r.jsx(Oe,{path:"/login",element:r.jsx(eI,{})}),r.jsx(Oe,{path:"/dashboard",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(N7,{})})})}),r.jsx(Oe,{path:"/okr",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(iD,{})})})}),r.jsx(Oe,{path:"/workflows",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(A7,{})})})}),r.jsx(Oe,{path:"/workflows/:id",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(P7,{})})})}),r.jsx(Oe,{path:"/executions",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(O7,{})})})}),r.jsx(Oe,{path:"/executions/:id",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(E7,{})})})}),r.jsx(Oe,{path:"/settings",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(M7,{})})})}),r.jsx(Oe,{path:"/settings/notion",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(I7,{})})})}),r.jsx(Oe,{path:"/settings/slack",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx($7,{})})})}),r.jsx(Oe,{path:"/settings/google-calendar",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(L7,{})})})}),r.jsx(Oe,{path:"/settings/identities",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(H7,{})})})}),r.jsx(Oe,{path:"/settings/members",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(KL,{})})})}),r.jsx(Oe,{path:"/approvals",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(GL,{})})})}),r.jsx(Oe,{path:"/activity",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(rD,{})})})}),r.jsx(Oe,{path:"/metrics/agents",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(nD,{})})})}),r.jsx(Oe,{path:"/org-changes",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(aD,{})})})}),r.jsx(Oe,{path:"/admin/agents",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(dD,{})})})}),r.jsx(Oe,{path:"/admin/skills",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(mD,{})})})}),r.jsx(Oe,{path:"/admin",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(bD,{})})})}),r.jsx(Oe,{path:"/admin/organizations",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(ND,{})})})}),r.jsx(Oe,{path:"/admin/identities",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(SD,{})})})}),r.jsx(Oe,{path:"/admin/optimization",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(nre,{})})})}),r.jsx(Oe,{path:"/admin/claude-max-accounts",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(mre,{})})})}),r.jsx(Oe,{path:"/admin/agent-monitor",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Nre,{})})})}),r.jsx(Oe,{path:"/admin/n8n-instances",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(kre,{})})})}),r.jsx(Oe,{path:"/conversations",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(pD,{})})})}),r.jsx(Oe,{path:"/search",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(vD,{})})})}),r.jsx(Oe,{path:"/analytics",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Nte,{})})})}),r.jsx(Oe,{path:"/costs",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Cte,{})})})}),r.jsx(Oe,{path:"/billing",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Ste,{})})})}),r.jsx(Oe,{path:"/knowledge-graph",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Tte,{})})})}),r.jsx(Oe,{path:"/patterns",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Dte,{})})})}),r.jsx(Oe,{path:"/feedback",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(_te,{})})})}),r.jsx(Oe,{path:"/system-health",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(rre,{})})})}),r.jsx(Oe,{path:"/marketplace",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Rte,{})})})}),r.jsx(Oe,{path:"/marketplace-hub",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Mte,{})})})}),r.jsx(Oe,{path:"/marketplace/:slug",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Ete,{})})})}),r.jsx(Oe,{path:"/developer",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Ote,{})})})}),r.jsx(Oe,{path:"/developer/publisher",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Fte,{})})})}),r.jsx(Oe,{path:"/sops/drafts",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(qte,{})})})}),r.jsx(Oe,{path:"/sops/editor/:id?",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Gte,{})})})}),r.jsx(Oe,{path:"/onboarding",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Ite,{})})})}),r.jsx(Oe,{path:"/org-change-wizard",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(Lte,{})})})}),r.jsx(Oe,{path:"/n8n/workflows",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(wre,{})})})}),r.jsx(Oe,{path:"/claude-connect",element:r.jsx(Te,{children:r.jsx(pre,{})})}),r.jsx(Oe,{path:"/ar",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(ane,{})})})}),r.jsx(Oe,{path:"/ar/departments",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(one,{})})})}),r.jsx(Oe,{path:"/ar/positions",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(cne,{})})})}),r.jsx(Oe,{path:"/ar/assignments",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(fne,{})})})}),r.jsx(Oe,{path:"/ar/approvals",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(xne,{})})})}),r.jsx(Oe,{path:"/ar/analytics",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(gne,{})})})}),r.jsx(Oe,{path:"/ar/workload",element:r.jsx(Te,{children:r.jsx(Me,{children:r.jsx(yne,{})})})}),r.jsx(Oe,{path:"/",element:r.jsx(eO,{to:"/dashboard",replace:!0})})]})})}class _ne extends X.Component{constructor(){super(...arguments);gu(this,"state",{hasError:!1,errorMessage:null})}static getDerivedStateFromError(n){return{hasError:!0,errorMessage:n instanceof Error?n.message:String(n)}}componentDidCatch(n){const a=n instanceof Error?n.message:String(n);console.error("UI error:",a)}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Something went wrong"}),this.state.errorMessage?r.jsx("p",{className:"mt-2 text-sm text-gray-600 break-words",children:this.state.errorMessage}):null,r.jsx("button",{type:"button",className:"mt-4 inline-flex items-center justify-center rounded-md bg-gray-900 px-4 py-2 text-sm font-medium text-white hover:bg-gray-800",onClick:()=>window.location.reload(),children:"Reload"})]})}):this.props.children}}const Tne=new LR;fR.createRoot(document.getElementById("root")).render(r.jsx(X.StrictMode,{children:r.jsx(_ne,{children:r.jsx(DR,{client:Tne,children:r.jsx(Ene,{})})})}));
